/*!
*  filename: ej2-grids.umd.min.js
*  version : 26.2.14
*  Copyright Syncfusion Inc. 2001 - 2023. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-buttons"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-dropdowns"),require("@syncfusion/ej2-calendars"),require("@syncfusion/ej2-navigations"),require("@syncfusion/ej2-excel-export"),require("@syncfusion/ej2-pdf-export")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-data","@syncfusion/ej2-popups","@syncfusion/ej2-buttons","@syncfusion/ej2-inputs","@syncfusion/ej2-dropdowns","@syncfusion/ej2-calendars","@syncfusion/ej2-navigations","@syncfusion/ej2-excel-export","@syncfusion/ej2-pdf-export"],t):t((e=e||self).ej={},e.ej2Base,e.ej2Data,e.ej2Popups,e.ej2Buttons,e.ej2Inputs,e.ej2Dropdowns,e.ej2Calendars,e.ej2Navigations,e.ej2ExcelExport,e.ej2PdfExport)}(this,function(O,P,A,L,B,z,U,q,H,j,R){"use strict";G.prototype.getFormatFunction=function(e){return P.isNullOrUndefined(e)||"dateTime"!==e.type&&"datetime"!==e.type&&"date"!==e.type&&"time"!==e.type?this.intl.getNumberFormat(e):this.intl.getDateFormat(e)},G.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},G.prototype.fromView=function(e,t,i){return"date"!==i&&"datetime"!==i&&"number"!==i||P.isNullOrUndefined(t)?e:t(e)},G.prototype.toView=function(e,t){var i=e;return i=P.isNullOrUndefined(t)||P.isNullOrUndefined(e)?i:t(e)},G.prototype.setCulture=function(e){P.isNullOrUndefined(e)||P.setCulture(e)};var V=G;function G(e){this.intl=new P.Internationalization,P.isNullOrUndefined(e)||(this.intl.culture=e)}_=function(e,t){return(_=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var _,W=function(e,t){function i(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},K=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(o=(s<3?r(o):3<s?r(t,i,o):r(t,i))||o);return 3<s&&o&&Object.defineProperty(t,i,o),o},Q=(X.prototype.getSortDirection=function(){return this.sortDirection},X.prototype.setSortDirection=function(e){this.sortDirection=e},X.prototype.getFreezeTableName=function(){return this.freezeTable},X.prototype.setProperties=function(n){for(var r=Object.keys(n),e=function(e){if("columns"===r[parseInt(e.toString(),10)])for(var i=n[r[parseInt(e.toString(),10)]],t=0;t<i.length;t++)!function(t){s.columns.find(function(e){return e.field===i[parseInt(t.toString(),10)].field}).setProperties(i[parseInt(t.toString(),10)])}(t);else s[r[parseInt(e.toString(),10)]]=n[r[parseInt(e.toString(),10)]];s.parent&&s.parent.isReact&&("template"===r[parseInt(e.toString(),10)]?(s.templateFn=_l(n[r[parseInt(e.toString(),10)]]),s.parent.refreshReactColumnTemplateByUid(s.uid,!0)):"headerTemplate"===r[parseInt(e.toString(),10)]?(s.headerTemplateFn=_l(n[r[parseInt(e.toString(),10)]]),s.parent.refreshReactHeaderTemplateByUid(s.uid)):"editTemplate"===r[parseInt(e.toString(),10)]&&(s.editTemplateFn=_l(n[r[parseInt(e.toString(),10)]])))},s=this,t=0;t<r.length;t++)e(t)},X.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},X.prototype.getFormatter=function(){return this.formatFn},X.prototype.setFormatter=function(e){this.formatFn=e},X.prototype.getParser=function(){return this.parserFn},X.prototype.setParser=function(e){this.parserFn=e},X.prototype.getColumnTemplate=function(){return this.templateFn},X.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},X.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},X.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},X);function X(e,t){var s,o=this,t=(this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return o.editTemplateFn},this.getFilterTemplate=function(){return o.filterTemplateFn},P.merge(this,e),this.parent=t,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),P.isNullOrUndefined(this.uid)&&(this.uid=rh("grid-column")),new V);e.format&&(e.format.skeleton||e.format.format&&"string"==typeof e.format.format)&&(this.setFormatter(t.getFormatFunction(P.extend({},e.format))),this.setParser(t.getParserFunction(e.format))),this.toJSON=function(){for(var e={},t=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],i=Object.keys(o),n=0;n<i.length;n++)if("columns"===i[parseInt(n.toString(),10)]){e[i[parseInt(n.toString(),10)]]=[];for(var r=0;r<o[i[parseInt(n.toString(),10)]].length;r++)e[i[parseInt(n.toString(),10)]].push(o[i[parseInt(n.toString(),10)]][parseInt(r.toString(),10)].toJSON())}else t.indexOf(i[parseInt(n.toString(),10)])<0&&(e[i[parseInt(n.toString(),10)]]=o[i[parseInt(n.toString(),10)]]);return e},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(e){return e.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=_l(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=_l(this.headerTemplate)),!P.isNullOrUndefined(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=_l(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=_l(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=_l(this.filterTemplate)),this.isForeignColumn()&&(P.isNullOrUndefined(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=P.extend({dataSource:this.dataSource,query:new A.Query,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer&&(s=this.sortComparer,this.sortComparer=function(e,t,i,n){var r;return"string"==typeof s&&(s=Lh(s,window)),"Descending"===o.sortDirection&&(r=e,e=t,t=r,r=i,i=n,n=r),s(e,t,i,n)}),!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(e,t){return e=Lh(o.foreignKeyValue,Oh(o,{},e)[0]),t=Lh(o.foreignKeyValue,Oh(o,{},t)[0]),"Descending"===o.sortDirection?A.DataUtil.fnDescending(e,t):A.DataUtil.fnAscending(e,t)})}K([P.Property()],J.prototype,"title",void 0),K([P.Property()],J.prototype,"type",void 0),K([P.Property()],J.prototype,"buttonOption",void 0);var Y=J;function J(){}W($,Z=Q),K([P.Property(null)],$.prototype,"columns",void 0);var Z,K=$;function $(){return null!==Z&&Z.apply(this,arguments)||this}W(te,ee=K);var ee,W=te;function te(){return null!==ee&&ee.apply(this,arguments)||this}var ie="load",ne="rowDataBound",re="queryCellInfo",se="headerCellInfo",y="actionBegin",p="actionComplete",oe="actionFailure",ae="dataBound",le="rowSelecting",he="rowSelected",pe="rowDeselecting",de="rowDeselected",ce="cellSelecting",ue="cellSelected",ge="cellDeselecting",fe="cellDeselected",me="columnSelecting",ye="columnSelected",Se="columnDeselecting",ve="columnDeselected",Ce="columnDragStart",we="columnDrag",be="columnDrop",Ie="rowDragStartHelper",xe="rowDragStart",Re="rowDrag",Ee="rowDrop",De="beforePrint",Te="printComplete",Oe="detailDataBound",Ae="toolbarClick",Fe="batchAdd",ke="batchCancel",Me="batchDelete",Le="beforeBatchAdd",Pe="beforeBatchDelete",Ne="beforeBatchSave",Be="beginEdit",ze="cellEdit",Ue="cellSave",qe="cellSaved",He="recordDoubleClick",je="recordClick",Ve="beforeDataBound",Ge="beforeOpenColumnChooser",_e="beforeOpenAdaptiveDialog",We="resizeStart",Ke="resizing",Qe="resizeStop",Xe="checkBoxChange",Ye="beforeCopy",Je="beforePaste",Ze="beforeAutoFill",$e="filterchoicerequest",et="filterAfterOpen",tt="filterBeforeOpen",it="filterSearchBegin",nt="commandClick",rt="exportGroupCaption",st="lazyLoadGroupExpand",ot="lazyLoadGroupCollapse",at="initial-load",lt="initial-end",ht="data-ready",pt="content-ready",g="ui-update",dt="on-empty",ct="inbound-model-changed",ut="model-changed",gt="colgroup-refresh",ft="header-refreshed",mt="paging-complete",yt="sorting-complete",St="filtering-complete",vt="searching-complete",Ct="reorder-complete",wt="rowdraganddrop-complete",bt="grouping-complete",It="ungrouping-complete",xt="group-aggregates",Rt="refresh-footer-rendered",Et="refresh-aggregate-cell",Dt="refresh-aggregates",Tt="rowselected",Ot="cellselected",At="destroy-autofill-elements",Ft="beforecellfocused",kt="cellfocused",Mt="key-pressed",Lt="click",r="destroy",Pt="column-visible-changed",Nt="scroll",Bt="column-width-changed",zt="column-position-changed",Ut="rows-added",qt="rows-removed",Ht="column-drag-stop",jt="header-drop",Vt="datasource-modified",Gt="refresh-complete",_t="refresh-virtual-block",Wt="dblclick",Kt="toolbar-refresh",Qt="bulk-save",Xt="auto-col",Yt="tooltip-destroy",Jt="update-data",Zt="save-complete",$t="delete-complete",ei="prevent-batch",ti="dialog-destroy",ii="crud-Action",ni="add-delete-Action",ri="destroy-form",si="double-tap",oi="beforeExcelExport",ai="excelExportComplete",li="excelQueryCellInfo",hi="excelHeaderQueryCellInfo",pi="exportDetailDataBound",di="exportDetailTemplate",ci="beforePdfExport",ui="pdfExportComplete",gi="pdfQueryCellInfo",fi="pdfHeaderQueryCellInfo",mi="contextMenuClick",yi="freezerender",Si="contextMenuOpen",vi="columnMenuClick",Ci="columnMenuOpen",wi="filterOpen",bi="filterDialogCreated",Ii="filter-menu-close",xi="initForeignKeyColumn",Ri="getForeignKeyData",Ei="generateQuery",Di="showEmptyGrid",Ti="foreignKeyData",Oi="columnDataStateChange",Ai="dataStateChange",Fi="dataSourceChanged",ki="rtl-updated",Mi="beforeFragAppend",Li="textWrapRefresh",Pi="recordAdded",Ni="cancel-Begin",Bi="editNextValCell",zi="hierarchyprint",Ui="expandchildgrid",qi="printGrid-Init",Hi="export-RowDataBound",ji="export-DataBound",Vi="row-position-changed",Gi="columnChooserOpened",_i="batchedit-form",Wi="edit-form",Ki="before-batch-cancel",Qi="batcheditform-rendered",Xi="partial-refresh",Yi="beforeCustomFilterOpen",Ji="select-virtual-Row",Zi="columns-prepared",$i="cbox-filter-begin",en="cbox-filter-complete",tn="filter-Prevent",nn="before-filter-cmenu-open",rn="validation-custom-placement",sn="filter-cbox-value",on="restore-Focus",an="detail-state-change",ln="detail-indentcell-info",hn="virtaul-cell-focus",pn="virtual-scroll-edit-action-begin",dn="virtual-scroll-edit-success",cn="virtual-scroll-edit-cancel",un="virtual-scroll-edit",gn="refresh-virtual-cache",fn="edit-reset",mn="virtual-scroll-add-action-begin",yn="get-virtual-data",Sn="refresh-infinite-mode-blocks",vn="reset-infinite-blocks",Cn="infinite-scroll-handler",wn="infinite-page-query",bn="infinite-show-hide",In="append-infinite-content",xn="remove-infinite-rows",Rn="set-infinite-cache",En="infinite-edit-handler",Dn="initial-collapse",Tn="close-filter-dialog",On="columnChooserCancelBtnClick",An="get-filterbar-operator",Fn="reset-columns",kn="pdfAggregateQueryCellInfo",Mn="excelAggregateQueryCellInfo",Ln="group-cache",Pn="lazy-load-scroll-handler",Nn="group-collapse",Bn="beforeCheckboxRenderer",zn="refreshResizeHandlers",Un="refresh-frozen-columns",qn="set-reorder-destination-element",Hn="refresh-virtual-frozen-height",jn="set-freeze-selection",Vn="before-refresh-on-data-change",Gn="immutable-batch-cancel",_n="refresh-virtual-frozenrows",Wn="check-scroll-reset",Kn="prevent-frozen-scroll-refresh",Qn="next-cell-index",Xn="refresh-infinite-current-view-data",Yn="infinite-crud-cancel",Jn="filter-dialog-close",Zn="refresh-cutsom-filter-ok-button",$n="refresh-cutsom-filter-clear-button",er="render-responsive-cmenu",tr="filter-cmenu-select",ir="custom-filter-close",nr="set-fullscreen-dialog",rr="refresh-Expand-and-Collapse",sr="row-mode-change",or="enter-key-handler",ar="refresh-virtual-max-page",lr="set-virtual-page-query",hr="select-row-on-context-open",pr="pager-refresh",dr="closeinline",cr="close-edit",ur="reset-virtual-focus",gr="refresh-virtual-editform-cells",fr="scroll-to-edit",mr="before-checkbox-renderer-query",yr="create-virtual-validation-form",Sr="validate-virtual-form",vr="destroy-child-grid",Cr="sticky-scroll-complete",wr="infinite-group-collapse",br="refresh-infinite-persist-selection",Ir="refresh-infinite-editrowindex",xr="after-filter-column-menu-close",Rr="beforeCheckboxfilterRenderer",Er="commandColumnDestroy",Dr="cancelcnfrmDlg",Tr="refresh-Virtual-LazyLoad-Cache",Or="refresh-Frozen-Position",Ar="refresh-Resize-Position",Fr="refresh-Split-Frozen-Column",kr="render-Responsive-Change-Action",Mr="render-Responsive-Column-Chooser-Div",Lr="show-Add-New-Row-Focus",Pr="infinitescroll-complete",Nr=((e=O.CellType||(O.CellType={}))[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn",e[e.DetailFooterIntent=15]="DetailFooterIntent",e[e.RowDragIcon=16]="RowDragIcon",e[e.RowDragHIcon=17]="RowDragHIcon",(e=O.RenderType||(O.RenderType={}))[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary",(e=O.ToolbarItem||(O.ToolbarItem={}))[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e[e.Cancel=4]="Cancel",e[e.Print=5]="Print",e[e.Search=6]="Search",e[e.ColumnChooser=7]="ColumnChooser",e[e.PdfExport=8]="PdfExport",e[e.ExcelExport=9]="ExcelExport",e[e.CsvExport=10]="CsvExport",e[e.WordExport=11]="WordExport",(e=O.ResponsiveDialogAction||(O.ResponsiveDialogAction={}))[e.isEdit=0]="isEdit",e[e.isAdd=1]="isAdd",e[e.isSort=2]="isSort",e[e.isFilter=3]="isFilter",e[e.isColMenu=4]="isColMenu",e[e.isColumnChooser=5]="isColumnChooser",(e=O.ResponsiveToolbarAction||(O.ResponsiveToolbarAction={}))[e.isInitial=0]="isInitial",e[e.isSearch=1]="isSearch",Br.prototype.reorderRows=function(e){this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords().splice(e.toIndex,0,this.parent.getCurrentViewRecords().splice(e.fromIndex,1)[0]):this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},Br.prototype.getModuleName=function(){return"data"},Br.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof A.DataManager?e.dataSource:P.isNullOrUndefined(e.dataSource)?new A.DataManager:new A.DataManager(e.dataSource),!e.isAngular||e.query instanceof A.Query?(this.isQueryInvokedFromData=!0,e.query instanceof A.Query||(e.query=new A.Query)):e.setProperties({query:new A.Query},!0)},Br.prototype.generateQuery=function(e,t){var i=this.parent,i=P.isNullOrUndefined(i.getQuery())?new A.Query:i.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)i.select(this.parent.getColumns().filter(function(e){return!(!0!==e.isPrimaryKey&&!1===e.visible||void 0===e.field)}).map(function(e){return e.field}));else if("Schema"===this.parent.columnQueryMode){for(var n=[],r=this.parent.columns,s=0;s<r.length;s++)n.push(r[parseInt(s.toString(),10)].field);i.select(n)}return this.filterQuery(i),this.searchQuery(i),this.aggregateQuery(i),this.sortQuery(i),Mh(this.parent)?this.virtualGroupPageQuery(i):this.pageQuery(i,e),!P.isNullOrUndefined(t)&&t||this.groupQuery(i),i},Br.prototype.aggregateQuery=function(e){for(var t=this.parent.aggregates,i=0;i<t.length;i++)for(var n=t[parseInt(i.toString(),10)],r=0;r<n.columns.length;r++)for(var s=n.columns[parseInt(r.toString(),10)],o=s.type instanceof Array?s.type:[s.type],a=0;a<o.length;a++)e.aggregate(o[parseInt(a.toString(),10)].toLowerCase(),s.field);return e},Br.prototype.virtualGroupPageQuery=function(e){if(e.queries.length)for(var t=0;t<e.queries.length;t++)"onPage"===e.queries[parseInt(t.toString(),10)].fn&&e.queries.splice(t,1);return e},Br.prototype.pageQuery=function(e,t){var i=this.parent,n={query:e,skipPage:!1};if(i.notify(lr,n),!n.skipPage&&(i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==t){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(var r=0;r<e.queries.length;r++)"onPage"===e.queries[parseInt(r.toString(),10)].fn&&e.queries.splice(r,1);!P.isNullOrUndefined(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify(wn,e):e.page(i.pageSettings.currentPage,!(i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage)||i.isManualRefresh||this.dataManager.dataSource.offline||this.dataManager.adaptor instanceof A.RemoteSaveAdaptor?i.pageSettings.pageSize:null)}return e},Br.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=t.groupSettings.columns,n=0,r=i.length;n<r;n++){var s=this.getColumnByField(i[parseInt(n.toString(),10)]),o=(s||this.parent.log("initial_action",{moduleName:"group",columnName:i[parseInt(n.toString(),10)]}),s.enableGroupByFormat),s=s.format;o?e.group(i[parseInt(n.toString(),10)],this.formatGroupColumn.bind(this),s):e.group(i[parseInt(n.toString(),10)],null)}}return e},Br.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var i=t.sortSettings.columns,n=[],r=i.length-1;-1<r;r--){if(!(o=this.getColumnByField(i[parseInt(r.toString(),10)].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:i[parseInt(r.toString(),10)].field}),e;o.setSortDirection(i[parseInt(r.toString(),10)].direction);var s=i[parseInt(r.toString(),10)].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),s=this.isRemote()?i[parseInt(r.toString(),10)].direction:o.sortComparer.bind(o)),-1===t.groupSettings.columns.indexOf(i[parseInt(r.toString(),10)].field)?o.isForeignColumn()||o.sortComparer?e.sortByForeignKey(o.field,s,void 0,i[parseInt(r.toString(),10)].direction.toLowerCase()):e.sortBy(o.field,s):n.push({direction:s,field:o.field})}for(var o,r=0,a=n.length;r<a;r++)"string"==typeof n[parseInt(r.toString(),10)].direction?e.sortBy(n[parseInt(r.toString(),10)].field,n[parseInt(r.toString(),10)].direction):(o=this.getColumnByField(n[parseInt(r.toString(),10)].field),e.sortByForeignKey(n[parseInt(r.toString(),10)].field,n[parseInt(r.toString(),10)].direction,void 0,o.getSortDirection().toLowerCase()))}return e},Br.prototype.searchQuery=function(e,t,i){var n=this.parent.searchSettings,r=!P.isNullOrUndefined(n.fields)&&n.fields.length?n.fields:this.getSearchColumnFieldNames(),s=[];if(!P.isNullOrUndefined(this.parent.searchSettings.key)&&this.parent.searchSettings.key.length){var o=this.parent.getForeignKeyColumns().some(function(e){return-1<r.indexOf(e.field)}),a=(i?t.dataSource:this.dataManager).adaptor;if(o||a.getModuleName&&"ODataV4Adaptor"===a.getModuleName()){for(var r=i?[t.foreignKeyValue]:r,l=0;l<r.length;l++){var h=i?t:this.getColumnByField(r[parseInt(l.toString(),10)]);h.isForeignColumn()&&!i?s=this.fGeneratePredicate(h,s):s.push(new A.Predicate(r[parseInt(l.toString(),10)],n.operator,n.key,n.ignoreCase,n.ignoreAccent))}o=A.Predicate.or(s);o.key=n.key,e.where(o)}else e.search(n.key,r,n.operator,n.ignoreCase,n.ignoreAccent)}return e},Br.prototype.filterQuery=function(e,t,i){var n,r=this.parent,s=[],o=this.parent.getForeignKeyColumns();if(r.allowFiltering&&r.filterSettings.columns.length){for(var a=t||r.filterSettings.columns,l=0,h=r.getColumns();l<h.length;l++)(I=h[l]).field,I.filter.type||r.filterSettings.type;for(var p=[],d=[],c=0,u=a;c<u.length;c++){var g=(I=u[c]).isForeignKey?r.getColumnByUid(I.uid):r.getColumnByField(I.field);P.isNullOrUndefined(I.type)&&g&&("date"===g.type||"datetime"===g.type||"dateonly"===g.type)&&(I.type=(I.isForeignKey?r.getColumnByUid(I.uid):r.getColumnByField(I.field)).type),(I.isForeignKey?p:d).push(I)}if(d.length){for(var f=0,m=d.length;f<m;f++)d[parseInt(f.toString(),10)].uid=d[parseInt(f.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(d[parseInt(f.toString(),10)].field,d[parseInt(f.toString(),10)].isForeignKey).uid;for(var y=Bp.getPredicate(d),S=0,v=Object.keys(y);S<v.length;S++){var C=v[S];s.push(y[""+C])}}if(p.length)for(var w=0,b=p;w<b.length;w++){(I=b[w]).uid=I.uid||this.parent.grabColumnByFieldFromAllCols(I.field,I.isForeignKey).uid;var I,x=this.parent.grabColumnByUidFromAllCols(I.uid);if(x||this.parent.log("initial_action",{moduleName:"filter",columnName:I.field}),x.isForeignColumn()&&Ah(I.field,o)&&!i)x.columnData.length||(n=!0),s=this.fGeneratePredicate(x,s);else for(var y=Bp.getPredicate(a),R=0,E=Object.keys(y);R<E.length;R++){C=E[R];s.push(y[""+C])}}s.length&&!n?e.where(A.Predicate.and(s)):this.parent.notify(Di,{})}return e},Br.prototype.fGeneratePredicate=function(e,t){var i={};return e&&(this.parent.notify(Ei,{predicate:i,column:e}),i.predicate.predicates.length)&&t.push(i.predicate),t},Br.prototype.getData=function(e,t){var i=this,n=(void 0===e&&(e={requestType:""}),this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames()));if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,n).promise;var r=void 0;switch(e.requestType){case"delete":t=t||this.generateQuery();var s,r=1===Object.keys(e.data).length?this.dataManager.remove(n,e.data[0],t.fromTable,t):((s={addedRecords:[],deletedRecords:[],changedRecords:[]}).deletedRecords=e.data,this.dataManager.saveChanges(s,n,t.fromTable,t.requiresCount()));break;case"save":t=t||this.generateQuery(),e.index=P.isNullOrUndefined(e.index)?0:e.index,r=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return!(e.promise=r)||Array.isArray(r)||r.hasOwnProperty("deletedRecords")?this.insert(t,e):r.then(function(){return i.insert(t,e)})},Br.prototype.insert=function(e,t){return"save"===t.requestType&&this.parent.notify(Pi,t),this.executeQuery(e)},Br.prototype.executeQuery=function(e){var t,i=this;return this.dataManager.ready?(t=new A.Deferred,this.dataManager.ready.then(function(){i.dataManager.executeQuery(e).then(function(e){t.resolve(e)})}).catch(function(e){t.reject(e)}),t.promise):this.dataManager.executeQuery(e)},Br.prototype.formatGroupColumn=function(e,t){var i=this.serviceLocator,t=this.getColumnByField(t),n=e;return t.type||(t.type=n.getDay?0<n.getHours()||0<n.getMinutes()||0<n.getSeconds()||0<n.getMilliseconds()?"datetime":"date":typeof e),P.isNullOrUndefined(t.getFormatter())&&vh(i,t),V.prototype.toView(e,t.getFormatter())},Br.prototype.crudActions=function(e){var t=this.generateQuery(),i=null,n="promise",r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,r),"save"===e.requestType&&(i=this.dataManager.update(r,e.data,t.fromTable,t,e.previousData)),e[n]=i||e[n],this.parent.notify(ii,e)},Br.prototype.saveChanges=function(e,t,i,n){var r,s;return(n=void 0===n?this.generateQuery():n).requiresCount(),"result"in this.parent.dataSource?(s={requestType:"batchsave",changes:e,key:t,query:n,endEdit:(r=new A.Deferred).resolve},this.setState({isPending:!0,resolver:r.resolve}),this.parent.trigger(Fi,s),r.promise):this.dataManager.saveChanges(e,t,n.fromTable,n,i)},Br.prototype.getKey=function(e){if(e&&e.length)return e[0]},Br.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},Br.prototype.addRows=function(e){for(var t=e.records.length;0<t;t--)this.parent.dataSource instanceof A.DataManager&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1]):this.parent.getDataModule().isRemote()||P.isNullOrUndefined(this.parent.dataSource)||this.parent.dataSource.result||this.parent.dataSource.splice(e.toIndex,0,e.records[t-1])},Br.prototype.removeRows=function(t){var e=this.dataManager.dataSource.json;this.parent.dataSource instanceof A.DataManager&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=e.filter(function(e){return-1===t.records.indexOf(e)}):this.parent.getDataModule().isRemote()||P.isNullOrUndefined(this.parent.dataSource)||this.parent.dataSource.result||(this.parent.dataSource=e.filter(function(e){return-1===t.records.indexOf(e)}))},Br.prototype.getColumnByField=function(t){var i;return this.parent.columnModel.some(function(e){return(i=e).field===t})&&i},Br.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Ut,this.addRows),this.parent.off(qt,this.removeRows),this.parent.off(Vt,this.initDataManager),this.parent.off(r,this.destroy),this.parent.off(Jt,this.crudActions),this.parent.off(ni,this.getData),this.parent.off(Xt,this.refreshFilteredCols),this.parent.off(Zi,this.refreshFilteredCols))},Br.prototype.getState=function(){return this.dataState},Br.prototype.setState=function(e){return this.dataState=e},Br.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},Br.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},Br.prototype.getStateEventArgument=function(e){var t=new A.UrlAdaptor,i=new A.DataManager({url:"",adaptor:new A.UrlAdaptor}),t=t.processQuery(i,e),i=JSON.parse(t.data);return P.extend(i,t.pvtData)},Br.prototype.eventPromise=function(e,t,i){var n,r=this,s=e,o=this.getStateEventArgument(t),a=new A.Deferred,l=new A.Deferred;return(void 0!==e.requestType||this.parent.groupSettings.disablePageWiseAggregates&&t.queries.some(function(e){return"onGroup"===e.fn}))&&!1!==this.dataState.isDataChanged?"save"===(o.action=e).requestType||"delete"===e.requestType?((n=e).key=i,n.promise=l.promise,n.state=o,this.setState({isPending:!0,resolver:l.resolve}),s.endEdit=l.resolve,s.cancelEdit=l.reject,this.parent.trigger(Fi,n),l.promise.then(function(){r.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),"save"===n.requestType&&r.parent.notify(Pi,n),r.parent.trigger(Ai,o)}).catch(function(){})):(this.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),this.parent.trigger(Ai,o)):(this.setState({}),a.resolve(this.parent.dataSource)),a},Br.prototype.getSearchColumnFieldNames=function(){for(var e=[],t=0,i=this.parent.getColumns();t<i.length;t++){var n=i[t];n.allowSearching&&!P.isNullOrUndefined(n.field)&&e.push(n.field)}return e},Br.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&jh(this.parent,this.parent.filterSettings.columns)},Br);function Br(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on(Ut,this.addRows,this),this.parent.on(Vi,this.reorderRows,this),this.parent.on(qt,this.removeRows,this),this.parent.on(Vt,this.initDataManager,this),this.parent.on(r,this.destroy,this),this.parent.on(Jt,this.crudActions,this),this.parent.on(ni,this.getData,this),this.parent.on(Xt,this.refreshFilteredCols,this),this.parent.on(Zi,this.refreshFilteredCols,this))}Ur.prototype.clone=function(){var e=new Ur({});return P.merge(e,this),e.cells=this.cells.map(function(e){return e.clone()}),e},Ur.prototype.setRowValue=function(e){var t;this.parent&&(t=this.data[this.parent.getPrimaryKeyFieldNames()[0]],this.parent.setRowData(t,e))},Ur.prototype.setCellValue=function(e,t){var i,n;this.parent&&this.data[""+e].toString()!==t.toString()&&(i=this.parent.getPrimaryKeyFieldNames()[0],n=this.data[""+i],this.parent.setCellValue(n,e,t),this.makechanges(i,this.data))},Ur.prototype.makechanges=function(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)};var zr=Ur;function Ur(e,t){P.merge(this,e),this.parent=t}Hr.prototype.clone=function(){var e=new Hr({});return P.merge(e,this),e};var qr=Hr;function Hr(e){this.isSpanned=!1,this.isRowSpanned=!1,P.merge(this,e)}Vr.prototype.render=function(e,t,i,n){for(var r,s,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(t.cells[parseInt(i.toString(),10)].cellType||O.CellType.Data),a=t.cells[parseInt(i.toString(),10)].cellSpan?t.cells[parseInt(i.toString(),10)].cellSpan:e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i,l=e.rowSpan,h=0,p=(0<t.index&&(s=this.parent.getRowsObject(),s=(0<this.parent.groupSettings.columns.length&&!s[t.index-1].isDataRow?s[t.index]:s[t.index-1]).cells,r=t.cells[parseInt(i.toString(),10)],s=s.filter(function(e){return e.column.uid===r.column.uid})[0]),s&&1<s.colSpanRange&&1<s.rowSpanRange?s.colSpanRange:a),d=i+1;d<i+p&&d<t.cells.length;d++)!1===t.cells[parseInt(d.toString(),10)].visible?h++:t.cells[parseInt(d.toString(),10)].isSpanned=!0;if(0<h){for(d=i+a;d<i+a+h&&d<t.cells.length;d++)t.cells[parseInt(d.toString(),10)].isSpanned=!0;i+a+h>=t.cells.length&&(a-=i+a+h-t.cells.length)}return t.cells[parseInt(i.toString(),10)].cellSpan&&(t.data[e.column.field]=t.cells[parseInt(i.toString(),10)].spanText,n=o.render(t.cells[parseInt(i.toString(),10)],t.data,{index:P.isNullOrUndefined(t.index)?"":t.index.toString()})),1<a&&P.attributes(n,{colSpan:a.toString(),"aria-colSpan":a.toString()}),1<l&&(P.attributes(n,{rowspan:l.toString(),"aria-rowspan":l.toString()}),t.cells[parseInt(i.toString(),10)].isRowSpanned=!0,t.cells[parseInt(i.toString(),10)].rowSpanRange=Number(l),1<a)&&(t.cells[parseInt(i.toString(),10)].colSpanRange=Number(a)),0<t.index&&1<s.rowSpanRange&&(t.cells[parseInt(i.toString(),10)].isSpanned=!0,t.cells[parseInt(i.toString(),10)].rowSpanRange=Number(s.rowSpanRange-1),t.cells[parseInt(i.toString(),10)].colSpanRange=0<s.rowSpanRange?s.colSpanRange:1),!this.parent.enableColumnVirtualization||t.cells[parseInt(i.toString(),10)].cellSpan||this.containsKey(e.column.field,e.data[e.column.field])||this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),n},Vr.prototype.backupMergeCells=function(e,t,i){this.setMergeCells(this.generteKey(e,t),i)},Vr.prototype.generteKey=function(e,t){return e+"__"+t.toString()},Vr.prototype.splitKey=function(e){return e.split("__")},Vr.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},Vr.prototype.getMergeCells=function(){return this.parent.mergeCells},Vr.prototype.setMergeCells=function(e,t){this.parent.mergeCells[""+e]=t},Vr.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),i=0,n=Object.keys(t);i<n.length;i++){var r=n[i],s=t[""+r],o=this.splitKey(r),r=this.getIndexFromAllColumns(o[0]),a=this.parent.getColumnIndexesInView(),l=s-(a[0]-r);if(r<a[0]&&1<l)for(var h=0,p=e;h<p.length;h++){var d=p[h];if(d.data[o[0]].toString()===o[1].toString()){d.cells[0].cellSpan=l,d.cells[0].spanText=o[1];break}}}return e},Vr.prototype.getIndexFromAllColumns=function(i){return Vl(this.parent.getVisibleColumns(),function(e,t){if(e.field===i)return t})[0]};var jr=Vr;function Vr(e,t){this.serviceLocator=e,this.parent=t}var b="e-rowcell",Gr="e-gridheader",_r="e-gridcontent",Wr="e-gridfooter",Kr="e-headercontent",Qr="e-movablecontent",Xr="e-movableheader",Yr="e-frozencontent",Jr="e-frozenheader",Zr="e-content",$r="e-table",I="e-row",es="e-gridchkbox",ts="e-editedrow",is="e-addedrow",ns="e-groupcaptionrow",rs="changedRecords",ss="addedRecords",os="deletedRecords",as="Left-Right",ls="frozen-right",hs="frozen-left",ps="data-colindex",ds="aria-colindex",x="data-rowindex",cs="aria-rowindex",N="tbody",us="colgroup",gs="open",fs="change",ms="focus",ys="created",Ss="beforeOpen",vs="downArrow",Cs="upArrow",ws="PageDown",bs="enter",Is="shiftEnter",xs="initialFrozenColumnIndex",Rs=(Es.prototype.render=function(e,t,i,n,r){return this.refreshRow(e,t,i,n,r)},Es.prototype.refresh=function(e,t,i,n,r){var s=this,o=(i&&(e.data=zh({},e.changes),this.refreshMergeCells(e)),this.parent.element.querySelector("[data-uid="+e.uid+"]")),e=this.refreshRow(e,t,n,r,null,i),n=[].slice.call(e.cells),r=[].slice.call(o.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&r.length)for(var a=0,l=t;a<l.length;a++)if("break"===function(e){if(e.template)return setTimeout(function(){s.parent.refreshReactColumnTemplateByUid(e.uid,!0)},0),"break"}(l[a]))break;[].slice.call(e.attributes).map(function(e){o.setAttribute(e.name,e.value)}),o.innerHTML="";for(var h=0,p=n;h<p.length;h++){var d=p[h];o.appendChild(d)}},Es.prototype.refreshRow=function(f,e,t,i,n,m){for(var y=P.isNullOrUndefined(n)?this.element.cloneNode():n,n={data:f.data},S={data:f.data},r=this.parent.getColumns().filter(function(e){return"checkbox"===e.type&&e.field})[0],s=!1,v=this.parent.isFrozenGrid(),r=(r&&(s=Lh(r.field,n.data)),this.parent.getSelectedRowIndexes()),C=(f.isDataRow&&(f.isSelected=-1<r.indexOf(f.index)||s),f.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(f.isSelected=!0,-1===r.indexOf(f.index))&&r.push(f.index),this.buildAttributeFromRow(y,f),P.attributes(y,P.extend({},t,{})),Wl(y,f.attributes),this.serviceLocator.getService("cellRendererFactory")),w=this,o=0,a=f.cells.length;o<a;o++)!function(t){var i=f.cells[parseInt(t.toString(),10)],e=(i.isSelected=f.isSelected,i.isColumnSelected=i.column.isSelected,C.getCellRenderer(f.cells[parseInt(t.toString(),10)].cellType||O.CellType.Data)),n={index:P.isNullOrUndefined(f.index)?"":f.index.toString()},r=(f.isExpand&&f.cells[parseInt(t.toString(),10)].cellType===O.CellType.DetailExpand&&(n.class=w.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand"),e.render(f.cells[parseInt(t.toString(),10)],f.data,n,f.isExpand,m));if(f.cells[parseInt(t.toString(),10)].cellType!==O.CellType.Filter){if(f.cells[parseInt(t.toString(),10)].cellType===O.CellType.Data||f.cells[parseInt(t.toString(),10)].cellType===O.CellType.CommandColumn){var s,o,a,l,e=w.parent.parentDetails&&w.parent.parentDetails.parentInstObj&&w.parent.parentDetails.parentInstObj.isReact,n=((w.parent.isReact&&w.parent.requireTemplateRef||e&&w.parent.parentDetails.parentInstObj.requireTemplateRef)&&i.isTemplate?(s=w).parent.renderTemplates(function(){var e;"string"!=typeof i.column.template&&(e=r.getAttribute("aria-label"),r.setAttribute("aria-label",r.innerText+e)),s.parent.trigger(re,P.extend(S,{cell:r,column:i.column,colSpan:1,rowSpan:1,foreignKeyData:f.cells[parseInt(t.toString(),10)].foreignKeyData,requestType:s.parent.requestTypeAction}))}):w.parent.trigger(re,P.extend(S,{cell:r,column:i.column,colSpan:1,rowSpan:1,foreignKeyData:f.cells[parseInt(t.toString(),10)].foreignKeyData,requestType:w.parent.requestTypeAction})),!1);if(0<f.index&&(w.isSpan||w.parent.isSpan&&m)&&(o=w.parent.getRowsObject(),a=(0<w.parent.groupSettings.columns.length&&!o[f.index-1].isDataRow?o[f.index]:o[f.index-1]).cells,n=(l=a.filter(function(e){return e.column.uid===f.cells[parseInt(t.toString(),10)].column.uid})[0]).isRowSpanned||1<l.rowSpanRange),1<S.rowSpan||1<S.colSpan)if(w.resetrowSpanvalue(w.parent.frozenRows>f.index?w.parent.frozenRows:w.parent.currentViewData.length,S,f.index),!1===S.column.visible)S.colSpan=1;else if(v){var h=w.parent.getColumns(),e=w.parent.getFrozenRightColumnsCount(),p=w.parent.getFrozenLeftCount(),e=h.length-e,d=S.column.index;if(d<p&&p<d+S.colSpan){var c=d+S.colSpan-p;S.colSpan=S.colSpan-c}else if(e<=d&&h.length<d+S.colSpan){var c=d+S.colSpan-h.length;S.colSpan=S.colSpan-c}else if("Fixed"===S.column.freeze){for(var c=1,u=d,g=u+1;g<u+S.colSpan&&"Fixed"===h[parseInt(g.toString(),10)].freeze;g++)c++;S.colSpan=c}else d<e&&e<d+S.colSpan&&(c=d+S.colSpan-e,S.colSpan=S.colSpan-c)}(1<S.colSpan||1<f.cells[parseInt(t.toString(),10)].cellSpan||1<S.rowSpan||n)&&(w.parent.isSpan=!0,w.isSpan=!0,r=new jr(w.serviceLocator,w.parent).render(S,f,t,r),v)&&dp(w.parent,S.column,r,S.colSpan)}w.isSpan&&(o=w.parent.getRowsObject(),p=w.parent.enableRtl,o[f.index-1])&&(l=(a=o[f.index-1].cells)[t-1],d=a[parseInt(t.toString(),10)],e=a[t+1],n=a[parseInt(t.toString(),10)].column.freeze,l&&(l.isRowSpanned||1<l.rowSpanRange)&&l.visible&&(p||d.isRowSpanned&&!(l.rowSpanRange>d.rowSpanRange)||r.classList.add("e-rowcell-firstchild"),v)&&("Fixed"===l.column.freeze&&"Fixed"===n?r.classList.add(p?"e-removefreezerightborder":"e-removefreezeleftborder"):p||1!==t||"Left"!==n||r.classList.add("e-addfreezefirstchildborder")),e)&&(e.isRowSpanned||1<e.rowSpanRange)&&e.visible&&(p&&(!d.isRowSpanned||e.rowSpanRange>d.rowSpanRange)&&r.classList.add("e-rowcell-lastchild"),v)&&"Fixed"===e.column.freeze&&"Fixed"===n&&S.colSpan<2&&r.classList.add(p?"e-removefreezeleftborder":"e-removefreezerightborder"),1<S.rowSpan&&w.parent.currentViewData.length-f.index===S.rowSpan&&r.classList.add("e-row-span-lastrowcell"),f.cells[parseInt(t.toString(),10)].isSpanned||y.appendChild(r)}}(o);var l=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(y.classList.contains("e-groupcaptionrow")){s=[].slice.call(y.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(s.length&&P.removeClass(s,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),y.querySelector(".e-summarycell"))Kh(y,this.parent);else{for(var h,p,d=0;d<y.childNodes.length;d++)(c=y.childNodes[parseInt(d.toString(),10)]).classList.add("e-leftfreeze"),pp(c,30*d,this.parent.enableRtl,"Left"),c.classList.contains("e-groupcaption")&&(h=parseInt(c.getAttribute("colspan"),10),p=Wh(this.parent,d),c.setAttribute("colspan",p.toString()),l=h-p);l&&(c=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:l.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}}),y.appendChild(c))}}if(y.querySelectorAll(".e-leftfreeze").length&&(y.querySelectorAll(".e-indentcell").length||y.querySelectorAll(".e-grouptopleftcell").length))for(var c=y.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),o=0;o<c.length;o++)c[parseInt(o.toString(),10)].classList.add("e-leftfreeze"),pp(c[parseInt(o.toString(),10)],30*o,this.parent.enableRtl,"Left")}var u,g,b,I,x={row:y,rowHeight:this.parent.rowHeight};if(f.isDataRow&&((u=P.extend(n,x)).isSelectable=!0,r=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,t=u.row.querySelectorAll(".e-templatecell"),(this.parent.isReact&&this.parent.requireTemplateRef||r&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&t.length?(g=this).parent.renderTemplates(function(){g.parent.trigger(ne,u),u.isSelectable||(f.isSelectable=u.isSelectable,g.disableRowSelection(g,f,x,u))}):this.parent.trigger(ne,u),f.isSelectable=u.isSelectable,s=this.parent.isRowDragable(),this.parent.allowPaging&&this.parent.selectionSettings.persistSelection&&(b=this.parent.getPrimaryKeyFieldNames()[0],I=f.data?f.data[""+b]:null,(r=u.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords).some(function(e){return e[""+b]===I})||r.push(f.data)),u.isSelectable||this.disableRowSelection(this,f,x,u),this.parent.childGrid||s||this.parent.detailTemplate)&&(c=y.querySelectorAll(".e-rowcell:not(.e-hide)")[0])&&c.classList.add("e-detailrowvisible"),this.parent.enableVirtualization&&(n.rowHeight=this.parent.rowHeight),n.rowHeight?y.style.height=n.rowHeight+"px":this.parent.rowHeight&&(y.querySelector(".e-headercell")||y.querySelector(".e-groupcaption"))&&(y.style.height=this.parent.rowHeight+"px"),f.cssClass&&y.classList.add(f.cssClass),f.lazyLoadCssClass&&y.classList.add(f.lazyLoadCssClass),"Vertical"!==this.parent.rowRenderingMode||!this.parent.allowTextWrap||"Header"!==this.parent.textWrapSettings.wrapMode&&"Both"!==this.parent.textWrapSettings.wrapMode||y.classList.add("e-verticalwrap"),!this.parent.enableColumnVirtualization&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(o=0;o<this.parent.aggregates.length;o++){var R,E;this.parent.aggregates[parseInt(o.toString(),10)].properties.columns[0].footerTemplate&&(R=[].slice.call(y.getElementsByClassName("e-summarycell"))).length&&(E=R[R.length-1],P.addClass([E],["e-lastsummarycell"]),E=R[0],P.addClass([E],["e-firstsummarycell"]))}return y},Es.prototype.resetrowSpanvalue=function(e,t,i){i<e&&e<i+t.rowSpan&&(i=i+t.rowSpan-e,t.rowSpan=t.rowSpan-i)},Es.prototype.disableRowSelection=function(e,t,i,n){for(var r=this.parent.getSelectedRowIndexes(),s=(this.parent.selectionModule.isPartialSelection=!0,t.isSelected=!1,r.indexOf(t.index)),o=(-1<s&&r.splice(s,1),i.row.querySelectorAll(".e-rowcell.e-gridchkbox")),r=n.row.querySelector(".e-rowdragdrop"),s=e.parent.groupSettings.columns.length+(r||e.parent.isDetail()?1:0),a=0;a<o.length;a++)o[parseInt(a.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),o[parseInt(a.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(t.cells.length)for(a=s;a<t.cells.length;a++){var l=n.row.querySelector('.e-rowcell[data-colindex="'+t.cells[parseInt(a.toString(),10)].index+'"]');l&&P.removeClass([l],["e-selectionbackground","e-active"])}r&&P.removeClass([r],["e-selectionbackground","e-active"])},Es.prototype.refreshMergeCells=function(e){for(var t=0,i=e.cells;t<i.length;t++)i[t].isSpanned=!1;return e},Es.prototype.buildAttributeFromRow=function(e,t){var i={},n=x,r="data-uid",s="aria-selected",o=[];t.isDataRow&&o.push(I),t.isAltRow&&o.push("e-altrow"),t.isCaptionRow&&o.push("e-groupcaptionrow"),t.isAggregateRow&&t.parentUid&&o.push("e-groupfooterrow"),P.isNullOrUndefined(t.index)||(i[cs]=t.index+1,i[n]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i[r]=t.uid),t.isSelected&&(i[s]=!0),!1===t.visible&&o.push("e-hide"),i.class=o,Wl(e,i)},Es);function Es(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}Ts.prototype.generateRows=function(e,t){var i=[],n=this.parent.enableVirtualization&&t?t.startIndex:0,n=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):n;this.parent.enableImmutableMode&&t&&t.startIndex&&(n=t.startIndex);for(var r=0,s=Object.keys(e).length;r<s;r++,n++)i[parseInt(r.toString(),10)]=this.generateRow(e[parseInt(r.toString(),10)],n);return i},Ts.prototype.ensureColumns=function(){var e,t=[];return(this.parent.detailTemplate||this.parent.childGrid)&&(this.parent.notify(ln,e={}),t.push(this.generateCell(e,null,O.CellType.DetailExpand))),this.parent.isRowDragable()&&t.push(this.generateCell({},null,O.CellType.RowDragIcon)),t},Ts.prototype.generateRow=function(e,t,i,n,r,s,o){var a={foreignKeyData:{}},e=(a.uid=rh("grid-row"),a.data=e,a.index=t,a.indent=n,a.tIndex=s,a.isDataRow=!0,a.parentGid=r,a.parentUid=o,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?a.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(t.toString(),10)]&&(a.isExpand=this.parent.expandedRows[parseInt(t.toString(),10)].isExpand)),a.cssClass=i,a.isAltRow=!!this.parent.enableAltRow&&t%2!=0,a.isAltRow=!!this.parent.enableAltRow&&t%2!=0,a.isSelected=-1<this.parent.getSelectedRowIndexes().indexOf(t),this.refreshForeignKeyRow(a),this.ensureColumns()),n=new zr(a,this.parent);return n.cells="Right"===this.parent.getFrozenMode()?this.generateCells(a).concat(e):e.concat(this.generateCells(a)),n},Ts.prototype.refreshForeignKeyRow=function(e){for(var t=this.parent.getForeignKeyColumns(),i=0;i<t.length;i++)P.setValue(t[parseInt(i.toString(),10)].field,Oh(t[parseInt(i.toString(),10)],e.data),e.foreignKeyData)},Ts.prototype.generateCells=function(e){for(var t=this.parent.getColumns(),i=[],n=0;n<t.length;n++)i.push(this.generateCell(t[parseInt(n.toString(),10)],e.uid,P.isNullOrUndefined(t[parseInt(n.toString(),10)].commands)?void 0:O.CellType.CommandColumn,null,n,e.foreignKeyData));return i},Ts.prototype.generateCell=function(e,t,i,n,r,s){t={visible:e.visible,isDataCell:!P.isNullOrUndefined(e.field||e.template),isTemplate:!P.isNullOrUndefined(e.template),rowID:t,column:e,cellType:P.isNullOrUndefined(i)?O.CellType.Data:i,colSpan:n,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&P.getValue(e.field,s)};return(t.isDataCell||"checkbox"===t.column.type||t.commands)&&(t.index=r),new qr(t)},Ts.prototype.refreshRows=function(e){for(var t=0;t<e.length;t++)this.refreshForeignKeyRow(e[parseInt(t.toString(),10)]),e[parseInt(t.toString(),10)].cells=this.generateCells(e[parseInt(t.toString(),10)]);return e},Ts.prototype.getInfiniteIndex=function(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?P.isNullOrUndefined(e.startIndex)?e.index:e.startIndex:0};var Ds=Ts;function Ts(e){this.parent=e}Os=function(e,t){return(Os=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var Os,e=function(e,t){function i(){this.constructor=e}Os(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},As=(Fs.prototype.getData=function(){for(var t=this,e=[],i=this.parent.aggregates.slice(),n=0;n<i.length;n++){var r=i[parseInt(n.toString(),10)].columns.filter(function(e){return!(e.footerTemplate||e.groupFooterTemplate||e.groupCaptionTemplate)||t.columnSelector(e)});r.length&&e.push({columns:r})}return e},Fs.prototype.columnSelector=function(e){return void 0!==e.footerTemplate},Fs.prototype.getColumns=function(e){var t=[];if(!this.parent.detailTemplate&&P.isNullOrUndefined(this.parent.childGrid)||t.push(new Q({})),this.parent.allowGrouping)for(var i=0;i<this.parent.groupSettings.columns.length;i++)t.push(new Q({}));return this.parent.isRowDragable()&&!e&&t.push(new Q({})),t.push.apply(t,this.parent.getColumns()),t},Fs.prototype.generateRows=function(e,t,i,n,r){if(0===e.length&&(void 0===t||!t.count&&!t.loadSummaryOnEmpty))return[];for(var s=this.buildSummaryData(e,t),o=[],a=this.getData(),l=0;l<a.length;l++)o.push(this.getGeneratedRow(a[parseInt(l.toString(),10)],s[parseInt(l.toString(),10)],t?t.level:void 0,i,n,t?t.parentUid:void 0,r));return o},Fs.prototype.getGeneratedRow=function(e,t,i,n,r,s,o){for(var a=[],l=this.getIndentByLevel(),h=!P.isNullOrUndefined(this.parent.childGrid),p=this.parent.getIndentCount(),d=(this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?l.push("e-indentcelltop"):this.parent.isRowDragable()&&!n&&(l=["e-indentcelltop"]),o||this.getColumns(n)),c=0;c<d.length;c++)a.push(this.getGeneratedCell(d[parseInt(c.toString(),10)],e,p<=c?this.getCellType():0===c&&this.parent.childGrid?O.CellType.DetailFooterIntent:O.CellType.Indent,l[parseInt(c.toString(),10)],h));o=new zr({data:t,attributes:{class:"e-summaryrow"}});return o.cells=a,o.uid=rh("grid-row"),o.parentUid=s,o.isAggregateRow=!0,o.visible=a.some(function(e){return e.isDataCell&&e.visible}),o},Fs.prototype.getGeneratedCell=function(t,e,i,n,r){var e=e.columns.filter(function(e){return e.columnName===t.field})[0],s={style:{textAlign:t.textAlign},"e-mappinguid":t.uid,index:t.index},n=(n&&(s.class=n),P.isNullOrUndefined(n)&&r&&(s.class="e-detailindentcelltop"),{visible:t.visible,isDataCell:!P.isNullOrUndefined(e),isTemplate:e&&!P.isNullOrUndefined(e.footerTemplate||e.groupFooterTemplate||e.groupCaptionTemplate),column:e||{},attributes:s,cellType:i});return n.column.headerText=t.headerText,new qr(n)},Fs.prototype.buildSummaryData=function(e,t){for(var i=[],n=this.getData(),r={},s=0;s<n.length;s++){for(var r={},o=n[parseInt(s.toString(),10)].columns,a=0;a<o.length;a++)r=this.setTemplate(o[parseInt(a.toString(),10)],t&&t.aggregates?t:e,r);i.push(r)}return i},Fs.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},Fs.prototype.setTemplate=function(e,t,i){var n=e.type,r={},s=e.getFormatter()||function(e){return e},o=t;n instanceof Array||(n=[e.type]);for(var a=0;a<n.length;a++){var l=e.field+" - "+n[parseInt(a.toString(),10)].toLowerCase(),h=e.columnName,p=!!(this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&o.items),p=("Custom"!==n[parseInt(a.toString(),10)]||p)&&o.aggregates&&l in o.aggregates?o.aggregates[l]:ah(n[parseInt(a.toString(),10)],o.aggregates?o:t,e,this.parent);i[""+h]=i[""+h]||{},i[""+h][l]=p,i[""+h][n[parseInt(a.toString(),10)]]=P.isNullOrUndefined(p)?" ":s(p),o.field&&(i[""+h].field=o.field,i[""+h].key=o.key)}return r.format=e.getFormatter(),e.setTemplate(r),i},Fs.prototype.getCellType=function(){return O.CellType.Summary},Fs);function Fs(e){this.parent=e}e(Ls,ks=As),Ls.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},Ls.prototype.getIndentByLevel=function(i){return void 0===i&&(i=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&--i,this.parent.groupSettings.columns.map(function(e,t){return t<=i-1?"":"e-indentcelltop"})},Ls.prototype.getCellType=function(){return O.CellType.GroupSummary};var ks,Ms=Ls;function Ls(){return null!==ks&&ks.apply(this,arguments)||this}e(Bs,Ps=As),Bs.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},Bs.prototype.getData=function(){return[Ps.prototype.getData.call(this).reduce(function(e,t){return e.columns=e.columns.concat(t.columns),e},{columns:[]})]},Bs.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},Bs.prototype.getCellType=function(){return O.CellType.CaptionSummary};var Ps,Ns=Bs;function Bs(){return null!==Ps&&Ps.apply(this,arguments)||this}zs=function(e,t){return(zs=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}zs(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Hs,Us=Ds),Hs.prototype.generateRows=function(e,t){if(0===this.parent.groupSettings.columns.length)return Us.prototype.generateRows.call(this,e,t);this.isInfiniteScroll="infiniteScroll"===t.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(var i=0,n=e.length;i<n;i++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[parseInt(i.toString(),10)],e.level,i,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},Hs.prototype.getGroupedRecords=function(e,t,i,n,r,s,o){if(P.isNullOrUndefined(t.items))if(P.isNullOrUndefined(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,n,this.rows.length,o));else for(var a=0,l=t.length;a<l;a++)this.getGroupedRecords(e,t[parseInt(a.toString(),10)],t.level,n,e,this.rows.length,o);else{var h=void 0,r=this.generateCaptionRow(t,e,n,r,s,o);if((h=this.isInfiniteScroll?this.getPreCaption(e,r.data.key):h)?r.uid=h.uid:this.rows=this.rows.concat(r),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,n,e+1,this.rows.length,r.uid),this.parent.aggregates.length&&this.isRenderAggregate(r)){var p=this.rows.length;(s=this.rows).push.apply(s,this.summaryModelGen.generateRows(t,{level:i,parentUid:r.uid}));for(var d=p-1;0<=d;d--)if(this.rows[parseInt(d.toString(),10)].isCaptionRow)this.rows[parseInt(d.toString(),10)].aggregatesCount=this.rows.length-p;else if(!this.rows[parseInt(d.toString(),10)].isCaptionRow&&!this.rows[parseInt(d.toString(),10)].isDataRow)break}h&&this.setInfiniteRowVisibility(h)}},Hs.prototype.isRenderAggregate=function(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling},Hs.prototype.getPreCaption=function(e,t){for(var i,n,r=this.parent.getRowsObject().concat(this.rows),s=(this.infiniteChildCount=0,r.length);s--&&(r[parseInt(s.toString(),10)].isCaptionRow&&r[parseInt(s.toString(),10)].indent===e&&((n=r[parseInt(s.toString(),10)].data.key).toString()===t.toString()&&n instanceof Date||n===t)&&(i=r[parseInt(s.toString(),10)]),!(r[parseInt(s.toString(),10)].indent===e||r[parseInt(s.toString(),10)].indent<e));)r[parseInt(s.toString(),10)].indent===e+1&&this.infiniteChildCount++;return i},Hs.prototype.getCaptionRowCells=function(t,e,i){var n,r,s=[],o=[],a=this.parent.getColumnByField(t),l=this.parent.getColumnIndexesInView(),h=(this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(e){return e.field===t})[0]),this.parent.groupSettings.columns.length),p=this.parent;if(!this.parent.enableColumnVirtualization||-1!==l.indexOf(e)){for(var d=0;d<e;d++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,O.CellType.Expand))}e=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(p.detailTemplate||p.childGrid?1:0)-e+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()&&(n=this.captionModelGen.generateRows(i)[0],P.extend(i,n.data),r=0,n.cells.some(function(e,t){return r=t,e.visible&&e.isDataCell}),o=n.cells.slice(r).filter(function(e){return e.visible}),n.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),e-=(o=1===this.parent.getVisibleColumns().length?[]:o).length);for(var c=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],u=!0,g=0;g<c.length;g++){var f=u&&-1!==l.indexOf(e),f=(f&&(u=!1),!this.parent.enableColumnVirtualization||f?O.CellType.GroupCaption:O.CellType.GroupCaptionEmpty);e=this.parent.enableColumnVirtualization&&f===O.CellType.GroupCaption?e+h:e,p.isRowDragable()&&e++,s.push(this.generateCell(a,null,f,e))}return s.push.apply(s,o),s},Hs.prototype.generateCaptionRow=function(e,t,i,n,r,s){var o={},a="records",l=this.parent.getColumnByField(e.field),l=(o.data=P.extend({},e),l&&(o.data.field=e.field),o.isDataRow=!1,o.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),o.parentGid=i,o.childGid=n,o.tIndex=r,o.isCaptionRow=!0,o.parentUid=s,o.gSummary=(P.isNullOrUndefined(e.items[a])?e.items:e.items[a]).length,o.uid=rh("grid-row"),new zr(o));return l.indent=t,this.getForeignKeyData(l),l.cells=this.getCaptionRowCells(e.field,t,l.data),l},Hs.prototype.getForeignKeyData=function(e){var t=e.data,i=this.parent.getColumnByField(t.field);i&&i.isForeignColumn&&i.isForeignColumn()&&(t=P.isNullOrUndefined(t.key)?"":i.valueAccessor(i.foreignKeyValue,Oh(i,{},t.key)[0],i),P.setValue("foreignKey",t,e.data))},Hs.prototype.generateDataRows=function(e,t,i,n,r){for(var s=[],o=this.parent.getColumnIndexesInView(),a=0,l=e.length;a<l;a++,n++){s[parseInt(a.toString(),10)]=this.generateRow(e[parseInt(a.toString(),10)],this.index,a?void 0:"e-firstchildrow",t,i,n,r);for(var h=0;h<t;h++)this.parent.enableColumnVirtualization&&-1===o.indexOf(t)||s[parseInt(a.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return s},Hs.prototype.generateIndentCell=function(){return this.generateCell({},null,O.CellType.Indent)},Hs.prototype.refreshRows=function(e){for(var t=this.parent.getColumnIndexesInView(),i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].isDataRow){e[parseInt(i.toString(),10)].cells=this.generateCells(e[parseInt(i.toString(),10)]);for(var n=0;n<e[parseInt(i.toString(),10)].indent;n++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[parseInt(i.toString(),10)].indent)||e[parseInt(i.toString(),10)].cells.unshift(this.generateIndentCell())}else{var r=this.generateCaptionRow(e[parseInt(i.toString(),10)].data,e[parseInt(i.toString(),10)].indent);e[parseInt(i.toString(),10)].cells=r.cells}return e},Hs.prototype.setInfiniteRowVisibility=function(e){if(!e.isExpand||!1===e.visible)for(var t=0,i=this.rows;t<i.length;t++){var n=i[t];n.parentUid===e.uid&&(n.visible=!1,n.isCaptionRow)&&this.setInfiniteRowVisibility(n)}},Hs.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[parseInt(e.toString(),10)];if(t.isCaptionRow)for(var i=e+1;i<this.rows.length;i++){var n=this.rows[parseInt(i.toString(),10)];t.uid===n.parentUid&&(this.rows[parseInt(i.toString(),10)].visible=t.isExpand)}}};var zs,Us,qs=Hs;function Hs(e){var t=Us.call(this,e)||this;return t.rows=[],t.index=0,t.infiniteChildCount=0,t.renderInfiniteAgg=!0,t.parent=e,t.summaryModelGen=new Ms(e),t.captionModelGen=new Ns(e),t}t.prototype.beforeCellFocused=function(e){!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?this.pressedKey=void 0:this.pressedKey=e.keyArgs.action},t.prototype.renderPanel=function(){var e,t=this.parent,i=this.parent.element.querySelector("."+_r);i?(this.ariaService.setOptions(this.parent.element.querySelector("."+Zr),{busy:!1}),this.setPanel(i)):(i=this.parent.createElement("div",{className:_r}),e=this.parent.createElement("div",{className:Zr}),this.ariaService.setOptions(e,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(i),e.classList.add("e-virtual-content")),i.appendChild(e),this.setPanel(i),t.element.appendChild(i))},t.prototype.renderHorizontalScrollbar=function(e){var t=this.parent.createElement("div",{className:"e-movablescrollbar"}),i=this.parent.createElement("div",{className:"e-movablechild"}),n=ph().toString();this.setScrollbarHeight(i,n),this.setScrollbarHeight(t,n),t.appendChild(i),e.appendChild(t)},t.prototype.setScrollbarHeight=function(e,t){e.style.minHeight=t+"px",e.style.maxHeight=t+"px"},t.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||P.isNullOrUndefined(t)||P.isNullOrUndefined(i)||(P.remove(t),P.remove(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+$r)),"Multiple"===this.parent.selectionSettings.type&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},t.prototype.createContentTable=function(e){var t=this.getPanel().firstElementChild,e=(this.getTable()&&P.remove(this.getTable()),t.querySelector("."+$r)?t.querySelector("."+$r):this.parent.createElement("table",{className:$r,attrs:{cellspacing:"0.25px",role:"presentation",id:this.parent.element.id+e}}));return this.setColGroup(this.parent.getHeaderTable().querySelector(us).cloneNode(!0)),e.appendChild(this.getColGroup()),e.appendChild(this.parent.createElement(N,{attrs:{role:"rowgroup"}})),t.appendChild(e),t},t.prototype.refreshContentRows=function(l){var t=this,h=(void 0===l&&(l={}),this.parent);if(0!==h.currentViewData.length){h.editSettings&&h.editModule&&"Batch"===h.editSettings.mode&&h.editModule.formObj&&!1===h.editSettings.showConfirmDialog&&h.editModule.destroyForm();var p,d,c,u,g,f=this.currentMovableRows||h.currentViewData,e=h.isReact&&!P.isNullOrUndefined(h.rowTemplate),m=e?h.createElement(N,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),y=(this.initialPageRecords||(this.initialPageRecords=P.extend([],f)),e?h.createElement(N,{attrs:{role:"rowgroup"}}):document.createDocumentFragment()),S=(h.isReact&&h.rowTemplate&&(p=m,d=y),h.getColumns()),v=new Rs(this.serviceLocator,null,this.parent),C=this.parent.enableInfiniteScrolling&&"infiniteScroll"===l.requestType,i=this.isInfiniteColumnvirtualization()&&"virtualscroll"!==l.requestType,w=(h.notify(vr,{}),this.rowElements=[],this.rows=[],this.tempFreezeRows=[],!(!this.parent.frozenRows||!this.parent.groupSettings.columns.length)),n=(Mh(h)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(e){return l.requestType===e})&&this.emptyVcRows(),g=this.checkCache(g,l),this.isAddRows||this.useGroupCache||(g=this.generator.generateRows(f,l)),this.setGroupCache(g,l),this.parent.notify(Rn,{isInfiniteScroll:C,modelData:g,args:l}),this.parent.registeredTemplate);if(("infiniteScroll"!==l.requestType||this.parent.infiniteScrollSettings.enableCache)&&n&&n.template&&!l.isFrozen){for(var r=[],s=0;s<n.template.length;s++)for(var o=0;o<n.template[parseInt(s.toString(),10)].rootNodes.length;o++)P.isNullOrUndefined(n.template[parseInt(s.toString(),10)].rootNodes[parseInt(o.toString(),10)].parentNode)&&r.push(n.template[parseInt(s.toString(),10)]);this.parent.destroyTemplate(["template"],r)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===l.requestType&&!this.parent.infiniteScrollSettings.enableCache||l.isFrozen||(T=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"],"infiniteScroll"===l.requestType&&this.parent.infiniteScrollSettings.enableCache&&(T=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),Dp(this.parent,T)),this.parent.enableColumnVirtualization&&new jr(this.serviceLocator,this.parent).updateVirtualCells(g),this.tbody=this.getTable().querySelector(N);var a=0,b=!0;if(Mh(h)&&h.vcRows.length){var I=P.isNullOrUndefined(l.virtualInfo.offsets)?P.isNullOrUndefined(l.scrollTop)?0:l.scrollTop.top:l.virtualInfo.offsets.top;if(0!==I){for(var x=h.vGroupOffsets,R=h.pageSettings.pageSize/2,E=Object.keys(x).map(function(e){return x[""+e]}),D=0;D<E.length;D++)if(I<E[parseInt(D.toString(),10)]){if(P.isNullOrUndefined(l.virtualInfo)||"up"!==l.virtualInfo.direction){a=D*R,(this.parent.contentModule.isEndBlock(D)||this.parent.contentModule.isEndBlock(D+1))&&(l.virtualInfo.blockIndexes=[D,D+1]);break}a=0<D?(D-1)*R:D*R;break}Math.round(I+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!l.rowObject&&(b=!1)}}var T=h.frozenRows&&this.parent.enableVirtualization&&"reorder"===l.requestType;if(h.frozenRows&&"virtualscroll"===l.requestType&&"X"===l.virtualInfo.sentinelInfo.axis||T){var O=l.virtualInfo.blockIndexes,A=l.virtualInfo.page,F=(l.virtualInfo.blockIndexes=[1,2],T&&(l.virtualInfo.page=1),T?this.initialPageRecords:f),k=this.vgenerator.generateRows(F,l);k.splice(this.parent.frozenRows);for(s=0;s<this.parent.frozenRows;s++)hp(c=v.render(k[parseInt(s.toString(),10)],S)),y.appendChild(c);l.virtualInfo.blockIndexes=O,l.virtualInfo.page=A,T&&1===l.virtualInfo.page&&g.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(y,g,v,l,f,S),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&"delete"===l.requestType&&(this.visibleRows=[]);for(var M=this,s=a,L=g.length;s<L;s++)if("break"===function(t){if(M.rows.push(g[parseInt(t.toString(),10)]),M.parent.groupSettings.enableLazyLoading&&!M.useGroupCache&&M.parent.groupSettings.columns.length&&((M.parent.enableVirtualization?M.parent.lazyLoadRender:M.parent.contentModule).refRowsObj[M.parent.pageSettings.currentPage].push(g[parseInt(t.toString(),10)]),M.setRowsInLazyGroup(g[parseInt(t.toString(),10)],t),P.isNullOrUndefined(g[parseInt(t.toString(),10)].indent)))return"continue";if(M.setInfiniteVisibleRows(l,g[parseInt(t.toString(),10)]),Mh(h)&&l.virtualInfo&&l.virtualInfo.blockIndexes&&M.rowElements.length>=l.virtualInfo.blockIndexes.length*M.parent.contentModule.getBlockSize()&&b)return M.parent.currentViewData.records=M.rows.map(function(e){return e.data}),"break";if(h.rowTemplate){var e=h.element.id+"rowTemplate",i=void 0;if(h.isReact){var n,r=h.frozenRows&&t<h.frozenRows,s=P.extend({index:t},f[parseInt(t.toString(),10)]);if(h.getRowTemplate()(s,h,"rowTemplate",e,null,null,r?y:m),h.requireTemplateRef)return(n=M).parent.renderTemplates(function(){h.frozenRows&&t<h.frozenRows?c=d.childNodes[parseInt(t.toString(),10)]:u=p.childNodes[parseInt(t.toString(),10)];var e={data:g[parseInt(t.toString(),10)].data,row:u||c};n.parent.trigger(ne,e),(g[parseInt(t.toString(),10)].isDataRow||n.parent.enableVirtualization&&n.parent.groupSettings.enableLazyLoading)&&n.rowElements.push(e.row),n.ariaService.setOptions(n.parent.element,{colcount:h.getColumns().length.toString()}),t===g.length-1&&(d=p=null)}),"continue"}else i=h.getRowTemplate()(P.extend({index:t},f[parseInt(t.toString(),10)]),h,"rowTemplate",e,void 0,void 0,void 0,M.parent.root);if(h.isReact||"TBODY"!==i[0].tagName)h.frozenRows&&t<h.frozenRows?c=h.isReact?y.lastElementChild:sh(y,i):(h.isReact||(c=sh(m,i)),u=(h.isReact?m:c).lastElementChild);else{for(var o=0;o<i.length;o++){var a="tr"===i[parseInt(o.toString(),10)].nodeName.toLowerCase();(a||i[parseInt(o.toString(),10)].querySelectorAll&&i[parseInt(o.toString(),10)].querySelectorAll("tr").length)&&(c=a?i[parseInt(o.toString(),10)]:i[parseInt(o.toString(),10)].querySelector("tr"))}(h.frozenRows&&t<h.frozenRows?y:m).appendChild(c)}s={data:g[parseInt(t.toString(),10)].data,row:u||c};M.parent.trigger(ne,s)}else{hp(c=v.render(g[parseInt(t.toString(),10)],S));r=M.ensureFrozenHeaderRender(l);(h.frozenRows&&(t<h.frozenRows||w)&&!C&&"virtualscroll"!==l.requestType&&r&&M.ensureVirtualFrozenHeaderRender(l)?y:m).appendChild(c),parseInt(c.getAttribute("data-rowindex"),10)+1===h.frozenRows&&(w=!1),g[parseInt(t.toString(),10)].isExpand&&h.notify(Ui,c.cells[h.groupSettings.columns.length])}(g[parseInt(t.toString(),10)].isDataRow||M.parent.enableVirtualization&&M.parent.groupSettings.enableLazyLoading)&&(!P.isNullOrUndefined(h.rowTemplate)&&(h.isAngular||h.isVue3||h.isVue)?M.rowElements.push(u||c):M.rowElements.push(c)),M.ariaService.setOptions(M.parent.element,{colcount:h.getColumns().length.toString()})}(s))break;F=h.parentDetails&&h.parentDetails.parentInstObj&&h.parentDetails.parentInstObj.isReact;!h.isReact&&!F||h.requireTemplateRef||h.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(rr,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),h.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),(h.frozenRows&&"virtualscroll"!==l.requestType&&!C&&this.ensureVirtualFrozenHeaderRender(l)||"virtualscroll"===l.requestType&&l.virtualInfo.sentinelInfo&&"X"===l.virtualInfo.sentinelInfo.axis)&&(O=h.getHeaderTable().querySelector(N),(e?(A=O.parentElement,P.remove(O),A):(O.innerHTML="",O)).appendChild(y),h.isInitialLoad||h.scrollModule.setHeight()),l.rows=this.rows.slice(0),Nl(function(){t.parent.notify(Mi,l),t.parent.enableVirtualization||t.parent.enableColumnVirtualization&&!i||C||(h.isReact||(t.tbody.innerHTML=""),P.isNullOrUndefined(t.tbody.parentElement)?P.remove(h.getContentTable().querySelector(N)):P.remove(t.tbody),t.tbody=t.parent.createElement(N,{attrs:{role:"rowgroup"}})),h.rowTemplate&&P.updateBlazorTemplate(h.element.id+"rowTemplate","RowTemplate",h),!P.isNullOrUndefined(t.parent.infiniteScrollModule)&&(t.parent.enableInfiniteScrolling&&!t.isInfiniteColumnvirtualization()||i)?(t.isAddRows=!1,t.parent.notify(xn,{args:l}),t.parent.notify(In,{tbody:t.tbody,frag:m,args:l,rows:t.rows,rowElements:t.rowElements,visibleRows:t.visibleRows,tableName:void 0}),t.isInfiniteColumnvirtualization()&&t.parent.isFrozenGrid()&&(e=Vh(t.parent.getContent().querySelector(".e-virtualtable")),t.parent.contentModule.resetStickyLeftPos(e.width),t.widthService.refreshFrozenScrollbar())):(t.useGroupCache=!1,t.appendContent(t.tbody,m,l)),t.parent.editSettings.showAddNewRow&&(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&(e=t.parent.element.querySelector(".e-addrow-removed"))&&P.remove(e);var e=!t.parent.element.querySelector("."+is);t.parent.editSettings.showAddNewRow&&"Normal"===t.parent.editSettings.mode&&(e&&((t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&(t.parent.isAddNewRow=!0),t.parent.isEdit=!1,t.parent.addRecord()),e||(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(e){return l.requestType===e}))&&t.parent.notify(Lr,{}),t.parent.getVisibleFrozenRightCount()&&t.parent.getContent()&&0<_h(t.parent)&&t.parent.element.classList.add("e-right-shadow"),m=null},this.rafCallback(P.extend({},l)))}},t.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},t.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},t.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},t.prototype.appendContent=function(e,t,i,n){if(this.parent.isReact&&!P.isNullOrUndefined(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e)),"Vertical"===this.parent.rowRenderingMode&&this.parent.allowTextWrap&&("Header"===this.parent.textWrapSettings.wrapMode||"Both"===this.parent.textWrapSettings.wrapMode))for(var r=e.querySelectorAll("td"),s=0;s<r.length;s++){var o=parseFloat(document.defaultView.getComputedStyle(r[parseInt(s.toString(),10)],"::before").getPropertyValue("height"));r[parseInt(s.toString(),10)].offsetHeight<o&&(r[parseInt(s.toString(),10)].style.height=o+"px",r[parseInt(s.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},t.prototype.setRowsInLazyGroup=function(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(e,t)},t.prototype.setGroupCache=function(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(Ln,{args:t,data:e})},t.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},t.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)},t.prototype.checkCache=function(e,t){var i;return this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType?(this.isAddRows=!P.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows&&(i=this.infiniteCache[this.parent.pageSettings.currentPage],e=1===this.parent.pageSettings.currentPage?i.slice(this.parent.frozenRows):i),e):this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType||"virtualscroll"===t.requestType)&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null},t.prototype.setInfiniteVisibleRows=function(e,t){!this.parent.enableInfiniteScrolling||this.parent.infiniteScrollSettings.enableCache||this.isInfiniteColumnvirtualization()&&"virtualscroll"===e.requestType||this.visibleRows.push(t)},t.prototype.getCurrentBlockInfiniteRecords=function(){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];for(var t=this.parent.getRows(),i=parseInt(t[this.parent.frozenRows].getAttribute(x),10),n=Math.ceil((i+1)/this.parent.pageSettings.pageSize),i=parseInt(t[t.length-1].getAttribute(x),10),r=Math.ceil((i+(t.length?1:0))/this.parent.pageSettings.pageSize),s=n;s<=r;s++)e=e.length?e.concat(this.infiniteCache[parseInt(s.toString(),10)]):this.infiniteCache[parseInt(s.toString(),10)];this.parent.frozenRows&&1<this.parent.pageSettings.currentPage&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}return e},t.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},t.prototype.virtualFrozenHdrRefresh=function(e,t,i,n,r,s){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===n.requestType||"refresh"===n.requestType)){for(var o,a=this.getReorderedRows(n),l=0;l<a.length;l++)o=i.render(a[parseInt(l.toString(),10)],s),e.appendChild(o);1===n.virtualInfo.page&&t.splice(0,this.parent.frozenRows)}},t.prototype.getInfiniteRows=function(){var e=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var t=Object.keys(this.infiniteCache),i=0;i<t.length;i++)e=e.concat(this.infiniteCache[t[parseInt(i.toString(),10)]]);else e=this.visibleRows;return e},t.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]},t.prototype.getPanel=function(){return this.contentPanel},t.prototype.setPanel=function(e){this.contentPanel=e},t.prototype.getTable=function(){return this.contentTable},t.prototype.setTable=function(e){this.contentTable=e},t.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.rows},t.prototype.getRowElements=function(){return this.rowElements},t.prototype.setRowElements=function(e){this.rowElements=e},t.prototype.getColGroup=function(){return this.colgroup},t.prototype.setColGroup=function(e){return P.isNullOrUndefined(e)||(e.id="content-"+e.id),this.colgroup=e},t.prototype.setVisible=function(e){for(var t,i=this.parent,n=(this.getRows().some(function(e){return e.isDataRow&&(t=e),e.isDataRow}),!0),r=(!i.groupSettings.columns.length&&t&&(n=!1),i.getDataRows()),i=this.infiniteRowVisibility(),s=i||this.rows.filter(function(e){return!e.isDetailRow}),o=0,a=e.length;o<a;o++){var l=e[parseInt(o.toString(),10)],h=this.parent.getNormalizedColumnIndex(l.uid),p=this.parent.getColumnIndexByUid(l.uid),d=!0===l.visible?"":"none";-1!==h&&t&&h<t.cells.length&&P.setStyleAttribute(this.getColGroup().childNodes[parseInt(h.toString(),10)],{display:d}),n||this.setDisplayNone(r,p,d,s),!this.parent.invokedFromMedia&&l.hideAtMedia&&this.parent.updateMediaColumns(l),this.parent.invokedFromMedia=!1}n?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(Xi,{rows:s,args:{}}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(Lr,{}))},t.prototype.setDisplayNone=function(e,t,i,n){Cp(e,t,i,n,this.parent,this.parent.isRowDragable()),this.parent.notify(bn,{visible:i,index:t,isFreeze:this.isInfiniteFreeze})},t.prototype.infiniteRowVisibility=function(e){var t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t},t.prototype.colGroupRefresh=function(){var e;this.getColGroup()&&(e=this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e))},t.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+Gr).querySelector(us+":not(.e-masked-colgroup)").cloneNode(!0)},t.prototype.initializeContentDrop=function(){var e=this.parent;this.droppable=new P.Droppable(e.element,{accept:".e-dragclone",drop:this.drop})},t.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},t.prototype.canSkip=function(e,t,i){return P.isNullOrUndefined(t)||P.isNullOrUndefined(e.visible)||t.cells[parseInt(i.toString(),10)].visible===e.visible},t.prototype.getModelGenerator=function(){return this.generator=new(this.parent.allowGrouping?qs:Ds)(this.parent)},t.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(N).innerHTML="")},t.prototype.setSelection=function(t,e,i){this.parent.notify(jn,{uid:t,set:e,clearAll:i});for(var n=this.getRows().filter(function(e){return i||t===e.uid}),r=0;r<n.length;r++){n[parseInt(r.toString(),10)].isSelected=e;for(var s=n[parseInt(r.toString(),10)].cells,o=0;o<s.length;o++)s[parseInt(o.toString(),10)].isSelected=e}},t.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),P.isNullOrUndefined(e)?void 0:this.parent.getDataRows()[parseInt(e.toString(),10)]},t.prototype.getInfiniteRowIndex=function(e){var t,i;return this.parent.infiniteScrollSettings.enableCache&&!P.isNullOrUndefined(e)&&(i=e<(t=this.parent.frozenRows)?0:t,i=parseInt(this.parent.getRows()[parseInt(i.toString(),10)].getAttribute(x),10),e=e<t?e:e-i+t),e},t.prototype.getVirtualRowIndex=function(e){return e},t.prototype.enableAfterRender=function(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())},t.prototype.setRowObjects=function(e){this.rows=e},t.prototype.immutableModeRendering=function(e){var t=this,i=(void 0===e&&(e={}),this.parent),n=(i.hideSpinner(),i.getPrimaryKeyFieldNames()[0]),r={},s=[],o=i.getRowsObject().slice(),a=this.getBatchEditedRecords(n,o),l={},h=0!==Object.keys(a).length;if(i.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else if(0!==i.currentViewData.length){var p={},d=i.createElement(N,{attrs:{role:"rowgroup"}}),c=i.currentViewData,u=[].slice.call(this.getTable().querySelector(N).children);if(this.prevCurrentView.length){var g=this.prevCurrentView.length,f=c.length;if(g===f)for(var m=0;m<f;m++)"Batch"===this.parent.editSettings.mode&&u[parseInt(m.toString(),10)].classList.contains("e-insertedrow")?(u.splice(m,1),--m):(c[parseInt(m.toString(),10)][""+n],r[this.prevCurrentView[parseInt(m.toString(),10)][""+n]]=m,l[parseInt(m.toString(),10)]=c[parseInt(m.toString(),10)][""+n],p[o[parseInt(m.toString(),10)].uid]=u[parseInt(m.toString(),10)],parseInt(m.toString(),10),this.prevCurrentView[parseInt(m.toString(),10)][""+n]);else{for(m=0;m<f;m++)c[parseInt(m.toString(),10)][""+n],l[parseInt(m.toString(),10)]=c[parseInt(m.toString(),10)][""+n];for(m=0;m<g;m++)"Batch"===this.parent.editSettings.mode&&u[parseInt(m.toString(),10)].classList.contains("e-insertedrow")?(u.splice(m,1),--m):(p[o[parseInt(m.toString(),10)].uid]=u[parseInt(m.toString(),10)],r[this.prevCurrentView[parseInt(m.toString(),10)][""+n]]=m,parseInt(m.toString(),10),this.prevCurrentView[parseInt(m.toString(),10)][""+n])}}for(var y,m=0;m<c.length;m++){var S,v,C=r[c[parseInt(m.toString(),10)][""+n]];P.isNullOrUndefined(C)?(v=new Rs(this.serviceLocator,null,i),S={startIndex:m},S=this.generator.generateRows([c[parseInt(m.toString(),10)]],S),s.push(S[0]),v=v.render(S[0],i.getColumns()),d.appendChild(v),this.refreshImmutableContent(m,v,s[parseInt(m.toString(),10)])):(S=!1,this.parent.enableDeepCompare&&(S=this.objectEqualityChecker(this.prevCurrentView[parseInt(C.toString(),10)],c[parseInt(m.toString(),10)])),v=p[o[parseInt(C.toString(),10)].uid],s.push(o[parseInt(C.toString(),10)]),this.rowElements[parseInt(C.toString(),10)]&&this.rowElements[parseInt(C.toString(),10)].getAttribute("data-uid")===s[parseInt(m.toString(),10)].uid&&(h&&P.isNullOrUndefined(a[l[parseInt(m.toString(),10)]])||!h&&(S||this.prevCurrentView[parseInt(C.toString(),10)]===c[parseInt(m.toString(),10)]))?(C!==m&&this.refreshImmutableContent(m,v,s[parseInt(m.toString(),10)]),d.appendChild(v)):((h&&!P.isNullOrUndefined(a[l[parseInt(m.toString(),10)]])||!this.parent.enableDeepCompare&&c[parseInt(m.toString(),10)]!==this.prevCurrentView[parseInt(C.toString(),10)]||this.parent.enableDeepCompare&&!S)&&o[parseInt(C.toString(),10)].setRowValue(c[parseInt(m.toString(),10)]),d.appendChild(v),this.refreshImmutableContent(m,v,s[parseInt(m.toString(),10)])))}this.rows=s,this.rowElements=[].slice.call(d.children),P.remove(this.getTable().querySelector(N)),this.getTable().appendChild(d),this.parent.trigger(ae,{},function(){t.parent.allowTextWrap&&t.parent.notify(yi,{case:"textwrap"})}),e&&(y=(e.requestType||"").toLowerCase()+"-complete",this.parent.notify(y,e))}},t.prototype.objectEqualityChecker=function(e,t){for(var i=Object.keys(e),n=!0,r=0;r<i.length;r++)if(!(e[i[parseInt(r.toString(),10)]]===t[i[parseInt(r.toString(),10)]]||e[i[parseInt(r.toString(),10)]]instanceof Date&&t[i[parseInt(r.toString(),10)]]instanceof Date&&e[i[parseInt(r.toString(),10)]].getTime()===t[i[parseInt(r.toString(),10)]].getTime())){n=!1;break}return n},t.prototype.getBatchEditedRecords=function(e,t){var i={},n=this.parent.getBatchChanges(),r=[],s=[],n=(Object.keys(n).length&&(r=n.changedRecords,s=n.addedRecords),{cancel:!1});this.parent.notify(Gn,{rows:t,args:n}),s.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,s.length):n.cancel||t.splice(0,s.length));for(var o=0;o<r.length;o++)i[r[parseInt(o.toString(),10)][""+e]]=o;return i},t.prototype.refreshImmutableContent=function(e,t,i){i.isAltRow=!!this.parent.enableAltRow&&e%2!=0,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(x,e.toString()),t.setAttribute(cs,(e+1).toString()),this.updateCellIndex(t,e)},t.prototype.updateCellIndex=function(e,t){for(var i=0;i<e.cells.length;i++)e.cells[parseInt(i.toString(),10)].setAttribute("index",t.toString())};var js=t;function t(e,t){var l=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(e){l.parent.notify(be,{target:e.target,droppedElement:e.droppedElement}),P.remove(e.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(o){var a=o;return function(){if(l.ariaService.setBusy(l.getPanel().querySelector("."+Zr),!1),!l.parent.isDestroyed){var e,t=l.rows.slice(0);if(l.parent.enableInfiniteScrolling){if(l.parent.groupSettings.enableLazyLoading)for(var i=0;i<l.visibleRows.length;i++)l.setRowsInLazyGroup(l.visibleRows[parseInt(i.toString(),10)],i);t=l.parent.getRowsObject();var n=a.prevPage;if(l.parent.infiniteScrollSettings.enableCache&&n)for(var r=l.parent.infiniteScrollSettings.maxBlocks,t=[],n=parseInt(l.rowElements[0].getAttribute("data-rowindex"),10)+1,i=0,s=Math.ceil(n/l.parent.pageSettings.pageSize);i<r;i++,s++)l.infiniteCache[parseInt(s.toString(),10)]&&(t=t.concat(l.infiniteCache[parseInt(s.toString(),10)]))}l.parent.notify(pt,{rows:t,args:a}),l.parent.editSettings.showAddNewRow&&l.parent.addNewRowFocus&&(l.parent.notify(Lr,{}),l.parent.addNewRowFocus=!1),l.parent.autoFit&&l.parent.preventAdjustColumns(),l.parent.isInitialLoad||l.parent.focusModule.setFirstFocusableTabIndex(),l.isLoaded&&(l.parent.isManualRefresh=!1,l.parent.enableInfiniteScrolling&&l.parent.groupSettings.enableLazyLoading&&"sorting"===o.requestType&&(l.parent.infiniteScrollModule.groupCaptionAction=void 0),n=l.parent.parentDetails&&l.parent.parentDetails.parentInstObj&&l.parent.parentDetails.parentInstObj.isReact,(l.parent.isReact||n)&&l.parent.element.querySelectorAll(".e-templatecell").length?(e=l).parent.renderTemplates(function(){e.parent.trigger(ae,{},function(){e.parent.allowTextWrap&&e.parent.notify(yi,{case:"textwrap"})})}):l.parent.trigger(ae,{},function(){l.parent.allowTextWrap&&l.parent.notify(yi,{case:"textwrap"})}),l.parent.allowTextWrap)&&"auto"===l.parent.height&&(l.parent.getContentTable().scrollHeight>l.parent.getContent().clientHeight?l.parent.scrollModule.setPadding():l.parent.scrollModule.removePadding()),a&&(n=(a.requestType||"").toLowerCase()+"-complete",l.parent.notify(n,a),"batchsave"===o.requestType)&&(o.cancel=!1,l.parent.trigger(p,o)),l.isLoaded&&l.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.widthService=t.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.enableVirtualization||this.parent.groupSettings.enableLazyLoading||this.parent.on(Pt,this.setVisible,this),this.parent.on(gt,this.colGroupRefresh,this),this.parent.on(g,this.enableAfterRender,this),this.parent.on(Sn,this.refreshContentRows,this),this.parent.on(Ft,this.beforeCellFocused,this),this.parent.on(r,this.droppableDestroy,this))}Gs.prototype.renderPanel=function(){var e=null!=(t=this.parent.element.querySelector("."+Gr)),t=e?t:this.parent.createElement("div",{className:"e-gridheader"}),i=e?t.querySelector("."+Kr):this.parent.createElement("div",{className:Kr});this.toggleStackClass(t),t.appendChild(i),this.setPanel(t),e||this.parent.element.appendChild(t)},Gs.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+$r)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(ft,{rows:this.rows})},Gs.prototype.getPanel=function(){return this.headerPanel},Gs.prototype.setPanel=function(e){this.headerPanel=e},Gs.prototype.getTable=function(){return this.headerTable},Gs.prototype.setTable=function(e){this.headerTable=e},Gs.prototype.getColGroup=function(){return this.colgroup},Gs.prototype.setColGroup=function(e){return this.colgroup=e},Gs.prototype.getRows=function(){return this.getTable().tHead.rows},Gs.prototype.createHeaderTable=function(){var e=this.createTable(),t=this.getPanel().querySelector("."+Kr);return t.appendChild(e),t},Gs.prototype.createHeader=function(e,t){for(var i,n=this.parent,r=(this.getTable()&&P.remove(this.getTable()),this.parent.createElement("table",{className:$r,attrs:{cellspacing:"0.25px",role:"presentation"}})),t=this.createHeaderContent(t),s=t.thead,o=this.parent.createElement(N,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}}),a=(this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"}),this.parent.createElement(us)),l=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),h=this.rows=t.rows,p=0,d=h.length;p<d;p++)for(var c=0,u=h[parseInt(p.toString(),10)].cells.length;c<u;c++)i=this.parent.createElement("td"),l.appendChild(i);return(n.allowFiltering||n.allowSorting||n.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(a),o.appendChild(l),r.appendChild(this.setColGroup(a)),r.appendChild(s),r.appendChild(o),r.appendChild(this.caption),r},Gs.prototype.createTable=function(e){return this.createHeader(e=void 0===e?null:e)},Gs.prototype.createHeaderContent=function(e){var t,i=this.parent,n=i.getColumns(),r=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),s=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),o=new Rs(this.serviceLocator,O.CellType.Header,i),a=(o.element=s,[]);this.colDepth=qh(i.columns);for(var l=0,h=this.colDepth;l<h;l++)a[parseInt(l.toString(),10)]=this.generateRow(l),a[parseInt(l.toString(),10)].cells=[];if(a=this.ensureColumns(a),a=this.getHeaderCells(a,e),i.isRowDragable()&&"Right"===this.parent.getFrozenMode())for(l=0,h=a.length;l<h;l++)a[parseInt(l.toString(),10)].cells.push(this.generateCell({},O.CellType.RowDragHIcon));n.filter(function(e){return e.headerTemplate}).length&&(this.parent.isReact||this.parent.isVue)&&Dp(this.parent,["headerTemplate"]);for(l=0,h=this.colDepth;l<h;l++)t=o.render(a[parseInt(l.toString(),10)],n),this.parent.rowHeight&&t.querySelector(".e-headercell")&&(t.style.height=this.parent.rowHeight+"px"),hp(t),r.appendChild(t);return{thead:r,rows:a}},Gs.prototype.updateColGroup=function(e){var t,i=this.parent.getColumns(),n=this.parent.getColumnIndexesInView();if(e.id=this.parent.element.id+us,this.parent.allowGrouping)for(var r=0,s=this.parent.groupSettings.columns.length;r<s;r++)this.parent.enableColumnVirtualization&&-1===n.indexOf(r)||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(r=0,s=i.length;r<s;r++)t=this.parent.createElement("col"),!1===i[parseInt(r.toString(),10)].visible&&P.setStyleAttribute(t,{display:"none"}),e.appendChild(t);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),e},Gs.prototype.ensureColumns=function(e){for(var t,i=this.parent,n=this.parent.getColumnIndexesInView(),r=0,s=e.length;r<s;r++){if(i.allowGrouping)for(var o=0,a=i.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===n.indexOf(o)||e[parseInt(r.toString(),10)].cells.push(this.generateCell({},O.CellType.HeaderIndent));(i.detailTemplate||i.childGrid)&&(this.parent.notify(ln,t={}),e[parseInt(r.toString(),10)].cells.push(this.generateCell(t,O.CellType.DetailHeader))),i.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&e[parseInt(r.toString(),10)].cells.push(this.generateCell({},O.CellType.RowDragHIcon))}return e},Gs.prototype.getHeaderCells=function(e,t){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),n=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var r=0;r<(P.isNullOrUndefined(n)?0:n.length);r++)this.lockColsRendered=!1,e=this.appendCells(n[parseInt(r.toString(),10)],e,0,0===r,!1,r===n.length-1,i,t,!1);for(var r=0,s=P.isNullOrUndefined(n)?0:n.length;r<s;r++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(n[parseInt(r.toString(),10)],e,0,0===r,!1,r===s-1,i,t,!1);return e},Gs.prototype.appendCells=function(e,t,i,n,r,s,o,a,l){var l=s?l?"e-laststackcell":"e-lastcell":"",h=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered;if(e.columns){this.isFirstCol=!1;var p,d=this.getCellCnt(e,0);if(d&&(p=this.getStackedLockColsCount(e,0),0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==p||this.lockColsRendered&&d-p!=0)&&t[parseInt(i.toString(),10)].cells.push(new qr({cellType:O.CellType.StackedHeader,column:e,colSpan:this.getColSpan(d,p),className:!n&&r?"e-firstcell":""})),this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var c=0;c<e.columns.length;c++)t=this.appendCells(e.columns[parseInt(c.toString(),10)],t,i+1,n,0===c,c===e.columns.length-1&&s,o,a,!1);if(this.lockColsRendered)for(var c=0,u=e.columns.length;c<u;c++){n=n&&0===c;var g=this.isFirstCol=e.columns[parseInt(c.toString(),10)].visible&&!n,f=c===u-1&&s;t=this.appendCells(e.columns[parseInt(c.toString(),10)],t,i+1,n,g&&!f,f,o,a,!0)}}else h&&t[parseInt(i.toString(),10)].cells.push(this.generateCell(e,O.CellType.Header,this.colDepth-i,(!n&&r?"e-firstcell":"")+l,i,this.parent.getColumnIndexByUid(e.uid))),!this.parent.lockcolPositionCount||this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++;return t},Gs.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[parseInt(i.toString(),10)],t);else e.lockColumn&&t++;return t},Gs.prototype.getColSpan=function(e,t){return e=this.lockColsRendered?e-t:t},Gs.prototype.generateRow=function(e){return new zr({})},Gs.prototype.generateCell=function(e,t,i,n,r,s){e={visible:e.visible,isDataCell:!1,isTemplate:!P.isNullOrUndefined(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:n,index:r,colIndex:s};return(!e.rowSpan||e.rowSpan<2)&&delete e.rowSpan,new qr(e)},Gs.prototype.setVisible=function(e){for(var t=this.parent,i=0,n=e.length;i<n;i++){var r=e[parseInt(i.toString(),10)],s=t.getNormalizedColumnIndex(r.uid),r=r.visible?"":"none";P.setStyleAttribute(this.getColGroup().children[parseInt(s.toString(),10)],{display:r}),t.editSettings.showAddNewRow&&t.element.querySelector(".e-addedrow")&&P.setStyleAttribute(t.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(s.toString(),10)],{display:r})}this.refreshUI(),this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},Gs.prototype.colPosRefresh=function(){this.refreshUI()},Gs.prototype.refreshUI=function(){var e=this.getPanel(),t=(this.toggleStackClass(e),this.freezeReorder?this.headerPanel.querySelector("."+Xr).querySelector("."+$r):this.getTable());if(t){P.remove(t),this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&t.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(t.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0),t.removeChild(t.firstChild),t.removeChild(t.childNodes[0]);for(var i=this.parent.createElement(us),n=this.createHeaderContent(void 0),n=(this.rows=n.rows,t.insertBefore(n.thead,t.firstChild),this.updateColGroup(i),t.insertBefore(this.setColGroup(i),t.firstChild),this.appendContent(t),this.parent.notify(gt,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag(),[].slice.call(e.querySelectorAll("tr.e-columnheader"))),r=0,s=n;r<s.length;r++){var o=s[r],o=[].slice.call(o.getElementsByClassName("e-grouptopleftcell"));o.length&&o[o.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(ft,{rows:this.rows}),this.parent.enableColumnVirtualization&&E(t,Xr)&&this.parent.notify(ft,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&Sh(n,!0)}i=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");P.isNullOrUndefined(i)||(i.tabIndex=0)},Gs.prototype.toggleStackClass=function(e){var t=this.parent.columns;!P.isNullOrUndefined(t)&&t.some(function(e){return!P.isNullOrUndefined(e.columns)})?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},Gs.prototype.appendContent=function(e){this.getPanel().querySelector("."+Kr).appendChild(e)},Gs.prototype.getCellCnt=function(e,t){if(e.columns)for(var i=0,n=e.columns.length;i<n;i++)t=this.getCellCnt(e.columns[parseInt(i.toString(),10)],t);else e.visible&&t++;return t},Gs.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new P.Draggable(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(r,this.droppableDestroy,this))},Gs.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new P.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(r,this.droppableDestroy,this)},Gs.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},Gs.prototype.renderCustomToolbar=function(){var t=this,e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){for(var i=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),n=e.createElement("div",{className:"e-toolbar-items"}),r=e.createElement("div",{className:"e-toolbar-left"}),s=this.parent.allowFiltering&&this.parent.allowSorting?2:1,o=0;o<s;o++){var a=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),l=1==s?this.parent.allowSorting?"sort":"filter":1===o?"sort":"filter",h=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),l=e.createElement("span",{className:"e-btn-icon e-res"+l+"-icon e-icons"});h.appendChild(l),new B.Button({cssClass:this.parent.cssClass||""}).appendTo(h),h.onclick=function(e){e.target.classList.contains("e-ressort-btn")||e.target.classList.contains("e-ressort-icon")||e.target.querySelector(".e-ressort-icon")?t.parent.showResponsiveCustomSort():t.parent.showResponsiveCustomFilter()},a.appendChild(h),r.appendChild(a)}n.appendChild(r),i.appendChild(n),e.element.insertBefore(i,this.parent.element.querySelector("."+Gr))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")},Gs.prototype.updateCustomResponsiveToolbar=function(e){var t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?P.remove(t):this.renderCustomToolbar())};var Vs=Gs;function Gs(e,t){var p=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(e){var t=p.parent,i=p.draggable.currentStateTarget,n=E(i,"e-headercell");if(!t.allowReordering&&!t.allowGrouping||!P.isNullOrUndefined(n)&&0<n.getElementsByClassName("e-checkselectall").length)return!1;var r=p.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),i=i.classList.contains("e-headercell")?i:n;if(!i||!t.allowReordering&&i.classList.contains("e-stackedheadercell"))return!1;var s,o,a,l,n=i.offsetHeight,h=i.querySelector(".e-headercelldiv")||i.querySelector(".e-stackedheadercelldiv");if(h){if(s=i.querySelector(".e-stackedheadercelldiv")?t.getStackedHeaderColumnByHeaderText(h.innerText.trim(),t.columns):t.getColumnByUid(h.getAttribute("e-mappinguid")),p.column=s,p.column.lockColumn)return!1;r.setAttribute("e-mappinguid",p.column.uid)}return s&&!P.isNullOrUndefined(s.headerTemplate)?(P.isNullOrUndefined(s.headerTemplate)?r.innerHTML=s.headerTemplate:(o=t.getColumnIndexByField(s.field),o=s.getHeaderTemplate()(P.extend({index:o},s),t,"headerTemplate",null,null,null,null,t.root),a=t.isReact&&"string"!=typeof s.headerTemplate,l=t.parentDetails&&t.parentDetails.parentInstObj&&t.parentDetails.parentInstObj.isReact,(a||l)&&t.renderTemplates(),sh(r,o)),P.isNullOrUndefined(r.firstChild)||1!==r.firstChild.nodeType||(r.firstChild.style.pointerEvents="none")):r.innerHTML=h?s.headerText:i.firstElementChild.innerHTML,r.style.width=i.offsetWidth+"px",r.style.height=i.offsetHeight+"px",r.style.lineHeight=(n-6).toString()+"px",t.element.appendChild(r),r},this.dragStart=function(e){var t=p.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify(Ce,{target:p.draggable.currentStateTarget,column:p.column,event:e.event})},this.drag=function(e){var t,i=p.parent,n=e.target;n&&(n=P.closest(n,".e-grid"),t=p.parent.element.querySelector(".e-cloneproperties"),n&&n.getAttribute("id")===i.element.getAttribute("id")||(P.classList(t,["e-notallowedcur"],["e-defaultcur"]),i.allowReordering&&(i.element.querySelector(".e-reorderuparrow").style.display="none",i.element.querySelector(".e-reorderdownarrow").style.display="none"),i.groupSettings.allowReordering))&&i.notify(we,{target:e.target,column:p.column,event:e.event})},this.dragStop=function(e){var t,i=p.parent;i.element.querySelector(".e-gridpopup").style.display="none",(!E(e.target,"e-headercell")&&!E(e.target,"e-groupdroparea")||!i.allowReordering&&E(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&E(e.target,"e-groupdroparea"))&&(P.remove(e.helper),t=!0),i.notify(Ht,{target:e.target,event:e.event,column:p.column,cancel:t})},this.drop=function(e){var t=p.parent,i=e.droppedElement.getAttribute("e-mappinguid"),n=P.closest(e.target,".e-grid");P.remove(e.droppedElement),n&&n.getAttribute("id")!==t.element.getAttribute("id")||!t.allowReordering&&!t.allowGrouping||t.notify(jt,{target:e.target,uid:i,droppedElement:e.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.on(Pt,this.setVisible,this),this.parent.on(zt,this.colPosRefresh,this),this.parent.on(lt,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(g,this.updateCustomResponsiveToolbar,this))}Ws.prototype.getGui=function(){return""},Ws.prototype.format=function(e,t,i){var n;return P.isNullOrUndefined(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),"dateonly"===e.type&&"string"==typeof t&&t&&(n=t.split(/[^0-9.]/),t=new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10))),t=this.formatter.toView(t,e.getFormatter())),P.isNullOrUndefined(t)?"":t.toString()},Ws.prototype.evaluate=function(e,t,i,n,r,s){var o,a,l,h,p,d;return!t.column.template||(a=this.parent.isReact&&"string"!=typeof t.column.template&&t.column.template.prototype&&!t.column.template.prototype.CSPTemplate,l=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,h=["index"],r=zh({},i,((i={})[Ti]=r,i.column=t.column,i)),i=this.parent.element.id+t.column.uid,p="isStringTemplate",a||l?(d={index:n[h[0]]},t.column.getColumnTemplate()(P.extend(d,r),this.parent,"columnTemplate",i,this.parent[p],null,e)):o=t.column.getColumnTemplate()(P.extend({index:n[h[0]]},r),this.parent,"template",i,this.parent[p],void 0,void 0,this.parent.root),a||l||sh(e,o),this.parent.notify("template-result",{template:o}),o=null,e.setAttribute("aria-label",e.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+t.column.headerText),!1)},Ws.prototype.invokeFormatter=function(e,t,i){return t=P.isNullOrUndefined(e.formatter)?t:Ll(e.formatter,"getValue")?(new e.formatter).getValue(e,i):"function"==typeof e.formatter?e.formatter(e,i):e.formatter.getValue(e,i)},Ws.prototype.render=function(e,t,i,n,r){return this.refreshCell(e,t,i,r)},Ws.prototype.refreshTD=function(e,t,i,n){var r="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){var s=e.cellIndex,o=e.parentElement,a=(P.remove(e),this.refreshCell(t,i,n,r));this.cloneAttributes(a,e),o.cells.length!==s-1?o.insertBefore(a,o.cells[parseInt(s.toString(),10)]):o.appendChild(a)}else{s=this.refreshCell(t,i,n,r),o=(e.innerHTML="",s.getAttribute("aria-label"));o&&e.setAttribute("aria-label",o);for(var l=0,h=[].slice.call(s.childNodes);l<h.length;l++){var p=h[l];e.appendChild(p)}}},Ws.prototype.cloneAttributes=function(e,t){for(var i,n=t.attributes,r=n.length;r--;)i=n[parseInt(r.toString(),10)],e.setAttribute(i.name,i.value)},Ws.prototype.refreshCell=function(e,t,i,n){var r,s,o=this.element.cloneNode(),a=e.column,l=(e.isForeignKey&&(s=e.foreignKeyData[0]||((s={})[a.foreignKeyValue]=a.format?null:"",s)),this.getGui()),h=e.isForeignKey?this.getValue(a.foreignKeyValue,s,a):this.getValue(a.field,t,a),p=("date"!==a.type&&"datetime"!==a.type||P.isNullOrUndefined(h)||(h=new Date(h)),"dateonly"!==a.type||P.isNullOrUndefined(h)||"string"!=typeof h||(p=h.split(/[^0-9.]/),h=new Date(parseInt(p[0],10),parseInt(p[1],10)-1,parseInt(p[2],10))),l=(h=this.format(a,h,t)).toString(),"boolean"!==a.type||a.displayAsCheckBox||(l=(p="true"!==h&&"false"!==h?null:"true"===h?"True":"False")?this.localizer.getConstant(p):l),this.invokeFormatter(a,h,t));return l=P.isNullOrUndefined(a.formatter)?l:P.isNullOrUndefined(p)?"":p.toString(),this.evaluate(o,e,t,i,s,n)&&"checkbox"!==a.type?this.appendHtml(o,this.parent.sanitize(l),a.getDomSetter?a.getDomSetter():"innerHTML"):"checkbox"===a.type&&(o.classList.add(es),h=!!this.parent.selectionSettings.persistSelection&&"true"===h,r=B.createCheckBox(this.parent.createElement,!1,{checked:h,label:" "}),this.parent.cssClass&&P.addClass([r],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+e.rowID,r.insertBefore(this.rowChkBox.cloneNode(),r.firstChild),o.appendChild(r)),"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(o,e,i),"boolean"===a.type&&a.displayAsCheckBox&&(p=isNaN(parseInt(h.toString(),10))?"true"===h:0<parseInt(h.toString(),10),r=B.createCheckBox(this.parent.createElement,!1,{checked:p,label:" "}),o.innerHTML="",o.classList.add("e-gridchkbox-cell"),r.classList.add("e-checkbox-disabled"),this.parent.cssClass&&P.addClass([r],[this.parent.cssClass]),o.appendChild(r)),o.classList.contains("e-summarycell")&&!t.key&&(s=o.getAttribute("e-mappinguid"),a=this.parent.getColumnByUid(s),o.setAttribute("aria-label",l+this.localizer.getConstant("ColumnHeader")+e.column.headerText)),!this.parent.isFrozenGrid()||t&&t.key||up(this.parent,a,o),o},Ws.prototype.appendHtml=function(e,t,i){return e[""+(i=void 0===i?"innerHTML":i)]=t,e},Ws.prototype.setAttributes=function(e,t,i){var n=t.column;this.buildAttributeFromCell(e,t,"checkbox"===n.type),Wl(e,i),Wl(e,t.attributes),n.customAttributes&&Wl(e,n.customAttributes),"Vertical"===this.parent.rowRenderingMode&&Wl(e,{"data-cell":n.headerText}),n.textAlign&&(e.style.textAlign=n.textAlign),"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):"EllipsisWithTooltip"!==n.clipMode&&(n.clipMode||"EllipsisWithTooltip"!==this.parent.clipMode||this.parent.allowTextWrap&&("Content"===this.parent.textWrapSettings.wrapMode||"Both"===this.parent.textWrapSettings.wrapMode))||"checkbox"!==n.type&&e.classList.add("e-ellipsistooltip")},Ws.prototype.buildAttributeFromCell=function(e,t,i){var n={},r=ps,s=[];t.colSpan&&(n.colSpan=t.colSpan),t.rowSpan&&(n.rowSpan=t.rowSpan),t.isTemplate&&s.push("e-templatecell"),t.isSelected&&(s.push.apply(s,["e-selectionbackground","e-active"]),i)&&e.querySelector(".e-frame").classList.add("e-check"),t.isColumnSelected&&s.push.apply(s,["e-columnselection"]),t.cellType===O.CellType.Header?(n[r]=t.colIndex,n[ds]=t.colIndex+1):P.isNullOrUndefined(t.index)||(n[r]=t.index,n[ds]=t.index+1),t.visible||s.push("e-hide"),n.class=s,Wl(e,n)},Ws.prototype.getValue=function(e,t,i){return i.valueAccessor(e,t,i)};var _s=Ws;function Ws(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:b,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}Qs.prototype.setOptions=function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)Xs(e,Ys[i[parseInt(n.toString(),10)]],t[i[parseInt(n.toString(),10)]])},Qs.prototype.setExpand=function(e,t){Xs(e,Ys.expand,t)},Qs.prototype.setSort=function(e,t){Xs(e,Ys.sort,t,"boolean"==typeof t)},Qs.prototype.setBusy=function(e,t){Xs(e,Ys.busy,t),Xs(e,Ys.invalid,null,!0)},Qs.prototype.setGrabbed=function(e,t,i){Xs(e,Ys.grabbed,t,i)},Qs.prototype.setDropTarget=function(e,t){Xs(e,Ys.dropeffect,"copy",!t)};var Ks=Qs;function Qs(){}function Xs(e,t,i,n){n&&e?e.removeAttribute(t):e&&e.setAttribute(t,i)}var Ys={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"};Js=function(e,t){return(Js=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Js(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(eo,Zs=_s),eo.prototype.getGui=function(){return this.gui.cloneNode()},eo.prototype.render=function(e,t,i){var n=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,n,r)},eo.prototype.refresh=function(e,t){this.clean(t);var i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,t,i)},eo.prototype.clean=function(e){e.innerHTML=""},eo.prototype.prepareHeader=function(e,t,i){var n=e.column,r={},s="",o=this.getGui();if(P.attributes(o,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),P.isNullOrUndefined(n.headerValueAccessor)||(m=this.getValue(n.headerText,n)),this.parent.allowSorting&&n.allowSorting&&!P.isNullOrUndefined(n.field)&&t.classList.add("e-sort-icon"),"checkbox"!==n.type?(y=n.headerText,P.isNullOrUndefined(m)||(y=m),(m=this.hTxtEle.cloneNode())[n.getDomSetter()]=this.parent.sanitize(y),o.appendChild(m)):(n.editType="booleanedit",y=B.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "}),this.chkAllBox.id="checkbox-"+n.uid,y.insertBefore(this.chkAllBox.cloneNode(),y.firstChild),this.parent.cssClass&&P.addClass([y],[this.parent.cssClass]),o.appendChild(y),o.classList.add("e-headerchkcelldiv")),this.buildAttributeFromCell(t,e),this.appendHtml(t,o),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&n.allowFiltering&&!P.isNullOrUndefined(n.field)&&(!this.parent.showColumnMenu||!n.showColumnMenu)){P.attributes(i,{"e-mappinguid":"e-flmenu-"+n.uid}),s=s.length?s+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),t.classList.add("e-fltr-icon");var a=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==a.length)for(var l=this.parent.getForeignKeyColumns(),h=0;h<this.parent.columns.length;h++)for(var p=0;p<this.parent.filterSettings.columns.length;p++)if(this.parent.filterSettings.columns[parseInt(p.toString(),10)].field===n.field||l.length&&n.foreignKeyValue===this.parent.filterSettings.columns[parseInt(p.toString(),10)].field){i.classList.add("e-filtered"),a.push(n.field);break}t.appendChild(i.cloneNode())}e.className&&t.classList.add(e.className),n.customAttributes&&Wl(t,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(r.sort="none",s=s.length?s+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(r.grabbed=!1,s=s.length?s+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&"checkbox"!==n.type&&!n.template&&(s=s.length?s+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),t=this.extendPrepareHeader(n,t);var d,c,u,g,f,m=this.parent,y=m.getColumnIndexByField(n.field),S=(P.isNullOrUndefined(n.headerTemplate)||(d=m.element.id+n.uid+"headerTemplate",c="isStringTemplate",S=n,g=this.parent.isReact&&"string"!=typeof n.headerTemplate,u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,g||u?(g={index:y},t.firstElementChild.innerHTML="",n.getHeaderTemplate()(P.extend(g,S),m,"headerTemplate",d,this.parent[c],null,t.firstElementChild),this.parent.renderTemplates()):(u=n.getHeaderTemplate()(P.extend({index:y},S),m,"headerTemplate",d,this.parent[c],void 0,void 0,this.parent.root),t.firstElementChild.innerHTML="",sh(t.firstElementChild,u))),this.ariaService.setOptions(t,r),P.isNullOrUndefined(n.headerTextAlign)&&P.isNullOrUndefined(n.textAlign)||(g=n.headerTextAlign||n.textAlign,"Right"===(o.style.textAlign=g)||"Left"===g?t.classList.add("Right"===g?"e-rightalign":"e-leftalign"):"Center"===g&&t.classList.add("e-centeralign")),"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):"EllipsisWithTooltip"!==n.clipMode&&(n.clipMode||"EllipsisWithTooltip"!==this.parent.clipMode)||m.allowTextWrap&&("Header"===m.textWrapSettings.wrapMode||"Both"===m.textWrapSettings.wrapMode)||"checkbox"!==n.type&&t.classList.add("e-ellipsistooltip"),s&&(y=this.parent.createElement("span",{id:"headerTitle-"+n.uid,innerHTML:s,attrs:{style:"display:none"}}),t.appendChild(y),t.setAttribute("aria-describedby",y.id)),t.setAttribute("aria-rowspan",(P.isNullOrUndefined(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact);return(this.parent.isReact&&this.parent.requireTemplateRef||S&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!P.isNullOrUndefined(n.headerTemplate)?(f=this).parent.renderTemplates(function(){f.parent.trigger(se,{cell:e,node:t})}):this.parent.trigger(se,{cell:e,node:t}),this.parent.isFrozenGrid()&&up(this.parent,n,t),t},eo.prototype.getValue=function(e,t){return t.headerValueAccessor(e,t)},eo.prototype.extendPrepareHeader=function(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!P.isNullOrUndefined(e.field)){var i=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length)for(var r=0;r<this.parent.columns.length;r++)for(var s=0;s<this.parent.filterSettings.columns.length;s++)if(this.parent.filterSettings.columns[parseInt(s.toString(),10)].field===e.field){i.classList.add("e-filtered"),n.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(i)}var o;return this.parent.allowResizing&&((o=this.parent.createElement("div")).className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(o)),t},eo.prototype.appendHtml=function(e,t){return e.appendChild(t),e};var Js,Zs,$s=eo;function eo(){var e=null!==Zs&&Zs.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),e.ariaService=new Ks,e.hTxtEle=e.parent.createElement("span",{className:"e-headertext"}),e.sortEle=e.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),e.gui=e.parent.createElement("div"),e.chkAllBox=e.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":e.localizer.getConstant("SelectAllCheckbox")}}),e}to=function(e,t){return(to=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}to(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(ro,io=_s),ro.prototype.render=function(e,t,i){var n=this.element.cloneNode(),r=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),s=e.column;if(n.appendChild(r),P.isNullOrUndefined(s.headerTemplate)?this.appendHtml(r,this.parent.sanitize(s.headerText),s.getDomSetter()):sh(r,s.getHeaderTemplate()(s,this.parent,"headerTemplate",null,null,null,null,this.parent.root)),e.column.toolTip&&n.setAttribute("title",e.column.toolTip),"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?n.classList.add("e-gridclip"):"EllipsisWithTooltip"!==s.clipMode&&(s.clipMode||"EllipsisWithTooltip"!==this.parent.clipMode)||n.classList.add("e-ellipsistooltip"),P.isNullOrUndefined(e.column.textAlign)||(r.style.textAlign=e.column.textAlign),e.column.customAttributes&&Wl(n,e.column.customAttributes),n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-colspan",e.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing&&((r=this.parent.createElement("div")).className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(r)),e.className&&n.classList.add(e.className),this.parent.trigger(se,{cell:e,node:n}),"Left"===lp(s))if(n.classList.add("e-leftfreeze"),"Left"===s.border&&n.classList.add("e-freezeleftborder"),0===s.index)pp(n,30*this.parent.getIndentCount(),this.parent.enableRtl,"Left");else{for(var o=this.parent.getColumns(),a=30*this.parent.getIndentCount(),l=0;l<o.length&&!(s.index<o[parseInt(l.toString(),10)].index);l++)o[parseInt(l.toString(),10)].visible&&(a+=parseFloat(o[parseInt(l.toString(),10)].width.toString()));pp(n,a,this.parent.enableRtl,"Left")}else if("Right"===lp(s)){n.classList.add("e-rightfreeze");for(o=this.parent.getColumns(),a="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0,l=o.length-1;0<=l&&!(op(s,o[parseInt(l.toString(),10)].uid)||s.index>o[parseInt(l.toString(),10)].index);l--)o[parseInt(l.toString(),10)].visible&&(a+=parseFloat(o[parseInt(l.toString(),10)].width.toString()));pp(n,a,this.parent.enableRtl,"Right"),"Right"===s.border&&n.classList.add("e-freezerightborder")}else if("Fixed"===lp(s)){n.classList.add("e-fixedfreeze");o=this.parent.getColumns(),a=0;this.parent.getVisibleFrozenLeftCount()?a=30*this.parent.getIndentCount():"Right"===this.parent.getFrozenMode()&&(a=30*this.parent.groupSettings.columns.length);for(l=0;l<o.length;l++)s.index>o[parseInt(l.toString(),10)].index&&("Left"===o[parseInt(l.toString(),10)].freeze||o[parseInt(l.toString(),10)].isFrozen||"Fixed"===o[parseInt(l.toString(),10)].freeze)&&o[parseInt(l.toString(),10)].visible&&(a+=parseFloat(o[parseInt(l.toString(),10)].width.toString()));pp(n,a-1,this.parent.enableRtl,"Left"),a="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0;for(l=o.length-1;0<=l;l--)if(s.index<o[parseInt(l.toString(),10)].index){if(op(s,o[parseInt(l.toString(),10)].uid)||s.index>o[parseInt(l.toString(),10)].index)break;"Right"!==o[parseInt(l.toString(),10)].freeze&&"Fixed"!==o[parseInt(l.toString(),10)].freeze||o[parseInt(l.toString(),10)].visible&&(a+=parseFloat(o[parseInt(l.toString(),10)].width.toString()))}pp(n,a-1,this.parent.enableRtl,"Right")}else n.classList.add("e-unfreeze");return n};var to,io,no=ro;function ro(){var e=null!==io&&io.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),e}so=function(e,t){return(so=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}so(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(lo,oo=_s),lo.prototype.render=function(e,t){var i=this.element.cloneNode();return Wl(i,e.attributes),i};var so,oo,ao=lo;function lo(){var e=null!==oo&&oo.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-indentcell"}),e}ho=function(e,t){return(ho=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var ho,po,e=function(e,t){function i(){this.constructor=e}ho(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},co=(e(uo,po=_s),uo.prototype.render=function(e,n){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;for(var t,r,i,s=this.element.cloneNode(),o=this.parent,a=e.column,a=a.getDomSetter?a.getDomSetter():"innerHTML",l=(n.headerText=e.column.headerText,e.isForeignKey&&(l=this.format(e.column,e.column.valueAccessor("foreignKey",n,e.column))),e.isForeignKey?l:e.column.enableGroupByFormat?n.key:this.format(e.column,e.column.valueAccessor("key",n,e.column))),h=0;h<o.aggregates.length;h++)for(var p=this,d=0;d<o.aggregates[parseInt(h.toString(),10)].columns.length;d++)if("break"===function(e){var t,i;if(o.getVisibleColumns()[0].field===o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)].field&&o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)].groupCaptionTemplate)return"string"==typeof(t=o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)].groupCaptionTemplate)&&t.includes("$")?r=o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)].groupCaptionTemplate.split("$")[0]+n[o.getVisibleColumns()[0].field][o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)].type]+o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)].groupCaptionTemplate.split("}")[1]:(e=(t=o.aggregates[parseInt(h.toString(),10)].columns[parseInt(e.toString(),10)]).getTemplate(O.CellType.CaptionSummary),P.isNullOrUndefined(e)||(i=e.fn(n[t.columnName],p.parent,e.property,""),p.parent.isReact&&"string"!=typeof t.groupCaptionTemplate?p.parent.renderTemplates(function(){i&&i.length&&(P.isNullOrUndefined(o.groupSettings.captionTemplate)?s.innerText+=" "+i[0].textContent:s.appendChild(i[0]))}):i&&i.length&&(r=P.isNullOrUndefined(o.groupSettings.captionTemplate)?i[0].textContent:i))),"break"}(d))break;return P.isNullOrUndefined(o.groupSettings.captionTemplate)?o.groupSettings.enableLazyLoading?s[""+a]=this.parent.sanitize(e.column.headerText)+": "+this.parent.sanitize(l)+(r?"   "+r:""):s[""+a]=this.parent.sanitize(e.column.headerText)+": "+this.parent.sanitize(l)+" - "+n.count+" "+(n.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(r?"   "+r:""):(a=this.parent.isReact&&"string"!=typeof o.groupSettings.captionTemplate,l=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,a||l?(i=o.element.id+"captionTemplate",_l(o.groupSettings.captionTemplate)(n,this.parent,"captionTemplate",i,null,null,s),this.parent.renderTemplates()):t=this.parent.isVue||o.parentDetails&&o.parentDetails.parentInstObj&&o.parentDetails.parentInstObj.isVue?_l(o.groupSettings.captionTemplate)(n,this.parent,"captionTemplate",null,null,null,null,o.root):_l(o.groupSettings.captionTemplate)(n),a||l||(sh(s,t),r&&r.length&&r[0].textContent&&s.appendChild(r[0]))),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-label",s.innerHTML+this.localizer.getConstant("GroupCaption")),s.setAttribute("title",s.textContent),s},uo);function uo(){var e=null!==po&&po.apply(this,arguments)||this;return e.cellUid=0,e.element=e.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:e.parent.element.id+"captioncell",tabindex:"-1"}}),e}e(mo,go=_s),mo.prototype.render=function(e,t){var i=this.element.cloneNode();return i.innerHTML="&nbsp;",i.setAttribute("colspan",e.colSpan.toString()),i};var go,fo=mo;function mo(){var e=null!==go&&go.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-groupcaption"}),e}yo=function(e,t){return(yo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}yo(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Co,So=ao),Co.prototype.render=function(e,t,i,n){var r=this.element.cloneNode();return r.setAttribute("ej-mappingname",t.field),r.setAttribute("ej-mappingvalue",t.key),r.setAttribute("aria-expanded",n?"true":"false"),r.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(e.cellType=O.CellType.Indent,r.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(r.className=n?"e-recordplusexpand":"e-recordpluscollapse",r.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:n?this.localizer.getConstant("Expanded"):this.localizer.getConstant("Collapsed")}}))),r};var yo,So,vo=Co;function Co(){return null!==So&&So.apply(this,arguments)||this}wo=function(e,t){return(wo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}wo(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(xo,bo=_s),xo.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),i};var wo,bo,Io=xo;function xo(){var e=null!==bo&&bo.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-grouptopleftcell"}),e}Ro=function(e,t){return(Ro=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Ro(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(To,Eo=_s),To.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),i};var Ro,Eo,Do=To;function To(){var e=null!==Eo&&Eo.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-detailheadercell"}),e}Oo=function(e,t){return(Oo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Oo(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(ko,Ao=_s),ko.prototype.render=function(e,t,i){var n=this.element.cloneNode();return i&&!P.isNullOrUndefined(i.class)?(n.className="",n.className=i.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),e.isSelected&&n.classList.add("e-selectionbackground","e-active"),n};var Oo,Ao,Fo=ko;function ko(){var e=null!==Ao&&Ao.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),e}Mo=function(e,t){return(Mo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Mo(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(No,Lo=_s),No.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),e.isSelected&&(i.classList.add("e-selectionbackground"),i.classList.add("e-active")),(this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount())&&(i.classList.add("e-leftfreeze"),pp(i,"Right"===this.parent.getFrozenMode()?0:30*this.parent.groupSettings.columns.length,this.parent.enableRtl,"Right"===this.parent.getFrozenMode()?"Right":"Left")),i};var Mo,Lo,Po=No;function No(){var e=null!==Lo&&Lo.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),e}Bo=function(e,t){return(Bo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Bo(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(qo,zo=_s),qo.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(P.createElement("div",{className:"e-emptycell"})),(this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount())&&(i.classList.add("e-leftfreeze"),pp(i,"Right"===this.parent.getFrozenMode()?0:30*this.parent.groupSettings.columns.length,this.parent.enableRtl,"Right"===this.parent.getFrozenMode()?"Right":"Left")),i};var Bo,zo,Uo=qo;function qo(){var e=null!==zo&&zo.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-rowdragheader"}),e}jo.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(O.RenderType.Header),this.contentRenderer=this.renderer.getRenderer(O.RenderType.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},jo.prototype.refresh=function(e){var n=this,r=this.parent;r.notify((e=void 0===e?{requestType:"refresh"}:e).requestType+"-begin",e),r.trigger(y,e,function(e){var t,i;(e=void 0===e?{requestType:"refresh"}:e).cancel?(r.notify(Ni,e),"clearFilter"===e.action&&"Menu"===n.parent.filterSettings.type&&(n.parent.filterSettings.columns[n.parent.filterModule.filterObjIndex]=n.parent.filterModule.prevFilterObject,t=n.parent.showColumnMenu&&n.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",t=n.parent.element.querySelector('[e-mappinguid="'+n.parent.filterModule.column.uid+'"]').parentElement.querySelector(t),P.isNullOrUndefined(n.parent.filterModule.prevFilterObject)||t.classList.add("e-filtered")),"clear-filter"!==e.action||"CheckBox"!==n.parent.filterSettings.type&&"Excel"!==n.parent.filterSettings.type||(n.parent.filterSettings.columns=n.parent.filterModule.checkboxPrevFilterObject),"grouping"===e.requestType&&-1!==(t=r.groupSettings.columns.indexOf(e.columnName))&&(r.setProperties({groupSettings:{Columns:r.groupSettings.columns.splice(t,1)}},!0),r.setProperties({sortSettings:{Columns:r.sortSettings.columns.splice(t,1)}},!0),t=r.getColumnByField(e.columnName),i=r.getColumnHeaderByField(t.field),t.visible=!P.isNullOrUndefined(i)&&!i.classList.contains("e-hide"))):(r.allowSelection&&("clearFilter"===e.action||"clear-filter"===e.action||"searching"===e.requestType&&""===e.searchString||"add"===e.action)&&(r.selectionModule.rmtHdrChkbxClicked=!1),r.allowPaging&&r.pageSettings.pageSizes&&r.pagerModule.pagerObj.isAllPage&&"add"===e.action&&"save"===e.requestType&&r.pagerModule.pagerObj.checkAll&&r.setProperties({pageSettings:{pageSize:r.pageSettings.pageSize+1}},!0),"delete"===e.requestType&&r.allowPaging&&(t=e.data.length,i=r.pageSettings.totalRecordsCount-t,!(r.getCurrentViewRecords().length-t)&&i&&(r.pageSettings.currentPage-1)*r.pageSettings.pageSize==i||i&&i<=t)&&(r.prevPageMoving=!0,r.setProperties({pageSettings:{totalRecordsCount:i,currentPage:Math.ceil(i/r.pageSettings.pageSize)}},!0),r.pagerModule.pagerObj.totalRecordsCount=i),"reorder"===e.requestType&&n.parent.dataSource&&"result"in n.parent.dataSource||("paging"===e.requestType||"columnstate"===e.requestType||"reorder"===e.requestType)&&n.parent.groupSettings.enableLazyLoading&&n.parent.groupSettings.columns.length&&(n.parent.enableVirtualization?n.parent.lazyLoadRender:n.parent.contentModule).getGroupCache()[n.parent.pageSettings.currentPage]?n.contentRenderer.refreshContentRows(e):n.refreshDataManager(e))})},jo.prototype.resetTemplates=function(){var e,t=this.parent,i=t.getColumns();t.detailTemplate&&(e=t.element.id+"detailTemplate",P.blazorTemplates[e]=[],P.resetBlazorTemplate(e,"DetailTemplate")),t.groupSettings.captionTemplate&&P.resetBlazorTemplate(t.element.id+"captionTemplate","CaptionTemplate"),t.rowTemplate&&P.resetBlazorTemplate(t.element.id+"rowTemplate","RowTemplate"),t.toolbarTemplate&&P.resetBlazorTemplate(t.element.id+"toolbarTemplate","ToolbarTemplate"),t.pageSettings.template&&P.resetBlazorTemplate(t.element.id+"_template","pageSettings");for(var n=0;n<i.length;n++)i[parseInt(n.toString(),10)].template&&(P.blazorTemplates[t.element.id+i[parseInt(n.toString(),10)].uid]=[],P.resetBlazorTemplate(t.element.id+i[parseInt(n.toString(),10)].uid,"Template")),i[parseInt(n.toString(),10)].headerTemplate&&P.resetBlazorTemplate(t.element.id+i[parseInt(n.toString(),10)].uid+"headerTemplate","HeaderTemplate"),i[parseInt(n.toString(),10)].filterTemplate&&P.resetBlazorTemplate(t.element.id+i[parseInt(n.toString(),10)].uid+"filterTemplate","FilterTemplate");for(var r="guid",s=0;s<t.aggregates.length;s++)for(var o,a=0;a<t.aggregates[parseInt(s.toString(),10)].columns.length;a++)t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].footerTemplate&&(o=t.element.id+t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][r]+"footerTemplate",P.resetBlazorTemplate(o,"FooterTemplate")),t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].groupFooterTemplate&&(o=t.element.id+t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][r]+"groupFooterTemplate",P.resetBlazorTemplate(o,"GroupFooterTemplate")),t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].groupCaptionTemplate&&(o=t.element.id+t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][r]+"groupCaptionTemplate",P.resetBlazorTemplate(o,"GroupCaptionTemplate"))},jo.prototype.refreshComplete=function(e){this.parent.trigger(p,e)},jo.prototype.refreshDataManager=function(n){var t,i,r=this,e=(void 0===n&&(n={}),this.parent),s="Shimmer"===e.loadingIndicator.indicatorType&&"virtualscroll"!==n.requestType&&"infiniteScroll"!==n.requestType||("virtualscroll"===n.requestType||"infiniteScroll"===n.requestType)&&e.enableVirtualMaskRow,s=("virtualscroll"===n.requestType||n.isCaptionCollapse||s||this.parent.showSpinner(),s&&e.showMaskRow("virtualscroll"===n.requestType?n.virtualInfo.sentinelInfo.axis:"infiniteScroll"===n.requestType?n.direction:void 0),this.parent.notify(vn,n),this.emptyGrid=!1,this.isNeedForeignAction()),o=(this.ariaService.setBusy(this.parent.getContent().querySelector("."+Zr),!0),s&&(o=new A.Deferred,t=this.getFData(o,n)),t=t?t.then(function(e){var t,i=r.data.generateQuery().requiresCount();return r.emptyGrid?((t=new A.Deferred).resolve({result:[],count:0}),t.promise):r.data.getData(n,i)}):(e.allowPaging&&!e.getDataModule().dataManager.dataSource.offline&&e.pageSettings&&e.pageSettings.pageSizes&&e.pagerModule&&e.pagerModule.pagerObj&&e.pagerModule.pagerObj.isAllPage&&(e.pagerModule.pagerObj.isAllPage=void 0),this.data.getData(n,this.data.generateQuery().requiresCount())),this.parent.getForeignKeyColumns()),e=o.length;!(e="ExcludeHidden"===this.parent.columnQueryMode?e&&o.filter(function(e){return!1!==e.visible}).length:e)||s&&!this.parent.searchSettings.key.length||(i=new A.Deferred,t=t.then(function(e){return r.parent.notify(Ri,{dataManager:t,result:e,promise:i,action:n}),i.promise})),(t=this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length?t.then(function(e){return r.validateGroupRecords(e)}):t).then(function(e){return r.dataManagerSuccess(e,n)}).catch(function(e){return r.dataManagerFailure(e,n)})},jo.prototype.getFData=function(e,t){return this.parent.notify(Ri,{isComplex:!0,promise:e,action:t}),e.promise},jo.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||!P.isNullOrUndefined(e.searchSettings.key)&&e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},jo.prototype.foreignKey=function(e){var i=this;return e.some(function(t){return!(!i.parent.filterSettings.columns.some(function(e){return t.uid===e.uid})&&!i.parent.searchSettings.key.length)})},jo.prototype.sendBulkRequest=function(t){var i=this,e=(t.requestType="batchsave",this.parent),n=(e.allowPaging&&e.pageSettings.pageSizes&&e.pagerModule.pagerObj.isAllPage&&e.pagerModule.pagerObj.checkAll&&(n=t.changes.addedRecords.length)&&e.setProperties({pageSettings:{pageSize:e.pageSettings.pageSize+n}},!0),e.allowPaging&&(t.changes.addedRecords.length||t.changes.deletedRecords.length||t.changes.changedRecords.length)&&e.pageSettings&&e.pageSettings.pageSizes&&e.pagerModule&&e.pagerModule.pagerObj&&!e.getDataModule().dataManager.dataSource.offline&&e.pagerModule.pagerObj.isAllPage&&(e.pagerModule.pagerObj.isAllPage=void 0),this.data.saveChanges(t.changes,this.parent.getPrimaryKeyFieldNames()[0],t.original)),r=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):n.then(function(e){i.data.getData(t,r).then(function(e){return i.dmSuccess(e,t)}).catch(function(e){return i.dmFailure(e,t)})}).catch(function(e){return i.dmFailure(e,t)})},jo.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},jo.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},jo.prototype.renderEmptyRow=function(){this.emptyRow(!0)},jo.prototype.emptyRow=function(e){var t,i,n=this.parent,r=this.contentRenderer.getTable().querySelector(N),s=(P.isNullOrUndefined(r)||P.remove(r),r=this.parent.createElement(N,{attrs:{role:"rowgroup"}}),n.allowRowDragAndDrop&&P.isNullOrUndefined(n.rowDropSettings.targetID)?1:0),o=((n.detailTemplate||n.childGrid)&&++s,n.editSettings.showAddNewRow&&"Bottom"===n.editSettings.newRowPosition?"e-emptyrow e-show-added-row":"e-emptyrow"),o=this.parent.createElement("tr",{className:o,attrs:{role:"row"}});n.emptyRecordTemplate?(t=n.element.id+"emptyRecordTemplate",i=this.parent.createElement("td",{attrs:{colspan:(n.getVisibleColumns().length+s+n.groupSettings.columns.length).toString()}}),n.isVue||n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isVue?i.appendChild(n.getEmptyRecordTemplate()(n.dataSource,n,"emptyRecordTemplate",t,void 0,void 0,void 0,this.parent.root)[1]):i.appendChild(n.getEmptyRecordTemplate()(n.dataSource,n,"emptyRecordTemplate",t,void 0,void 0,void 0,this.parent.root)[0]),n.isReact&&this.parent.renderTemplates()):i=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(n.getVisibleColumns().length+s+(P.isNullOrUndefined(n.groupSettings.columns)?0:n.groupSettings.columns.length)).toString()}}),n.isFrozenGrid()&&(i.classList.add("e-leftfreeze"),i.style.left="0px"),n.frozenRows&&n.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),o.appendChild(i),r.appendChild(o),this.contentRenderer.renderEmpty(r),e&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(ae,{}),this.parent.notify(dt,{rows:[new zr({isDataRow:!0,cells:[new qr({isDataCell:!0,visible:!0})]})]}),n.editSettings.showAddNewRow)&&(n.addRecord(),this.parent.notify(Lr,{}))},jo.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},jo.prototype.updateColumnType=function(e){for(var t=this.parent.getColumns(),i="customFormat",n="equalTo",r=e&&e.items?e.items[0]:e,s=this.locator.getService("valueFormatter"),o=0,a=t.length;o<a;o++){l=Lh(t[parseInt(o.toString(),10)].field||"",r),P.isNullOrUndefined(t[parseInt(o.toString(),10)][i])||(t[parseInt(o.toString(),10)].format=t[parseInt(o.toString(),10)][i]),P.isNullOrUndefined(t[parseInt(o.toString(),10)].validationRules)||P.isNullOrUndefined(t[parseInt(o.toString(),10)].validationRules[n])||(t[parseInt(o.toString(),10)].validationRules[n][0]=this.parent.element.id+t[parseInt(o.toString(),10)].validationRules[n][0]),t[parseInt(o.toString(),10)].isForeignColumn()&&t[parseInt(o.toString(),10)].columnData&&(l=Lh(t[parseInt(o.toString(),10)].foreignKeyValue||"",t[parseInt(o.toString(),10)].columnData[0])),P.isNullOrUndefined(l)?t[parseInt(o.toString(),10)].type=t[parseInt(o.toString(),10)].type||null:(this.isColTypeDef=!0,t[parseInt(o.toString(),10)].type||(t[parseInt(o.toString(),10)].type=l.getDay?0<l.getHours()||0<l.getMinutes()||0<l.getSeconds()||0<l.getMilliseconds()?"datetime":"date":typeof l));var l=new V;t[parseInt(o.toString(),10)].format&&(t[parseInt(o.toString(),10)].format.skeleton||t[parseInt(o.toString(),10)].format.format&&"string"==typeof t[parseInt(o.toString(),10)].format.format)&&(t[parseInt(o.toString(),10)].setFormatter(l.getFormatFunction(P.extend({},t[parseInt(o.toString(),10)].format))),t[parseInt(o.toString(),10)].setParser(l.getParserFunction(t[parseInt(o.toString(),10)].format))),"string"==typeof t[parseInt(o.toString(),10)].format?vh(this.locator,t[parseInt(o.toString(),10)]):t[parseInt(o.toString(),10)].format||"number"!==t[parseInt(o.toString(),10)].type||t[parseInt(o.toString(),10)].setParser(s.getParserFunction({format:"n2"})),"dateonly"!==t[parseInt(o.toString(),10)].type||t[parseInt(o.toString(),10)].format||(t[parseInt(o.toString(),10)].format="yMd",vh(this.locator,t[parseInt(o.toString(),10)]))}},jo.prototype.dataManagerSuccess=function(i,n){var r=this,s=this.parent,o=(this.contentRenderer=this.renderer.getRenderer(O.RenderType.Content),this.headerRenderer=this.renderer.getRenderer(O.RenderType.Header),i.actionArgs=n,this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!s.groupSettings.enableLazyLoading&&("delete"===n.requestType||"save"===n.requestType&&"add"===this.parent.infiniteScrollModule.requestType&&!(s.sortSettings.columns.length||s.filterSettings.columns.length||this.parent.groupSettings.columns.length||s.searchSettings.key)));s.trigger(Ve,i,function(e){if(!e.cancel){e.result=P.isNullOrUndefined(e.result)?[]:e.result;var t=Object.keys(e.result).length;if(!r.parent.isDestroyed)if(s.getColumns().length||t||s.columns.length&&s.columns[0]instanceof Q)if(r.isInfiniteEnd(n)&&!t)r.parent.notify(En,{e:n,result:i.result,count:i.count,agg:i.aggregates});else if(r.parent.isEdit=!1,r.parent.notify(fn,{}),r.parent.notify(Yt,{}),n&&("infiniteScroll"!==n.requestType&&"delete"!==n.requestType&&"add"!==n.action||!s.enableInfiniteScrolling)&&r.parent.notify(Er,{type:"refreshCommandColumn"}),r.contentRenderer.prevCurrentView=!P.isNullOrUndefined(r.parent.currentViewData)&&r.parent.currentViewData.slice(),s.currentViewData=e.result,s.notify(Xn,{args:n,data:e.result}),e.count&&!s.allowPaging&&(s.enableVirtualization||s.enableInfiniteScrolling)&&(s.totalDataRecordsCount=e.count),!t&&e.count&&s.allowPaging&&n&&"delete"!==n.requestType)!r.parent.groupSettings.enableLazyLoading||"grouping"!==n.requestType&&"ungrouping"!==n.requestType||r.parent.notify(bt,n),s.prevPageMoving=!0,s.pageSettings.totalRecordsCount=e.count,"paging"!==n.requestType&&(s.pageSettings.currentPage=Math.ceil(e.count/s.pageSettings.pageSize)),s.dataBind();else{if((s.getColumns().length||!t)&&r.isLayoutRendered||Mh(s)||(s.removeMaskRow(),r.updatesOnInitialRender(e)),!r.isColTypeDef&&s.getCurrentViewRecords()&&(r.data.dataManager.dataSource.offline&&s.dataSource&&s.dataSource.length?r.updateColumnType(s.dataSource[0]):r.updateColumnType(s.getCurrentViewRecords()[0])),r.parent.isInitialLoad||!r.parent.groupSettings.disablePageWiseAggregates||r.parent.groupSettings.columns.length||(e.result=r.parent.dataSource instanceof Array?r.parent.dataSource:r.parent.currentViewData),!r.parent.isReact&&!r.parent.isVue||P.isNullOrUndefined(n)||"infiniteScroll"===n.requestType||n.isFrozen||Dp(r.parent,["footerTemplate"]),r.parent.isAngular&&r.parent.allowGrouping&&r.parent.groupSettings.captionTemplate&&(P.isNullOrUndefined(n)||"infiniteScroll"!==n.requestType)&&r.parent.destroyTemplate(["groupSettings_captionTemplate"]),r.parent.notify(ht,P.extend({count:e.count,result:e.result,aggregates:e.aggregates,loadSummaryOnEmpty:!1},n)),(s.groupSettings.columns.length||n&&"ungrouping"===n.requestType)&&n&&"filtering"!==n.requestType&&r.headerRenderer.refreshUI(),t)Mh(s)&&(n.scrollTop={top:r.contentRenderer.content.scrollTop}),o?r.parent.notify(En,{e:n,result:i.result,count:i.count,agg:i.aggregates}):r.parent.enableImmutableMode?r.contentRenderer.immutableModeRendering(n):r.contentRenderer.refreshContentRows(n);else{if(n&&n.isCaptionCollapse)return;if(!s.getColumns().length)return s.element.innerHTML="",void alert(r.l10n.getConstant("EmptyDataSourceError"));r.contentRenderer.setRowElements([]),r.contentRenderer.setRowObjects([]),r.ariaService.setBusy(r.parent.getContent().querySelector("."+Zr),!1),s.removeMaskRow(),r.renderEmptyRow(),s.enableColumnVirtualization&&!t&&r.parent.notify(pt,{rows:s.getRowsObject(),args:{}}),n&&(e=(n.requestType||"").toLowerCase()+"-complete",r.parent.notify(e,n),"batchsave"===n.requestType)&&(n.cancel=!1,n.rows=[],n.isFrozen=!n.isFrozen,r.parent.trigger(p,n)),r.parent.autoFit&&r.parent.preventAdjustColumns(),r.parent.hideSpinner()}r.parent.notify(Kt,{}),r.setRowCount(r.parent.getCurrentViewRecords().length),"query"in i&&(r.parent.getDataModule().isQueryInvokedFromData=!1)}else s.hideSpinner()}})},jo.prototype.dataManagerFailure=function(e,t){P.isNullOrUndefined(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+Zr),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger(oe,{error:e}),this.parent.hideSpinner(),this.parent.removeMaskRow(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:e}))},jo.prototype.setRowCount=function(e){this.ariaService.setOptions(this.parent.element,{rowcount:e?e.toString():"1"})},jo.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType},jo.prototype.updatesOnInitialRender=function(e){var t=!(this.isLayoutRendered=!0);this.parent.columns.length<1&&(this.buildColumns(e.result[0]),t=!0),Xl(this.parent.columns,null,this.parent),t&&this.parent.notify(Fr,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Xt,{})},jo.prototype.iterateComplexColumns=function(e,t,i){for(var n=Object.keys(e),r=0;r<n.length;r++)("object"!=typeof e[n[parseInt(r.toString(),10)]]||!e[n[parseInt(r.toString(),10)]]||e[n[parseInt(r.toString(),10)]]instanceof Date?[]:Object.keys(e[n[parseInt(r.toString(),10)]])).length?this.iterateComplexColumns(e[n[parseInt(r.toString(),10)]],t+(n[parseInt(r.toString(),10)]+"."),i):(i[this.counter]=t+n[parseInt(r.toString(),10)],this.counter++)},jo.prototype.buildColumns=function(e){for(var t=[],i={},n=(this.iterateComplexColumns(e,"",i),Object.keys(i).filter(function(e){return"BlazId"!==i[""+e]}).map(function(e){return i[""+e]})),r=0,s=n.length;r<s;r++)t[parseInt(r.toString(),10)]={field:n[parseInt(r.toString(),10)]},this.parent.enableColumnVirtualization&&(t[parseInt(r.toString(),10)].width=P.isNullOrUndefined(t[parseInt(r.toString(),10)].width)?200:t[parseInt(r.toString(),10)].width);this.parent.setProperties({columns:t},!0)},jo.prototype.instantiateRenderer=function(){this.renderer.addRenderer(O.RenderType.Header,new Vs(this.parent,this.locator)),this.renderer.addRenderer(O.RenderType.Content,new js(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(O.CellType.Header,new $s(this.parent,this.locator)),e.addCellRenderer(O.CellType.Data,new _s(this.parent,this.locator)),e.addCellRenderer(O.CellType.StackedHeader,new no(this.parent,this.locator)),e.addCellRenderer(O.CellType.Indent,new ao(this.parent,this.locator)),e.addCellRenderer(O.CellType.GroupCaption,new co(this.parent,this.locator)),e.addCellRenderer(O.CellType.GroupCaptionEmpty,new fo(this.parent,this.locator)),e.addCellRenderer(O.CellType.Expand,new vo(this.parent,this.locator)),e.addCellRenderer(O.CellType.HeaderIndent,new Io(this.parent,this.locator)),e.addCellRenderer(O.CellType.StackedHeader,new no(this.parent,this.locator)),e.addCellRenderer(O.CellType.DetailHeader,new Do(this.parent,this.locator)),e.addCellRenderer(O.CellType.RowDragHIcon,new Uo(this.parent,this.locator)),e.addCellRenderer(O.CellType.DetailExpand,new Fo(this.parent,this.locator)),e.addCellRenderer(O.CellType.DetailFooterIntent,new ao(this.parent,this.locator)),e.addCellRenderer(O.CellType.RowDragIcon,new Po(this.parent,this.locator))},jo.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(at,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(ut,this.refresh,this),this.parent.on(Gt,this.refreshComplete,this),this.parent.on(Qt,this.sendBulkRequest,this),this.parent.on(Di,function(){e.emptyGrid=!0},this),this.parent.on(Xt,this.dynamicColumnChange,this))},jo.prototype.validateGroupRecords=function(t){var n=this,e=t.result.length-1;if(e<0)return Promise.resolve(t);function i(e){for(var t=[r,s],i=0;i<t.length;i++)o.push(new A.Predicate("field","==",t[parseInt(i.toString(),10)].field).and(n.getPredicate("key","equal",t[parseInt(i.toString(),10)].key)));e.where(A.Predicate.or(o))}var r=t.result[0],s=t.result[parseInt(e.toString(),10)],o=[],e=new A.Query;i(e);var a=new A.DataManager(t.result).executeLocal(e),e=this.data.generateQuery(!0),l=[];if(this.data.isRemote()){for(var h=[r,s],p=0;p<h.length;p++)l.push(this.getPredicate(h[parseInt(p.toString(),10)].field,"equal",h[parseInt(p.toString(),10)].key));e.where(A.Predicate.or(l))}else i(e);var d=new A.Deferred;return this.data.getData({},e).then(function(e){n.updateGroupInfo(a,e.result),d.resolve(t)}).catch(function(e){return d.reject(e)}),d.promise},jo.prototype.getPredicate=function(e,t,i){return i instanceof Date?kh({field:e,operator:t,value:i}):new A.Predicate(e,t,i)},jo.prototype.updateGroupInfo=function(e,t){for(var i=new A.DataManager(t),n=e,r=0;r<n.length;r++){var s=i.executeLocal((new A.Query).where(new A.Predicate("field","==",n[parseInt(r.toString(),10)].field).and(this.getPredicate("key","equal",n[parseInt(r.toString(),10)].key))))[0];if(!P.isNullOrUndefined(s)){n[parseInt(r.toString(),10)].count=s.count;for(var o=n[parseInt(r.toString(),10)].items,a=s.items,l=(o.GroupGuid&&(n[parseInt(r.toString(),10)].items=this.updateGroupInfo(n[parseInt(r.toString(),10)].items,s.items)),this.parent.aggregates),h=0;h<l.length;h++)for(var p=l[parseInt(h.toString(),10)],d=0;d<p.columns.length;d++)for(var c=p.columns[parseInt(d.toString(),10)],u=c.type instanceof Array?c.type:[c.type],g=0;g<u.length;g++){var f,m,y=c.field+" - "+u[parseInt(g.toString(),10)].toLowerCase(),S=o.level?a.records:s.items,v=this.parent;"Custom"===u[parseInt(g.toString(),10)]?(f=o.level?a:s,"string"==typeof(m=c.customAggregate)&&(m=P.getValue(m,window)),n[parseInt(r.toString(),10)].aggregates[y]=m?m.call(v,f,p.columns[parseInt(d.toString(),10)]):""):n[parseInt(r.toString(),10)].aggregates[y]=A.DataUtil.aggregates[u[parseInt(g.toString(),10)].toLowerCase()](S,p.columns[parseInt(d.toString(),10)].field)}}}return e};var Ho=jo;function jo(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new Nr(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}Go.prototype.addCellRenderer=function(e,t){e="string"==typeof e?e:P.getEnumValue(O.CellType,e),P.isNullOrUndefined(this.cellRenderMap[""+e])&&(this.cellRenderMap[""+e]=t)},Go.prototype.getCellRenderer=function(e){if(e="string"==typeof e?e:P.getEnumValue(O.CellType,e),P.isNullOrUndefined(this.cellRenderMap[""+e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[""+e]};var Vo=Go;function Go(){this.cellRenderMap={}}i.prototype.addEventListener=function(){this.evtHandlers=[{event:Jn,handler:this.closeCustomDialog},{event:Zn,handler:this.refreshCustomFilterOkBtn},{event:er,handler:this.renderResponsiveContextMenu},{event:tr,handler:this.renderCustomFilterDiv},{event:ir,handler:this.customExFilterClose},{event:$n,handler:this.refreshCustomFilterClearBtn}],wp(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(p,this.onActionCompleteFn)},i.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},i.prototype.renderCustomFilterDiv=function(){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),e=e.querySelector(".e-dlg-closeicon-btn"),e=(this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",e.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter"),this.customResponsiveDlg.element.querySelector(".e-dlg-content"));this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),e.appendChild(this.customExcelFilterParent)},i.prototype.renderResponsiveContextMenu=function(e){var t,i,n,r,s;this.action===O.ResponsiveDialogAction.isFilter&&(t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=(n=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content")).querySelector(".e-dlg-closeicon-btn"),n=n.querySelector(".e-dlg-custom-header"),e.isOpen?(t.firstChild.style.display="none",t.appendChild(e.target),i.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header,r=this.parent.createElement("button"),s=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"}),r.appendChild(s),this.backBtn=new B.Button({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(r),n.parentElement.insertBefore(r,n)):this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",P.remove(this.backBtn.element),i.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:O.ResponsiveDialogAction.isFilter},e.col)))},i.prototype.refreshCustomFilterClearBtn=function(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")},i.prototype.refreshCustomFilterOkBtn=function(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=e.disabled)},i.prototype.columnMenuResponsiveContent=function(e,t,i){i=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+e.toLowerCase()+"div"+(i?" e-disabled":"")}),e=this.parent.createElement("span",{className:"e-icons e-res"+e.toLowerCase()+"-icon e-btn-icon"}),t=this.parent.createElement("span",{innerHTML:t,className:"e-rescolumn-menu e-res-header-text"});i.appendChild(e),i.appendChild(t),this.customColumnDiv.appendChild(i)},i.prototype.renderResponsiveContent=function(e,t){var i=this,n=this.parent,r=this.action===O.ResponsiveDialogAction.isColumnChooser;if(e||r)return this.filterParent=this.parent.createElement("div",{className:(r?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(r?"columchooser":e.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=n.createElement("div",{className:"columndiv columnmenudiv",styles:"width: 100%"}),this.parent.showColumnMenu&&"Horizontal"===this.parent.rowRenderingMode&&this.action===O.ResponsiveDialogAction.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",n.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",n.localeObj.getConstant("AutoFit")),t.allowGrouping&&n.allowGrouping&&(this.columnMenuResponsiveContent("Group",n.localeObj.getConstant("Group"),0<=n.groupSettings.columns.indexOf(t.field)),this.columnMenuResponsiveContent("UnGroup",n.localeObj.getConstant("Ungroup"),n.groupSettings.columns.indexOf(t.field)<0)),t.allowSorting&&n.allowSorting){for(var s="None",o=this.parent.sortSettings.columns,a=0;a<o.length;a++)if(o[parseInt(a.toString(),10)].field===t.field){s=o[parseInt(a.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",n.localeObj.getConstant("SortAscending"),"Ascending"===s),this.columnMenuResponsiveContent("descending",n.localeObj.getConstant("SortDescending"),"Descending"===s)}n.showColumnChooser&&this.columnMenuResponsiveContent("Column",n.localeObj.getConstant("Columnchooser")),t.allowFiltering&&n.allowFiltering&&this.columnMenuResponsiveContent("Filter",n.localeObj.getConstant("FilterMenu"))}else{var l=n.getColumns(),h=n.createElement("div",{className:"e-ressortbutton-parent"}),p=[],d=this.action===O.ResponsiveDialogAction.isSort,c=this.action===O.ResponsiveDialogAction.isFilter;if(c)for(a=0;a<n.filterSettings.columns.length;a++)p.push(n.filterSettings.columns[parseInt(a.toString(),10)].field);for(var u,g,f,m,a=0;a<l.length;a++)!l[parseInt(a.toString(),10)].visible||!l[parseInt(a.toString(),10)].allowSorting&&d||!l[parseInt(a.toString(),10)].allowFiltering&&c||((u=n.createElement("div",{className:"e-responsivecoldiv"})).setAttribute("data-e-mappingname",l[parseInt(a.toString(),10)].field),u.setAttribute("data-e-mappinguid",l[parseInt(a.toString(),10)].uid),f=n.createElement("span",{innerHTML:l[parseInt(a.toString(),10)].headerText,className:"e-res-header-text"}),u.appendChild(f),this.customColumnDiv.appendChild(u),d&&(f=this.getSortedFieldsAndDirections("field").indexOf(l[parseInt(a.toString(),10)].field),g=n.createElement("button",{id:n.element.id+l[parseInt(a.toString(),10)].field+"sortbutton"}),(m=h.cloneNode()).appendChild(g),u.appendChild(m),m=void new B.Button({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"}).appendTo(g),P.isNullOrUndefined(this.parent.sortSettings.columns[parseInt(f.toString(),10)])||(m="Ascending"===this.parent.sortSettings.columns[parseInt(f.toString(),10)].direction?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),g.innerHTML=-1<f?m:this.parent.localeObj.getConstant("NoneText"),g.onclick=function(e){i.sortButtonClickHandler(e.target)}),c&&-1<p.indexOf(l[parseInt(a.toString(),10)].field)&&(f=n.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),(m=n.createElement("span",{className:"e-icons e-res-icon e-filterset"})).setAttribute("colType",l[parseInt(a.toString(),10)].type),f.appendChild(m),u.appendChild(f)))}return P.EventHandler.add(this.customColumnDiv,P.Browser.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},i.prototype.getSortedFieldsAndDirections=function(e){for(var t=[],i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[parseInt(i.toString(),10)][""+e]);return t},i.prototype.sortButtonClickHandler=function(e){var t,i,n;e&&(t=E(e,"e-responsivecoldiv").getAttribute("data-e-mappingname"),this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e)),n=(i=(i=e.textContent)===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):i===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"))===this.parent.localeObj.getConstant("AscendingText")?"Ascending":i===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None",e.innerHTML=i,this.setSortedCols(t,n))},i.prototype.resetSortButtons=function(e){for(var t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)]!==e&&(t[parseInt(i.toString(),10)].innerHTML="None")},i.prototype.setSortedCols=function(e,t){var i=this.getCurrentSortedFields().indexOf(e);this.parent.allowMultiSorting&&-1<i&&(this.sortedCols.splice(i,1),this.sortPredicate.splice(i,1)),this.isSortApplied=!0,"None"!==t&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))},i.prototype.getCurrentSortedFields=function(){for(var e=[],t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[parseInt(t.toString(),10)]);return e},i.prototype.customFilterColumnClickHandler=function(e){var t,i,n,r=this.parent,s=e.target;E(s,"columnmenudiv")&&this.action===O.ResponsiveDialogAction.isColMenu&&!E(s,"e-disabled")&&(t=this.menuCol||this.filteredCol,E(s,"e-responsiveautofitalldiv")?(r.autoFitColumns([]),this.closeCustomFilter()):E(s,"e-responsiveautofitdiv")?(r.autoFitColumns(t.field),this.closeCustomFilter()):E(s,"e-responsivegroupdiv")?(r.groupColumn(t.field),this.closeCustomFilter()):E(s,"e-responsiveungroupdiv")?(r.ungroupColumn(t.field),this.closeCustomFilter()):E(s,"e-responsiveascendingdiv")?(r.sortColumn(t.field,"Ascending"),this.closeCustomFilter()):E(s,"e-responsivedescendingdiv")?(r.sortColumn(t.field,"Descending"),this.closeCustomFilter()):E(s,"e-responsivecolumndiv")?(r.notify(kr,{action:5}),r.showResponsiveCustomColumnChooser()):E(s,"e-responsivefilterdiv")&&(r.notify(kr,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,r.filterModule)&&r.filterModule.responsiveDialogRenderer.showResponsiveDialog(t),e.preventDefault()),this.action===O.ResponsiveDialogAction.isFilter&&"FilterBar"!==r.filterSettings.type&&(s.classList.contains("e-responsivecoldiv")||s.parentElement.classList.contains("e-responsivecoldiv")?(i=(i=s.getAttribute("data-e-mappingname"))||s.parentElement.getAttribute("data-e-mappingname"))&&(n=r.getColumnByField(i),this.isRowResponsive=!0,this.showResponsiveDialog(n)):(s.classList.contains("e-filterset")||s.parentElement.classList.contains("e-filtersetdiv"))&&(t=E(s,"e-responsivecoldiv"))&&(i=t.getAttribute("data-e-mappingname"),"Menu"!==(n=r.getColumnByField(i)).filter.type&&(n.filter.type||"Menu"!==r.filterSettings.type)||(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(n),this.removeCustomDlgFilterEle(s)))},i.prototype.showResponsiveDialog=function(e,t){if(this.isCustomDialog&&this.action===O.ResponsiveDialogAction.isFilter&&!this.isRowResponsive||t&&this.action===O.ResponsiveDialogAction.isColMenu)this.menuCol=t,this.renderCustomFilterDialog(null,t);else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===O.ResponsiveDialogAction.isColumnChooser&&this.parent.notify(Mr,{action:"open"}),this.action===O.ResponsiveDialogAction.isSort){t={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(_e,t),t.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element),this.parent.enableAdaptiveUI&&this.parent.filterSettings&&("CheckBox"===this.parent.filterSettings.type||"Excel"===this.parent.filterSettings.type)&&this.parent.filterSettings.enableInfiniteScrolling&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&("CheckBox"===this.parent.filterSettings.type?this.parent.filterModule.filterModule.checkBoxBase:this.parent.filterModule.filterModule.excelFilterBase).showMask()}},i.prototype.setTopToChildDialog=function(e){var t=e.querySelector(".e-dialog");t&&(e=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height,t.style.top=e+"px")},i.prototype.renderCustomFilterDialog=function(e,t){var i,n=this.parent,r=this.action===O.ResponsiveDialogAction.isColMenu;this.action===O.ResponsiveDialogAction.isFilter&&"FilterBar"===n.filterSettings.type||(i=r?"e-customcolumnmenudiv ":"",n=this.parent.createElement("div",{id:n.element.id+(r?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?i+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:i+"e-customfilterdiv e-responsive-dialog"}),this.parent.element.appendChild(n),this.customFilterDlg=this.getDialogOptions(e,!0,null,t),r={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"},this.parent.trigger(_e,r),r.cancel)||(this.customFilterDlg.appendTo(n),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")},i.prototype.getDialogOptions=function(e,t,i,n){n=new L.Dialog({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget||document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e,n),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass||""});return n.isStringTemplate=!0,t?(n.header=this.renderResponsiveHeader(e,void 0,!0),t=this.action===O.ResponsiveDialogAction.isColMenu?"e-customcolumnmenu ":"",n.cssClass=t+"e-customfilter"):(n.header=this.renderResponsiveHeader(e),n.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===O.ResponsiveDialogAction.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),n},i.prototype.renderResponsiveDialog=function(e){var t,i=this.parent;this.action===O.ResponsiveDialogAction.isFilter&&"FilterBar"===i.filterSettings.type||(t=this.action===O.ResponsiveDialogAction.isFilter?"filter":"sort",t=this.action===O.ResponsiveDialogAction.isColumnChooser?"columnchooser":t,i=this.parent.createElement("div",{id:i.element.id+"responsive"+t,className:this.parent.cssClass?"e-res"+t+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+t+"div e-responsive-dialog"}),this.parent.element.appendChild(i),this.customResponsiveDlg=this.getDialogOptions(e,!1,t),this.customResponsiveDlg.appendTo(i))},i.prototype.dialogCreated=function(){Sp(this.parent)},i.prototype.dialogOpen=function(){if(this.action===O.ResponsiveDialogAction.isSort&&this.parent.allowMultiSorting)for(var e=0;e<this.parent.sortSettings.columns.length;e++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(e.toString(),10)].field);var t=this.parent.sortSettings.columns[parseInt(e.toString(),10)].field,i=this.parent.sortSettings.columns[parseInt(e.toString(),10)].direction;this.sortPredicate.push({field:t,direction:i})}},i.prototype.beforeDialogClose=function(e){var t;this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===O.ResponsiveDialogAction.isFilter?(e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),"Horizontal"===this.parent.rowRenderingMode&&this.parent.showColumnMenu&&(this.parent.notify(kr,{action:4}),t=document.querySelector(".e-resfilter"))&&P.remove(t)):this.action===O.ResponsiveDialogAction.isSort?this.closeCustomDialog():this.action===O.ResponsiveDialogAction.isColMenu?(this.closeCustomFilter(),(t=document.querySelector(".e-rescolummenu"))&&P.remove(t)):this.action===O.ResponsiveDialogAction.isColumnChooser&&(this.parent.notify(Mr,{action:"clear"}),(t=document.querySelector(".e-rescolumnchooser"))&&P.remove(t),"Horizontal"===this.parent.rowRenderingMode&&this.parent.showColumnMenu&&this.parent.notify(kr,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1),this.parent.off(or,this.keyHandler)},i.prototype.sortColumn=function(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[parseInt(e.toString(),10)].field,this.sortPredicate[parseInt(e.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting()}this.closeCustomDialog()},i.prototype.getHeaderTitle=function(e,t){var i,n=this.parent;return this.action===O.ResponsiveDialogAction.isEdit?i=n.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===O.ResponsiveDialogAction.isAdd?i=n.localeObj.getConstant("AddFormTitle"):this.action===O.ResponsiveDialogAction.isFilter?i=t?t.headerText||t.field:n.localeObj.getConstant("FilterButton"):this.action===O.ResponsiveDialogAction.isSort?i=n.localeObj.getConstant("Sort"):this.action===O.ResponsiveDialogAction.isColMenu?i=n.localeObj.getConstant("ColumnMenu"):this.action===O.ResponsiveDialogAction.isColumnChooser&&(i=n.localeObj.getConstant("ChooseColumns")),i},i.prototype.getDialogName=function(e){var t;return e===O.ResponsiveDialogAction.isAdd||e===O.ResponsiveDialogAction.isEdit?t="dialogEdit_wrapper_title":e===O.ResponsiveDialogAction.isFilter?t="responsive_filter_dialog_wrapper":e===O.ResponsiveDialogAction.isColumnChooser&&(t="responsive_column_chooser_dialog_wrapper"),t},i.prototype.getButtonText=function(e){var t;return e===O.ResponsiveDialogAction.isAdd||e===O.ResponsiveDialogAction.isEdit?t="Save":e!==O.ResponsiveDialogAction.isFilter&&this.action!==O.ResponsiveDialogAction.isSort&&e!==O.ResponsiveDialogAction.isColumnChooser&&this.action!==O.ResponsiveDialogAction.isColumnChooser||(t="OKButton"),t},i.prototype.renderResponsiveHeader=function(e,t,i){var n=this,r=this.parent,s=(r.on(or,this.keyHandler,this),r.element.id+this.getDialogName(this.action)),o=r.createElement("div",{className:"e-res-custom-element"}),s=r.createElement("div",{className:"e-dlg-custom-header",id:s}),t=(s.innerHTML=this.getHeaderTitle(t,e),o.appendChild(s),r.createElement("button")),e=(i||(this.saveBtn=new B.Button({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),t.innerHTML=r.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(t),t.onclick=function(e){n.dialogHdrBtnClickHandler()}),this.action===O.ResponsiveDialogAction.isSort),a=this.action===O.ResponsiveDialogAction.isFilter;return(a||e)&&(s=e?"sort":"filter",e=r.createElement("button"),this.filterClearBtn=new B.Button({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+s+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+s+"-clear-btn"}),a?(s=r.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"}),e.appendChild(s)):e.innerHTML=r.localeObj.getConstant("Clear"),o.appendChild(e),this.filterClearBtn.appendTo(e),e.onclick=function(e){E(e.target,"e-customfilter")?(n.parent.filterModule.clearFiltering(),n.removeCustomDlgFilterEle()):a?n.filterClear():(n.resetSortButtons(),n.sortedCols=[],n.sortPredicate=[],n.isSortApplied=!0)},o.appendChild(e)),i||o.appendChild(t),o},i.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},i.prototype.removeCustomFilterElement=function(){var e=document.getElementById(this.parent.element.id+"customcolumnmenu"),e=(e&&(P.remove(e),e=document.querySelector(".e-customfilter"))&&P.remove(e),document.querySelector(".e-rescolumnchooser"));e&&P.remove(e)},i.prototype.dialogHdrBtnClickHandler=function(){this.action===O.ResponsiveDialogAction.isEdit||this.action===O.ResponsiveDialogAction.isAdd?this.parent.endEdit():this.action===O.ResponsiveDialogAction.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===O.ResponsiveDialogAction.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===O.ResponsiveDialogAction.isColumnChooser&&(this.parent.notify(Mr,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},i.prototype.closeCustomDialog=function(){var e;this.isCustomDlgRender?(e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv"),P.remove(e)):(this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog())},i.prototype.destroyCustomFilterDialog=function(){var e;this.customResponsiveDlg&&(e=document.getElementById(this.customResponsiveDlg.element.id),this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),P.remove(e)),this.closeCustomFilter(),this.action===O.ResponsiveDialogAction.isSort)&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)},i.prototype.closeCustomFilter=function(){var e;!this.isDialogClose&&this.customFilterDlg&&(e=document.getElementById(this.customFilterDlg.element.id),this.customFilterDlg)&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),P.remove(e)),this.isCustomDialog=!1,this.isDialogClose=!1},i.prototype.removeCustomDlgFilterEle=function(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?P.remove(e.parentElement):P.remove(e);else for(var t=this.customColumnDiv.children,i=0;i<t.length;i++)(e=t[parseInt(i.toString(),10)].querySelector(".e-filtersetdiv"))&&(P.remove(e),i--)},i.prototype.keyHandler=function(e){13===e.keyCode&&(this.action===O.ResponsiveDialogAction.isFilter&&e.target.classList.contains("e-searchinput")||this.action===O.ResponsiveDialogAction.isEdit||this.action===O.ResponsiveDialogAction.isAdd)&&this.dialogHdrBtnClickHandler()},i.prototype.editComplate=function(e){"save"!==e.requestType&&"cancel"!==e.requestType||this.parent.off(or,this.keyHandler)},i.prototype.removeEventListener=function(){this.customColumnDiv&&P.EventHandler.remove(this.customColumnDiv,P.Browser.isDevice?"touchend":"click",this.customFilterColumnClickHandler),wp(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(p,this.onActionCompleteFn)};var _o=i;function i(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}Ko.prototype.register=function(e,t){P.isNullOrUndefined(this.services[""+e])&&(this.services[""+e]=t)},Ko.prototype.getService=function(e){if(P.isNullOrUndefined(this.services[""+e]))throw"The service "+e+" is not registered";return this.services[""+e]},Ko.prototype.registerAdaptiveService=function(e,t,i){t?(e.responsiveDialogRenderer=new _o(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)};var Wo=Ko;function Ko(){this.services={}}Xo.prototype.addRenderer=function(e,t){e=P.getEnumValue(O.RenderType,e);P.isNullOrUndefined(this.rendererMap[""+e])&&(this.rendererMap[""+e]=t)},Xo.prototype.getRenderer=function(e){e=P.getEnumValue(O.RenderType,e);if(P.isNullOrUndefined(this.rendererMap[""+e]))throw"The renderer "+e+" is not found";return this.rendererMap[""+e]};var Qo=Xo;function Xo(){this.rendererMap={}}Jo.prototype.setWidthToColumns=function(){var e,t=0,i=this.parent.getColumnIndexesInView(),n=!0;if(this.parent.allowGrouping)for(var r=this.parent.groupSettings.columns.length;t<r;t++)this.parent.enableColumnVirtualization&&-1===i.indexOf(t)?n=!1:this.setColumnWidth(new Q({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Q({width:"30px"}),t),t++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new Q({width:"30px"}),t),t++);for(var s,o=this.parent.getColumns(),a=0;a<o.length;a++)this.setColumnWidth(o[parseInt(a.toString(),10)],n&&this.parent.enableColumnVirtualization?void 0:a+t);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new Q({width:"30px"}),this.parent.groupSettings.columns.length+o.length),"auto"!==(e=this.getTableWidth(this.parent.getColumns()))&&("auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(e),s=o.filter(function(e){return!P.isNullOrUndefined(e.maxWidth)}),this.parent.allowResizing)&&this.parent.element.getBoundingClientRect().width>e&&s.length===o.length&&P.addClass([this.parent.getHeaderTable(),this.parent.getContentTable()],["e-tableborder"])},Jo.prototype.setMinwidthBycalculation=function(e){var t=this,i=0,n=this.parent.getColumns().filter(function(e){return t.parent.allowResizing?(P.isNullOrUndefined(e.width)||"auto"===e.width)&&P.isNullOrUndefined(e.maxWidth):P.isNullOrUndefined(e.width)||"auto"===e.width});if(n.length){for(var i=P.isNullOrUndefined(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:parseInt(this.parent.width,10)-e,r=0,s=0,o=n;s<o.length;s++){var a=o[s];r+=P.isNullOrUndefined(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l=0;l<n.length;l++){0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&l!==n.length-1&&this.setUndefinedColumnWidth(n);var h=this.parent.getColumnIndexByField(n[parseInt(l.toString(),10)].field)+this.parent.getIndentCount();0!==e&&i<r?this.setWidth(n[parseInt(l.toString(),10)].minWidth,h):0!==e&&r<i&&this.setWidth("",h,!0)}}},Jo.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[parseInt(t.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[parseInt(t.toString(),10)].field)))},Jo.prototype.setColumnWidth=function(e,t,i){var n,r;this.parent.getColumns().length<1||(t=P.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),r=this.getTableWidth(this.parent.getColumns()),null!==n&&(this.setWidth(n,t),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&"auto"!==r&&this.setMinwidthBycalculation(r),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(Bt,{index:t,width:n,column:e,module:i})))},Jo.prototype.setWidth=function(e,t,i){this.parent.groupSettings.columns.length>t&&ep(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");var n=this.parent.getHeaderTable(),r=this.parent.getContentTable(),e=P.formatUnit(e),n=n.querySelector(us).children[parseInt(t.toString(),10)],n=(n&&!i?n.style.width=e:n&&i&&(n.style.width=""),r.querySelector(us).children[parseInt(t.toString(),10)]);if(n&&!i?n.style.width=e:n&&i&&(n.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var s=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),o=[],a=0;a<s.length;a++)if(E(s[parseInt(a.toString(),10)],"e-grid").id===this.parent.element.id)for(var l=0;l<s[parseInt(a.toString(),10)].querySelector("colgroup").children.length;l++)o.push(s[parseInt(a.toString(),10)].querySelector("colgroup").children[parseInt(l.toString(),10)]);s.length&&o.length&&o[parseInt(t.toString(),10)]&&(o[parseInt(t.toString(),10)].style.width=e)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},Jo.prototype.refreshFrozenScrollbar=function(){var e,t,i,n={cancel:!1};this.parent.notify(Kn,n),n.cancel||(n=ph(),e=this.parent.element.querySelector(".e-movablescrollbar"),t=this.parent.getContent().firstElementChild.getBoundingClientRect().width,this.parent.enableColumnVirtualization&&(i=this.parent.getContent().querySelector(".e-virtualtrack"))&&(t=i.scrollWidth),"auto"!==this.parent.height&&(t+=n),e.firstElementChild.style.width=t+"px")},Jo.prototype.getSiblingsHeight=function(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")},Jo.prototype.getHeightFromDirection=function(e,t){for(var i=e[t+"ElementSibling"],n=0,r=[Gr,Wr,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];i;)r.some(function(e){return i.classList.contains(e)})&&(n+=i.offsetHeight),i=i[t+"ElementSibling"];return n},Jo.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter(function(e){return P.isNullOrUndefined(e.width)&&P.isNullOrUndefined(e.minWidth)}).length;return this.parent.getColumns().length===e},Jo.prototype.getWidth=function(e){var t;return this.parent.allowResizing&&P.isNullOrUndefined(e.width)&&(P.isNullOrUndefined(e.minWidth)&&P.isNullOrUndefined(e.maxWidth)&&!this.isWidthUndefined()?e.width=200:e.maxWidth&&(e.width=e.maxWidth)),e.width?(t=parseInt(e.width.toString(),10),e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width):null},Jo.prototype.getTableWidth=function(e){for(var t=0,i=!1,n=0,r=e;n<r.length;n++){var s,o=r[n];!1!==o.visible&&(s=this.getWidth(o),"auto"!==o.width&&o.width||(this.parent.allowResizing?o.maxWidth||(i=!0):s=0),null!==s)&&(t+=parseInt(s.toString(),10))}return t=i?"auto":t},Jo.prototype.setWidthToTable=function(e){var t=P.formatUnit(this.getTableWidth(this.parent.getColumns())),e=((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Q({width:"30px"})),t=this.isAutoResize()||"auto"===t||e?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t,this.parent.element.querySelector(".e-table.e-inline-edit"));e&&(e.style.width=t)},Jo.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode};var Yo=Jo;function Jo(e){this.parent=e}Zo=function(e,t){return(Zo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var Zo,e=function(e,t){function i(){this.constructor=e}Zo(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},$o=(n.prototype.focusCheck=function(e){e=e.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=e.classList.contains("e-grid")},n.prototype.onFocus=function(e){var t;this.parent.isDestroyed||P.Browser.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&e&&e.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show")||(this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows),this.parent.enableHeaderFocus||this.parent.getCurrentViewRecords().length||"Batch"===this.parent.editSettings.mode&&("Batch"!==this.parent.editSettings.mode||!this.parent.editModule||this.parent.editModule.getBatchChanges()[ss].length)||this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new zr({isDataRow:!0})]}),this.getContent().selector,!1),t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator()),this.getContent().matrix.select(t[0],t[1]),!this.skipFocus)||e&&e.target===this.parent.element||(this.focus(e),this.skipFocus=!1)},n.prototype.passiveFocus=function(e){var t;this.parent.isDestroyed||(t=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)"),e.target!==t||!e.relatedTarget||E(e.relatedTarget,"e-grid")||this.firstHeaderCellClick||(0===this.active.matrix.matrix[(t=[0,0])[0]][t[1]]&&(t=Mp(this.active.matrix.matrix,t,!0)),this.active.matrix.current=t,this.currentInfo.element=e.target,this.currentInfo.elementToFocus=e.target,this.currentInfo.element.querySelector(".e-checkselectall")?(this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)):P.addClass([this.currentInfo.element],["e-focused","e-focus"])),this.firstHeaderCellClick=!1,e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,P.addClass([this.currentInfo.element],["e-focused","e-focus"])))},n.prototype.onBlur=function(e){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var t=!(!E(e.target,"e-gantt")||!e.target.classList.contains("e-rowcell")||P.isNullOrUndefined(e.target.nextElementSibling)||!e.target.nextElementSibling.classList.contains("e-rowcell"));(!this.parent.isEdit&&(!e||e.relatedTarget&&!P.closest(e.relatedTarget,".e-grid")||this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within"))||!t&&P.isNullOrUndefined(e.relatedTarget)&&0===parseInt(e.target.getAttribute("data-colindex"),10)&&0===parseInt(e.target.getAttribute("index"),10)||!t&&P.isNullOrUndefined(e.relatedTarget)&&!P.closest(document.activeElement,".e-grid")&&!P.isNullOrUndefined(e.sourceCapabilities))&&(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},n.prototype.setFirstFocusableTabIndex=function(){var e,t,i=this.parent;i.element.tabIndex=-1,i.allowGrouping&&i.groupSettings.showDropArea?0<(e=(t=i.groupModule).getFocusableGroupedItems()).length?(t.element.tabIndex=-1,e[0].tabIndex=0):t.element.tabIndex=0:i.toolbar||i.toolbarTemplate?(e=i.toolbarModule.element,0<(t=this.parent.toolbarModule.getFocusableToolbarItems()).length&&t[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")?(e.tabIndex=-1,t[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0):e.tabIndex=0):i.getColumns().length&&(i.getHeaderContent().querySelector(".e-headercell:not(.e-hide)").tabIndex=0,this.setActive(!1),P.isNullOrUndefined(this.active)||!P.isNullOrUndefined(this.active.target)&&this.active.target.classList.contains("e-columnmenu")||(0===this.active.matrix.matrix[(t=[0,0])[0]][t[1]]&&(t=Mp(this.active.matrix.matrix,t,!0)),this.active.matrix.current=t))},n.prototype.setLastContentCellTabIndex=function(){var e=this.parent.getContentTable();e.rows[e.rows.length-1]&&(e.rows[e.rows.length-1].lastElementChild.tabIndex=0)},n.prototype.onClick=function(e,t){var i,n;E(e.target,"e-filterbarcell")&&(E(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon"))||(n=!P.isNullOrUndefined(P.closest(e.target,"."+_r)),i=!P.isNullOrUndefined(P.closest(e.target,"."+Gr)),!(n=n&&i?!n:n)&&P.isNullOrUndefined(P.closest(e.target,"."+Gr)))||e.target.classList.contains(Zr)||!P.isNullOrUndefined(P.closest(e.target,".e-unboundcell"))&&!t||(this.setActive(n),i={cancel:!1,byKey:!1,byClick:!P.isNullOrUndefined(e.target),clickArgs:e},this.parent.notify(Ft,i),i.cancel)||P.closest(e.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow")||(this.setActive(n),this.getContent()&&!1!==this.getContent().onClick(e,t)&&(this.focus(),this.currentInfo.element.classList.contains("e-rowcell"))&&e.type&&"click"===e.type&&P.addClass([this.currentInfo.element],["e-focused","e-focus"]))},n.prototype.handleFilterNavigation=function(e,t,i){e.target===document.querySelector(t)&&"Tab"===e.key&&e.shiftKey?(e.preventDefault(),document.querySelector(i).focus()):e.target!==document.querySelector(i)||"Tab"!==e.key||e.shiftKey||document.activeElement!==document.querySelector(i)||(e.preventDefault(),document.querySelector(t).focus())},n.prototype.onKeyPress=function(e){if("Batch"===this.parent.editSettings.mode&&(this.content.target=null),this.parent.allowPaging){var t=this.parent.pagerModule.pagerObj.element,t=this.parent.pagerModule.pagerObj.getFocusablePagerElements(t,[]);if(this.parent.childGrid&&!E(e.target,"e-gridpager")&&this.allowToPaging(e)&&t.length&&(t[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if("shiftTab"===e.action&&t.length&&t[0]===e.target)return this.setActive(!0),o=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1],0===this.active.matrix.matrix[o[0]][o[1]]&&(o=Mp(this.active.matrix.matrix,o,!1)),this.active.matrix.current="Batch"!==this.parent.editSettings.mode||this.isValidBatchEditCell(o)?o:this.findBatchEditCell(o,!1),e.preventDefault(),void this.focus(e);if("tab"!==e.action||!this.parent.element.classList.contains("e-childgrid")||(this.parent.pageSettings.pageSizes||!t.length||t[t.length-1]!==e.target)&&this.parent.pagerModule.pagerObj.getDropDownPage()!==e.target)return void this.parent.pagerModule.pagerObj.changePagerFocus(e);t=E(this.parent.element,"e-detailcell");P.removeClass([this.parent.element],["e-focus"]),P.removeClass([t],["e-focused"]),t.tabIndex=-1}if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===e.keyCode||e.shiftKey&&9===e.keyCode))return e.preventDefault(),void this.focus(e);if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===e.keyCode)return e.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();this.parent.pagerModule.pagerObj.checkFirstPagerFocus()&&(t=this.getContent().matrix.rows,i=this.getContent().matrix.columns,this.getContent().matrix.current=[t,i])}if("Excel"===this.parent.filterSettings.type&&this.handleFilterNavigation(e,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),"CheckBox"===this.parent.filterSettings.type&&this.handleFilterNavigation(e,".e-searchinput.e-input",".e-checkboxfilter .e-footer-content button:nth-child(2)"),"Menu"===this.parent.filterSettings.type&&this.handleFilterNavigation(e,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),!this.skipOn(e)){if(e.target&&E(e.target,"e-gridcontent")&&(i=(t=[].slice.call(this.parent.getContentTable().rows))[t.length-1].lastElementChild,e.target===i)&&(this.setActive(!0),this.setLastContentCellActive()),"shiftTab"===e.action&&e.target&&(e.target===this.parent.element||E(e.target,"e-toolbar")||E(e.target,"e-groupdroparea"))){if(e.target===this.parent.element)return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e));if(E(e.target,"e-groupdroparea"))return void(this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus()));if(E(e.target,"e-toolbar"))return void(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea?(n=(r=this.parent.groupModule).getFocusableGroupedItems(),e.preventDefault(),(0<n.length?n[n.length-1]:r.element).focus()):this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus()))}t=!1;if("tab"===e.action&&e.target&&(e.target===this.parent.element||E(e.target,"e-toolbar")||E(e.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(e.target===this.parent.element||e.target.classList.contains("e-groupdroparea"))){if(0<(n=(r=this.parent.groupModule).getFocusableGroupedItems()).length)return e.preventDefault(),void n[0].focus();if(!e.target.classList.contains("e-groupdroparea"))return e.preventDefault(),void r.element.focus()}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(e.target===this.parent.element||E(e.target,"e-groupdroparea")||e.target.classList.contains("e-toolbar"))){var i=this.parent.toolbarModule.element,n=this.parent.toolbarModule.getFocusableToolbarItems();if(0<n.length)return e.preventDefault(),void n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();if(!e.target.classList.contains("e-toolbar"))return e.preventDefault(),void i.focus()}(e.target===this.parent.element||E(e.target,"e-toolbar")||E(e.target,"e-groupdroparea"))&&(t=!0)}t&&(this.parent.allowGrouping&&!P.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=e.action;var r={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(Ft,r),!r.cancel){var s,n=this.getContent().matrix.current,i=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0,r=(this.currentInfo.outline=!0,this.getContent().jump(e.action,n)),r=((this.swap=r).swap&&("Batch"!==this.parent.editSettings.mode||"tab"!==e.action&&"shiftTab"!==e.action)&&(this.setActive(!r.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(n,r,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!this.content.lastIdxCell&&this.getContent().onKeyPress(e));if(e.target&&E(e.target,"e-gridheader"))if("tab"===e.action&&n.toString()===this.active.matrix.current.toString()&&(s=Mp(this.active.matrix.matrix,this.active.matrix.current,!0),o=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1],0===this.active.matrix.matrix[o[0]][o[1]]&&(o=Mp(this.active.matrix.matrix,o,!1)),this.active.matrix.current.toString()===o.toString()&&this.content.matrix.matrix.length?(this.setActive(r=!0),a=[0,0],this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),0===this.active.matrix.matrix[a[0]][a[1]]&&(a=Mp(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current="Batch"!==this.parent.editSettings.mode||this.isValidBatchEditCell(a)?a:this.findBatchEditCell(a,!0)):this.active.matrix.current.toString()!==s.toString()&&(this.active.matrix.current=s)),"shiftTab"===e.action&&n.toString()===this.active.matrix.current.toString()){var o=Mp(this.active.matrix.matrix,this.active.matrix.current,!1);if(o.toString()===this.active.matrix.current.toString())return void this.focusOutFromHeader(e);this.active.matrix.current.toString()===o.toString()||r||(r=!0,this.active.matrix.current=o)}if(e.target&&E(e.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),"Batch"!==this.parent.editSettings.mode||"tab"!==e.action&&"shiftTab"!==e.action||(this.active.matrix.current=this.findBatchEditCell(i,"tab"===e.action),"tab"===e.action&&i.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),"shiftTab"===e.action)&&n.toString()===this.active.matrix.current.toString()){if(this.parent.allowGrouping&&!P.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length)return void this.focusOutFromHeader(e);var a=[0,0];0===this.active.matrix.matrix[a[0]][a[1]]&&(a=Mp(this.active.matrix.matrix,[0,0],!0)),r||a.toString()!==this.active.matrix.current.toString()&&("Batch"!==this.parent.editSettings.mode||i.toString()!==this.active.matrix.current.toString())||(this.setActive(!(r=!0)),this.setLastContentCellActive())}if(!1===r){if(this.clearIndicator(),"shiftTab"===e.action&&n.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&n.toString()!==[0,0].toString()){if(e.preventDefault(),40===e.keyCode)return void this.parent.pagerModule.pagerObj.setPagerContainerFocus();if(9===e.keyCode)return void this.parent.pagerModule.pagerObj.setPagerFocus()}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e)}else t&&E(this.active.getTable(),"e-gridheader")&&e.target&&e.target.id===this.parent.element.id+"_searchbar"&&(this.parent.searchModule.headerFocus=!0),e.preventDefault(),this.focus(e)}}},n.prototype.isValidBatchEditCell=function(e){var t=this.active.getTable().rows[e[0]].cells[e[1]],i=P.closest(t,"tr"),t=parseInt(t.getAttribute("data-colindex"),10),t=this.parent.getColumns()[parseInt(t.toString(),10)];return!(1!==this.active.matrix.matrix[e[0]][e[1]]||i.classList.contains("e-row")&&(!i.classList.contains("e-insertedrow")&&t.isPrimaryKey||!t.allowEditing))},n.prototype.findBatchEditCell=function(e,t,i){for(var n=e,r=e,s=!1;!s;){var o=r,r=Mp(this.active.matrix.matrix,r,t);o.toString()===r.toString()||i&&o[0]!==r[0]?s=!0:this.isValidBatchEditCell(r)&&(n=r,s=!0)}return n},n.prototype.setLastContentCellActive=function(){var e=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];0===this.active.matrix.matrix[e[0]][e[1]]&&(e=Mp(this.active.matrix.matrix,e,!1)),this.active.matrix.current=e},n.prototype.focusOutFromChildGrid=function(e){var t,i=E(this.parent.element,"e-table"),n=E(i,"e-grid").ej2_instances[0],i=E(this.parent.element,"e-detailcell"),r=E(this.parent.element,"e-detailrow").getAttribute("data-uid"),s=[].slice.call(n.getContentTable().rows),o=s.map(function(e){return e.getAttribute("data-uid")}).indexOf(r);if(!("tab"===e.action&&o>=s.length-1)){if(P.removeClass([this.parent.element],["e-focus"]),P.removeClass([i],["e-focused"]),i.tabIndex=-1,e.preventDefault(),n.focusModule.removeFocus(),"shiftTab"===e.action){for(var a=s[o-1].cells,l=a.length-1;0<=l;l--)if(!(t=a[parseInt(l.toString(),10)]).classList.contains("e-hide")){n.focusModule.active.matrix.current=[o-1,l];break}}else t=s[o+1].cells[0],n.focusModule.active.matrix.current=[o+1,0];n.focusModule.currentInfo.element=t,n.focusModule.currentInfo.elementToFocus=t,P.addClass([t],["e-focused","e-focus"]),t.tabIndex=0,t.focus()}},n.prototype.focusOutFromHeader=function(e){var t,i;this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate?(i=this.parent.toolbarModule.element,t=this.parent.toolbarModule.getFocusableToolbarItems(),e.preventDefault(),(0<t.length?t[t.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input"):i).focus()):this.parent.allowGrouping&&this.parent.groupSettings.showDropArea?(i=(t=this.parent.groupModule).getFocusableGroupedItems(),e.preventDefault(),(0<i.length?i[i.length-1]:t.element).focus()):this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus())},n.prototype.allowToPaging=function(e){return"Batch"!==this.parent.editSettings.mode||!this.parent.editSettings.allowAdding||40===e.keyCode},n.prototype.skipOn=function(e){var t=e.target;if(!t)return!1;if(!this.parent.isEdit&&t&&t.closest(".e-unboundcell")&&this.currentInfo.skipAction&&("shiftTab"===e.action&&this.commandColumnFocusElement(t.closest(".e-unboundcell"),!1)===t||"tab"===e.action&&this.commandColumnFocusElement(t.closest(".e-unboundcell"),!0)===t))return this.currentInfo.skipAction=!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(-1<["pageUp","pageDown","altDownArrow"].indexOf(e.action))return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(E(e.target,"e-groupheadercell")&&!(e.target===i[0]&&"shiftTab"===e.action||e.target===i[i.length-1]&&"tab"===e.action))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){i=this.parent.toolbarModule.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(E(e.target,"e-toolbar-item")&&!(0<i.length&&(E(e.target,"e-toolbar-item")===i[0]&&"shiftTab"===e.action||E(e.target,"e-toolbar-item")===i[i.length-1]&&"tab"===e.action)))return!0}var n,r,s,i=P.closest(t,"th")&&!P.closest(t,"th").tabIndex,o=(!e.target.classList.contains("e-filterbaroperator")||13!==e.keyCode&&27!==e.keyCode||(s=P.closest(e.target,".e-filterbarcell")).querySelector("input").focus(),this.parent.editSettings.showAddNewRow&&null!==P.closest(document.activeElement,".e-addedrow")),i=((i&&null!==P.closest(document.activeElement,".e-filterbarcell")||o)&&this.removeFocus(),null!==P.closest(document.activeElement,".e-filterbarcell"));return this.parent.enableHeaderFocus&&i&&(r=(n=this.active.matrix).current,i=n.matrix[r[0]].lastIndexOf(1)!==r[1]),!this.parent.isEdit||"tab"!==e.action&&"shiftTab"!==e.action||"Normal"!==this.parent.editSettings.mode||this.parent.editSettings.showAddNewRow||P.isNullOrUndefined(E(t,"e-addedrow"))||(n=this.parent.editModule.formObj.element.querySelectorAll("input.e-field:not(.e-disabled),button:not(.e-hide)"),s=t.classList.contains("e-ddl")?t.querySelector("input"):t,r="tab"===e.action&&s===n[n.length-1],s="shiftTab"===e.action&&s===n[0],(r||s)&&(e.preventDefault(),(s=(s=n[r?0:n.length-1]).parentElement.classList.contains("e-ddl")?s.parentElement:s).focus())),"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!P.isNullOrUndefined(this.parent.element.querySelector(".e-editedrow"))||!P.isNullOrUndefined(E(t,"e-addedrow"))&&!P.isNullOrUndefined(P.closest(e.target,"input"))&&!P.isNullOrUndefined(document.querySelector(".e-popup-open"))||!P.isNullOrUndefined(E(t,"e-addedrow"))&&t&&!t.querySelector(".e-cancel-icon")&&!P.isNullOrUndefined(E(t,"e-unboundcell"))))||-1<["insert","f2"].indexOf(e.action))||i&&this.parent.enableHeaderFocus||(i||o)&&"tab"!==e.action&&"shiftTab"!==e.action||null!==P.closest(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&-1<["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)||null===P.closest(t,"."+_r)&&null===P.closest(t,"."+Gr)&&!(e.target===this.parent.element||E(e.target,"e-toolbar")||E(e.target,"e-groupdroparea"))||"space"===e.action&&!t.classList.contains(es)&&null===P.closest(t,"."+es)&&null===P.closest(t,".e-headerchkcelldiv")||null!==P.closest(t,".e-filter-popup")},n.prototype.focusVirtualElement=function(e){var t,i,n,r=this;(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(this.parent.notify(yn,t={virtualData:{},isAdd:!1,isCancel:!1}),i=this.actions.some(function(e){return e===r.activeKey}),n=!!this.parent.contentModule&&-1<this.parent.contentModule.selectedRowIndex,t.isAdd||Object.keys(t.virtualData).length||i||t.isCancel||n?(this.parent.notify(ur,{isCancel:!1}),t.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,i&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()),this.isVirtualScroll=this.isInfiniteScroll=!1},n.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},n.prototype.getContent=function(){return this.active||this.content},n.prototype.setActive=function(e){this.active=e?this.content:this.header},n.prototype.setFocusedElement=function(e,t){var i=this;this.currentInfo.elementToFocus=e,setTimeout(function(){P.isNullOrUndefined(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(t):!P.isNullOrUndefined(i.parent.element.querySelector(".e-flmenu"))&&E(document.activeElement,"e-flmenu-valuediv")===i.parent.element.querySelector(".e-flmenu-valuediv")||i.currentInfo.elementToFocus.focus())},0)},n.prototype.focus=function(e){this.parent.notify(hn,e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},n.prototype.removeFocus=function(e){var t;this.currentInfo.element&&(!this.parent.isReact||this.parent.isEdit||!this.currentInfo.element.classList.contains("e-rowcell")||this.currentInfo.element.parentElement||this.parent.allowGrouping&&!P.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length||!this.parent.getRowByIndex(this.prevIndexes.rowIndex)||(t=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex),this.currentInfo.element=t||this.currentInfo.element),P.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},n.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(P.addClass([e.element],["e-focused"]),P.addClass([e.elementToFocus],["e-focus"]))},n.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},n.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},n.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},n.prototype.addFocus=function(e,t){var i;this.currentInfo=e,this.currentInfo.outline=e.outline&&(!P.isNullOrUndefined(t)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!e.element||(i=e.elementToFocus.classList.contains("e-focus"))||(this.currentInfo.outline&&P.addClass([e.element],["e-focused"]),P.addClass([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(kt,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!P.isNullOrUndefined(t),byClick:P.isNullOrUndefined(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!P.isNullOrUndefined(t),swapInfo:this.swap}),e=(i=this.getContent().matrix.current)[0],t=i[1],this.prevIndexes={rowIndex:e,cellIndex:t},this.focusedColumnUid=this.parent.getColumnByIndex(t).uid,this.focusByClick=!1)},n.prototype.refreshMatrix=function(c){var u=this;return function(e){c&&!u.content&&(u.content=new ia(u.parent)),c||u.header||(u.header=new sa(u.parent));var t=c?u.content:u.header,i=0;if((n=u.parent.frozenRows)&&"Batch"===u.parent.editSettings.mode&&(i=u.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+u.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),!P.isNullOrUndefined(u.parent.groupSettings.columns)&&u.parent.groupSettings.columns.length&&n&&c){for(var n=0,r=0;r<e.rows.length&&(n++,e.rows[parseInt(r.toString(),10)].index+1!==u.parent.frozenRows);r++);u.groupedFrozenRow=n}var s,o,a,l=c?e.rows.slice(n+i):e.rows,i=c?e.rows.slice(0,n+i):e.rows,h=(u.parent.isCollapseStateEnabled()&&c&&(l=l.filter(function(e){return!1!==e.visible})),!P.isNullOrUndefined(u.parent.rowTemplate)),p=(n&&("Batch"===u.parent.editSettings.mode&&c&&("batchDelete"===e.name||"batchAdd"===e.name||"batchCancel"===e.name||e.args&&"batchsave"===e.args.requestType)||e.args&&("delete"===e.args.requestType||"save"===e.args.requestType))&&(p=u.header.matrix.matrix,d=u.parent.headerModule.rows.length,p.splice(d,p.length-d)),t.matrix.generate(i,t.selector,h)),d=(t.matrix.generate(l,t.selector,h),u.parent.enableVirtualization||u.parent.enableInfiniteScrolling);u.parent.editSettings.showAddNewRow&&c&&u.header&&u.header.matrix&&(!d||u.parent.isAddNewRow)&&(l=u.header.matrix.matrix,h=u.parent.allowFiltering&&"FilterBar"===u.parent.filterSettings.type?2:1,t.matrix.rows=u.parent.frozenRows&&"Top"===u.parent.editSettings.newRowPosition?t.matrix.rows:++t.matrix.rows,"Top"===u.parent.editSettings.newRowPosition?(u.parent.frozenRows||d?p:t.matrix.matrix).unshift(u.refreshAddNewRowMatrix(l[l.length-h])):t.matrix.matrix.push(u.refreshAddNewRowMatrix(l[l.length-h])),u.parent.isAddNewRow=!1),(!u.parent.isFrozenGrid()||!e.args||"sorting"!==e.args.requestType&&"batchsave"!==e.args.requestType&&"paging"!==e.args.requestType||n&&"Batch"===u.parent.editSettings.mode&&c&&("batchDelete"===e.name||"batchAdd"===e.name||"batchCancel"===e.name||"batchsave"===e.args.requestType))&&t.generateRows(i,{matrix:p,handlerInstance:u.header}),!P.Browser.isDevice&&e&&e.args&&(u.focusByClick||"paging"!==e.args.requestType||u.parent.pagerModule.pagerObj.checkPagerHasFocus()||(u.skipFocus=!1,u.parent.element.focus()),"grouping"===e.args.requestType)&&(u.skipFocus=!0),e&&e.args&&"virtualscroll"===e.args.requestType&&(u.currentInfo.uid?e.rows.some(function(e,t){return s=t,e.uid===u.currentInfo.uid})&&(u.content.matrix.current[0]=s,u.content.matrix.current[1]=u.parent.getColumnIndexByUid(u.focusedColumnUid)||0,d=u.parent.getVisibleFrozenLeftCount(),l=u.parent.getVisibleFrozenRightCount(),!u.parent.enableColumnVirtualization||d&&l||!u.parent.isFrozenGrid()||"right"!==e.args.virtualInfo.direction||(u.content.matrix.current[1]=u.content.matrix.current[1]-(d+(l?l+1:0))),(h=!(!u.parent.allowGrouping||!u.parent.groupSettings.columns.length))&&(u.content.matrix.current[1]=u.prevIndexes.cellIndex,u.virtualSelectionInfo.isPending)&&(u.content.matrix.current[0]="downArrow"===u.virtualSelectionInfo.direction?u.content.matrix.current[0]+1:u.content.matrix.current[0]-1),a=u.getContent().getFocusInfo().elementToFocus)&&(t=a.getBoundingClientRect(),i=u.parent.element.getBoundingClientRect(),o=p=0,!u.parent.enableColumnVirtualization||d&&l||!u.parent.isFrozenGrid()||"right"!==e.args.virtualInfo.direction||(d?p=u.parent.leftrightColumnWidth("left"):o=u.parent.leftrightColumnWidth("right")),0<=t.top&&0<=t.left&&t.right-p-o<=Math.min(i.right,window.innerWidth||document.documentElement.clientWidth)+o&&t.bottom<=Math.min(i.bottom,window.innerHeight||document.documentElement.clientHeight)||h)&&(u.isVirtualScroll=!0,u.focus(h&&u.virtualSelectionInfo.isPending?u.virtualSelectionInfo.event:void 0)):e.args.focusElement&&e.args.focusElement.classList.contains("e-filtertext")&&(a=u.parent.element.querySelector("#"+e.args.focusElement.id))&&a.focus(),u.virtualSelectionInfo={}),e&&e.args&&"infiniteScroll"===e.args.requestType&&(u.isInfiniteScroll=!0)}},n.prototype.refreshAddNewRowMatrix=function(e){for(var t=this.parent.getColumns(),i=this.parent.getIndentCount(),n=i;n<e.length-1;n++)t[n-i]&&t[n-i].visible&&t[n-i].allowEditing?e[parseInt(n.toString(),10)]=1:e[parseInt(n.toString(),10)]=0;return e},n.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(P.EventHandler.add(this.parent.element,"mousedown",this.focusCheck,this),P.EventHandler.add(this.parent.element,"touchstart",this.focusCheck,this),P.EventHandler.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(e){return t.passiveFocus(e)},!0),P.EventHandler.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Mt,handler:this.onKeyPress},{event:Lt,handler:this.onClick},{event:pt,handler:this.refMatrix},{event:Xi,handler:this.refMatrix},{event:rr,handler:this.refMatrix},{event:Lr,handler:this.showAddNewRowFocus},{event:ft,handler:this.refreshMatrix()},{event:cr,handler:this.restoreFocus},{event:on,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"custom-filter-close",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:Fe,handler:this.refMatrix},{event:ke,handler:this.refMatrix},{event:Me,handler:this.refMatrix},{event:Oe,handler:this.refMatrix},{event:dt,handler:this.refMatrix},{event:kt,handler:this.internalCellFocus}],wp(this.parent,this.evtHandlers,!0,this))},n.prototype.showAddNewRowFocus=function(){var e,t,i;this.parent.editSettings.showAddNewRow&&(e="Top"===this.parent.editSettings.newRowPosition?0:this.content.matrix.matrix.length-1,t=this.parent.getIndentCount(),"Top"===this.parent.editSettings.newRowPosition&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(i=this.header.matrix.matrix.length-(this.groupedFrozenRow||this.parent.frozenRows),t=this.findNextCellFocus(this.header.matrix.matrix[i-1],t),this.header.matrix.current=[i-1,t],this.active=this.header):(t=this.findNextCellFocus(this.content.matrix.matrix[parseInt(e.toString(),10)],t),this.content.matrix.current=[e,t],this.active=this.content),i=this.parent.element.querySelector(".e-addedrow"))&&i.querySelectorAll("tr")&&i.querySelector("tr").cells[parseInt(t.toString(),10)].querySelector("input")&&i.querySelector("tr").cells[parseInt(t.toString(),10)].querySelector("input").select()},n.prototype.findNextCellFocus=function(e,t){for(var i=t;i<e.length;i++)if(1===e[parseInt(i.toString(),10)])return i;return t},n.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},n.prototype.removeEventListener=function(){this.parent.isDestroyed||(P.EventHandler.remove(this.parent.element,"mousedown",this.focusCheck),P.EventHandler.remove(this.parent.element,"touchstart",this.focusCheck),P.EventHandler.remove(this.parent.element,"focus",this.onFocus),P.EventHandler.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),wp(this.parent,this.evtHandlers,!1))},n.prototype.destroy=function(){this.removeEventListener()},n.prototype.restoreFocus=function(){var e=this.parent.groupModule;this.parent.allowGrouping&&e&&(e.groupSortFocus||e.groupTextFocus)?(e.groupSortFocus=!1,e.groupTextFocus=!1):(this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo()))},n.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling){var t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||P.isNullOrUndefined(t.matrix[i[0]])?"grouping"===e.requestType?i[1]+1:i[1]-1:t.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i,this.prevIndexes={rowIndex:i[0],cellIndex:i[1]};var n,r=this.parent.groupModule;this.parent.allowGrouping&&r&&r.groupCancelFocus?(((n=r.getFocusableGroupedItems()).length?n[0].parentElement.getAttribute("ej-mappingname")===e.columnName?n[3]:n[0]:r.element).focus(),r.groupCancelFocus=!1):this.addFocus(this.getContent().getFocusInfo())}},n.prototype.clearIndicator=function(){this.currentInfo.element&&this.currentInfo.elementToFocus&&P.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},n.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},n.prototype.forgetPrevious=function(){this.forget=!0},n.prototype.setActiveByKey=function(e,t){var i,n;0!==this.parent.frozenRows&&e in(n={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}})&&(i=t.getInfo(),n=n[""+e](),this.setActive(!n.toHeader),this.getContent().matrix.current=t.matrix.current)},n.prototype.internalCellFocus=function(e){e.byKey&&e.container.isContent&&("enter"===e.keyArgs.action&&e.parent.classList.contains("e-detailcell")||("tab"===e.keyArgs.action||"shiftTab"===e.keyArgs.action)&&e.parent.classList.contains("e-unboundcell"))&&(this.clearIndicator(),e=e.parent&&e.parent.closest(".e-unboundcell")&&"shiftTab"===e.keyArgs.action?this.commandColumnFocusElement(e.parent,!0):this.getContent().getFocusable(this.getFocusedElement()),this.setFocusedElement(e),this.currentInfo.skipAction=!0)},n.prototype.commandColumnFocusElement=function(e,t){e=e.querySelectorAll("button:not(.e-hide)");return t?e[e.length-1]:e[0]},n);function n(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.virtualSelectionInfo={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.groupedFrozenRow=0,this.parent=e,this.rowModelGen=new Ds(this.parent),this.addEventListener()}ta.prototype.set=function(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[parseInt(e.toString(),10)]=this.matrix[parseInt(e.toString(),10)]||[],this.matrix[parseInt(e.toString(),10)][parseInt(t.toString(),10)]=i?1:0},ta.prototype.get=function(e,t,i,n,r){var s=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));var o=!0;if(P.isNullOrUndefined(this.matrix[parseInt(e.toString(),10)]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[parseInt(e.toString(),10)].length-1)),s+i[1]>this.matrix[parseInt(e.toString(),10)].length-1&&r(e,t,n))return[e,s];var a=this.first(this.matrix[parseInt(e.toString(),10)],t,i,!0,n),l=P.getValue(e+"."+(t=null===a?s:a),this.matrix);if(e!==this.rows||"downArrow"!==n&&"enter"!==n||(i[0]=-1),null===a){for(var h=0;h<this.rows;h++)if(this.matrix[parseInt(h.toString(),10)].some(function(e){return 1===e})){o=!1;break}if(o)return[e=this.current.length?this.current[0]:0,t]}return this.inValid(l)||!r(e,t,n)?this.get(e,s,i,n,r):[e,t]},ta.prototype.first=function(e,t,i,n,r){return(t<0||t===e.length)&&this.inValid(e[parseInt(t.toString(),10)])&&"upArrow"!==r&&"downArrow"!==r||!e.some(function(e){return 1===e})?null:this.inValid(e[parseInt(t.toString(),10)])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(r)?n?0:++t:t+i[1],i,!1,r):t},ta.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[parseInt(e.toString(),10)].length-1)),this.current=[e,t]},ta.prototype.generate=function(e,t,i){this.rows=e.length-1,this.matrix=[];for(var n=0;n<e.length;n++){for(var r=e[parseInt(n.toString(),10)].cells.filter(function(e){return!0!==e.isSpanned}),s=(this.columns=Math.max(r.length-1,0|this.columns),0),o=0;o<r.length;o++)r[parseInt(o.toString(),10)].column&&r[parseInt(o.toString(),10)].column.columns?s=this.columnsCount(r[parseInt(o.toString(),10)].column.columns,s):s++,this.set(n,o,!1!==e[parseInt(n.toString(),10)].visible&&t(e[parseInt(n.toString(),10)],r[parseInt(o.toString(),10)],i));this.columns=Math.max(s-1,0|this.columns)}return this.matrix},ta.prototype.columnsCount=function(e,t){for(var i=e,n=t,r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns?n=this.columnsCount(i[parseInt(r.toString(),10)].columns,n):n++;return n},ta.prototype.inValid=function(e){return 0===e||void 0===e};var ea=ta;function ta(){this.matrix=[],this.current=[]}na.prototype.getTable=function(){return this.parent.getContentTable()},na.prototype.onKeyPress=function(e){if(/(Mac)/i.test(navigator.platform)&&e.metaKey)if("home"===e.action)e.action="ctrlHome";else if("end"===e.action)e.action="ctrlEnd";else if(-1!==["downArrow","upArrow","leftArrow","rightArrow"].indexOf(e.action))return;var t=this.keyActions[e.action],t=this.getCurrentFromAction(e.action,t,e.action in this.keyActions,e);if(t){if((-1<["tab","shiftTab"].indexOf(e.action)&&this.matrix.current||[]).toString()===t.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===e.keyCode||40===e.keyCode)){if(t.toString()===[this.matrix.rows,this.matrix.columns].toString()||t.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===t.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&t.toString()===[0,1].toString())return!1;t=this.editNextRow(t[0],t[1],e.action)}this.matrix.select(t[0],t[1])}},na.prototype.editNextRow=function(e,t,i){var n=this.parent,r=n.editSettings.allowNextRowEdit&&(n.isEdit||n.isLastCellPrimaryKey),s=n.getColumnIndexByField(n.getVisibleColumns()[0].field),o=this.getTable().rows[parseInt(e.toString(),10)],o=(n.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)"):o.cells)[parseInt(t.toString(),10)];return"tab"===i&&r&&(e++,t=s+(this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&r&&(e--,t=n.getColumnIndexByField(n.getVisibleColumns()[n.getVisibleColumns().length-1].field)),o.classList.contains(b)||o.classList.contains("e-headercell")||o.classList.contains("e-groupcaption")||o.classList.contains("e-filterbarcell")?[e,t]:this.editNextRow(e,t,i)},na.prototype.getCurrentFromAction=function(e,t,i,n){if(void 0===t&&(t=[0,0]),!i&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(n))return this.matrix.current;var i=this.indexesByKey(e)||this.matrix.current.concat(t),r=i[0],s=i[1],n=i[2],t=i[3];if(this.parent.allowGrouping&&!P.isNullOrUndefined(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&"enter"===e)for(var o=r;o<this.matrix.matrix.length;o++){var a=this.getTable().rows[o+1];if(a&&a.cells[parseInt(s.toString(),10)]&&a.cells[parseInt(s.toString(),10)].classList.contains("e-rowcell"))return[o+1,s];if(o===this.matrix.matrix.length-1)return[r,s]}return"ctrlEnd"!==e&&"end"!==e||(i=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1],"end"===e&&(i=[r,this.matrix.matrix[parseInt(r.toString(),10)].length-1]),r=(i=0===this.matrix.matrix[i[0]][i[1]]?Mp(this.matrix.matrix,i,!1):i)[0],s=i[1]+1),this.matrix.get(r,s,[n,t],e,this.validator())},na.prototype.onClick=function(e,t){var i,n,r,s,o=e.target,o=(o=(this.target=o).classList.contains(b)?o:P.closest(o,"td"))||P.closest(e.target,"td.e-detailrowcollapse")||P.closest(e.target,"td.e-detailrowexpand");return!(!(o=(o=P.closest(e.target,"td.e-detailcell")&&P.isNullOrUndefined(P.closest(P.closest(e.target,".e-grid"),"td.e-detailcell"))?null:o)&&P.closest(o,"table").classList.contains($r)?o:null)||(n=o.parentElement.rowIndex,n=[n=this.parent.editSettings.showAddNewRow&&E(o,"e-addedrow")?E(o,"e-addedrow").rowIndex:n,o.cellIndex],r=(o=this.matrix.current)[0],o=o[1],s=P.getValue((i=n[0])+"."+(n=n[1]),this.matrix.matrix),this.matrix.inValid(s))||!t&&r===i&&o===n||!(E(e.target,b)||E(e.target,"e-groupcaption")||E(e.target,"e-recordpluscollapse")||E(e.target,"e-recordplusexpand")||E(e.target,"e-detailrowcollapse")||E(e.target,"e-detailrowexpand")||E(e.target,"e-templatecell")))&&void this.matrix.select(i,n)},na.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],i=void 0===i?0:i,t=t[1],t=void 0===t?0:t,i=(this.matrix.current=[i,t],this.getTable().rows[parseInt(i.toString(),10)]);return e.element=P.isNullOrUndefined(i)?null:(this.parent.editSettings.showAddNewRow&&i.classList.contains("e-addedrow")?i.querySelectorAll("td:not(.e-editcell)"):i.cells)[parseInt(t.toString(),10)],e.element&&(e.elementToFocus=e.element.classList.contains("e-unboundcell")&&!(this.parent.editSettings.showAddNewRow&&e.element.classList.contains("e-unboundcell")&&E(e.element,"e-addedrow"))||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.elementToFocus=e.element.classList.contains("e-detailcell")&&e.element.querySelector(".e-childgrid")?e.element.querySelector(".e-childgrid"):e.elementToFocus,"Batch"===this.parent.editSettings.mode&&this.parent.isEdit&&"input"===e.elementToFocus.tagName.toLowerCase()&&e.elementToFocus.classList.contains("e-dropdownlist")&&(e.elementToFocus=e.elementToFocus.parentElement),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e},na.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!P.isNullOrUndefined(P.closest(e,".e-templatecell")),t=(this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+(this.parent.editSettings.showAddNewRow&&E(e,"e-addedrow")?", button:not(.e-hide)":"")),[].slice.call(e.querySelectorAll(t)));return t.length?!(i&&1<t.length)||"Batch"===this.parent.editSettings.mode&&this.parent.isEdit&&this.target?t[0]:this.target||e:e},na.prototype.selector=function(e,t,i){var n=[O.CellType.Expand,O.CellType.GroupCaption,O.CellType.CaptionSummary,O.CellType.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===O.CellType.DetailExpand&&P.isNullOrUndefined(t.visible)||!e.isDataRow&&-1<n.indexOf(t.cellType)&&!!(t.cellType!==O.CellType.GroupSummary&&t.cellType!==O.CellType.CaptionSummary||t.isDataCell&&t.visible)||t.column&&t.visible&&"checkbox"===t.column.type||t.cellType===O.CellType.CommandColumn||e.isDataRow&&i)&&!("delete"===e.edit&&e.isDirty)},na.prototype.nextRowFocusValidate=function(e){for(var t=e,i=e,n=this.matrix.rows;i<=n;i++){if(-1!==this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1))return e;e+=1}return this.lastIdxCell=!0,t},na.prototype.previousRowFocusValidate=function(e){for(var t=e,i=e;0<=i;i--){if(-1!==this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1))return e;if((e-=1)<0)return this.lastIdxCell=!0,t}return t},na.prototype.jump=function(e,t){this.lastIdxCell=!1;var i=0!==this.parent.frozenRows&&"shiftEnter"===e,n=("upArrow"===e||i)&&0===t[0],r=(this.matrix.matrix[t[0]]&&"tab"===e&&this.matrix.matrix.length&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==t[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),"shiftTab"===e&&0!==t[0]&&this.matrix.matrix[t[0]].indexOf(1)===t[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length),!1),s=E(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?E(document.activeElement,"e-addedrow"):document.activeElement.parentElement;return{swap:!(r=(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!P.isNullOrUndefined(s)&&s.classList.contains(I)?0<parseInt(s.getAttribute(x),10):r)&&("upArrow"===e||i)&&0===t[0],toHeader:n}},na.prototype.getNextCurrent=function(e,t,i,n){void 0===e&&(e=[]);var r=[];return"rightArrow"!==n&&"tab"!==n||(r[0]=e[0],r[1]=-1),"downArrow"!==n&&"enter"!==n||(r[0]=-1,r[1]=e[1]),r},na.prototype.generateRows=function(e,t){var i=t.matrix,t=t.handlerInstance,n=t.matrix.matrix.length,n=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?n+1:n;t.matrix.matrix=t.matrix.matrix.slice(0,n),t.matrix.rows=n,(n=t.matrix.matrix).push.apply(n,i),t.matrix.rows+=i.length},na.prototype.getInfo=function(e){var t=this.getFocusInfo(),i=this.matrix.current,n=i[0],i=i[1],r=t.element.classList.contains(b),s=r||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),o=[Math.min(parseInt(t.element.parentElement.getAttribute(x),10),n),Math.min(parseInt(t.element.getAttribute(ps),10),i)],a=o[0],o=o[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&r&&(a=this.parent.getDataRows().indexOf(t.element.parentElement)),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&(a=n,o=i),this.parent.editSettings.showAddNewRow&&"Top"===this.parent.editSettings.newRowPosition&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e&&"downArrow"===e.action&&a++,{isContent:!0,isDataCell:r,indexes:[a,o],isSelectable:s}},na.prototype.validator=function(){var r=this.getTable();return function(e,t,i){if(!P.isNullOrUndefined(r.rows[parseInt(e.toString(),10)])){var n=void 0,e=(t=r.querySelector(".e-emptyrow")?0:t,0!==(n=(r.rows[parseInt(e.toString(),10)].cells[0].classList.contains("e-editcell")?r.rows[parseInt(e.toString(),10)].cells[0].querySelectorAll("td"):r.rows[parseInt(e.toString(),10)].cells)[parseInt(t.toString(),10)]).getBoundingClientRect().width);if("enter"===i||"shiftEnter"===i)return e&&n.classList.contains(b);if(("shiftUp"===i||"shiftDown"===i)&&n.classList.contains(b))return e;if("shiftUp"!==i&&"shiftDown"!==i)return e}return!1}},na.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],i=void 0===i?-1:i,t=t[1],t=void 0===t?-1:t;return i<0||t<0||!(i=P.getValue(i+".cells."+t,this.getTable().rows))||"enter"!==e.action&&"shiftEnter"!==e.action||i.classList.contains(b)&&!i.classList.contains("e-unboundcell")||i.classList.contains("e-editedbatchcell")&&!i.classList.contains("e-detailcell")},na.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection};var ia=na;function na(e){var t=this;this.matrix=new ea,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(e){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[""+e]||null}}e(oa,ra=ia),oa.prototype.getTable=function(){return this.parent.getHeaderTable()},oa.prototype.onClick=function(e){var t=e.target;if(!(t=(this.target=t).classList.contains("e-headercell")?t:P.closest(t,"th"))&&(0!==this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(t=e.target.classList.contains(b)?e.target:P.closest(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(t){var e=t.parentElement.rowIndex,i=[e=this.parent.editSettings.showAddNewRow&&E(t,"e-addedrow")?E(t,"e-addedrow").rowIndex:e,t.cellIndex],i=P.getValue(i[0]+"."+i[1],this.matrix.matrix);if(this.matrix.inValid(i))return!1;this.matrix.select(e,t.cellIndex)}},oa.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],i=void 0===i?0:i,t=t[1],t=void 0===t?0:t,i=this.getTable().rows[parseInt(i.toString(),10)];return e.element=P.isNullOrUndefined(i)?null:(this.parent.editSettings.showAddNewRow&&i.classList.contains("e-addedrow")?i.querySelectorAll("td:not(.e-editcell)"):i.cells)[parseInt(t.toString(),10)],P.isNullOrUndefined(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e},oa.prototype.selector=function(e,t){return t.visible&&(void 0!==t.column.field||t.isTemplate||!P.isNullOrUndefined(t.column.template)||!P.isNullOrUndefined(t.column.commands))||"checkbox"===t.column.type||t.cellType===O.CellType.StackedHeader},oa.prototype.jump=function(e,t){var i,n,r=0!==this.parent.frozenRows&&"enter"===e;return this.parent.enableHeaderFocus&&"tab"===e&&(n=this.matrix.matrix.length-1===t[0],i=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1))&&(this.matrix.current[0]=n?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),{swap:("downArrow"===e||r)&&t[0]===this.matrix.matrix.length-1||"tab"===e&&n&&i}},oa.prototype.getNextCurrent=function(e,t,i,n){void 0===e&&(e=[]);var r=[];return("rightArrow"===n||"shiftRight"===n&&this.getGridSeletion()||"tab"===n)&&(r[0]=e[0],r[1]=-1),"upArrow"!==n&&"shiftEnter"!==n||(r[0]=this.matrix.matrix.length,r[1]=e[1]),r},oa.prototype.generateRows=function(e){var t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var i=e[0].cells,n=0,r=0;r<i.length;r++)i[parseInt(r.toString(),10)].column&&i[parseInt(r.toString(),10)].column.columns?n=this.checkFilterColumn(i[parseInt(r.toString(),10)].column.columns,t,n):(this.matrix.set(t,n,i[parseInt(r.toString(),10)].visible&&!1!==i[parseInt(r.toString(),10)].column.allowFiltering),n++)}},oa.prototype.checkFilterColumn=function(e,t,i){for(var n=e,r=i,s=0;s<n.length;s++)n[parseInt(s.toString(),10)].columns?r=this.checkFilterColumn(n[parseInt(s.toString(),10)].columns,t,r):(this.matrix.set(t,r,n[parseInt(s.toString(),10)].visible&&!1!==n[parseInt(s.toString(),10)].allowFiltering),r++);return r},oa.prototype.getInfo=function(e){return P.extend(ra.prototype.getInfo.call(this,e),{isContent:!1,isHeader:!0})},oa.prototype.validator=function(){return function(){return!0}},oa.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],t=t[1];return i<0||t<0||!(i=P.getValue(i+".cells."+t,this.getTable().rows))||"enter"!==e.action&&"altDownArrow"!==e.action||!i.classList.contains("e-headercell")},oa.prototype.getHeaderType=function(){return"HeaderFocus"};var ra,sa=oa;function oa(e){return ra.call(this,e)||this}la.prototype.searchFocus=function(e){e.target.parentElement.classList.add("e-input-focus"),e.target.classList.contains("e-input")&&e.target.classList.contains("e-search")&&e.target.value&&((e=e.target.parentElement.querySelector(".e-sicon")).classList.add("e-clear-icon"),e.setAttribute("title",this.l10n.getConstant("Clear")),e.style.cursor="pointer")},la.prototype.searchBlur=function(e){var t=e.relatedTarget||null;t&&t.classList.contains("e-sicon")&&!t.classList.contains("e-clear-icon")||e.target.parentElement.classList.remove("e-input-focus"),e.target.classList.contains("e-search")&&(t&&!t.classList.contains("e-sicon e-clear-icon")&&!t.classList.contains("e-sicon")||P.isNullOrUndefined(t))&&((t=e.target.parentElement.querySelector(".e-sicon")).classList.remove("e-clear-icon"),t.removeAttribute("title"),t.style.cursor="default")},la.prototype.wireEvent=function(){this.searchBox&&(P.EventHandler.add(this.searchBox,"focus",this.searchFocus,this),P.EventHandler.add(this.searchBox,"blur",this.searchBlur,this))},la.prototype.unWireEvent=function(){this.searchBox&&(P.EventHandler.remove(this.searchBox,"focus",this.searchFocus),P.EventHandler.remove(this.searchBox,"blur",this.searchBlur))};var aa=la;function la(e,t){this.searchBox=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization")}ha=function(e,t){return(ha=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var ha,pa,e=function(e,t){function i(){this.constructor=e}ha(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},da=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(o=(s<3?r(o):3<s?r(t,i,o):r(t,i))||o);return 3<s&&o&&Object.defineProperty(t,i,o),o},e=(pa=P.ChildProperty,e(ca,pa),da([P.Property(12)],ca.prototype,"pageSize",void 0),da([P.Property(8)],ca.prototype,"pageCount",void 0),da([P.Property(1)],ca.prototype,"currentPage",void 0),da([P.Property()],ca.prototype,"totalRecordsCount",void 0),da([P.Property(!1)],ca.prototype,"enableQueryString",void 0),da([P.Property(!1)],ca.prototype,"pageSizes",void 0),da([P.Property(null)],ca.prototype,"template",void 0),ca);function ca(){return null!==pa&&pa.apply(this,arguments)||this}ua=function(e,t){return(ua=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var ua,ga,da=function(e,t){function i(){this.constructor=e}ua(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},fa=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(o=(s<3?r(o):3<s?r(t,i,o):r(t,i))||o);return 3<s&&o&&Object.defineProperty(t,i,o),o},da=(ga=P.ChildProperty,da(ma,ga),fa([P.Property("startsWith")],ma.prototype,"operator",void 0),fa([P.Property(!1)],ma.prototype,"ignoreAccent",void 0),ma);function ma(){return null!==ga&&ga.apply(this,arguments)||this}s.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},s.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},s.prototype.fDataUpdate=function(e){var t;return this.isMultiSelection||P.isNullOrUndefined(e.cellIndex)&&P.isNullOrUndefined(e.rowIndex)||(t=this.getRowObj(P.isNullOrUndefined(e.rowIndex)?P.isNullOrUndefined(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex),e.foreignKeyData=t.foreignKeyData),e},s.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1},s.prototype.getModuleName=function(){return"selection"},s.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),P.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),P.EventHandler.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},s.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},s.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){for(var t=Gl(this.parent.getCurrentViewRecords()),t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges()[ss]):this.parent.editModule.getBatchChanges()[ss].concat(t),i=this.parent.editModule.getBatchChanges()[os],n=this.parent.getPrimaryKeyFieldNames()[0],r=0;r<i.length;r++)for(var s=0;s<t.length;s++)if(i[parseInt(r.toString(),10)][""+n]===t[parseInt(s.toString(),10)][""+n]){t.splice(s,1);break}return t}return this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection?e.getCurrentViewRecords().filter(function(e){return void 0===e.key}):e.getCurrentViewRecords()},s.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([e]);else{var i=this.parent,n=i.getRowByIndex(e),r=n&&i.getRowObjectFromUID(n.getAttribute("data-uid"));if(!(this.isPartialSelection&&r&&r.isDataRow)||r.isSelectable){if(i.enableVirtualization&&-1<e){var s={selectedIndex:e,isAvailable:!0};if(this.parent.notify(Ji,s),!n||!i.getRowObjectFromUID(n.getAttribute("data-uid")))return void(s.isAvailable&&!i.selectionSettings.persistSelection&&0<this.parent.getSelectedRecords().length&&this.clearRowSelection());s=i.getRowObjectFromUID(n.getAttribute("data-uid")).data}else s=this.getRowObj(e).data;if(this.isRowType()&&n&&!this.isEditing()){var o,a,l,h=n.hasAttribute("aria-selected");this.activeTarget(),t=!(!t||!this.selectedRowIndexes.length||(o="ResetOnRowClick"===this.selectionSettings.checkboxMode,a=!this.parent.isCheckBoxSelection&&"Multiple"===this.selectionSettings.type,(o||a)&&(1!==this.selectedRowIndexes.length||!o&&!a))||this.isKeyAction&&this.parent.isCheckBoxSelection||-1===this.selectedRowIndexes.indexOf(e)),this.isKeyAction=!1;if(t){if("ResetOnRowClick"!==this.selectionSettings.checkboxMode&&this.selectionSettings.persistSelection){if(this.rowDeselect(pe,[r.index],[r.data],[n],[r.foreignKeyData],this.actualTarget),this.isCancelDeSelect)return;this.parent.isCheckBoxSelection||(this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1)),this.rowDeselect(de,[r.index],[r.data],[n],[r.foreignKeyData],this.actualTarget,void 0,void 0,void 0)}this.rowSelectingCallBack(l,t,e,s,!1,h,"cancel")(l)}else l={data:s,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(le,this.fDataUpdate(l),this.rowSelectingCallBack(l,t,e,s,!1,h,"cancel"))}}}},s.prototype.rowSelectingCallBack=function(e,t,i,n,r,s,o){var a=this;return function(e){P.isNullOrUndefined(e)||!0!==e[""+o]?(a.index=i,a.toggle=t,a.data=n,a.removed=r,s&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode?(a.clearSelectedRow(i),a.selectRowCallBack()):!s&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode&&a.selectRowCallBack(),"ResetOnRowClick"===a.selectionSettings.checkboxMode&&(a.isCheckboxReset=!0,a.clearSelection()),a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode&&(a.parent.isCheckBoxSelection||!a.selectionSettings.persistSelection)||(a.selectRowCheck=!0,a.clearRow())):a.disableInteracted()}},s.prototype.selectRowCallBack=function(){var e=this.parent,t=this.index,i=this.toggle,n=this.data,r=this.removed,s=e.getRowByIndex(t);i||r||(this.selectedRowIndexes.indexOf(t)<=-1&&this.updateRowSelection(s,t),this.selectRowIndex(t)),i||(r={data:n,rowIndex:t,row:s,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:t},this.onActionComplete(r,he)),this.isInteracted=!1,this.updateRowProps(t)},s.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},s.prototype.selectedDataUpdate=function(e,t,i,n,r){for(var s=0,o=n.length;s<o;s++){var a=this.parent.getDataRows()[n[parseInt(s.toString(),10)]],l=(this.parent.enableVirtualization&&(a=this.parent.getRowByIndex(n[parseInt(s.toString(),10)])),this.getRowObj(a));l&&l.isDataRow&&l.isSelectable?(e.push(l.data),i.push(a),t.push(l.foreignKeyData)):this.isPartialSelection&&r&&r.splice(r.indexOf(n[parseInt(s.toString(),10)]),1)}},s.prototype.selectRows=function(e){var r=this,s=this.parent,o=e.slice(),a=this.isSingleSel()?e[e.length-1]:e[0],l=(this.isMultiSelection=!0,[]),h=[],t=[];this.isRowType()&&!this.isEditing()&&(this.selectedDataUpdate(t,h,l,e,o),this.activeTarget(),e={cancel:!1,rowIndexes:o,row:l,rowIndex:a,target:this.actualTarget,prevRow:s.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:t,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:h},this.parent.trigger(le,this.fDataUpdate(e),function(e){if(P.isNullOrUndefined(e)||!0!==e.cancel){s.allowRowDragAndDrop&&r.isDragged&&r.selectionSettings.persistSelection||r.clearRow(),r.selectRowIndex(o.slice(-1)[0]);var t=function(e,t){r.updateRowSelection(s.getRowByIndex(e),e,t),r.updateRowProps(a)};if(r.isSingleSel())t(a);else for(var i=0,n=o;i<n.length;i++)t(n[i],!!s.enableVirtualization);e={rowIndexes:o,row:l,rowIndex:a,target:r.actualTarget,prevRow:s.getRows()[r.prevRowIndex],previousRowIndex:r.prevRowIndex,data:r.getSelectedRecords(),isInteracted:r.isInteracted,isHeaderCheckboxClicked:r.isHeaderCheckboxClicked,foreignKeyData:h},r.isRowSelected&&r.onActionComplete(e,he),r.isInteracted=!1}else r.disableInteracted()}))},s.prototype.addRowsToSelection=function(e){var t=this.parent,i=this.target,n=(this.isMultiSelection=!0,[]),r=[],s=[],o=t.getSelectedRowIndexes().concat(e),a=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly){var l,h=this.parent.getColumns().filter(function(e){return"checkbox"===e.type});this.isMultiCtrlRequest&&!h.length&&this.selectedDataUpdate(s,r,n,o);for(var p=0,d=e;p<d.length;p++){var c=d[p],u=this.getRowObj(c),g=-1<this.selectedRowIndexes.indexOf(c);if(!(this.isPartialSelection&&u&&u.isDataRow)||u.isSelectable){if(this.selectRowIndex(c),g&&(h.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(pe,[c],[u.data],[a],[u.foreignKeyData],i),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(c),1),this.selectedRecords.splice(this.selectedRecords.indexOf(a),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),a.removeAttribute("aria-selected"),this.addRemoveClassesForRow(a,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(de,[c],[u.data],[a],[u.foreignKeyData],i,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),l={cancel:!1,data:s.length?s:u.data,rowIndex:c,row:n.length?n:a,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:r.length?r:u.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:o},this.parent.trigger(le,this.fDataUpdate(l)),!P.isNullOrUndefined(l)&&!0===l.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(a,c)}if(g||(l={data:s.length?s:u.data,rowIndex:c,row:n.length?n:a,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:r.length?r:u.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:o},this.onActionComplete(l,he)),this.isInteracted=!1,this.updateRowProps(c),this.isSingleSel())break}}}},s.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],n=e<=t?{i:e,max:t}:{i:t,max:e},r=n.i,s=n.max;r<=s;r++)i.push(r);return t<e&&i.reverse(),i},s.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},s.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},s.prototype.clearSelectedRow=function(e){var t;this.toggle&&(t=this.parent.getRowByIndex(e),this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1))},s.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},s.prototype.getPkValue=function(e,t){return e&&ch(e)?Lh(e,t):t[""+e]},s.prototype.updatePersistCollection=function(e,t){var i,n=this;(this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&0<this.parent.getPrimaryKeyFieldNames().length)&&!P.isNullOrUndefined(e)&&(this.parent.isPersistSelection||this.ensureCheckboxFieldSelection(),e=this.getRowObj(e),null!==(i=e.data?this.getPkValue(this.primaryKey,e.data):null))&&((e.isSelected=t)&&!this.isPartialSelection||this.isPartialSelection&&e.isSelectable&&e.isSelected?(this.selectedRowState[""+i]=t,delete this.unSelectedRowState[""+i],this.persistSelectedData.some(function(e){return n.getPkValue(n.primaryKey,e)===i})||this.persistSelectedData.push(e.data)):this.updatePersistDelete(i))},s.prototype.updatePersistDelete=function(i,e){var n,r=this;delete this.selectedRowState[""+i],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+i]=!0),this.persistSelectedData.some(function(e,t){return n=t,r.getPkValue(r.primaryKey,e)===i})&&(this.persistSelectedData.splice(n,1),e)&&this.parent.partialSelectedRecords.splice(n,1)},s.prototype.updateCheckBoxes=function(e,t,i){P.isNullOrUndefined(e)||(e=e.querySelector(".e-checkselect"),!P.isNullOrUndefined(e)&&(Dh(e.nextElementSibling,t),Rh(e,t),P.isNullOrUndefined(this.checkedTarget)||!P.isNullOrUndefined(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))},s.prototype.updateRowSelection=function(e,t,i){e&&(-1===this.selectedRowIndexes.indexOf(t)&&(this.selectedRowIndexes.push(t),this.selectedRecords.push(e)),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),this.preventFocus||(t=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)"),(t=this.parent.contextMenuModule&&2===this.mouseButton?this.parent.contextMenuModule.cell:t)&&!i&&this.focus.onClick({target:t},!0)))},s.prototype.clearSelection=function(){var e;this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=Gl(this.persistSelectedData)),(!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!P.isNullOrUndefined(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall"))&&((e=this.parent.element.querySelector(".e-gridpopup").querySelector("span")).classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1)},s.prototype.clearRowSelection=function(){var n=this;if(this.isRowSelected){var r=this.parent.getDataRows(),s=[],o=[],a=[],l=[],h=this.target;this.isRowDeselect=!0;for(var e=0,t=this.selectedRowIndexes.length;e<t;e++){var i=("Batch"===this.parent.editSettings.mode?this.parent.getRows():this.parent.getDataRows())[this.selectedRowIndexes[parseInt(e.toString(),10)]],p=this.getRowObj(i);p&&(s.push(p.data),o.push(i),a.push(this.selectedRowIndexes[parseInt(e.toString(),10)]),l.push(p.foreignKeyData))}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(pe,a,s,o,l,h,null,function(){if(n.isCancelDeSelect&&(n.isRowClicked||n.checkSelectAllClicked||n.isInteracted&&!n.parent.isPersistSelection)){if(n.parent.isPersistSelection)if("Intermediate"===n.getCheckAllStatus(n.parent.element.querySelector(".e-checkselectall"))||n.parent.isPersistSelection)for(var e=0;e<n.selectedRecords.length;e++)n.updatePersistCollection(n.selectedRecords[parseInt(e.toString(),10)],!0);else n.parent.checkAllRows="Check",n.updatePersistSelectedData(!0)}else{for(var t=[].slice.call(r.filter(function(e){return e.hasAttribute("aria-selected")})),i=0;i<t.length;i++)n.disableUI||(t[parseInt(i.toString(),10)].removeAttribute("aria-selected"),n.addRemoveClassesForRow(t[parseInt(i.toString(),10)],!1,!0,"e-selectionbackground","e-active")),n.isPrevRowSelection||n.updatePersistCollection(t[parseInt(i.toString(),10)],!1),n.updateCheckBoxes(t[parseInt(i.toString(),10)]);n.selectedRowIndexes=[],n.selectedRecords=[],n.isRowSelected=!1,n.selectRowIndex(-1),n.isPrevRowSelection=!1,n.rowDeselect(de,a,s,o,l,h,null,void 0,null)}n.clearRowCheck&&(n.clearRowCallBack(),n.clearRowCheck=!1,n.selectRowCheck)&&(n.selectRowCallBack(),n.selectRowCheck=!1)},null),this.isRowDeselect=!1}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck)&&(this.selectRowCallBack(),this.selectRowCheck=!1)},s.prototype.rowDeselect=function(e,t,i,n,r,s,o,a,l){var h,p=this;this.selectionSettings.persistSelection&&(this.isRowClicked||!this.isRowDeselect||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection?(h=1===t.length&&1===this.deSelectedData.length,h={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&!h&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.deSelectedData:i,foreignKeyData:r,cancel:!"cancel",isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},"rowDeselected"===e&&delete h.cancel,i="rowIndexes",r="foreignKeyData",h.row=n,h.target=this.actualTarget,this.actualTarget&&!P.isNullOrUndefined(P.closest(this.actualTarget,"thead"))||1<t.length?(h.rowIndex=t[0],h[i]=t):1===t.length&&(h.data=h.data[0],h.row=h.row[0],h[r]=h[r][0],this.isAddRowsToSelection)&&(h[i]=t),this.parent.trigger(e,h,function(e){p.isCancelDeSelect=e.cancel,p.isCancelDeSelect&&(p.isRowClicked||p.isInteracted||p.checkSelectAllClicked)||(p.updatePersistCollection(n[0],!1),p.updateCheckBoxes(n[0],void 0,t[0])),void 0!==a&&a()})):this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==a&&a()},s.prototype.getRowObj=function(e){return void 0===e&&(e=this.currentIndex),!P.isNullOrUndefined(e)&&(e="number"==typeof e?this.parent.getRowByIndex(e):e)&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{}},s.prototype.selectCell=function(e,t){var i,n,r,s;this.isCellType()&&(i=this.parent.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)),this.currentIndex=e.rowIndex,n=this.getCurrentBatchRecordChanges()[this.currentIndex],this.isCellType())&&i&&!this.isEditing()&&(r=i.classList.contains("e-cellselectionbackground"),(t=t&&!P.isUndefined(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&r)?this.successCallBack(s,t,e,i,n)(s):((s={data:n,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=i,s.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(ce,this.fDataUpdate(s),this.successCallBack(s,t,e,i,n)),this.cellselected=!0))},s.prototype.successCallBack=function(e,i,n,r,s){var o=this;return function(e){var t="currentCell";!P.isNullOrUndefined(e)&&!0===e.cancel||(i||(e[t]=e[t]||r),o.clearCell(),i||o.updateCellSelection(r,n.rowIndex,n.cellIndex),i)||((e={data:s,cellIndex:n,currentCell:r,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0}).previousRowCellIndex=o.prevECIdxs,o.updateCellProps(n,n),o.onActionComplete(e,ue))}},s.prototype.getCellIndex=function(e,t){return this.parent.getCellFromIndex(e,t)},s.prototype.selectCellsByRange=function(r,s){var o,a,l,h,p,d,c,u,e,g=this;this.isCellType()&&(o=this.parent,a=this.parent.isSpan?cp(this.parent,r.rowIndex,r.cellIndex):o.getCellFromIndex(r.rowIndex,r.cellIndex),p=r,d=s=s||r,this.currentIndex=r.rowIndex,u=this.getCurrentBatchRecordChanges()[this.currentIndex],this.isSingleSel()||!this.isCellType()||this.isEditing()||((e={data:u,cellIndex:r,currentCell:a,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0}).previousRowCellIndex=this.prevECIdxs,this.parent.trigger(ce,this.fDataUpdate(e),function(e){if(P.isNullOrUndefined(e)||!0!==e.cancel){g.clearCell(),r.rowIndex>s.rowIndex&&(e=r,r=s,s=e);for(var t=r.rowIndex;t<=s.rowIndex;t++){h=g.selectionSettings.cellSelectionMode.indexOf("Box")<0?(l=t===r.rowIndex?r.cellIndex:0,t===s.rowIndex?s.cellIndex:g.getLastColIndex(t)):(l=r.cellIndex,s.cellIndex),c=[];for(var i=l<h?l:h,n=h<l?l:h;i<=n;i++)(a=g.parent.isSpan?cp(o,t,i):o.getCellFromIndex(t,i))&&(c.push(i),g.updateCellSelection(a),g.addAttribute(a));g.selectedRowCellIndexes.push({rowIndex:t,cellIndexes:c})}e={data:u,cellIndex:d,currentCell:o.getCellFromIndex(d.rowIndex,d.cellIndex),selectedRowCellIndex:g.selectedRowCellIndexes,previousRowCell:g.prevECIdxs?g.getCellIndex(g.prevECIdxs.rowIndex,g.prevECIdxs.cellIndex):void 0};e.previousRowCellIndex=g.prevECIdxs,g.isDragged||(g.onActionComplete(e,ue),g.cellselected=!0),g.updateCellProps(p,d)}})))},s.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0]),n=(this.currentIndex=e[0].rowIndex,this.getCurrentBatchRecordChanges()[this.currentIndex]);if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var r={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};r.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(r,ce);for(var s=0,o=e.length;s<o;s++)for(var a=0,l=e[parseInt(s.toString(),10)].cellIndexes.length;a<l;a++)(i=t.getCellFromIndex(e[parseInt(s.toString(),10)].rowIndex,e[parseInt(s.toString(),10)].cellIndexes[parseInt(a.toString(),10)]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[parseInt(s.toString(),10)].rowIndex,cellIndex:e[parseInt(s.toString(),10)].cellIndexes[parseInt(a.toString(),10)]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});r={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};r.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(r,ue)}}},s.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t,i=this.parent,n=(this.currentIndex=e[0].rowIndex,this.getCurrentBatchRecordChanges()[this.currentIndex]);if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.hideAutoFill(),r=i.getRowsObject()[e[0].rowIndex],0<i.groupSettings.columns.length&&(r=i.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var r,s=[],o=0,a=e;o<a.length;o++){for(var l=a[o],h=0,p=this.selectedRowCellIndexes.length;h<p;h++)if(this.selectedRowCellIndexes[parseInt(h.toString(),10)].rowIndex===l.rowIndex){t=h;break}var d=i.getCellFromIndex(l.rowIndex,this.getColIndex(l.rowIndex,l.cellIndex)),c=l.cellIndex,c=(0<i.groupSettings.columns.length?s.push(r.cells[c+i.groupSettings.columns.length].foreignKeyData):s.push(r.cells[parseInt(c.toString(),10)].foreignKeyData),{cancel:!1,data:n,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:d,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0}),u="previousRowCellIndex",g=(c[u]=this.prevECIdxs,-1<t);if(g){var f=this.selectedRowCellIndexes[parseInt(t.toString(),10)].cellIndexes;-1<f.indexOf(l.cellIndex)||"Both"===this.selectionSettings.mode&&d.classList.contains("e-gridchkbox")&&!d.getAttribute("aria-selected")?(this.cellDeselect(ge,[{rowIndex:l.rowIndex,cellIndexes:[l.cellIndex]}],n,[d],s),f.splice(f.indexOf(l.cellIndex),1),0===f.length&&this.selectedRowCellIndexes.splice(t,1),d.classList.remove("e-cellselectionbackground"),d.removeAttribute("aria-selected"),this.cellDeselect(fe,[{rowIndex:l.rowIndex,cellIndexes:[l.cellIndex]}],n,[d],s)):(g=!1,this.onActionBegin(c,ce),this.addRowCellIndex({rowIndex:l.rowIndex,cellIndex:l.cellIndex}),this.updateCellSelection(d),this.addAttribute(d))}else{if(this.onActionBegin(c,ce),!P.isNullOrUndefined(c)&&!0===c.cancel)return;this.updateCellSelection(d,l.rowIndex,l.cellIndex)}g||((f={data:n,cellIndex:e[0],currentCell:d,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes})[u]=this.prevECIdxs,this.onActionComplete(f,ue),this.cellselected=!0),this.updateCellProps(l,l)}}}},s.prototype.getColIndex=function(e,t){var i=this.parent.getColumnByIndex(t),n=gp(this.parent,0,e);if(n)for(var r=0;r<n.length;r++)if(parseInt(n[parseInt(r.toString(),10)].getAttribute(ps),10)===t)return r;return-1},s.prototype.getLastColIndex=function(e){e=this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(e[e.length-1].getAttribute(ps),10)},s.prototype.clearCell=function(){this.clearCellSelection()},s.prototype.cellDeselect=function(e,t,i,n,r){if(n&&0<n.length)for(var s=0,o=n;s<o.length;s++){var a=o[s];a&&a.classList.contains(es)&&this.updateCheckBoxes(P.closest(a,"tr"))}n={cells:n,data:i,cellIndexes:t,foreignKeyData:r,cancel:!1};this.parent.trigger(e,n),this.isPreventCellSelect=n.cancel},s.prototype.updateCellSelection=function(e,t,i){P.isNullOrUndefined(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(es)&&this.updateCheckBoxes(P.closest(e,"tr"),!0),this.addAttribute(e)},s.prototype.addAttribute=function(e){this.target=e,P.isNullOrUndefined(e)||(e.setAttribute("aria-selected","true"),this.preventFocus)||this.focus.onClick({target:e},!0)},s.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},s.prototype.addRowCellIndex=function(e){for(var t,i,n=0,r=this.selectedRowCellIndexes.length;n<r;n++)if(this.selectedRowCellIndexes[parseInt(n.toString(),10)].rowIndex===e.rowIndex){t=!0,i=n;break}t?this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},s.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,n=[],r=[],s=[],o=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var a=0,l=i.length;a<l;a++){n.push(o[i[parseInt(a.toString(),10)].rowIndex]);for(var h=this.getRowObj(i[parseInt(a.toString(),10)].rowIndex),p=0,d=i[parseInt(a.toString(),10)].cellIndexes.length;p<d;p++)h.cells&&s.push(h.cells[i[parseInt(a.toString(),10)].cellIndexes[parseInt(p.toString(),10)]].foreignKeyData),r.push(e.getCellFromIndex(i[parseInt(a.toString(),10)].rowIndex,i[parseInt(a.toString(),10)].cellIndexes[parseInt(p.toString(),10)]))}if(this.cellDeselect(ge,i,n,r,s),!0!==this.isPreventCellSelect){for(a=0,l=t.length;a<l;a++)t[parseInt(a.toString(),10)].classList.remove("e-cellselectionbackground"),t[parseInt(a.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(fe,i,n,r,s)}}},s.prototype.getSelectedCellsElement=function(){for(var e=this.parent.getDataRows(),t=[],i=0,n=e.length;i<n;i++)t=t.concat([].slice.call(e[parseInt(i.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return t},s.prototype.mouseMoveHandler=function(e){e.preventDefault(),this.stopTimer();var t,i=this.parent.element.getBoundingClientRect(),n=this.x,r=this.y,s=ih(e),o=s.x-i.left,i=s.y-i.top,a=P.closest(e.target,"tr");this.isDragged=!0,this.isCellDrag||(a=a||P.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr"),o<n&&(t=o,o=n,n=t),i<r&&(t=i,i=r,r=t),this.element.style.left=n+"px",this.element.style.top=r+"px",this.element.style.width=o-n+"px",this.element.style.height=i-r+"px"),!a||e.ctrlKey||e.shiftKey||(t=parseInt(a.getAttribute(x),10),this.isCellDrag?(o=E(e.target,b))&&(this.startAFCell=this.startCell,this.endAFCell=E(e.target,b),-1<t)&&this.selectLikeExcel(e,t,parseInt(o.getAttribute(ps),10)):(this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,t),this.isRowDragSelected=!0)),e.ctrlKey||e.shiftKey||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||this.parent.enableColumnVirtualization||this.parent.groupSettings.columns.length||!this.isCellDrag||this.updateScrollPosition(e,s,this.parent.getContent())},s.prototype.updateScrollPosition=function(e,t,i){var n=this,r=i.getBoundingClientRect();r.left>=t.x-20-(this.parent.enableRtl&&"auto"!==this.parent.height?ph():0)?this.timer1=window.setInterval(function(){n.setScrollPosition(i.firstElementChild,n.parent.enableRtl?"right":"left",e)},200):r.left+i.clientWidth-20-(this.parent.enableRtl||"auto"===this.parent.height?0:ph())<t.x&&(this.timer1=window.setInterval(function(){n.setScrollPosition(i.firstElementChild,n.parent.enableRtl?"left":"right",e)},200)),r.top>=t.y-.5*this.parent.getRowHeight()?this.timer2=window.setInterval(function(){n.setScrollPosition(i.firstElementChild,"up",e)},200):r.top+i.clientHeight-.5*this.parent.getRowHeight()-(i.firstElementChild.scrollWidth>i.firstElementChild.offsetWidth?ph():0)<=t.y&&(this.timer2=window.setInterval(function(){n.setScrollPosition(i.firstElementChild,"down",e)},200))},s.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},s.prototype.setScrollPosition=function(e,t,i){var n,r=-1,s=-1;switch((this.endAFCell||this.prevECIdxs)&&(r=this.endAFCell?parseInt(this.endAFCell.getAttribute("index"),10):this.prevECIdxs.rowIndex,s=this.endAFCell?parseInt(this.endAFCell.getAttribute("data-colindex"),10):this.prevECIdxs.cellIndex),t){case"up":if(i&&P.closest(i.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(1===this.selectedRowCellIndexes.length&&this.startAFCell!==this.startCell||1<this.selectedRowCellIndexes.length&&0<this.startAFCell.getBoundingClientRect().top)&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),--r,this.parent.frozenRows&&(r+=this.parent.frozenRows+1),r<1?e.scrollTop=0:e.scrollTop-=this.parent.getRowByIndex(r).offsetHeight;break;case"down":(r=this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell?parseInt(this.startAFCell.getAttribute("index"),10):r)<this.parent.getRows().length-1?(r+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(r,this.selectedRowCellIndexes[0].cellIndexes[0])),e.scrollTop+=this.parent.getRowByIndex(r).offsetHeight):e.scrollTop=e.scrollHeight;break;case"left":0<s&&-1<r&&(this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(0<this.selectedRowCellIndexes[0].cellIndexes.length&&this.startAFCell!==this.startCell||1<this.selectedRowCellIndexes[0].cellIndexes.length&&(!this.parent.enableRtl&&0<this.startAFCell.getBoundingClientRect().left||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(s=parseInt(this.startAFCell.getAttribute("data-colindex"),10)),s=(o=this.findNextCell(e,t,s,r))?parseInt(o.getAttribute("data-colindex"),10):-1,this.parent.enableRtl&&o?s<1?e.scrollLeft=e.scrollWidth:e.scrollLeft+=o.offsetWidth:o&&(s<1?e.scrollLeft=0:e.scrollLeft-=o.offsetWidth));break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(s=parseInt(this.startAFCell.getAttribute("data-colindex"),10));var o=this.parent.getCellFromIndex(r,s),a=this.findNextCell(e,t,s,r);a&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(a.getAttribute("data-colindex"),10))),s=a?parseInt(a.getAttribute("data-colindex"),10):-1,this.parent.enableRtl&&a?s<this.parent.columns.length-1?e.scrollLeft-=o.offsetWidth:e.scrollLeft=-e.scrollWidth:a&&(s<this.parent.columns.length-1?e.scrollLeft+=o.offsetWidth:e.scrollLeft=e.scrollWidth),this.isAutoFillSel&&(s===this.parent.columns.length-1||-1===s)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),e.scrollLeft=this.parent.enableRtl?-e.scrollWidth:e.scrollWidth)}-1<r&&r<this.parent.getRows().length&&-1<s&&(n={target:this.parent.getCellFromIndex(r,s)},this.isAutoFillSel&&n.target.classList.contains("e-cellselectionbackground")&&("down"===t&&parseInt(n.target.getAttribute("index"),10)===this.parent.getRows().length-1||"right"===t&&parseInt(n.target.getAttribute("data-colindex"),10)===this.parent.columns.length-1)||(this.endAFCell=n.target,this.preventFocus=!0,this.selectLikeExcel(n,r,s)))},s.prototype.findNextCell=function(e,t,i,n){var r,n=this.parent.getCellFromIndex(n,"left"===t?i-1:i+1);return n&&n.classList.contains("e-hide")?(i=n.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),0<(r=Array.from(i).indexOf(n.nextElementSibling))&&r<i.length-1?i[r+("left"===t?-1:1)]:(e.scrollLeft=0,null)):n},s.prototype.selectLikeExcel=function(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},s.prototype.setFrozenBorders=function(e,t,i){var n=t.style.borderWidth.toString().split(" "),r=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"][""+i])).filter(function(e){return""===e.style.display}),s=[].slice.call(e.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(e){return""===e.style.display}),o=this.parent.enableRtl;if(r.length)for(var a=r[0].getAttribute("index"),l=r[0].getAttribute("data-colindex"),h=r[r.length-1].getAttribute("index"),p=r[r.length-1].getAttribute("data-colindex"),d=0;d<r.length;d++)r[parseInt(d.toString(),10)].getAttribute("index")===a&&(1===n.length||3===n.length&&2===parseInt(n[0],10)||4===n.length&&2===parseInt(n[0],10))&&r[parseInt(d.toString(),10)].classList.add("e-xlsel-top-border"),r[parseInt(d.toString(),10)].getAttribute("data-colindex")===l&&(1===n.length||3===n.length&&2===parseInt(n[1],10)||4===n.length&&(!o&&2===parseInt(n[3],10)||o&&2===parseInt(n[1],10)))&&r[parseInt(d.toString(),10)].classList.add(o?"e-xlsel-right-border":"e-xlsel-left-border"),r[parseInt(d.toString(),10)].getAttribute("index")===h&&(1===n.length||3===n.length&&2===parseInt(n[2],10)||4===n.length&&2===parseInt(n[2],10))&&r[parseInt(d.toString(),10)].classList.add("e-xlsel-bottom-border"),r[parseInt(d.toString(),10)].getAttribute("data-colindex")===p&&(1===n.length||3===n.length&&2===parseInt(n[1],10)||4===n.length&&!o&&2===parseInt(n[1],10)||o&&2===parseInt(n[3],10))&&r[parseInt(d.toString(),10)].classList.add(o?"e-xlsel-left-border":"e-xlsel-right-border");if(s.length)for(a=s[0].getAttribute("index"),l=s[0].getAttribute("data-colindex"),h=s[s.length-1].getAttribute("index"),p=s[s.length-1].getAttribute("data-colindex"),d=0;d<s.length;d++){var c=s[parseInt(d.toString(),10)].getAttribute("index"),u=s[parseInt(d.toString(),10)].getAttribute("data-colindex"),c=(c!==a||(this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")||!E(e,"e-content"))&&E(e,"e-content")||s[parseInt(d.toString(),10)].classList.add("e-xlsel-top-border"),c!==h||(this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")||!E(e,"e-headercontent"))&&E(e,"e-headercontent")||s[parseInt(d.toString(),10)].classList.add("e-xlsel-bottom-border"),s[parseInt(d.toString(),10)].parentElement.children[parseInt(u,10)-1]),c=(u!==l||c&&c.classList.contains("e-cellselectionbackground")||s[parseInt(d.toString(),10)].classList.add(o?"e-xlsel-right-border":"e-xlsel-left-border"),s[parseInt(d.toString(),10)].parentElement.children[parseInt(u,10)+1]);u!==p||c&&c.classList.contains("e-cellselectionbackground")||s[parseInt(d.toString(),10)].classList.add(o?"e-xlsel-left-border":"e-xlsel-right-border")}},s.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===as&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows)&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid())&&this.parent.getFrozenMode()===as&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")},s.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},s.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},s.prototype.isLastRow=function(e){var t=[].slice.call(P.closest(e,N).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},s.prototype.isFirstRow=function(e){var t=[].slice.call(P.closest(e,N).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},s.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},s.prototype.setBorders=function(e,t,i){var n,r,s,o,a,l=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(e){return""===e.style.display});l.length&&this.parent.isFrozenGrid()&&(l=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"][""+i]+":not(.e-hide)")).filter(function(e){return""===e.style.display})),l.length?(e=this.parent.isFrozenGrid(),a=l[0],l=l[l.length-1],n=a.getBoundingClientRect(),r=l.getBoundingClientRect(),s=a.offsetParent.getBoundingClientRect(),(a.offsetParent.classList.contains("e-content")||a.offsetParent.classList.contains("e-headercontent"))&&(s=a.offsetParent.querySelector("table").getBoundingClientRect()),l=e||!this.isLastRow(l)||"1"!==i&&"2"!==i&&"5"!==i?0:2,o=e&&("2"===i||"4"===i)&&this.isFirstCell(a)?1:0,a=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==as||"5"!==i&&"6"!==i)||!this.isFirstCell(a)?0:1,this.parent.enableRtl?(t.style.right=s.right-n.right-o+"px",t.style.width=n.right-r.left+o+1+"px"):(t.style.left=n.left-s.left-o-a+"px",t.style.width=r.right-n.left+o-a+1+"px"),t.style.top=n.top-s.top+"px",t.style.height=0<r.top-n.top?r.top-s.top+r.height+(e?0:1)-(n.top-s.top)-l+"px":r.height+0-l+(e?0:1)+"px",this.selectDirection+=i):t.style.display="none"},s.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===as)&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid())&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===as)&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"),this.applyBorders(this.selectDirection))},s.prototype.applyBothFrozenBorders=function(e){var t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows)&&(this.fhBdrElement.style.borderWidth=this.top_right_left),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows)&&(this.mhBdrElement.style.borderWidth=this.top_right_left),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows)&&(this.frhBdrElement.style.borderWidth=this.top_right_left),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},s.prototype.applyBorders=function(e){var t=this.parent.enableRtl;if(this.parent.getFrozenMode()===as)this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid())&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid())&&(this.mhBdrElement.style.borderWidth=this.all_border)}},s.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(P.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(P.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===as)&&(this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(P.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"}))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(P.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(P.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===as)&&(this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(P.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"}))))},s.prototype.showHideBorders=function(e,t){var i;this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(i=this.parent.getContentTable(),P.removeClass(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),P.removeClass(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),P.removeClass(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),P.removeClass(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),t||(this.mcBdrElement.style.display=e),this.parent.getFrozenMode()===as)&&(this.frcBdrElement.style.display=e),this.parent.frozenRows&&(i=this.parent.getHeaderTable(),P.removeClass(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),P.removeClass(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),P.removeClass(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),P.removeClass(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=e),this.parent.frozenRows)&&this.parent.isFrozenGrid()&&(t||(this.mhBdrElement.style.display=e),this.parent.getFrozenMode()===as)&&(this.frhBdrElement.style.display=e)},s.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},s.prototype.positionAFBorders=function(){var e,t,i,n,r,s,o,a,l,h,p,d,c,u;this.startCell&&this.bdrAFLeft&&(e=this.startAFCell.getBoundingClientRect(),i=0<(t=this.endAFCell.getBoundingClientRect()).top-e.top?1:0,n=0<=t.top-e.top&&(E(this.startAFCell,Qr)||E(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,r=(E(this.startAFCell,Qr)||E(this.startAFCell,Xr))&&this.isFirstCell(this.startAFCell)?1:0,s=this.isLastRow(this.endAFCell)&&(E(this.endAFCell,Qr)||E(this.endAFCell,"e-frozencontent"))?2:0,o=this.startAFCell.offsetParent.getBoundingClientRect(),a=this.parent.element.getBoundingClientRect(),p=this.startAFCell.offsetParent.parentElement.scrollTop,d=this.startAFCell.offsetParent.parentElement.scrollLeft,p=p-this.startAFCell.offsetTop,d=d-this.startAFCell.offsetLeft,l=this.parent.element.clientHeight-ph(),this.parent.allowPaging&&(l-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(l-=this.parent.getFooterContent().offsetHeight),h=this.parent.element.clientWidth-("auto"!==this.parent.height?ph():0),p=0<p?Math.floor(p)-1:0,d=0<d?d:0,u=e.left-a.left,this.parent.enableRtl?(c=E(this.startAFCell,Qr)||E(this.startAFCell,Xr)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-a.left:0,this.bdrAFLeft.style.right=a.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=h<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",c=a.right-e.right-r+c-1,this.bdrAFRight.style.right=0<c?c+"px":"0px",this.bdrAFTop.style.left=t.left-a.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-r+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px","auto"!==this.parent.height&&ph()?(this.bdrAFTop.style.left=ph()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-ph()+"px"):this.bdrAFTop.style.left="0px")):(this.bdrAFLeft.style.left=u-r+d-1+"px",this.bdrAFRight.style.left=t.left-a.left-2+t.width+"px",this.bdrAFRight.style.width=h<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=u+d-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-r+1+"px",h<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)&&(c=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-h,this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-c+"px")),this.bdrAFLeft.style.top=e.top-a.top-n+p+"px",this.bdrAFLeft.style.height=0<t.top-e.top?t.top-o.top+t.height+1-(e.top-o.top)+n-s-p+"px":t.height+n-s-p+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=l<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,l<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10))&&(u=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-l,this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-u+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px")},s.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(P.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(P.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(P.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(P.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},s.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null),this.autofill&&(this.autofill.remove(),this.autofill=null)},s.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},s.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},s.prototype.updateValue=function(e,t,i){var n=this.createBeforeAutoFill(e,t,i);n.cancel||(t=this.parent.getColumnByIndex(t),this.parent.editModule&&i&&("number"===t.type?this.parent.editModule.updateCell(e,t.field,parseFloat(n.value)):this.parent.editModule.updateCell(e,t.field,n.value)))},s.prototype.createBeforeAutoFill=function(e,t,i){t={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger(Ze,t),t},s.prototype.getAutoFillCells=function(e,t){return[].slice.call(this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll(".e-cellselectionbackground"))},s.prototype.selectLikeAutoFill=function(e,t){var i=parseInt(E(this.startAFCell,I).getAttribute(x),10),n=parseInt(this.startAFCell.getAttribute(ps),10),r=parseInt(E(this.endAFCell,I).getAttribute(x),10),s=parseInt(this.endAFCell.getAttribute(ps),10),o=this.selectedRowCellIndexes.length-1,a=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!E(e.target,b):this.startAFCell=this.parent.getCellFromIndex(i,n),this.endAFCell=this.parent.getCellFromIndex(i+o,n+a),this.drawAFBorders();break;case this.autoFillRLselection&&n+a<s&&r-i-o<s-n-a+1&&i-r<s-n-a+1:if(this.endAFCell=this.parent.getCellFromIndex(i+o,s),r=parseInt(E(this.endAFCell,I).getAttribute(x),10),s=parseInt(this.endAFCell.getAttribute(ps),10),t){for(var l=parseInt(this.endCell.getAttribute(ps),10),h=i;h<=r;h++)for(var p=this.getAutoFillCells(h,n),d=0,c=l+1;c<=s;c++)a<d&&(d=0),this.updateValue(h,c,p[parseInt(d.toString(),10)]),d++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:r,cellIndex:s})}else this.drawAFBorders();break;case this.autoFillRLselection&&s<n&&r-i-o<n-s+1&&i-r<n-s+1:if(this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.endCell,t){for(h=i;h<=i+o;h++)for(d=((p=this.getAutoFillCells(h,n)).reverse(),0),c=this.startCellIndex-1;s<=c;c--)a<d&&(d=0),this.updateValue(h,c,p[parseInt(d.toString(),10)]),d++;this.selectCellsByRange({rowIndex:i,cellIndex:s},{rowIndex:i+o,cellIndex:this.startCellIndex+a})}else this.drawAFBorders();break;case r<i:if(this.startAFCell=this.parent.getCellFromIndex(r,n),this.endAFCell=this.endCell,t){for(var u=g=parseInt(this.endCell.parentElement.getAttribute(x),10),h=i-1;r<=h;h--){u===this.startIndex-1&&(u=g);p=this.getAutoFillCells(u,n),d=0;u--;for(c=this.startCellIndex;c<=this.startCellIndex+a;c++)this.updateValue(h,c,p[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:r,cellIndex:n+a},{rowIndex:i+o,cellIndex:n})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(r,n+a),t){for(var g=parseInt(this.endCell.parentElement.getAttribute(x),10),u=this.startIndex,h=g+1;h<=r;h++){u===g+1&&(u=this.startIndex);for(var p=this.getAutoFillCells(u,n),d=(u++,0),f=this.startCellIndex;f<=this.startCellIndex+a;f++)this.updateValue(h,f,p[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:g-o,cellIndex:n},{rowIndex:r,cellIndex:n+a})}else this.drawAFBorders()}},s.prototype.mouseUpHandler=function(e){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!P.isNullOrUndefined(this.element.parentElement)&&P.remove(this.element),this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?this.mUPTarget=E(e.target,b):this.mUPTarget=null;var t,i=P.closest(e.target,".e-rowcell");this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&i&&i.classList.contains(b)&&(t=parseInt(i.parentElement.getAttribute(x),10),i=parseInt(i.getAttribute(ps),10),this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i})),this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel&&(this.preventFocus=!0,t=E(e.target,b),this.endAFCell=t||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,P.isNullOrUndefined(this.endAFCell)||P.isNullOrUndefined(this.startAFCell)||(this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),0<this.parent.aggregates.length&&this.parent.notify(Rt,{})),this.isAutoFillSel=!1,this.preventFocus=!1),P.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&P.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),P.EventHandler.remove(document,"mouseup",this.mouseUpHandler)},s.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},s.prototype.updateAutoFillPosition=function(){var e,t,i,n;this.parent.enableAutoFill&&!this.parent.isEdit&&-1<this.selectionSettings.cellSelectionMode.indexOf("Box")&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length?(n=parseInt(this.target.getAttribute(ps),10),e=parseInt(this.target.getAttribute("index"),10),t=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,t=this.getAutoFillCells(t,n).filter(function(e){return""===e.style.display}),(n=this.parent.getColumnByIndex(n)).getFreezeTableName(),e=e<this.parent.frozenRows,n=this.parent.getFrozenMode()===as&&n.getFreezeTableName()===ls,P.select("#"+this.parent.element.id+"_autofill",E(this.target,$r))||(P.select("#"+this.parent.element.id+"_autofill",this.parent.element)&&P.select("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=P.createElement("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),(e?this.parent.getHeaderTable():this.parent.getContentTable()).parentElement.appendChild(this.autofill),n&&(e?this.parent.getHeaderTable():this.parent.getContentTable()).parentElement.appendChild(this.autofill)),(n=t[t.length-1])&&n.offsetParent&&(e=n.getBoundingClientRect(),t=n.offsetParent.getBoundingClientRect(),(n.offsetParent.classList.contains("e-content")||n.offsetParent.classList.contains("e-headercontent"))&&(t=n.offsetParent.querySelector("table").getBoundingClientRect()),i=this.isLastCell(n)?4:0,n=this.isLastRow(n)?3:0,this.parent.enableRtl?this.autofill.style.right=t.right-e.right+e.width-4-i+"px":this.autofill.style.left=e.left-t.left+e.width-4-i+"px",this.autofill.style.top=e.top-t.top+e.height-5-n+"px"),this.autofill.style.display=""):this.hideAutoFill()},s.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var t,i=e.target,n=this.parent,r=E(i,"e-grid");if(!(r&&r.id!==n.element.id||E(i,Kr)&&!this.parent.frozenRows||E(i,"e-editedbatchcell")||E(i,ts))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),E(i,b)&&!e.shiftKey&&!e.ctrlKey){if(-1<n.selectionSettings.cellSelectionMode.indexOf("Box")&&!this.isRowType()&&!this.isSingleSel())t=this.isCellDrag=!0;else if(n.allowRowDragAndDrop&&!n.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||P.closest(i,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);t=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),n.getContent().appendChild(this.element)}t&&this.enableDrag(e,!0)}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},s.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(x),10),this.startCellIndex=parseInt(E(this.startCell,b).getAttribute(ps),10))},s.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(x),10),this.startCellIndex=parseInt(E(this.startCell,b).getAttribute(ps),10))},s.prototype.enableDrag=function(e,t){var i=this.parent,t=(t&&(t=P.closest(e.target,"tr"),this.startDIndex=parseInt(t.getAttribute(x),10),this.startDCellIndex=parseInt(E(e.target,b).getAttribute(ps),10)),document.body.classList.add("e-disableuserselect"),i.element.getBoundingClientRect()),e=ih(e);this.x=e.x-t.left,this.y=e.y-t.top,P.EventHandler.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&P.EventHandler.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),P.EventHandler.add(document,"mouseup",this.mouseUpHandler,this)},s.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;if("virtualscroll"===e.requestType||this.parent.isPersistSelection||t||this.clearSelection(),("virtualscroll"===e.requestType||t)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(e){return e.isSelectable}),n=[];this.selectedRowState={},this.persistSelectedData=[];for(var r=0;r<i.length;r++){n.push(i[parseInt(r.toString(),10)].index);var s=this.getPkValue(this.primaryKey,i[parseInt(r.toString(),10)].data);this.selectedRowState[""+s]=!0,this.persistSelectedData.push(i[parseInt(r.toString(),10)].data)}this.selectedRowIndexes=n}},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:g,handler:this.enableAfterRender},{event:lt,handler:this.initializeSelection},{event:Tt,handler:this.onActionComplete},{event:Ot,handler:this.onActionComplete},{event:ct,handler:this.onPropertyChanged},{event:kt,handler:this.onCellFocused},{event:Mi,handler:this.clearSelAfterRefresh},{event:zt,handler:this.columnPositionChanged},{event:pt,handler:this.initialEnd},{event:qt,handler:this.rowsRemoved},{event:ft,handler:this.refreshHeader},{event:At,handler:this.destroyAutoFillElements},{event:r,handler:this.destroy}],wp(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(y,this.actionBeginFunction),this.parent.addEventListener(p,this.actionCompleteFunction),this.addEventListener_checkbox())},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(P.EventHandler.remove(document,"mouseup",this.mouseUpHandler),P.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),P.EventHandler.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),wp(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(y,this.actionBeginFunction),this.parent.removeEventListener(p,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(At,this.destroyAutoFillElements))},s.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(P.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this),P.EventHandler.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||P.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},s.prototype.unWireEvents=function(){this.isMacOS?(P.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler),P.EventHandler.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||P.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},s.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},s.prototype.refreshHeader=function(){this.setCheckAllState()},s.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++){var i=this.getPkValue(this.primaryKey,e.records[parseInt(t.toString(),10)]);delete this.selectedRowState[""+i],--this.totalRecordsCount}this.setCheckAllState()},s.prototype.beforeFragAppend=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()},s.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},s.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},s.prototype.render=function(e){P.EventHandler.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),P.EventHandler.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},s.prototype.onPropertyChanged=function(e){var t;e.module===this.getModuleName()&&(t=this.parent,P.isNullOrUndefined(e.properties.type)||("Single"===this.selectionSettings.type?(t.element.removeAttribute("aria-multiselectable"),1<this.selectedRowCellIndexes.length&&(this.clearCellSelection(),this.prevCIdxs=void 0),1<this.selectedRowIndexes.length&&(this.clearRowSelection(),this.prevRowIndex=void 0),1<this.selectedColumnsIndexes.length&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):"Multiple"===this.selectionSettings.type&&t.element.setAttribute("aria-multiselectable","true")),P.isNullOrUndefined(e.properties.mode)&&P.isNullOrUndefined(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(function(e){return"checkbox"===e.type}).length&&(t.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode)),this.drawBorders())},s.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},s.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(pt,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},s.prototype.checkBoxSelectionChanged=function(){var e=this.parent,t=(e.off(pt,this.checkBoxSelectionChanged),e.getColumns().filter(function(e){return"checkbox"===e.type}));0<t.length&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,P.isNullOrUndefined(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())},s.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&0<this.parent.getPrimaryKeyFieldNames().length?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):0<this.parent.getPrimaryKeyFieldNames().length?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},s.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)&&this.dataSuccess(!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json)},s.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]);P.isNullOrUndefined(this.selectedRowState[""+i])&&e[parseInt(t.toString(),10)][this.chkField]&&(this.selectedRowState[""+i]=e[parseInt(t.toString(),10)][this.chkField],this.persistSelectedData.push(e[parseInt(t.toString(),10)][this.chkField]))}},s.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)if(e){var t=Object.keys(this.selectedRowState),i=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var n=0,r=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData;n<r.length;n++){var s,o=r[n];P.isNullOrUndefined(o[this.primaryKey])||(s=o[this.primaryKey].toString(),-1===t.indexOf(s)&&-1===i.indexOf(s)&&(this.selectedRowState[o[this.primaryKey]]=!0))}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(e)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var a=0,l=this.parent.getRowsObject().filter(function(e){return e.isSelectable});a<l.length;a++){var h=l[a];this.selectedRowState[this.getPkValue(this.primaryKey,h.data)]=!0}else{e=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var p=0,d=this.isPartialSelection?e:e.records;p<d.length;p++){var o=d[p];this.selectedRowState[this.getPkValue(this.primaryKey,o)]=!0}else for(var c=0,u=e;c<u.length;c++){o=u[c];this.selectedRowState[this.getPkValue(this.primaryKey,o)]=!0}}else this.selectedRowState={}},s.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},s.prototype.getAvailableSelectedData=function(){var e=new A.DataManager(this.persistSelectedData).executeLocal(this.parent.getDataModule().generateQuery(!0));return e=this.parent.groupSettings.columns.length&&e&&e.records?e.records.slice():e},s.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!P.isNullOrUndefined(e)&&0<e.length&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],i=0;i<e.length;i++){var n,r,s=this.getRowObj(e[parseInt(i.toString(),10)]),o=s&&s.data?this.getPkValue(this.primaryKey,s.data):null;if(null===o)return;this.isPartialSelection&&!s.isSelectable||(n=void 0,r=e[parseInt(i.toString(),10)].querySelector(".e-checkselect"),this.selectedRowState[""+o]||"Check"===this.parent.checkAllRows&&this.selectedRowState[""+o]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(o)<0||"Uncheck"===this.parent.checkAllRows&&0<this.chkAllCollec.indexOf(o)&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!P.isNullOrUndefined(this.chkField)&&s.data[this.chkField]?(t.push(parseInt(e[parseInt(i.toString(),10)].getAttribute(x),10)),n=!0):(n=!1,this.checkedTarget!==r&&this.parent.isCheckBoxSelection&&r&&Dh(r.nextElementSibling,n)),this.updatePersistCollection(e[parseInt(i.toString(),10)],n))}this.isSingleSel()&&0<t.length?this.selectRow(t[0],!0):this.selectRows(t)}(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode)&&0<this.getCurrentBatchRecordChanges().length&&this.setCheckAllState()},s.prototype.actionBegin=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!P.isNullOrUndefined(t)){var i=P.closest(t,"."+ts);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));i=this.getRowObj(i);if(!i)return;this.selectedRowState[this.getPkValue(this.primaryKey,i.data)]=i.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&("paging"===e.requestType&&(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[]),"filtering"!==e.requestType&&"searching"!==e.requestType||(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},s.prototype.actionComplete=function(e){var t;if("save"===e.requestType&&this.parent.isPersistSelection&&("add"===e.action&&(this.isCheckedOnAdd&&(t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid")),this.selectedRowState[this.getPkValue(this.primaryKey,t.data)]=t.isSelected=this.isCheckedOnAdd),this.isHdrSelectAllClicked=!1,this.setCheckAllState()),this.refreshPersistSelection()),"delete"===e.requestType&&this.parent.isPersistSelection){for(var i=e.data.slice(),n=0;n<i.length;n++){var r=this.getPkValue(this.primaryKey,i[parseInt(n.toString(),10)]);P.isNullOrUndefined(r)||this.updatePersistDelete(r,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===e.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var s=this.parent.getRowsObject(),o=[],n=0;n<s.length;n++)s[parseInt(n.toString(),10)].isSelectable&&o.push(s[parseInt(n.toString(),10)].index);o.length&&this.selectRows(o)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},s.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),t=[],i=0;i<e.length;i++)e[parseInt(i.toString(),10)].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}},s.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),i=0;i<t.length;i++)this.updatePersistCollection(t[parseInt(i.toString(),10)],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.isPartialSelection?this.persistSelectedData:(this.parent.groupSettings.columns.length?this.getData().records:this.getData()).slice())}},s.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],P.isNullOrUndefined(i)||(t=i.querySelector(".e-edit-checkselect"),P.isNullOrUndefined(t))||Dh(t.nextElementSibling,e)},s.prototype.checkSelectAll=function(e){var t=this,i=this.getCheckAllStatus(e),n="Check"===i;if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&("Uncheck"===i||this.isCheckboxReset||"Intermediate"===i&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,"Intermediate"===i&&(this.chkField||this.parent.isPersistSelection||(n=this.getCurrentBatchRecordChanges().some(function(e){return t.getPkValue(t.primaryKey,e)in t.selectedRowState})),this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isPersistSelection)for(var r=0;r<this.getCurrentBatchRecordChanges().length;r++)if(!P.isNullOrUndefined(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+r]))){if(!Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+r]).toString())){n=!1;break}n=!0}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!n),this.target=null,0<this.getCurrentBatchRecordChanges().length&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!n)},s.prototype.getCheckAllStatus=function(e){P.isNullOrUndefined(e)?P.isNullOrUndefined(this.getCheckAllBox())||(t=this.getCheckAllBox().nextElementSibling.classList):t=e.nextElementSibling.classList;var t,e="None";return t instanceof DOMTokenList&&(t.contains("e-check")?e="Check":t.contains("e-uncheck")?e="Uncheck":t.contains("e-stop")&&(e="Intermediate")),e},s.prototype.checkSelect=function(e){var t,i=P.closest(this.checkedTarget,"."+b),n=this.parent,r=(this.isMultiCtrlRequest=!0,0);this.isHeaderCheckboxClicked=!1,r=!Mh(n)||(t=i.parentElement.getAttribute("data-uid"),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length)?parseInt(i.parentElement.getAttribute(x),10):n.getRows().map(function(e){return e.getAttribute("data-uid")}).indexOf(t),this.parent.isPersistSelection&&0<this.parent.element.getElementsByClassName(is).length&&"Top"===this.parent.editSettings.newRowPosition&&!this.parent.editSettings.showAddNewRow&&++r,this.rowCellSelectionHandler(r,parseInt(i.getAttribute(ps),10)),this.moveIntoUncheckCollection(P.closest(i,"."+I)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},s.prototype.moveIntoUncheckCollection=function(e){"Check"!==this.parent.checkAllRows&&"Uncheck"!==this.parent.checkAllRows||(e=(e=this.getRowObj(e))&&e.data?this.getPkValue(this.primaryKey,e.data):null)&&(this.chkAllCollec.indexOf(e)<0?this.chkAllCollec.push(e):this.chkAllCollec.splice(this.chkAllCollec.indexOf(e),1))},s.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger(Xe,{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},s.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(var e=0,t=n=this.parent.getRowsObject().filter(function(e){return e.isSelectable});e<t.length;e++){var i=t[e];this.selectedRowIndexes.push(i.index)}var n;if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&"Check"===this.parent.checkAllRows&&(n=this.parent.getRowsObject().filter(function(e){return e.isSelectable})).length!==this.selectedRowIndexes.length)for(var r=0,s=n;r<s.length;r++){i=s[r];this.selectedRowIndexes.indexOf(i.index)<=-1&&this.selectedRowIndexes.push(i.index)}},s.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var t=(this.parent.groupSettings.columns.length?this.getData().records:this.getData()).length,i=0;i<t;i++)this.selectedRowIndexes.push(i)}else{var n;"Uncheck"===this.parent.checkAllRows?this.selectedRowIndexes=[]:(n=this.parent.getRowByIndex(e),e&&n&&"false"===n.getAttribute("aria-selected")&&(n=this.selectedRowIndexes.indexOf(e),this.selectedRowIndexes.splice(n,1)))}},s.prototype.isAllSelected=function(e){if(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData().length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection){if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var t=this.parent.partialSelectedRecords,i=0;i<t.length;i++){var n=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+n])return!1}return!0}return this.isSelectAllRowCount(e)}for(t=this.parent.groupSettings.columns.length?this.getData().records:this.getData(),i=0;i<t.length;i++){n=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+n])return!1}return!0},s.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var e=this.getAvailableSelectedData(),t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}for(var n=this.isPartialSelection?this.parent.partialSelectedRecords:this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),t=0;t<n.length;t++){i=this.getPkValue(this.primaryKey,n[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}return!0},s.prototype.setCheckAllState=function(e,t){var i,n,r,s,o,a;(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode)&&(n=i=!1,r=Object.keys(this.selectedRowState).length,this.parent.isPersistSelection||(r=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),!this.parent.isPersistSelection||(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection||!this.parent.searchSettings.key.length&&!this.parent.filterSettings.columns.length||(n=!0,i=this.isAllSelected(r)),s=this.getCheckAllBox())&&(o=s.nextElementSibling,P.removeClass([o],["e-check","e-stop","e-uncheck"]),Rh(s,!1),s.indeterminate=!1,a=this.parent.getDataModule().isRemote()?[]:this.parent.groupSettings.columns.length?this.getData().records:this.getData(),i&&n&&(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||a.length)||!n&&(r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(r)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&a.length&&r===a.length||(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(r===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(r)||r===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(r)))||r===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(P.addClass([o],["e-check"]),Rh(s,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!n||n&&this.someDataSelected())||0===r&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===r||r&&n&&this.someDataSelected())?(P.addClass([o],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(P.addClass([o],["e-stop"]),this.parent.checkAllRows="Intermediate",s.indeterminate=!0),0===r&&0===this.getCurrentBatchRecordChanges().length?P.addClass([o.parentElement],["e-checkbox-disabled"]):P.removeClass([o.parentElement],["e-checkbox-disabled"]),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(e){return e.isSelectable}).length&&o.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?P.addClass([o.parentElement],["e-checkbox-disabled"]):P.removeClass([o.parentElement],["e-checkbox-disabled"])),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||this.updateSelectedRowIndex(e))},s.prototype.isSelectAllRowCount=function(e){var t=0,i=this.parent.getRowsObject();return this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.parent.getDataModule().isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===i.length&&(t=i.filter(function(e){return e.isSelectable}).length)&&e===t:this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(t=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length)===this.totalRecordsCount&&this.parent.partialSelectedRecords.length&&e===this.parent.partialSelectedRecords.length:(t=i.filter(function(e){return e.isSelectable}).length)&&e===t},s.prototype.keyDownHandler=function(e){(("chrome"===P.Browser.info.name||"safari"===P.Browser.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===P.Browser.info.name&&17===e.keyCode||"mozilla"===P.Browser.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0);var t=E(e.target,"e-headercell"),i=E(e.target,b);(t?t.children[0].classList.contains("e-headerchkcelldiv"):!!i&&i.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===e.keyCode&&e.preventDefault()},s.prototype.keyUpHandler=function(e){(("chrome"===P.Browser.info.name||"safari"===P.Browser.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===P.Browser.info.name&&17===e.keyCode||"mozilla"===P.Browser.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)},s.prototype.clickHandler=function(e){var t,i=e.target,n=(this.actualTarget=i,this.isAutoFillSel||e.ctrlKey||e.shiftKey||(this.startAFCell=this.endAFCell=null),this.selectionSettings.persistSelection&&(this.deSelectedData=Gl(this.persistSelectedData)),(E(i,I)||E(i,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&i.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=e.metaKey,this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(e),!1),r=(this.preventFocus=!0,E(i,"e-checkbox-wrapper"));this.checkSelectAllClicked=!!(r&&r.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&E(i,I)),this.selectionSettings.persistSelection&&this.isPartialSelection&&E(i,"e-headerchkcelldiv")&&!i.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),r&&0<r.querySelectorAll(".e-checkselect,.e-checkselectall").length&&(t=r.querySelector('input[type="checkbox"]'),n=!0),this.drawBorders(),this.updateAutoFillPosition(),i=E(i,b),this.parent.isReact&&i&&!i.parentElement&&i.classList.contains("e-rowcell")&&(i=this.parent.getCellFromIndex(parseInt(i.getAttribute("index"),10),parseInt(i.getAttribute("data-colindex"),10))),this.isRowDragSelected&&P.isNullOrUndefined(i)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(i&&i.parentElement.classList.contains(I)&&!this.parent.selectionSettings.checkboxOnly||n)&&!this.isRowDragSelected?(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=i,P.isNullOrUndefined(t)?(r=0,r=parseInt(i.parentElement.getAttribute(x),10),this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&0<this.parent.element.getElementsByClassName(is).length&&++r,this.mUPTarget&&this.mUPTarget.isEqualNode(i)||this.rowCellSelectionHandler(r,parseInt(i.getAttribute(ps),10)),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(P.closest(i,"."+I)),this.setCheckAllState())):(this.checkedTarget=t).classList.contains("e-checkselectall")?this.checkSelectAll(t):this.checkSelect(t),this.parent.isCheckBoxSelection||!P.Browser.isDevice||this.isSingleSel()||this.showPopup(e)):e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")&&(n=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),this.headerSelectionHandler(this.parent.getColumnIndexByUid(n))),this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,P.isNullOrUndefined(P.closest(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},s.prototype.popUpClickHandler=function(e){var t=e.target;P.closest(t,".e-headercell")||e.target.classList.contains(b)||P.closest(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},s.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||Yl(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(1<this.selectedRecords.length||1<this.selectedRowCellIndexes.length)?" e-spanclicked":""))},s.prototype.rowCellSelectionHandler=function(e,t){var i,n;!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!P.closest(this.target,"."+b).classList.contains(es)?this.selectRowsByRange(P.isUndefined(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(P.isUndefined(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([e]),"Both"===this.selectionSettings.mode?(n=(i=this.parent.getColumns().find(function(e){return"checkbox"===e.type}))&&i.index!==t)&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle):i&&!n||this.addCellsToSelection([{rowIndex:e,cellIndex:t}]):this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")),this.isDragged=!1},s.prototype.onCellFocused=function(e){this.parent.frozenRows&&e.container.isHeader&&e.byKey&&("upArrow"===e.keyArgs.action?this.parent.allowFiltering?e.isJump="INPUT"===e.element.tagName:e.isJump="TH"===e.element.tagName:"downArrow"===e.keyArgs.action?(t=Number(e.element.parentElement.getAttribute(x)),e.isJump=0===t):"ctrlHome"===e.keyArgs.action&&(e.isJump=!0));var t=(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),i=e.container.isHeader&&"TD"!==e.element.tagName&&!P.closest(e.element,"."+b)&&!(e.byKey&&"space"===e.keyArgs.action);if(!e.byKey||t)t&&!this.parent.isCheckBoxSelection&&this.clearSelection();else{var t=(e.container.isContent?e.container:e).indexes,n=t[0],r=t[1],t=this.focus.getPrevIndexes();if((e.element.parentElement.querySelector(".e-rowcelldrag")||e.element.parentElement.querySelector(".e-dtdiagonalright")||e.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(t.cellIndex=t.cellIndex-1),this.parent.frozenRows&&(e.container.isHeader&&("TD"===e.element.tagName||P.closest(e.element,"."+b))?(s=this.parent.getHeaderTable().querySelector("thead").childElementCount,this.parent.editSettings.showAddNewRow&&"Top"===this.parent.editSettings.newRowPosition&&"upArrow"===e.keyArgs.action&&s++,n-=s,t.rowIndex=P.isNullOrUndefined(t.rowIndex)?null:t.rowIndex-s):(n+=this.parent.frozenRows,t.rowIndex=0!==t.rowIndex&&P.isNullOrUndefined(t.rowIndex)?null:t.rowIndex+this.parent.frozenRows)),this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(n=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),!(i||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&n===t.rowIndex&&r===t.cellIndex)||this.selectionSettings.allowColumnSelection){this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(n=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),!this.parent.editSettings.showAddNewRow||"Top"!==this.parent.editSettings.newRowPosition||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||"downArrow"!==e.keyArgs.action||n--,this.preventFocus=!0;var s=this.getKeyColIndex(e);switch(this.needColumnSelection&&(r=s),!this.parent.element.classList.contains("e-gridcell-read")||"tab"!==e.keyArgs.action&&"shiftTab"!==e.keyArgs.action&&"rightArrow"!==e.keyArgs.action&&"leftArrow"!==e.keyArgs.action||(i=this.target.getAttribute("aria-label"),i=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(r).field,this.target.setAttribute("aria-label",i)),e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(n,r);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(n,r);break;case"shiftDown":case"shiftUp":this.shiftDownKey(n,r);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(n,r);break;case"home":case"end":r="end"===e.keyArgs.action?this.getLastColIndex(n):0,this.applyHomeEndKey(n,r);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(n,r);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(n)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}}},s.prototype.getKeyColIndex=function(e){var t=null,i=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&E(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,i){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return t;var i=i.getAttribute("e-mappinguid"),i=this.getstackedColumns(this.parent.getColumnByUid(i).columns),n=this.parent.getColumnIndexByUid(i[i.length-1].uid),i=this.parent.getColumnIndexByUid(i[0].uid),t=this.prevColIndex>=n?i:n}else t=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return t},s.prototype.ctrlPlusA=function(){var e;this.isRowType()&&!this.isSingleSel()&&(e=this.parent.getRowsObject(),this.selectRowsByRange(e[0].index,e[e.length-1].index)),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},s.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},s.prototype.applyDownUpKey=function(e,t){var i=this.parent;!this.parent.isCheckBoxSelection||"Check"!==this.parent.checkAllRows||this.selectionSettings.persistSelection||this.selectionSettings.checkboxOnly||(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows,this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},s.prototype.applyUpDown=function(e){var t;e<0||(this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]),t=parseInt(this.target.getAttribute(ps),10),(e=this.contentRenderer.getRowByIndex(e))&&(this.target=e.getElementsByClassName(b)[parseInt(t.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")&&(e=this.target.getAttribute("aria-label"),e=this.target.innerHTML,this.target.setAttribute("aria-label",e)))},s.prototype.applyRightLeftKey=function(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},s.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},s.prototype.shiftDownKey=function(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(P.isUndefined(this.prevRowIndex)?this.isPartialSelection?this.selectRow(e,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},s.prototype.applyShiftLeftRightKey=function(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},s.prototype.getstackedColumns=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[parseInt(i.toString(),10)].columns?this.getstackedColumns(e[parseInt(i.toString(),10)].columns):t.push(e[parseInt(i.toString(),10)]);return t},s.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},s.prototype.addRemoveClassesForRow=function(e,t,i){for(var n,r,s,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];e&&(n=[].slice.call(e.getElementsByClassName(b)),r=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),s=e.querySelector(".e-rowdragdrop"),r&&n.push(r),s&&n.push(s),Ch.apply(void 0,[n,t].concat(o))),this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},s.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},s.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},s.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},s.prototype.getRenderer=function(){return P.isNullOrUndefined(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(O.RenderType.Content)),this.contentRenderer},s.prototype.getSelectedRecords=function(){return!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data}):this.persistSelectedData},s.prototype.selectColumn=function(e){var t=this.parent;if(!P.isNullOrUndefined(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnByIndex(e),n=t.getColumnHeaderByUid(i.uid),r=n.classList.contains("e-columnselection");if(t.selectionSettings.allowColumnSelection){var s=1<this.selectedColumnsIndexes.length&&-1<this.selectedColumnsIndexes.indexOf(e);if(this.clearColDependency(),!r||!this.selectionSettings.enableToggle||s){var o={columnIndex:e,headerCell:n,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(o,me),o.cancel)return void this.disableInteracted();t.selectionSettings.enableToggle&&e===this.prevColIndex&&r&&!s||this.updateColSelection(n,e);o={columnIndex:e,headerCell:n,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,ye)}this.updateColProps(e)}}},s.prototype.selectColumnsByRange=function(e,t){var i=this.parent;if(!P.isNullOrUndefined(i.getColumns()[parseInt(e.toString(),10)])){var n=[];if("Single"===i.selectionSettings.type||P.isNullOrUndefined(t))n[0]=e;else for(var r=e<t,s=e;r?s<=t:t<=s;r?s++:s--)n.push(s);this.selectColumns(n)}},s.prototype.selectColumns=function(e){var t=this.parent,i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),t.selectionSettings.allowColumnSelection){this.clearColDependency();var n={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,me),n.cancel)this.disableInteracted();else{for(var r=0,s=e.length;r<s;r++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[parseInt(r.toString(),10)]).uid),e[parseInt(r.toString(),10)]);i=this.getselectedCols(),n={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(n,ye),this.updateColProps(e[0])}}},s.prototype.selectColumnWithExisting=function(e){var t=this.parent;if(!P.isNullOrUndefined(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid),n=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){if(-1<this.selectedColumnsIndexes.indexOf(e))this.clearColumnSelection(e);else{n={columnIndex:e,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,me),n.cancel)return void this.disableInteracted();this.updateColSelection(i,e);n={columnIndex:e,headerCell:this.getselectedCols(),column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(n,ye)}this.updateColProps(e)}}},s.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var t=this.parent;if(P.isNullOrUndefined(e)||-1!==this.selectedColumnsIndexes.indexOf(e)){var i=P.isNullOrUndefined(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,n=t.getColumnByIndex(i),r=t.getColumnHeaderByUid(n.uid),i={columnIndex:i,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:n,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(i,Se))this.disableInteracted();else{for(var s=P.isNullOrUndefined(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[r],o=this.getSelectedColumnCells(e),a=0,l=s.length;a<l;a++)Ch([s[parseInt(a.toString(),10)]],!1,"e-columnselection");for(a=0,l=o.length;a<l;a++)Ch([o[parseInt(a.toString(),10)]],!1,"e-columnselection");P.isNullOrUndefined(e)?(this.columnDeselect(i,ve),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(e){return e.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!1)}}}},s.prototype.getselectedCols=function(){var e=this.parent;if(1<this.selectedColumnsIndexes.length)for(var t=[],i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(),10)]).uid));else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t},s.prototype.getSelectedColumnCells=function(e){for(var t=this.parent,i=!P.isNullOrUndefined(this.parent.rowTemplate)?t.getRows():t.getDataRows(),n=[],r=P.isNullOrUndefined(e)?".e-columnselection":'[data-colindex="'+e+'"]',s=0,o=i.length;s<o;s++)n=n.concat([].slice.call(i[parseInt(s.toString(),10)].querySelectorAll(r)));return n},s.prototype.columnDeselect=function(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel},s.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},s.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},s.prototype.updateColSelection=function(e,t){if(!P.isNullOrUndefined(this.parent.getColumns()[parseInt(t.toString(),10)])){var i=!P.isNullOrUndefined(this.parent.rowTemplate)?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(t),this.parent.getColumns()[parseInt(t.toString(),10)].isSelected=!0,t+=this.parent.getIndentCount(),Ch([e],!0,"e-columnselection");for(var n=0,r=i.length;n<r;n++)if(i[parseInt(n.toString(),10)].classList.contains(I))if(!i[parseInt(n.toString(),10)].classList.contains(ts)&&!i[parseInt(n.toString(),10)].classList.contains(is)||"Normal"!==this.parent.editSettings.mode||P.isNullOrUndefined(i[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]))if(this.parent.isSpan&&this.parent.isFrozenGrid())for(var s=i[parseInt(n.toString(),10)].querySelectorAll(".e-rowcell"),o=0;o<s.length;o++)s[parseInt(o.toString(),10)].getAttribute("aria-colindex")===e.getAttribute("aria-colindex")&&Ch([s[parseInt(o.toString(),10)]],!0,"e-columnselection");else P.isNullOrUndefined(i[parseInt(n.toString(),10)].childNodes[parseInt(t.toString(),10)])||Ch([i[parseInt(n.toString(),10)].childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection");else Ch([i[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection")}},s.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(P.isUndefined(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},s.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(ht,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(ae,this.onDataBoundFunction),this.parent.on(br,this.onDataBoundFunction),this.parent.on(pt,this.checkBoxSelectionChanged,this),this.parent.on(Vn,this.initPerisistSelection,this),this.parent.on(dt,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(p,this.actionCompleteFunc),this.parent.on(Lt,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(Qe,this.resizeEndFn)},s.prototype.removeEventListener_checkbox=function(){this.parent.off(ht,this.dataReady),this.parent.removeEventListener(ae,this.onDataBoundFunction),this.parent.removeEventListener(p,this.actionCompleteFunc),this.parent.off(br,this.onDataBoundFunction),this.parent.off(dt,this.setCheckAllForEmptyGrid),this.parent.off(Lt,this.clickHandler),this.parent.removeEventListener(Qe,this.resizeEndFn),this.parent.off(Vn,this.initPerisistSelection)},s.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();e&&(this.parent.isCheckBoxSelection=!0,e=e.nextElementSibling,P.removeClass([e],["e-check","e-stop","e-uncheck"]),P.addClass([e.parentElement],["e-checkbox-disabled"]))},s.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;"virtualscroll"===e.requestType||this.parent.isPersistSelection||t||(this.disableUI=!(this.parent.enableImmutableMode||"save"===e.requestType&&"add"===e.action),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},s.prototype.actionCompleteHandler=function(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},s.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,P.isNullOrUndefined(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex||!this.parent.enablePersistence?this.parent.selectedRowIndex=e:this.parent.selectedRowIndex=-1},s.prototype.disableInteracted=function(){this.isInteracted=!1},s.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null};var ya=s;function s(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.isRowDeselect=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}va.prototype.hasNonNumericCharacters=function(e){for(var t=!1,i=0,n=e;i<n.length;i++){var r=n[i];if((r<"0"||"9"<r)&&"."!==r)return!0;if("."===r){if(t)return!0;t=!0}}return!1},va.prototype.search=function(e){var t=this.parent;e=P.isNullOrUndefined(e)?"":e,yh(t)?t.notify(ei,{instance:this,handler:this.search,arg1:e}):e!==t.searchSettings.key?(this.headerFocus=!1,""===e||this.hasNonNumericCharacters(e)?t.searchSettings.key=e.toString():t.searchSettings.key=("."===e?e:parseFloat(e)).toString(),t.dataBind()):this.refreshSearch?t.refresh():this.headerFocus=!1},va.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ct,this.onPropertyChanged,this),this.parent.on(vt,this.onSearchComplete,this),this.parent.on(r,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(p,this.actionCompleteFunc),this.parent.on(Ni,this.cancelBeginEvent,this))},va.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ct,this.onPropertyChanged),this.parent.off(vt,this.onSearchComplete),this.parent.off(r,this.destroy),this.parent.removeEventListener(p,this.actionCompleteFunc),this.parent.off(Ni,this.cancelBeginEvent))},va.prototype.destroy=function(){this.removeEventListener()},va.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(P.isNullOrUndefined(e.properties.key)?this.parent.notify(ut,{requestType:"searching",type:y}):this.parent.notify(ut,{requestType:"searching",type:y,searchString:this.parent.searchSettings.key}))},va.prototype.onSearchComplete=function(e){this.parent.trigger(p,P.extend(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:p}))},va.prototype.onActionComplete=function(e){this.refreshSearch&&"refresh"===e.requestType&&this.headerFocus&&(this.headerFocus=!1,this.parent.focusModule.focus(),P.addClass([this.parent.focusModule.currentInfo.element],["e-focused"])),this.refreshSearch="searching"!==e.requestType},va.prototype.cancelBeginEvent=function(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},va.prototype.getModuleName=function(){return"search"};var Sa=va;function va(e){this.headerFocus=!1,this.parent=e,this.addEventListener()}wa.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ke,handler:this.batchChanges},{event:Dr,handler:this.resetColumnState}],wp(this.parent,this.evtHandlers,!0,this))},wa.prototype.removeEventListener=function(){this.parent.isDestroyed||wp(this.parent,this.evtHandlers,!1)},wa.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},wa.prototype.show=function(e,t){var e=this.getToggleFields(e),i=this.getColumns(e,t);this.parent.notify(Yt,{module:"edit"});for(var n=0;n<i.length;n++)i[parseInt(n.toString(),10)].visible=!0;this.setVisible(i)},wa.prototype.hide=function(e,t){var e=this.getToggleFields(e),i=this.getColumns(e,t);this.parent.notify(Yt,{module:"edit"});for(var n=0;n<i.length;n++)i[parseInt(n.toString(),10)].visible=!1;this.setVisible(i)},wa.prototype.getToggleFields=function(e){return"string"==typeof e?[e]:e},wa.prototype.getColumns=function(e,i){var n=this;return Vl(e,function(t){return Vl(n.parent.columnModel,function(e){if(e[""+i]===t)return e})[0]})},wa.prototype.batchActionPrevent=function(e,t){return void 0===t&&(t=[]),!yh(this.parent)||(this.colName=e,this.changedCol=t,this.parent.closeEdit(),!1)},wa.prototype.resetColumnState=function(){if(this.isShowHide)for(var e=0;e<this.colName.length;e++)this.colName[parseInt(e.toString(),10)].visible=!this.colName[parseInt(e.toString(),10)].visible},wa.prototype.setVisible=function(t,n){var e,r=this;void 0===n&&(n=[]),this.isShowHide=!0,this.batchActionPrevent(t,n)&&(e={requestType:"columnstate",cancel:!1,columns:n=0<n.length?n:t},this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&0<this.parent.groupModule.groupSettings.columns.length&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(y,e,function(e){var i=r.parent.getColumns();t=P.isNullOrUndefined(t)?i:t,e.cancel?(r.parent.notify(Fn,{showHideArgs:e}),0<t.length&&(t[0].visible=!0)):(Mh(r.parent)&&r.parent.contentModule.emptyVcRows(),e=r.parent.element.querySelector(".e-addedrow"),r.parent.editSettings.showAddNewRow&&e&&(P.remove(e),(r.parent.enableVirtualization||r.parent.enableInfiniteScrolling)&&(r.parent.isAddNewRow=!0),r.parent.addNewRowFocus=!0,r.parent.isEdit=!1),r.parent.allowSelection&&r.parent.getSelectedRecords().length&&!r.parent.selectionSettings.persistSelection&&r.parent.clearSelection(),r.parent.enableColumnVirtualization?t.filter(function(t){return i.some(function(e){return t.field===e.field})}).length&&r.parent.notify(Pt,t):(r.parent.isFrozenGrid()&&t.length&&r.parent.notify(Or,{isModeChg:!0}),r.parent.notify(Pt,t)),e={requestType:"columnstate",columns:n},r.parent.trigger(p,e),e=!r.parent.element.querySelector(".e-addedrow"),r.parent.editSettings.showAddNewRow&&e&&(r.parent.isEdit=!1,r.parent.addRecord(),r.parent.enableVirtualization||r.parent.enableInfiniteScrolling||r.parent.notify(Lr,{})),"All"!==r.parent.columnQueryMode&&r.parent.refresh())}),this.parent.groupSettings.columns.length||(this.parent.autoFit?this.parent.preventAdjustColumns():this.parent.allowResizing&&"Normal"===this.parent.resizeSettings.mode&&(e=-1===this.parent.getHeaderTable().style.width.indexOf("px"),this.widthService.setWidthToTable(e))))};var Ca=wa;function wa(e){this.colName=[],this.isShowHide=!1,this.parent=e,this.addEventListener(),this.widthService=new Yo(e)}Ia.prototype.getModuleName=function(){return"scroll"},Ia.prototype.setWidth=function(e){var t,i,n,r;this.parent.element.style.width=P.formatUnit(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&(t=(e=this.parent.toolbarModule.toolbar.element).querySelector(".e-toolbar-left"),i=e.querySelector(".e-toolbar-center"),n=e.querySelector(".e-toolbar-right"),r=e.querySelector(".e-toolbar-items"),t=t?t.clientWidth:0,i=i?i.clientWidth:0,n=n?n.clientWidth:0,r=r?r.clientWidth:0,e=e?e.clientWidth:0,!this.parent.enableAdaptiveUI||e<t||e<i||e<n||e<r)&&this.parent.toolbarModule.toolbar.refreshOverflow()},Ia.prototype.setHeight=function(){var e,t=0,i=this.parent.getContent().querySelector("."+Zr),n=this.parent.height;this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(n=parseInt(n,10)-Ia.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height?(t=(e=this.parent.getHeaderContent().querySelector(N+":not(.e-masked-tbody)"))?e.offsetHeight:0,e&&t?t-=e.getElementsByClassName(is).length*this.parent.getRowHeight():!this.parent.isInitialLoad&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(n=parseInt(n,10)-this.parent.frozenRows*this.parent.getRowHeight()),i.style.height=P.formatUnit(n-t)):i.style.height=P.formatUnit(n),this.ensureOverflow(i),this.parent.isFrozenGrid()&&this.refresh()},Ia.prototype.setPadding=function(){var e=this.parent.getHeaderContent(),t=Ia.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();e.querySelector("."+Kr).style[i.border]=0<t?"1px":"0px",e.style[i.padding]=0<t?t+"px":"0px"},Ia.prototype.removePadding=function(e){var e=this.getCssProperties(e),t=this.parent.getHeaderContent().querySelector("."+Kr),t=(t.style[e.border]="",t.parentElement.style[e.padding]="",this.parent.getFooterContent());t&&t.classList.contains("e-footerpadding")&&t.classList.remove("e-footerpadding")},Ia.prototype.refresh=function(){var e,t;"100%"===this.parent.height&&(e=this.parent.getContent(),this.parent.element.style.height="100%",t=this.widthService.getSiblingsHeight(e),e.style.height="calc(100% - "+t+"px)")},Ia.prototype.getThreshold=function(){return"mozilla"===P.Browser.info.name?.5:1},Ia.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(dt,this.wireEvents,this),this.parent.on(pt,this.wireEvents,this),this.parent.on(g,this.onPropertyChanged,this),this.parent.on(Li,this.wireEvents,this),this.parent.on(ft,this.setScrollLeft,this))},Ia.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(dt,this.wireEvents),this.parent.off(pt,this.wireEvents),this.parent.off(g,this.onPropertyChanged),this.parent.off(Li,this.wireEvents),this.parent.off(ft,this.setScrollLeft),this.unwireEvents())},Ia.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(P.EventHandler.remove(this.header,"touchstart pointerdown",this.setPageXY),P.EventHandler.remove(this.header,"touchmove pointermove",this.onTouchScroll));var e=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(e&&P.EventHandler.remove(e,"scroll",this.onCustomScrollbarScroll),this.content&&(P.EventHandler.remove(this.content,"scroll",this.onCustomScrollbarScroll),P.EventHandler.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(P.Browser.userAgent.toLowerCase())&&P.Browser.isDevice||P.EventHandler.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header)&&(P.EventHandler.remove(this.header,"scroll",this.onCustomScrollbarScroll),P.EventHandler.remove(this.header,"touchstart pointerdown",this.setPageXY),P.EventHandler.remove(this.header,"touchmove pointermove",this.onTouchScroll)),this.content&&P.EventHandler.remove(this.content,"scroll",this.contentScrollHandler),this.header&&P.EventHandler.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&P.EventHandler.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},Ia.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+Kr).scrollLeft=this.previousValues.left},Ia.prototype.onContentScroll=function(e){var s=this,o=e,a=o.classList.contains(Kr);return function(e){if(null!==s.content.querySelector(N)&&!s.parent.isPreventScrollEvent){var t=e.target;if(s.parent.frozenRows&&(0<s.content.scrollTop&&s.parent.frozenRows?P.addClass([s.parent.element],"e-top-shadow"):P.removeClass([s.parent.element],"e-top-shadow")),s.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var i=s.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),n=s.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])');0!==t.scrollLeft&&s.parent.getVisibleFrozenLeftCount()?P.addClass([s.parent.element],"e-left-shadow"):P.removeClass([s.parent.element],"e-left-shadow");Math.round((s.parent.enableRtl?t.scrollWidth+t.scrollLeft:t.scrollWidth-t.scrollLeft)+("auto"===s.parent.height?0:1))===t.offsetWidth&&s.parent.getVisibleFrozenRightCount()?P.removeClass([s.parent.element],"e-right-shadow"):P.addClass([s.parent.element],"e-right-shadow");var r=[].slice.call(s.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((1===r.length&&i.length||s.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||n.length)&&t.scrollLeft!==s.previousValues.left)return void(t.scrollLeft=s.previousValues.left);if(1!==r.length&&(i.length||n.length)&&t.scrollTop!==s.previousValues.top)return void(t.scrollTop=s.previousValues.top)}r=t.scrollLeft,n=(P.isNullOrUndefined(s.parent.infiniteScrollModule)||!s.parent.enableInfiniteScrolling||s.parent.isEdit&&(!s.parent.editSettings.showAddNewRow||s.parent.element.querySelector(".e-editedrow"))||s.parent.notify(Cn,{target:e.target,isLeft:s.previousValues.left!==r}),s.parent.groupSettings.columns.length&&s.parent.groupSettings.enableLazyLoading&&(i=s.previousValues.top<s.parent.getContent().firstElementChild.scrollTop,s.parent.notify(Pn,{scrollDown:i})),s.parent.notify(un,{}),t.classList.contains("e-summarycontent"));s.previousValues.left===r?s.previousValues.top=a?t.scrollTop:s.previousValues.top:(s.parent.notify(Tn,e),o.scrollLeft=r,n&&(s.header.scrollLeft=r),s.previousValues.left=r,s.parent.notify(Nt,{left:r}))}}},Ia.prototype.onCustomScrollbarScroll=function(e,t){var i=this,n=e,r=t;return function(e){null!==i.content.querySelector(N)&&(e=e.target.scrollLeft,i.previousValues.left!==e)&&(n.scrollLeft=e,r.scrollLeft=e,i.previousValues.left=e,i.parent.notify(Nt,{left:e}),i.parent.isDestroyed)}},Ia.prototype.onTouchScroll=function(e){var o=this,a=e;return function(e){var t,i,n,r,s;"mouse"===e.pointerType||(t=o.parent.isFrozenGrid(),i=o.getPointXY(e),n=a.scrollLeft+(o.pageXY.x-i.x),r=o.parent.getHeaderContent().querySelector("."+Kr),s=o.parent.getContent().querySelector("."+Zr),o.previousValues.left===n)||n<0||r.scrollWidth-r.clientWidth<n||(e.preventDefault(),r.scrollLeft=n,s.scrollLeft=n,t&&o.parent.enableColumnVirtualization&&(o.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=n),o.pageXY.x=i.x,o.previousValues.left=n)}},Ia.prototype.setPageXY=function(){var t=this;return function(e){"mouse"!==e.pointerType&&(t.pageXY=t.getPointXY(e))}},Ia.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},Ia.prototype.getScrollbleParent=function(e){var t,i;return null===e?null:(t=P.isNullOrUndefined(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY,t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"BODY"===e.tagName?e:this.getScrollbleParent(e.parentNode))},Ia.prototype.addStickyListener=function(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e&&this.parentElement?(this.eventElement="HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,P.EventHandler.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(P.EventHandler.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},Ia.prototype.resizeFrozenRowBorder=function(){this.parent.element.querySelector(".e-frozenrow-border")?e=this.parent.element.querySelector(".e-frozenrow-border"):(e=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-gridcontent")));var e,t="auto"!==this.parent.height?Ia.getScrollBarWidth():0;e.style.width=this.parent.element.offsetWidth-t-.5+"px"},Ia.prototype.wireEvents=function(){var e,t,i,n,r,s=this,o=(this.oneTimeReady&&(e=this.parent.isFrozenGrid(),this.content=this.parent.getContent().querySelector("."+Zr),this.header=this.parent.getHeaderContent().querySelector("."+Kr),t=this.parent.getContent().querySelector(".e-movablescrollbar"),this.parent.frozenRows&&this.header&&this.content&&(P.EventHandler.add(this.header,"touchstart pointerdown",this.setPageXY(),this),P.EventHandler.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),e&&t&&this.parent.enableColumnVirtualization&&(P.EventHandler.add(t,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),P.EventHandler.add(this.content,"scroll",this.onCustomScrollbarScroll(t,this.header),this),P.EventHandler.add(this.header,"scroll",this.onCustomScrollbarScroll(t,this.content),this),P.EventHandler.add(this.header,"touchstart pointerdown",this.setPageXY(),this),P.EventHandler.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),P.EventHandler.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(P.Browser.userAgent.toLowerCase())&&P.Browser.isDevice||P.EventHandler.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),P.EventHandler.add(this.content,"scroll",this.contentScrollHandler,this),P.EventHandler.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&P.EventHandler.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1),this.parent.getContentTable());Nl(function(){i=s.header.scrollLeft,n=o.scrollHeight,r=s.parent.getContent().clientHeight},function(){var e={cancel:!1};s.parent.notify(Wn,e),n<r&&"auto"!==s.parent.height&&s.setLastRowCell(),s.parent.frozenRows&&s.resizeFrozenRowBorder(),s.parent.enableVirtualization||s.parent.enableInfiniteScrolling||e.cancel||(s.header.scrollLeft=s.previousValues.left,s.content.scrollLeft=s.previousValues.left,s.content.scrollTop=s.previousValues.top),s.parent.enableColumnVirtualization||(s.content.scrollLeft=i,s.parent.isFrozenGrid()&&(s.previousValues.left=i))}),this.parent.isPreventScrollEvent=!1},Ia.prototype.setLastRowCell=function(){var e=this.parent.getContentTable();P.removeClass(e.querySelectorAll("td"),"e-lastrowcell"),e.querySelector("tr:nth-last-child(2)")&&this.parent.editSettings.showAddNewRow&&"Bottom"===this.parent.editSettings.newRowPosition&&P.addClass(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),P.addClass(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isSpan&&P.addClass(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},Ia.prototype.getCssProperties=function(e){var t={},e=P.isNullOrUndefined(e)?this.parent.enableRtl:e;return t.border=e?"borderLeftWidth":"borderRightWidth",t.padding=e?"paddingLeft":"paddingRight",t},Ia.prototype.ensureOverflow=function(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"},Ia.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!P.isNullOrUndefined(e.properties.width)))},Ia.prototype.makeStickyHeader=function(){var e,t,i,n,r,s,o,a,l;this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()&&(e=this.parent.getContent().getClientRects()[0])&&(t=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),r=t.offsetHeight+(i?i.offsetHeight:0)+(n?n.offsetHeight:0),s=this.parentElement.getClientRects()[0].top,a=e.top-(s<0?0:s),l=e.left,o=document.body.querySelector("#"+this.parent.element.id+"_columnmenu"),a<r&&0<e.bottom?(t.classList.add("e-sticky"),a=0,n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,a,e.width,l,!0),a+=n.getClientRects()[0].height),i&&(this.setSticky(i,a,e.width,l,!0),a+=i.getClientRects()[0].height),this.setSticky(t,a,e.width,l,!0),P.isNullOrUndefined(o)||(o.style.position="fixed",o.style.top=r+"px")):t.classList.contains("e-sticky")&&(this.setSticky(t,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1),(a=this.parent.element.querySelector(".e-ccdlg"))&&a.classList.remove("e-sticky"),P.isNullOrUndefined(o)||(o.style.position="absolute",l=e.top-s,o.style.top=l+"px")),this.parent.notify(Cr,{}))},Ia.prototype.setSticky=function(e,t,i,n,r){r?e.classList.add("e-sticky"):e.classList.remove("e-sticky"),e.style.width=null!=i?i+"px":"",e.style.top=null!=t?t+"px":"",e.style.left=null!==n?parseInt(e.style.left,10)!==n?n+"px":e.style.left:""},Ia.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.removeEventListener(),e=this.parent.getContent().querySelector("."+Zr),P.EventHandler.remove(e,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),P.removeClass([this.parent.getHeaderContent().querySelector("."+Kr)],Kr),P.removeClass([e],Zr),e.style.height="",this.parent.element.style.width="")},Ia.getScrollBarWidth=ph;var ba=Ia;function Ia(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Yo(e),this.addEventListener()}xa=function(e,t){return(xa=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var xa,Ra,fa=function(e,t){function i(){this.constructor=e}xa(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Ea=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(o=(s<3?r(o):3<s?r(t,i,o):r(t,i))||o);return 3<s&&o&&Object.defineProperty(t,i,o),o},o=(Ra=P.ChildProperty,fa(Da,Ra),Da.prototype.setFormatter=function(e){this.formatFn=e},Da.prototype.getFormatter=function(){return this.formatFn},Da.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[P.getEnumValue(O.CellType,O.CellType.Summary)]={fn:P.compile(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[P.getEnumValue(O.CellType,O.CellType.GroupSummary)]={fn:P.compile(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[P.getEnumValue(O.CellType,O.CellType.CaptionSummary)]={fn:P.compile(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},Da.prototype.getTemplate=function(e){return this.templateFn[P.getEnumValue(O.CellType,e)]},Da.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},Ea([P.Property()],Da.prototype,"type",void 0),Ea([P.Property()],Da.prototype,"field",void 0),Ea([P.Property()],Da.prototype,"columnName",void 0),Ea([P.Property()],Da.prototype,"format",void 0),Ea([P.Property()],Da.prototype,"footerTemplate",void 0),Ea([P.Property()],Da.prototype,"groupFooterTemplate",void 0),Ea([P.Property()],Da.prototype,"groupCaptionTemplate",void 0),Ea([P.Property()],Da.prototype,"customAggregate",void 0),Da);function Da(){var e=null!==Ra&&Ra.apply(this,arguments)||this;return e.templateFn={},e}Ta=P.ChildProperty,fa(Oa,Ta),Ea([P.Collection([],o)],Oa.prototype,"columns",void 0);var Ta,fa=Oa;function Oa(){return null!==Ta&&Ta.apply(this,arguments)||this}Fa.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(pt,this.initialEnd,this),this.parent.on(Mt,this.keyDownHandler,this),this.parent.on(Lt,this.clickHandler,this),this.parent.on(dt,this.initialEnd,this),P.EventHandler.add(this.parent.element,"keydown",this.pasteHandler,this))},Fa.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Mt,this.keyDownHandler),this.parent.off(pt,this.initialEnd),this.parent.off(Lt,this.clickHandler),this.parent.off(dt,this.initialEnd),P.EventHandler.remove(this.parent.element,"keydown",this.pasteHandler))},Fa.prototype.clickHandler=function(e){e=e.target;E(e,"e-rowcell")},Fa.prototype.pasteHandler=function(e){var t,i,n=this,r=this.parent,s=/(Mac)/i.test(navigator.platform),o=this.parent.getSelectedRowCellIndexes();67===e.keyCode&&s&&e.metaKey&&!r.isEdit&&this.copy(),o.length&&86===e.keyCode&&(!s&&e.ctrlKey||s&&e.metaKey)&&!r.isEdit&&(e=P.closest(document.activeElement,"."+b),this.clipBoardTextArea)&&e&&r.editSettings.allowEditing&&"Batch"===r.editSettings.mode&&"Cell"===r.selectionSettings.mode&&"Flow"!==r.selectionSettings.cellSelectionMode&&(this.activeElement=document.activeElement,t=window.scrollX,i=window.scrollY,this.clipBoardTextArea.focus(),setTimeout(function(){n.activeElement.focus(),window.scrollTo(t,i),n.paste(n.clipBoardTextArea.value,o[0].rowIndex,o[0].cellIndexes[0])},s?100:10))},Fa.prototype.paste=function(e,t,i){for(var n,r=this.parent,s=i,o=t,a=e.split("\n"),l=0;l<a.length;l++){if(n=a[parseInt(l.toString(),10)].split("\t"),s=i,l===a.length-1&&""===a[parseInt(l.toString(),10)]||P.isUndefined(r.getRowByIndex(o))){s++;break}for(var h=0;h<n.length;h++){if(!r.getCellFromIndex(o,s)){s++;break}var p,d=(p=r.getColumnByIndex(s)).getParser()?p.getParser()(n[parseInt(h.toString(),10)]):n[parseInt(h.toString(),10)];!p.allowEditing||p.isPrimaryKey||p.template||(this.parent.trigger(Je,d={column:p,data:d,rowIndex:o}),o=d.rowIndex,d.cancel)||r.editModule&&("number"===p.type?this.parent.editModule.updateCell(o,p.field,parseFloat(d.data)):r.editModule.updateCell(o,p.field,d.data)),s++}o++}r.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:o-1,cellIndex:s-1});e=this.parent.getCellFromIndex(o-1,s-1);e&&P.classList(e,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},Fa.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(pt,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},Fa.prototype.keyDownHandler=function(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)},Fa.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){this.clipBoardTextArea.value=this.copyContent="";var t=this.parent.getDataRows();if("Cell"!==this.parent.selectionSettings.mode){var i=this.parent.getSelectedRowIndexes().sort(function(e,t){return e-t});if(e){for(var n=[],r=0;r<this.parent.getVisibleColumns().length;r++)n[parseInt(r.toString(),10)]=this.parent.getVisibleColumns()[parseInt(r.toString(),10)].headerText;this.getCopyData(n,!1,"\t",e),this.copyContent+="\n"}for(r=0;r<i.length;r++){0<r&&(this.copyContent+="\n");var s=[],o=i[parseInt(r.toString(),10)];!Mh(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(o=t.map(function(e){return e.getAttribute("data-rowindex")}).indexOf(i[parseInt(r.toString(),10)].toString())),s.push.apply(s,[].slice.call(t[parseInt(o.toString(),10)].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(s,!1,"\t",e)}}else{var a=this.checkBoxSelection();if(a.status){if(e){for(var l=[],r=0;r<a.colIndexes.length;r++){var h=this.parent.getColumnHeaderByIndex(a.colIndexes[parseInt(r.toString(),10)]);h.classList.contains("e-hide")||l.push(h)}this.getCopyData(l,!1,"\t",e),this.copyContent+="\n"}for(r=0;r<a.rowIndexes.length;r++){0<r&&(this.copyContent+="\n");var p=[].slice.call(t[a.rowIndexes[parseInt(r.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(p,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",e)}var d={data:this.copyContent,cancel:!1};this.parent.trigger(Ye,d),d.cancel||(this.clipBoardTextArea.value=this.copyContent=d.data,P.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0)}},Fa.prototype.getCopyData=function(e,t,i,n){for(var r,s="string"!=typeof e[0],o=0;o<e.length;o++)n&&t&&(r=parseInt(e[parseInt(o.toString(),10)].getAttribute(ps),10),this.copyContent+=this.parent.getColumns()[parseInt(r.toString(),10)].headerText+"\n"),s?e[parseInt(o.toString(),10)].classList.contains("e-hide")||(this.copyContent+=e[parseInt(o.toString(),10)].innerText):this.copyContent+=e[parseInt(o.toString(),10)],o<e.length-1&&(this.copyContent+=i)},Fa.prototype.copy=function(e){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},Fa.prototype.getModuleName=function(){return"clipboard"},Fa.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(P.remove(this.clipBoardTextArea),this.clipBoardTextArea=null)},Fa.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if("Cell"===e.selectionSettings.mode){for(var i=e.getSelectedRowCellIndexes(),n=void 0,r=[],s=void 0,s=0;s<i.length&&(i[parseInt(s.toString(),10)].cellIndexes.length&&r.push(i[parseInt(s.toString(),10)].rowIndex),!i[parseInt(s.toString(),10)].cellIndexes.length||(n=n||JSON.stringify(i[parseInt(s.toString(),10)].cellIndexes.sort()))===JSON.stringify(i[parseInt(s.toString(),10)].cellIndexes.sort()));s++);r.sort(function(e,t){return e-t}),s===i.length&&(t={status:!0,rowIndexes:r,colIndexes:i[0].cellIndexes})}return t};var Aa=Fa;function Fa(e,t){this.copyContent="",this.isSelect=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}var ka="https://ej2.syncfusion.com/documentation/grid",Ma="https://ej2.syncfusion.com/documentation/",La="[EJ2Grid.Warning]",Pa="[EJ2Grid.Error]",Na="[EJ2Grid.Info]",Ba=(za.prototype.getModuleName=function(){return"logger"},za.prototype.log=function(e,t){for(var i=e=e instanceof Array?e:[e],n=0;n<i.length;n++){var r=Ha[i[parseInt(n.toString(),10)]],s=r.check(t,this.parent);s.success&&console[r.logType](r.generateMessage(t,this.parent,s.options))}},za.prototype.patchadaptor=function(){var n=this.parent.getDataModule().dataManager.adaptor,r=n.beforeSend;r&&(n.beforeSend=function(e,t,i){r.call(n,e,t,i)})},za.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},za);function za(e){this.parent=e,this.parent.on("initial-end",this.patchadaptor,this)}var Ua,qa,Ha={module_missing:{type:"module_missing",logType:"warn",check:function(e,t){var i=t.getInjectedModules().map(function(e){return e.prototype.getModuleName()}),t=t.requiredModules().map(function(e){return e.member}).filter(function(e){return-1===i.indexOf(e)});return{success:0<t.filter(function(e){return"resize"!==e}).length,options:t}},generateMessage:function(e,t,i){return i=i.filter(function(e){return"resize"!==e}).reduce(function(e,t){return e+"* "+t+"\n"},""),La+": MODULES MISSING\nThe following modules are not injected:.\n"+i+"Refer to "+ka+"/module.html for documentation on importing feature modules."}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:"undefined"==typeof Promise}},generateMessage:function(){return Pa+": PROMISE UNDEFINED\nPromise object is not present in the global environment,please use polyfil to support Promise object in your environment.\nRefer to "+Ma+"/base/browser.html?#required-polyfills for more information."}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(e,t){return{success:t.enableColumnVirtualization?0===t.getPrimaryKeyFieldNames().length:0===t.getColumns().filter(function(e){return e.isPrimaryKey}).length}},generateMessage:function(){return La+": PRIMARY KEY MISSING\nEditing is enabled but primary key column is not specified.\nRefer to "+ka+"/api-column.html?#isprimarykey for documentation on providing primary key columns."}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(e,t){return{success:t.selectionSettings.persistSelection&&0===t.getColumns().filter(function(e){return e.isPrimaryKey}).length}},generateMessage:function(){return La+": PRIMARY KEY MISSING\nselectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\nRefer to "+ka+"/api-column.html?#isprimarykey for documentation on providing primary key columns."}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(e,t){var i="",n=ja(e),r=Va(e),i=""!==r?r:""!==n?n:e.error;return La+": "+i}},locale_missing:{type:"locale_missing",logType:"warn",check:function(e,t){var i=A.DataUtil.getObject("locale."+t.locale+".grid",P.L10n);return{success:"en-US"!==t.locale&&P.isNullOrUndefined(i)}},generateMessage:function(e,t){return La+": LOCALE CONFIG MISSING\nLocale configuration for '"+t.locale+"' is not provided.\nRefer to "+ka+"/globalization-and-localization.html?#localization \n             for documentation on setting locale configuration."}},limitation:{type:"limitation",logType:"warn",check:function(e,t){var i;switch(e){case"freeze":i={success:!P.isUndefined(t.detailTemplate)||!P.isUndefined(t.childGrid),options:{name:"freeze"}};break;case"virtualization":i={success:!P.isUndefined(t.detailTemplate)||!P.isUndefined(t.childGrid),options:{name:"virtualization"}};break;default:i={success:!1}}return i},generateMessage:function(e,t,i){var n,i=i.name;switch(i){case"freeze":n="Frozen rows and columns do not support the following features:\n* Details Template\n* Hierarchy Grid\n";break;case"virtualization":n="Virtualization does not support the following features.\n* Details Template.\n* Hierarchy Grid.\n";break;default:n=""}return La+": "+i.toUpperCase()+" LIMITATIONS\n"+n}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(e,t){return{success:!(t.columns.length||t.dataSource instanceof A.DataManager||!P.isNullOrUndefined(t.dataSource)&&t.dataSource.length)}},generateMessage:function(){return La+": GRID CONFIG MISSING\ndataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.\nRefer to "+ka+"/columns.html for documentation on configuring the grid data and columns."}},virtual_height:{type:"virtual_height",logType:"error",check:function(e,t){return{success:P.isNullOrUndefined(t.height)||"auto"===t.height}},generateMessage:function(){return Pa+": GRID HEIGHT MISSING \nheight property is required to use virtualization.\nRefer to "+ka+"/virtual.html for documentation on configuring the virtual grid."}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(e){return{success:Array.isArray(e)||Array.isArray(e.result)}},generateMessage:function(){return Pa+": RETRUN VALUE MISSING  \nRemote service returns invalid data. \nRefer to "+ka+"/edit.html for documentation on configuring editing with remote data."}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(e,t){return{success:t.getDataModule().isRemote()}},generateMessage:function(){return La+": SORT COMPARER NOT WORKING  \nSort comparer will not work with remote data.Refer to "+ka+"/sorting/#custom-sort-comparer for documentation on using the sort comparer."}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(e){return{success:e.column.minWidth&&e.column.minWidth>=e.width||e.column.maxWidth&&e.column.maxWidth<=e.width}},generateMessage:function(){return Na+": RESIZING COLUMN REACHED MIN OR MAX  \nThe column resizing width is at its min or max."}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(e){var t;switch(e.moduleName){case"reorder":t=P.isNullOrUndefined(e.destColumn)?"reordering action is disabled for the "+e.column.headerText+" column":"reordering action is disabled for the "+(e.column.allowReordering?e.destColumn:e.column).headerText+" column";break;case"group":t="grouping action is disabled for the "+e.columnName+" column.";break;case"filter":t="filtering action is disabled for the "+e.columnName+" column.";break;case"sort":t="sorting action is disabled for the "+e.columnName+" column."}return{success:!0,options:{fn:t}}},generateMessage:function(e,t,i){return Na+": ACTION DISABLED \n "+i.fn}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(e){return{success:!0,options:{args:e}}},generateMessage:function(e,t,i){return Na+": EXPORTING INPROGRESS \n Grid "+i.args+"ing is in progress"}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(e){return{success:!0,options:{args:e}}},generateMessage:function(e,t,i){return Na+": EXPORTING COMPLETED \n Grid "+i.args+"ing is complete"}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return Pa+": FOREIGNKEY CONFIG \n  Grid foreign key column needs a valid data source/service.Refer to "+ka+"/columns/#foreign-key-column for documentation on configuring foreign key columns."}},initial_action:{type:"initial_action",logType:"error",check:function(e){var t;switch(e.moduleName){case"group":t="The "+e.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":t="The "+e.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":t="The "+e.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column."}return{success:!0,options:{fn:t}}},generateMessage:function(e,t,i){return Pa+": INITIAL ACTION FAILURE \n "+i.fn}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(e,t){return{success:t.getColumns().length<=t.frozenColumns||t.currentViewData.length&&t.frozenRows>=t.currentViewData.length}},generateMessage:function(e,t){return Pa+": OUT OF RANGE ERROR-\n "+(t.getColumns().length<=t.frozenColumns?"FROZEN COLUMNS,":"")+(t.frozenRows>=t.currentViewData.length?"FROZEN ROWS":"")+" invalid"}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(e){return{success:P.isNullOrUndefined(e.column.type),options:e.column.headerText}},generateMessage:function(e,t,i){return Pa+": COLUMN TYPE MISSING-\n  "+i+" column type was invalid or not defined.Please go through below help link: "+Ma+"/grid/columns/#column-type"}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(e){return{success:e.dataState.dataSource&&!(e.dataState.dataSource instanceof A.DataManager||"result"in e.dataState.dataSource||e.dataState.dataSource instanceof Array)&&!P.isNullOrUndefined(e.dataState.dataStateChange)}},generateMessage:function(){return La+": DATASOURCE SYNTAX WARNING\nDataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used"}}},ja=function(e){e=e.error;return e.indexOf&&0!==e.indexOf("Format options")?"":"INVALID FORMAT\nFor more information, refer to the following documentation links:\nNumber format: "+Ma+"/common/internationalization#supported-format-string\nDate format: "+Ma+"/common/internationalization#manipulating-datetime\nMessage: "+e},Va=function(e){e=A.DataUtil.getObject("error.error",e);if(P.isNullOrUndefined(e))return"";var t="";try{t=JSON.parse(e.responseText)}catch(e){t=""}return"XMLHTTPREQUEST FAILED\nUrl: "+e.responseURL+"\nStatus: "+e.status+" - "+e.statusText+"\n"+(""!==t?"Message: "+t:"")},Ea=(Ua=function(e,t){return(Ua=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)},function(e,t){function i(){this.constructor=e}Ua(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(o=(s<3?r(o):3<s?r(t,i,o):r(t,i))||o);return 3<s&&o&&Object.defineProperty(t,i,o),o},Ga=(qa=P.ChildProperty,Ea(_a,qa),o([P.Property()],_a.prototype,"field",void 0),o([P.Property()],_a.prototype,"direction",void 0),o([P.Property(!1)],_a.prototype,"isFromGroup",void 0),_a);function _a(){return null!==qa&&qa.apply(this,arguments)||this}Wa=P.ChildProperty,Ea(Qa,Wa),o([P.Collection([],Ga)],Qa.prototype,"columns",void 0),o([P.Property(!0)],Qa.prototype,"allowUnsort",void 0);var Wa,Ka=Qa;function Qa(){return null!==Wa&&Wa.apply(this,arguments)||this}Xa=P.ChildProperty,Ea(Ja,Xa),o([P.Property()],Ja.prototype,"field",void 0),o([P.Property()],Ja.prototype,"operator",void 0),o([P.Property()],Ja.prototype,"value",void 0),o([P.Property()],Ja.prototype,"matchCase",void 0),o([P.Property(!1)],Ja.prototype,"ignoreAccent",void 0),o([P.Property()],Ja.prototype,"predicate",void 0),o([P.Property({})],Ja.prototype,"actualFilterValue",void 0),o([P.Property({})],Ja.prototype,"actualOperator",void 0),o([P.Property()],Ja.prototype,"type",void 0),o([P.Property()],Ja.prototype,"ejpredicate",void 0),o([P.Property()],Ja.prototype,"uid",void 0),o([P.Property()],Ja.prototype,"isForeignKey",void 0),o([P.Property()],Ja.prototype,"condition",void 0);var Xa,Ya=Ja;function Ja(){return null!==Xa&&Xa.apply(this,arguments)||this}Za=P.ChildProperty,Ea(el,Za),o([P.Property(!1)],el.prototype,"enableCache",void 0),o([P.Property(3)],el.prototype,"maxBlocks",void 0),o([P.Property(3)],el.prototype,"initialBlocks",void 0);var Za,$a=el;function el(){return null!==Za&&Za.apply(this,arguments)||this}tl=P.ChildProperty,Ea(nl,tl),o([P.Collection([],Ya)],nl.prototype,"columns",void 0),o([P.Property("FilterBar")],nl.prototype,"type",void 0),o([P.Property("OnEnter")],nl.prototype,"mode",void 0),o([P.Property(!0)],nl.prototype,"showFilterBarStatus",void 0),o([P.Property(1500)],nl.prototype,"immediateModeDelay",void 0),o([P.Property()],nl.prototype,"operators",void 0),o([P.Property(!1)],nl.prototype,"ignoreAccent",void 0),o([P.Property(!1)],nl.prototype,"enableInfiniteScrolling",void 0),o([P.Property(50)],nl.prototype,"itemsCount",void 0),o([P.Property("Shimmer")],nl.prototype,"loadingIndicator",void 0),o([P.Property(!1)],nl.prototype,"enableCaseSensitivity",void 0),o([P.Property(!1)],nl.prototype,"showFilterBarOperator",void 0);var tl,il=nl;function nl(){return null!==tl&&tl.apply(this,arguments)||this}rl=P.ChildProperty,Ea(ol,rl),o([P.Property("Row")],ol.prototype,"mode",void 0),o([P.Property("Flow")],ol.prototype,"cellSelectionMode",void 0),o([P.Property("Single")],ol.prototype,"type",void 0),o([P.Property(!1)],ol.prototype,"checkboxOnly",void 0),o([P.Property(!1)],ol.prototype,"persistSelection",void 0),o([P.Property("Default")],ol.prototype,"checkboxMode",void 0),o([P.Property(!1)],ol.prototype,"enableSimpleMultiRowSelection",void 0),o([P.Property(!0)],ol.prototype,"enableToggle",void 0),o([P.Property(!1)],ol.prototype,"allowColumnSelection",void 0);var rl,sl=ol;function ol(){return null!==rl&&rl.apply(this,arguments)||this}al=P.ChildProperty,Ea(hl,al),o([P.Property([])],hl.prototype,"fields",void 0),o([P.Property("")],hl.prototype,"key",void 0),o([P.Property("contains")],hl.prototype,"operator",void 0),o([P.Property(!0)],hl.prototype,"ignoreCase",void 0),o([P.Property(!1)],hl.prototype,"ignoreAccent",void 0);var al,ll=hl;function hl(){return null!==al&&al.apply(this,arguments)||this}pl=P.ChildProperty,Ea(cl,pl),o([P.Property()],cl.prototype,"targetID",void 0);var pl,dl=cl;function cl(){return null!==pl&&pl.apply(this,arguments)||this}ul=P.ChildProperty,Ea(fl,ul),o([P.Property("Both")],fl.prototype,"wrapMode",void 0);var ul,gl=fl;function fl(){return null!==ul&&ul.apply(this,arguments)||this}ml=P.ChildProperty,Ea(Sl,ml),o([P.Property("Normal")],Sl.prototype,"mode",void 0);var ml,yl=Sl;function Sl(){return null!==ml&&ml.apply(this,arguments)||this}vl=P.ChildProperty,Ea(wl,vl),o([P.Property(!0)],wl.prototype,"showDropArea",void 0),o([P.Property(!1)],wl.prototype,"allowReordering",void 0),o([P.Property(!1)],wl.prototype,"showToggleButton",void 0),o([P.Property(!1)],wl.prototype,"showGroupedColumn",void 0),o([P.Property(!0)],wl.prototype,"showUngroupButton",void 0),o([P.Property(!1)],wl.prototype,"disablePageWiseAggregates",void 0),o([P.Property([])],wl.prototype,"columns",void 0),o([P.Property()],wl.prototype,"captionTemplate",void 0),o([P.Property(!1)],wl.prototype,"enableLazyLoading",void 0);var vl,Cl=wl;function wl(){return null!==vl&&vl.apply(this,arguments)||this}bl=P.ChildProperty,Ea(xl,bl),o([P.Property(!1)],xl.prototype,"allowAdding",void 0),o([P.Property(!1)],xl.prototype,"allowEditing",void 0),o([P.Property(!1)],xl.prototype,"allowDeleting",void 0),o([P.Property("Normal")],xl.prototype,"mode",void 0),o([P.Property(!0)],xl.prototype,"allowEditOnDblClick",void 0),o([P.Property(!0)],xl.prototype,"showConfirmDialog",void 0),o([P.Property(!1)],xl.prototype,"showDeleteConfirmDialog",void 0),o([P.Property()],xl.prototype,"template",void 0),o([P.Property()],xl.prototype,"headerTemplate",void 0),o([P.Property()],xl.prototype,"footerTemplate",void 0),o([P.Property("Top")],xl.prototype,"newRowPosition",void 0),o([P.Property({})],xl.prototype,"dialog",void 0),o([P.Property(!1)],xl.prototype,"allowNextRowEdit",void 0),o([P.Property(!1)],xl.prototype,"showAddNewRow",void 0);var bl,Il=xl;function xl(){return null!==bl&&bl.apply(this,arguments)||this}Rl=P.ChildProperty,Ea(Dl,Rl),o([P.Property("Spinner")],Dl.prototype,"indicatorType",void 0);var Rl,El=Dl;function Dl(){return null!==Rl&&Rl.apply(this,arguments)||this}Tl=P.Component,Ea(a,Tl),(Ol=a).prototype.getPersistData=function(){for(var e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},i=0;i<e.length;i++)for(var n=this[e[parseInt(i.toString(),10)]],r=0,s=t[e[parseInt(i.toString(),10)]];r<s.length;r++)delete n[""+s[r]];var o=this.pageSettings.template,a=Object.assign({template:void 0},this.pageSettings),l=(this.setProperties({pageSettings:a},!0),this.groupSettings.captionTemplate),h=l&&this.isAngular,p=(h&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!P.isNullOrUndefined(this.pagerTemplate),this.addOnPersist(e));return a.template=o,this.setProperties({pageSettings:a},!0),h&&(this.groupSettings.captionTemplate=l),p},a.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&e.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&e.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),!P.isNullOrUndefined(this.columns)&&this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(e)),e},a.prototype.extendRequiredModules=function(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"}),!P.isNullOrUndefined(this.columns)&&this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"}),this.enableLogger&&e.push({member:"logger",args:[this],name:"Logger"})},a.prototype.resizeCheck=function(){var e=!!this.getColumns().filter(function(e){return!0===e.autoFit}).length,t=(P.isNullOrUndefined(this.columnModel)||!this.columnModel.length||this.columnModel[0]instanceof Q||(this.columnModel=[]),!(!this.showColumnMenu||this.columnMenuItems&&!this.columnMenuItems.filter(function(e){return"AutoFit"===e||"AutoFitAll"===e}).length)),i=!(!this.contextMenuItems||!this.contextMenuItems.filter(function(e){return"AutoFit"===e||"AutoFitAll"===e}).length);return this.allowResizing||this.autoFitColumnsResize||e||t||i},a.prototype.preRender=function(){this.serviceLocator=new Wo,this.initProperties(),this.initializeServices()},a.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=P.Component.prototype.refresh,this.freezeColumnRefresh=!0,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},a.prototype.render=function(){var e;this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),L.createSpinner({target:this.element,cssClass:this.cssClass||null},this.createElement),this.renderModule=new Ho(this,this.serviceLocator),this.searchModule=new Sa(this),this.scrollModule=new ba(this),this.notify(at,{}),this.pageSettings.enableQueryString&&(e=new URL(window.location.href).searchParams.get("page"),!P.isNullOrUndefined(e))&&0<window.location.href.indexOf("?page=")&&(e=parseInt(e,10),this.setProperties({pageSettings:{currentPage:e}},!0),this.pageSettings.currentPage=e),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||!P.isNullOrUndefined(this.dataSource)&&this.dataSource.result||(this.isVirtualAdaptive=!0),this.isReact?(e={requireTemplateRef:this.requireTemplateRef},this.trigger(ie,e),e.requireTemplateRef||(this.requireTemplateRef=e.requireTemplateRef)):this.trigger(ie),Xl(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(Zi,{}),this.getMediaColumns(),Ql(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),"Spinner"===this.loadingIndicator.indicatorType&&this.showSpinner(),this.notify(lt,{}),"Shimmer"===this.loadingIndicator.indicatorType&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},a.prototype.setInitialFrozenColumnIndex=function(e){for(var t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)];i[xs]=i.index,i.columns&&this.setInitialFrozenColumnIndex(i.columns)}},a.prototype.showSpinner=function(){this.isExportGrid||L.showSpinner(this.element)},a.prototype.hideSpinner=function(){this.isExportGrid||L.hideSpinner(this.element)},a.prototype.showMaskRow=function(e,t){if(!P.isNullOrUndefined(this.headerModule)&&!P.isNullOrUndefined(this.contentModule)){var i,n=this.getHeaderContent().firstChild,r=this.getContent().firstChild,s=this.getFooterContent();if(t){var o=t.querySelector(".e-checkboxlist"),a=Math.floor(o.getBoundingClientRect().height/this.getRowHeight()),l='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";o.innerHTML="";for(var h=0;h<a;h++){o.innerHTML+=l;var p=[].slice.call(o.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}}else(!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(r.style.overflowY="hidden"),this.isInitialLoad||this.getColumns().length?(this.maskRowContentScroll=!(!this.enableVirtualization&&!this.enableColumnVirtualization||!e),this.contentMaskTable||(i=r,(this.enableVirtualization||this.enableColumnVirtualization)&&(i=i.querySelector(".e-virtualtable")),P.isNullOrUndefined(i.querySelector("tbody")))||(this.contentMaskTable=this.createMaskTable(i,this.getContentMaskColumns(),e)),!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&"X"===e)&&(i=n,this.enableColumnVirtualization&&"X"===e&&(i=i.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(i,this.getContentMaskColumns(),e)),s&&s.querySelector(".e-summaryrow")&&(t=s.firstChild,this.footerContentMaskTable||(this.footerContentMaskTable=this.createMaskTable(t))),this.enableVirtualization&&e||P.EventHandler.add(r,"scroll",this.translateMaskRow,this)):(s=0===(i=r.getBoundingClientRect().height)?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:i,t=Math.ceil(s/this.getRowHeight()),"Vertical"!==this.rowRenderingMode&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),this.contentMaskTable=this.createEmptyMaskTable(r,t))}},a.prototype.getContentMaskColumns=function(){return this.getColumns()},a.prototype.createEmptyMaskTable=function(e,t){var i=this.createElement("table",{className:"e-table e-masked-table"}),n=this.createElement("tbody",{className:"e-masked-tbody"}),r=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),s=this.createElement("td",{className:"e-masked-cell e-rowcell"});s.innerHTML=this.getShimmerTemplate(),r.appendChild(s);for(var o=0;o<t;o++)n.appendChild(r.cloneNode(!0));return i.appendChild(n),e.appendChild(i),i},a.prototype.createMaskTable=function(e,t,i){var n=!!P.closest(e,".e-gridheader"),r=!!P.closest(e,".e-gridcontent"),s=!!P.closest(e,".e-gridfooter"),o=this.getContent().firstChild,a=o.scrollHeight,l=e.querySelector("table"),h=l.cloneNode(),p=(h.removeAttribute("role"),h.removeAttribute("id"),h.style.position="absolute",h.style.zIndex="5",h.style.width=l.getBoundingClientRect().width+"px",!n||this.enableColumnVirtualization&&"X"===i||(h.style.transform="translate(0px,"+l.querySelector("thead").getBoundingClientRect().height+"px)"),h.setAttribute("class","e-table e-masked-table"),l.querySelector("colgroup").cloneNode(!0));if(p.removeAttribute("id"),p.setAttribute("class","e-masked-colgroup"),h.appendChild(p),n&&this.enableColumnVirtualization&&"X"===i){var d=this.createMaskRow(p,t);if(this.isFrozenGrid())for(var c=[].slice.call(d.querySelectorAll(".e-rowcell")),u=0;u<c.length;u++)u<this.frozenLeftCount?(this.frozenLeftCount-1===u&&c[parseInt(u.toString(),10)].classList.add("e-freezeleftborder"),c[parseInt(u.toString(),10)].classList.add("e-leftfreeze"),c[parseInt(u.toString(),10)].setAttribute("data-colindex",u.toString()),c[parseInt(u.toString(),10)].style.left=t[parseInt(u.toString(),10)].valueX-this.translateX+"px"):c.length-this.frozenRightCount<=u&&t[parseInt(u.toString(),10)]&&(c.length-this.frozenRightCount===u&&c[parseInt(u.toString(),10)].classList.add("e-freezerightborder"),c[parseInt(u.toString(),10)].classList.add("e-rightfreeze"),c[parseInt(u.toString(),10)].setAttribute("data-colindex",u.toString()),c[parseInt(u.toString(),10)].style.right=this.translateX+t[parseInt(u.toString(),10)].valueX+"px");for(var g=l.querySelector("thead"),f=[].slice.call(g.querySelectorAll("tr")),m=g.cloneNode(),y=(m.removeAttribute("role"),m.setAttribute("class","e-masked-thead"),f.length),u=0;u<y;u++)m.appendChild(d.cloneNode(!0)),m.childNodes[parseInt(u.toString(),10)].style.height=f[parseInt(u.toString(),10)].getBoundingClientRect().height+"px";h.appendChild(m)}var S=l.querySelector("tbody").cloneNode(),g=(S.removeAttribute("role"),S.setAttribute("class","e-masked-tbody"),l.querySelector("tbody"));if(r||n){var v=o,y=Math.ceil(v.getBoundingClientRect().height/this.getRowHeight());if(this.allowPaging&&this.pageSettings.pageSize!==this.currentViewData.length&&this.pagerModule.pagerObj.totalPages!==this.pageSettings.currentPage)for(var C,u=0;u<this.pageSettings.pageSize-this.currentViewData.length;u++){(C=(d=this.createMaskRow(p,t)).cloneNode(!0)).classList.add("e-altrow");for(var w=0;w<y;w++){var b=1;S.appendChild(((w+b)%2==0?C:d).cloneNode(!0))}}if(g.querySelector(".e-emptyrow")||!g.childNodes.length||r&&this.childGrid){(C=(d=this.createMaskRow(p,t)).cloneNode(!0)).classList.add("e-altrow");for(u=0;u<y;u++){b=1;S.appendChild(((u+b)%2==0?C:d).cloneNode(!0))}}else{f=[].slice.call(g.querySelectorAll('tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])')),v=g.querySelector(".e-addedrow, .e-editedrow"),g=void 0;if(v){if(g=f.indexOf(v),this.isFrozenGrid()&&this.enableColumnVirtualization)for(c=[].slice.call(f[g+1].querySelectorAll(".e-rowcell")),u=0;u<c.length;u++)u<this.frozenLeftCount?(c[parseInt(u.toString(),10)].classList.add("e-leftfreeze"),c[parseInt(u.toString(),10)].setAttribute("data-colindex",u.toString()),c[parseInt(u.toString(),10)].style.left=t[parseInt(u.toString(),10)].valueX-this.translateX+"px"):c.length-this.frozenRightCount<=u&&t[parseInt(u.toString(),10)]&&(c[parseInt(u.toString(),10)].classList.add("e-rightfreeze"),c[parseInt(u.toString(),10)].setAttribute("data-colindex",u.toString()),c[parseInt(u.toString(),10)].style.right=this.translateX+t[parseInt(u.toString(),10)].valueX+"px");v.classList.contains("e-addedrow")?f.splice(g,2):f.splice(g,1)}y=(!this.enableVirtualization&&!this.enableColumnVirtualization||!i)&&y<=f.length?y:f.length;for(u=0;u<y;u++)S.appendChild(this.applyMaskRow(f[parseInt(u.toString(),10)].cloneNode(!0),f[parseInt(u.toString(),10)].getBoundingClientRect().height));v&&v.classList.contains("e-editedrow")&&g<y&&((g=S.childNodes[parseInt(g.toString(),10)]).style.height=this.getRowHeight()+"px",g.classList.add("e-row"),v.classList.contains("e-altrow"))&&g.classList.add("e-altrow")}}if(h.appendChild(S),s){for(var v=l.querySelector("tfoot"),I=v.cloneNode(),f=(I.setAttribute("class","e-masked-tfoot"),[].slice.call(v.querySelectorAll("tr"))),u=0;u<f.length;u++)I.appendChild(this.applyMaskRow(f[parseInt(u.toString(),10)].cloneNode(!0),f[parseInt(u.toString(),10)].getBoundingClientRect().height));h.appendChild(I)}return n&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+Kr).style.position="relative"),e.insertBefore(h,e.firstChild),!r||this.enableVirtualization&&i||(g=a-h.getBoundingClientRect().height,s=o.scrollTop<=(g=g<0?0:g)?o.scrollTop:g,this.enableVirtualization&&(s-=Vh(P.closest(e,".e-virtualtable")).height),h.style.transform="translate(0px,"+s+"px)"),h},a.prototype.applyMaskRow=function(e,t){e.removeAttribute("role"),e.removeAttribute("aria-rowindex"),e.removeAttribute("data-rowindex"),e.removeAttribute("data-uid"),e.classList.add("e-masked-row"),e.style.height=t+"px";for(var i=[].slice.call(e.childNodes),n=0;n<i.length;n++){var r=i[parseInt(n.toString(),10)],s=r.firstChild&&r.firstChild.classList&&r.firstChild.classList.contains("e-checkbox-wrapper");r.removeAttribute("role"),r.removeAttribute("tabindex"),r.removeAttribute("aria-label"),this.enableColumnVirtualization&&r.classList.contains("e-fixedfreeze")&&(P.removeClass([r],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),P.addClass([r],["e-unfreeze"])),this.enableColumnVirtualization&&(r.classList.contains("e-leftfreeze")||r.classList.contains("e-rightfreeze"))||r.removeAttribute("data-colindex"),r.removeAttribute("aria-colindex"),r.removeAttribute("index"),r.removeAttribute("ej-mappingname"),r.removeAttribute("ej-mappingvalue"),r.removeAttribute("e-mappinguid"),r.removeAttribute("aria-expanded"),r.classList.add("e-masked-cell"),r.innerHTML=this.getShimmerTemplate(),r.classList.contains("e-recordplusexpand")||r.classList.contains("e-recordpluscollapse")?r.firstChild.classList.add("e-mask-group-intent"):r.classList.contains("e-gridchkbox")||s?r.firstChild.classList.add("e-mask-checkbox-intent"):r.classList.contains("e-rowdragdrop")?r.firstChild.classList.add("e-mask-drag-intent"):r.classList.contains("e-indentcell")&&(r.innerHTML="")}return e},a.prototype.createMaskRow=function(e,t){for(var i=e,n=t,r=this.createElement("tr",{className:"e-masked-row e-row"}),s=("Vertical"!==this.rowRenderingMode&&(r.style.height=this.getRowHeight()+"px"),this.createElement("td",{className:"e-masked-cell e-rowcell"})),o=0,a=0;o<i.childNodes.length;o++){var l=i.childNodes[parseInt(o.toString(),10)],h=s.cloneNode();h.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-group-intent")||l.classList.contains("e-detail-intent")||l.classList.contains("e-drag-intent")?l.classList.contains("e-group-intent")?h.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-detail-intent")?h.firstChild.classList.add("e-mask-detail-intent"):l.classList.contains("e-drag-intent")&&h.firstChild.classList.add("e-mask-drag-intent"):("Vertical"===this.rowRenderingMode&&n[parseInt(a.toString(),10)]&&h.setAttribute("data-cell",n[parseInt(a.toString(),10)].headerText?n[parseInt(a.toString(),10)].headerText:n[parseInt(a.toString(),10)].field),"none"===l.style.display?h.classList.add("e-hide"):(h.style.textAlign=n[parseInt(a.toString(),10)]&&n[parseInt(a.toString(),10)].textAlign?n[parseInt(a.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",n[parseInt(a.toString(),10)]&&("checkbox"===n[parseInt(a.toString(),10)].type||n[parseInt(a.toString(),10)].displayAsCheckBox)&&h.firstChild.classList.add("e-mask-checkbox-intent")),a++),r.appendChild(h)}return r},a.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},a.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var e=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),t=0;t<e.length;t++)e[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)].classList.add("e-shimmer-wave")},a.prototype.translateMaskRow=function(e){for(var t=e.target,i=t.querySelectorAll(".e-masked-table"),n=0;n<i.length;n++){var r,s=i[parseInt(n.toString(),10)];s&&(r=t.scrollHeight-s.getBoundingClientRect().height,r=t.scrollTop<=(r=r<0?0:r)?t.scrollTop:r,this.enableVirtualization&&(r-=Vh(P.closest(s,".e-virtualtable")).height),s.style.transform="translate(0px,"+r+"px)")}},a.prototype.removeMaskRow=function(){P.isNullOrUndefined(this.contentModule)||(e=this.getContent().firstChild,P.EventHandler.remove(e,"scroll",this.translateMaskRow)),this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+Kr).style.position="");for(var e,t=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];n&&P.remove(n)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},a.prototype.refreshMaskRow=function(){var e,t=this.getContent().firstChild;(this.isInitialLoad||this.getColumns().length)&&this.contentMaskTable&&t.querySelector(".e-masked-table")&&(e=t,this.enableVirtualization&&(e=t.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(e))},a.prototype.refreshMaskRowColgroupWidth=function(e){var t=e.querySelector("table:not(.e-masked-table)"),i=t.querySelector(us).cloneNode(!0),e=e.querySelector(".e-masked-table");i.removeAttribute("id"),i.setAttribute("class","e-masked-colgroup");for(var n=0;n<i.childNodes.length;n++)i.childNodes[parseInt(n.toString(),10)].removeAttribute("class");P.remove(e.querySelector(".e-masked-colgroup")),e.insertBefore(i,e.firstChild),e.style.width=t.getBoundingClientRect().width+"px"},a.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},a.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!P.isNullOrUndefined(e))for(var t=0;t<e.length;t++)P.isNullOrUndefined(e[parseInt(t.toString(),10)].hideAtMedia)||!P.isNullOrUndefined(e[parseInt(t.toString(),10)].visible)&&!e[parseInt(t.toString(),10)].visible||this.pushMediaColumn(e[parseInt(t.toString(),10)],t)}this.updateFrozenColumnsWidth()},a.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[parseInt(t.toString(),10)]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[parseInt(t.toString(),10)])},a.prototype.updateMediaColumns=function(e){if(!this.enableColumnVirtualization){for(var t=this.getColumnIndexByUid(e.uid),i=0;i<this.mediaCol.length;i++)if(e.uid===this.mediaCol[parseInt(i.toString(),10)].uid)return void this.mediaCol.splice(i,1);this.pushMediaColumn(e,t)}},a.prototype.mediaQueryUpdate=function(e,t){var i=this.getColumns()[parseInt(e.toString(),10)];this.mediaCol.some(function(e){return e.uid===i.uid})&&(i.visible=t.matches,this.isInitialLoad)&&(this.invokedFromMedia=!0,i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText"))},a.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var e=this.element.querySelector("."+Wr),e=(this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&e&&P.addClass([e],["e-footerpadding"]),this.getColumns().filter(function(e){return"checkbox"===e.type}));(0===e.length||e.length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode)&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),P.removeClass([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},a.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[parseInt(e.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(e.toString(),10)].index])},a.prototype.eventInitializer=function(){},a.prototype.destroy=function(){var e=this.element;if(e){for(var e=!(!e.querySelector("."+Gr)||!e.querySelector("."+_r)),t=(e&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(r,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),e&&Tl.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!P.Browser.isIE&&(this.element.innerHTML=""),["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"]),i=0;i<t.length;i++)this[t[parseInt(i.toString(),10)]]&&(this[t[parseInt(i.toString(),10)]]=null);this.element.innerHTML="",P.classList(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},a.prototype.destroyDependentModules=function(){var e=this.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},a.prototype.getModuleName=function(){return"grid"},a.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(At,{}))},a.prototype.setCSSClass=function(e){this.cssClass&&P.addClass([this.element],this.cssClass.split(" ")),e&&P.removeClass([this.element],e.split(" "))},a.prototype.onPropertyChanged=function(e,t){var i,n=!1,r=!1,s=!1,o=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var a=Object.keys(e);-1<a.indexOf("columns")&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),r=!0);for(var l=0,h=a;l<h.length;l++){var p=h[l];switch(p){case"allowPaging":this.notify(g,{module:"pager",enable:this.allowPaging}),n=!0,"100%"===this.height&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange)this.pageTemplateChange=!1,this.notify(ct,{module:"pager",properties:e.pageSettings});else{if(this.pagerModule&&this.pagerModule.isCancel)return void(this.pagerModule.isCancel=!1);this.notify(ct,{module:"pager",properties:e.pageSettings}),(P.isNullOrUndefined(e.pageSettings.currentPage)&&P.isNullOrUndefined(e.pageSettings.pageSize)&&P.isNullOrUndefined(e.pageSettings.totalRecordsCount)||!P.isNullOrUndefined(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageRequireRefresh&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0),this.pageRequireRefresh||(this.pageRequireRefresh=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1)}break;case"allowSorting":this.notify(g,{module:"sort",enable:this.allowSorting}),i=n=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(g,{module:"filter",enable:this.allowFiltering}),n=!0,"FilterBar"!==this.filterSettings.type||this.editSettings.showAddNewRow&&"FilterBar"===this.filterSettings.type?this.refreshHeader():"100%"===this.height&&this.scrollModule.refresh();break;case"height":case"width":this.notify(g,{module:"scroll",properties:{width:e.width,height:e.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),i=!0;break;case"allowRowDragAndDrop":this.notify(g,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(g,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=_l(this.rowTemplate),n=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=_l(this.emptyRecordTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=_l(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(g,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),i=n=!0,"100%"===this.height&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(n=!0,o=(d=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null)?d.ej2_instances[0]:null,this.childGrid&&o&&P.isNullOrUndefined(o.childGrid.childGrid)){var d=Object.assign({},o.childGrid,{childGrid:e.childGrid});for(o.setProperties({childGrid:d},!0);!P.isNullOrUndefined(o.parentDetails);){var c,u=document.querySelector("#"+o.parentDetails.parentID),u=u?u.ej2_instances[0]:null;u&&((c=Object.assign({},u.childGrid)).childGrid=o.childGrid,u.setProperties({childGrid:c},!0)),o=u}}this.headerModule.refreshUI();break;case"toolbar":this.notify(g,{module:"toolbar"}),"100%"===this.height&&this.scrollModule.refresh();break;case"groupSettings":this.notify(ct,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(g,{module:"aggregate",properties:e}),"100%"===this.height&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns"),this.addNewRowFocus=r=s=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(p,e,r)}}i&&this.updateDefaultCursor(),r?s||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():n&&(this.notify(ut,{requestType:"refresh"}),n=!1,this.maintainSelection(e.selectedRowIndex))}},a.prototype.extendedPropertyChange=function(e,t,i){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(ki,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.resizeModule&&this.resizeModule.render(),this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?P.addClass([this.element],"e-grid-min-height"):P.removeClass([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(g,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(g,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(g,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(g,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(ct,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(ct,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(ct,{module:"sort"});break;case"selectionSettings":this.notify(ct,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(ct,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(yi,{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":var n=this.getDataModule().getState();if(!this.allowSelection||!this.isPersistSelection||n&&n.isPending||this.clearSelection(),!P.isNullOrUndefined(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(t).deepWatch)for(var r=this.getPrimaryKeyFieldNames()[0],s=0,o=Object.keys(t.dataSource);s<o.length;s++)this.setRowData(P.getValue(r,this.dataSource[o[parseInt(s.toString(),10)]]),this.dataSource[o[parseInt(s.toString(),10)]]);else if(n.isPending){var a=P.isNullOrUndefined(this.dataSource)?[]:this.dataSource.result;if((l=n.group||[]).length&&!this.groupSettings.enableLazyLoading&&(!a.length||!a[0].field))for(s=0;s<l.length;s++)a=A.DataUtil.group(a,l[parseInt(s.toString(),10)],n.aggregates||[]);this.dataSource={result:a,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),n.resolver(this.dataSource)}else{if(!P.isNullOrUndefined(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){var l,a=this.dataSource.result;if((l=this.groupSettings.columns).length&&(!a.length||!a[0].field))for(s=0;s<l.length;s++)a=A.DataUtil.group(a,l[parseInt(s.toString(),10)]);this.dataSource={result:a,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1}),this.notify(Vt,{}),i||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Vn,{}))}this.scrollRefresh();break;case"enableHover":(t.enableHover?P.addClass:P.removeClass)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(nr,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(sr,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(t.enableStickyHeader)}},a.prototype.maintainSelection=function(e){var t,i=this;-1!==e&&this.on(pt,t=function(){i.selectRow(e),i.off(pt,t)},this)},a.prototype.setProperties=function(e,t){Tl.prototype.setProperties.call(this,e,t);e.filterSettings&&this.filterModule&&t&&this.filterModule.refreshFilter()},a.prototype.getTablesCount=function(){return this.tablesCount},a.prototype.updateDefaultCursor=function(){for(var e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),t=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),i=this.getColumns(),n=0;n<e.length;n++){var r=e[parseInt(n.toString(),10)];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(i[parseInt(n.toString(),10)].allowReordering&&i[parseInt(n.toString(),10)].allowSorting&&i[parseInt(n.toString(),10)].allowGrouping?r.classList.add("e-mousepointer"):r.classList.add("e-defaultcursor"))}for(var s=0;s<t.length;s++)this.allowReordering&&t[parseInt(s.toString(),10)].classList.add("e-mousepointer")},a.prototype.updateColumnModel=function(e,t){for(var i=0,n=P.isNullOrUndefined(e)?0:e.length;i<n;i++)e[parseInt(i.toString(),10)].columns?this.updateColumnModel(e[parseInt(i.toString(),10)].columns,!0):this.columnModel.push(e[parseInt(i.toString(),10)]);!P.isNullOrUndefined(t)&&t||this.updateLockableColumns()},a.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},a.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.frozenLeftColumns.length||0!==this.frozenRightColumns.length||0!==this.fixedColumns.length},a.prototype.getFrozenMode=function(){return this.frozenName},a.prototype.updateLockableColumns=function(){for(var e=this.columnModel,t=0,i=0,n=this.getFrozenColumns(),r=0;r<e.length;r++)e[parseInt(r.toString(),10)].lockColumn&&(r<n?(e.splice(t,0,e.splice(r,1)[0]),t++):(e.splice(n+i,0,e.splice(r,1)[0]),i++))},a.prototype.checkLockColumns=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].columns?this.checkLockColumns(e[parseInt(t.toString(),10)].columns):e[parseInt(t.toString(),10)].lockColumn&&this.lockcolPositionCount++},a.prototype.leftrightColumnWidth=function(e){var e="left"===e?this.getFrozenLeftColumns():"right"===e?this.getFrozenRightColumns():[],t=0;return e.filter(function(e){e.visible&&(t+=parseInt(e.width.toString(),10))}),t},a.prototype.getColumns=function(e){var t=this,i=this.inViewIndexes.map(function(e){return e-t.groupSettings.columns.length}).filter(function(e){return-1<e}),n=i.length,r=(this.enableColumnVirtualization&&!P.isNullOrUndefined(this.columnModel)&&0!==this.columnModel.length&&!e||(this.columnModel=[],this.updateColumnModel(this.columns)),0===n?this.columnModel:this.columnModel.slice(i[0],i[n-1]+1)),s=[],o=[],a=[],l=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&0===n;l&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var h=0;h<r.length;h++)"Left"===r[parseInt(h.toString(),10)].freeze||r[parseInt(h.toString(),10)].isFrozen?(s.push(r[parseInt(h.toString(),10)]),l&&this.frozenLeftColumns.push(r[parseInt(h.toString(),10)])):"Right"===r[parseInt(h.toString(),10)].freeze?(o.push(r[parseInt(h.toString(),10)]),l&&this.frozenRightColumns.push(r[parseInt(h.toString(),10)])):a.push(r[parseInt(h.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(s=this.frozenLeftColumns),this.frozenRightColumns.length)&&(o=this.frozenRightColumns),s.concat(a).concat(o)},a.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];if(n.field===e||n.headerText===e){this.stackedColumn=n;break}n.columns&&this.getStackedHeaderColumnByHeaderText(e,n.columns)}return this.stackedColumn},a.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},a.prototype.getQuery=function(){return this.query},a.prototype.getLocaleConstants=function(){return this.defaultLocale},a.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},a.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},a.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},a.prototype.setGridHeaderContent=function(e){this.headerModule.setPanel(e)},a.prototype.getContentTable=function(){return this.contentModule.getTable()},a.prototype.setGridContentTable=function(e){this.contentModule.setTable(e)},a.prototype.getContent=function(){return this.contentModule.getPanel()},a.prototype.setGridContent=function(e){this.contentModule.setPanel(e)},a.prototype.getHeaderTable=function(){return this.headerModule.getTable()},a.prototype.setGridHeaderTable=function(e){this.headerModule.setTable(e)},a.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(Wr)[0],this.footerElement},a.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(Wr)[0],this.footerElement.firstChild.firstChild},a.prototype.getPager=function(){return this.gridPager},a.prototype.setGridPager=function(e){this.gridPager=e},a.prototype.getRowByIndex=function(e){return(this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender:this.contentModule).getRowByIndex(e)},a.prototype.getMovableRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},a.prototype.getFrozenRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},a.prototype.getRows=function(){return this.contentModule.getRowElements()},a.prototype.getFrozenRightRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},a.prototype.getRowInfo=function(e){var t=e,i={target:e};if(!P.isNullOrUndefined(e)&&P.isNullOrUndefined(E(t,"e-detailrowcollapse")&&P.isNullOrUndefined(E(t,"e-recordplusexpand")))){var n=P.closest(t,"."+b);if(!n)return t=P.closest(t,"."+I),P.isNullOrUndefined(t)||t.classList.contains("e-addedrow")||(o=this.getRowObjectFromUID(t.getAttribute("data-uid")),r=parseInt(t.getAttribute(x),10),i={row:t,rowData:o.data,rowIndex:r}),i;var r,s,o,a,l,t=parseInt(n.getAttribute(ps),10),h=P.closest(n,"."+I);P.isNullOrUndefined(n)||isNaN(t)||P.isNullOrUndefined(h)||(r=parseInt(h.getAttribute(x),10),o=this.contentModule.getRows(),s=t+this.getIndentCount(),o=o.filter(function(e){return e.uid===h.getAttribute("data-uid")}),a={},l=void 0,Object.keys(o).length&&(a=o[0].data,l=o[0].cells[parseInt(s.toString(),10)].column),i={cell:n,cellIndex:t,row:h,rowIndex:r,rowData:a,column:l,target:e})}return i},a.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},a.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},a.prototype.getDataRows=function(){return this.getAllDataRows()},a.prototype.getAllDataRows=function(e){var t,i;return P.isNullOrUndefined(this.getContentTable().querySelector(N))?[]:(i=this.getContentTable().querySelector(N),i=[].slice.call(i.children),this.editSettings.showAddNewRow&&(i[0].classList.contains("e-addedrow")?i.shift():i[i.length-1].classList.contains("e-addedrow")&&i.pop()),this.frozenRows&&(t=this.getHeaderTable().querySelector(N),t=[].slice.call(t.children),i=this.addMovableRows(t,i),this.editSettings.showAddNewRow)&&t[0].classList.contains("e-addedrow")&&t.shift(),this.generateDataRows(i,e))},a.prototype.addMovableRows=function(e,t){for(var i=0,n=t.length;i<n;i++)e.push(t[parseInt(i.toString(),10)]);return e},a.prototype.generateDataRows=function(e,t){for(var i=[],n=0,r=e.length;n<r;n++)!e[parseInt(n.toString(),10)].classList.contains(I)||e[parseInt(n.toString(),10)].classList.contains("e-hiddenrow")&&!t||(this.isCollapseStateEnabled()?i[parseInt(e[parseInt(n.toString(),10)].getAttribute("data-rowindex"),10)]=e[parseInt(n.toString(),10)]:i.push(e[parseInt(n.toString(),10)]));return i},a.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},a.prototype.getAllMovableDataRows=function(e){return this.getAllDataRows(e)},a.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},a.prototype.getAllFrozenDataRows=function(e){return this.getAllDataRows(e)},a.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},a.prototype.getAllFrozenRightDataRows=function(e){return this.getAllDataRows(e)},a.prototype.setCellValue=function(t,e,i){var n,r,s=this.getPrimaryKeyFieldNames()[0],o=new _s(this,this.serviceLocator),a=this.getColumnIndexByField(e),l=this.getColumnByField(e),h=this.contentModule.getRows().filter(function(e){return P.getValue(s,e.data)===t})[0],p=h?this.element.querySelector("[data-uid="+h.uid+"]"):null;P.isNullOrUndefined(p)||("string"==typeof i&&(i=this.sanitize(i)),P.setValue(e,i,h.data),n=this.enableVirtualization?p.children[parseInt(a.toString(),10)]:this.getCellFromIndex(h.index,a),P.isNullOrUndefined(n))||(this.groupSettings.columns.length&&(a+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&a++,this.isRowDragable()&&a++,r=h.cells[+a],o.refreshTD(n,r,h.data,{index:h.index}),this.isReact&&(n=this.enableVirtualization?p.children[parseInt(a.toString(),10)]:this.getCellFromIndex(h.index,a)),0<this.aggregates.length&&(this.notify(Rt,{}),0<this.groupSettings.columns.length)&&this.notify(xt,{}),P.isNullOrUndefined(h)||P.isNullOrUndefined(h.changes)||(h.changes[""+e]=i),this.trigger(re,{cell:n,column:l,data:h.data}),this.isReact&&"0"===n.getAttribute("tabindex")&&n.classList.contains("e-focused")&&n.focus())},a.prototype.refreshReactColumnTemplateByUid=function(e,i){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var e=!(!n.childGrid||!n.element.querySelectorAll(".e-childgrid").length),t=e?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows();n.refreshReactTemplateTD(t,e),i&&n.renderTemplates()})},a.prototype.refreshReactTemplateTD=function(e,t,i){for(var n=this.getIndentCount(),r=0,s=!1,o=0;o<e.length;o++){var a,l=this.getRowObjectFromUID(e[parseInt(o.toString(),10)].getAttribute("data-uid"));if(t&&!l&&E(e[parseInt(o.toString(),10)],"e-childgrid")&&(l=(a=E(e[parseInt(o.toString(),10)],"e-childgrid").ej2_instances[0]).getRowObjectFromUID(e[parseInt(o.toString(),10)].getAttribute("data-uid")),r=a.getIndentCount(),s=!0),l&&l.isDataRow&&!P.isNullOrUndefined(l.index)&&!e[parseInt(o.toString(),10)].classList.contains("e-editedrow"))for(var h=0;h<l.cells.length;h++){var p,d,c=l.cells[parseInt(h.toString(),10)];c.isTemplate&&(p=new _s(this,this.serviceLocator),d=t?e[parseInt(o.toString(),10)].children[c.index+(s?r:n)]:this.getCellFromIndex(o,i?c.index:h-n),p.refreshTD(d,c,l.data,{index:l.index}))}s=!1}},a.prototype.refreshGroupCaptionFooterTemplate=function(){for(var e=!(!this.childGrid||!this.element.querySelectorAll(".e-childgrid").length),t=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),i=0;i<t.length;i++){var n=this,r=this.getRowObjectFromUID(t[parseInt(i.toString(),10)].getAttribute("data-uid"));(r=e&&!r&&E(t[parseInt(i.toString(),10)],"e-childgrid")?(n=E(t[parseInt(i.toString(),10)],"e-childgrid").ej2_instances[0]).getRowObjectFromUID(t[parseInt(i.toString(),10)].getAttribute("data-uid")):r)&&(r={cells:r.cells.filter(function(e){return e.isDataCell}),data:r.data,dataUid:r.uid},n.notify(Et,r))}},a.prototype.refreshReactHeaderTemplateByUid=function(r){if(this.isReact)for(var s="cells",o=this.headerModule.rows,a=this.getNormalizedColumnIndex(r),l=this,e=0;e<o.length;e++)!function(e){var t,i,n=o[parseInt(e.toString(),10)][""+s][parseInt(a.toString(),10)];n&&n.column.uid===r&&(e=new $s(l,l.serviceLocator),t=E(l.element.querySelectorAll("[e-mappinguid="+r+"]")[0],"e-templatecell"),e.refresh(n,t),-1!==(t=(e=l.sortSettings.columns).findIndex(function(e){return e.field===n.column.field})))&&(i=l.getColumnHeaderByField(n.column.field),l.ariaService.setSort(i,e[parseInt(t.toString(),10)].direction.toLowerCase()),1<e.length&&i.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(t+1).toString()}),i.querySelector(".e-headertext")),i=i.querySelector(".e-sortfilterdiv"),"Ascending"===e[parseInt(t.toString(),10)].direction?P.classList(i,["e-ascending","e-icon-ascending"],[]):P.classList(i,["e-descending","e-icon-descending"],[]))}(e)},a.prototype.setRowData=function(t,e){var i=this.contentModule.getRows(),n=this.getPrimaryKeyFieldNames()[0],i=(i=0<this.groupSettings.columns.length&&0<this.aggregates.length?i.filter(function(e){return e.isDataRow}):i).filter(function(e){return P.getValue(n,e.data)===t})[0],r=i?[].slice.call(this.element.querySelectorAll("[data-uid="+i.uid+"]")):void 0;!P.isNullOrUndefined(i)&&r.length&&(i.changes=e,this.frozenRows?(r=this.getRowsObject()[i.index],this.setFrozenRowData(r,e)):this.setFrozenRowData(i,e),0<this.aggregates.length)&&(this.notify(Rt,{}),0<this.groupSettings.columns.length)&&this.notify(xt,{})},a.prototype.setFrozenRowData=function(e,t){var i=new Rs(this.serviceLocator,null,this);e.changes=t,Th(e,this.getForeignKeyColumns(),e.changes),i.refresh(e,this.getColumns(),!0)},a.prototype.getCellFromIndex=function(e,t){var i=this.getColumnByIndex(t);return fp(this,0,e,t)},a.prototype.getMovableCellFromIndex=function(e,t){return this.getCellFromIndex(e,t)},a.prototype.getFrozenRightCellFromIndex=function(e,t){return this.getCellFromIndex(e,t)},a.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(e.toString(),10)]},a.prototype.getMovableColumnHeaderByIndex=function(e){return this.getColumnHeaderByIndex(e)},a.prototype.getFrozenRightColumnHeaderByIndex=function(e){return this.getColumnHeaderByIndex(e)},a.prototype.getFrozenLeftColumnHeaderByIndex=function(e){return this.getColumnHeaderByIndex(e)},a.prototype.getRowObjectFromUID=function(e){var t=this.contentModule.getRows(),t=this.rowObject(t,e);return P.isNullOrUndefined(t)&&this.enableVirtualization&&0<this.groupSettings.columns.length?this.rowObject(this.vRows,e):t},a.prototype.rowObject=function(e,t){if(e)for(var i=0,n=e;i<n.length;i++){var r=n[i];if(r.uid===t)return r}return null},a.prototype.getRowsObject=function(){return this.contentModule.getRows()},a.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},a.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},a.prototype.getColumnHeaderByField=function(e){e=this.getColumnByField(e);return e?this.getColumnHeaderByUid(e.uid):void 0},a.prototype.getColumnHeaderByUid=function(e){e=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return e?e.parentElement:void 0},a.prototype.getColumnByIndex=function(i){var n;return this.getColumns().some(function(e,t){return n=e,t===i}),n},a.prototype.getColumnByField=function(t){return Vl(this.getColumns(),function(e){if(e.field===t)return e})[0]},a.prototype.getColumnIndexByField=function(e){for(var t=this.getColumns(),i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].field===e)return i;return-1},a.prototype.getColumnByUid=function(t){return Vl(this.getColumns().concat(this.getStackedColumns(this.columns)),function(e){if(e.uid===t)return e})[0]},a.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,n=e;i<n.length;i++){var r=n[i];r.columns&&(t.push(r),this.getStackedColumns(r.columns,t))}return t},a.prototype.getColumnIndexByUid=function(i){var e=Vl(this.getColumns(),function(e,t){if(e.uid===i)return t})[0];return P.isNullOrUndefined(e)?-1:e},a.prototype.getUidByColumnField=function(t){return Vl(this.getColumns(),function(e){if(e.field===t)return e.uid})[0]},a.prototype.getNormalizedColumnIndex=function(e){return this.getColumnIndexByUid(e)+this.getIndentCount()},a.prototype.getIndentCount=function(){var e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&P.isNullOrUndefined(this.rowDropSettings.targetID)&&e++,e},a.prototype.getColumnFieldNames=function(){for(var e,t=[],i=0,n=this.getColumns().length;i<n;i++)(e=this.getColumns()[parseInt(i.toString(),10)]).visible&&t.push(e.field);return t},a.prototype.getRowTemplate=function(){return this.rowTemplateFn},a.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},a.prototype.getDetailTemplate=function(){return this.detailTemplateFn},a.prototype.getEditTemplate=function(){return this.editTemplateFn},a.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},a.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},a.prototype.getPrimaryKeyFieldNames=function(){for(var e=[],t=0;t<this.columnModel.length;t++)this.columnModel[parseInt(t.toString(),10)].isPrimaryKey&&e.push(this.columnModel[parseInt(t.toString(),10)].field);return e},a.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},a.prototype.refreshHeader=function(){this.headerModule.refreshUI()},a.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},a.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},a.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},a.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},a.prototype.getSelectedColumnsUid=function(){var t=this,i=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(e){return i.push(t.getColumns()[parseInt(e.toString(),10)].uid)}),i},a.prototype.getDataModule=function(){return this.renderModule.data},a.prototype.showColumns=function(e,t){this.showHider.show(e,t=t||"headerText")},a.prototype.hideColumns=function(e,t){this.showHider.hide(e,t=t||"headerText")},a.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},a.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},a.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},a.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},a.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var n=this.getColumns(),r=!0,s=0,o=0,a=0,l=n.some(function(e){return("Left"===e.freeze||"Right"===e.freeze||"Fixed"===e.freeze||e.isFrozen)&&"auto"===e.width}),h=this,e=0;e<n.length;e++)!function(e){var t,i,e=n[parseInt(e.toString(),10)];P.isNullOrUndefined(e.width)&&("Left"===e.freeze||"Right"===e.freeze||"Fixed"===e.freeze||e.isFrozen)&&(e.width=Math.max(200,e.minWidth?parseFloat(e.minWidth.toString()):0),!P.isNullOrUndefined(e.maxWidth))&&parseFloat(e.maxWidth.toString())<e.width&&(e.width=e.maxWidth),"auto"===e.width&&l&&(t=0,r&&(n.filter(function(e){e.visible&&("auto"===e.width&&s++,"auto"!==e.width)&&(e=P.isNullOrUndefined(e.width)?Math.max(200,e.minWidth?parseFloat(e.minWidth.toString()):0):parseFloat(e.width.toString()),t+=e)}),i=h.isPercentageWidthGrid()||"auto"===h.width?h.element.getBoundingClientRect().width:parseFloat(h.width.toString()),(o="auto"===h.height?i-t:i-t-ph())<0&&(o=0),a=parseFloat((o/s).toString()),n.filter(function(e){e.visible&&e.minWidth&&parseFloat(e.minWidth.toString())>a&&(o-=parseFloat(e.minWidth.toString()),s--)}),r=!1),e.minWidth&&parseFloat(e.minWidth.toString())>a?e.width=parseFloat(e.minWidth.toString()):e.width=o/s)}(e)},a.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},a.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},a.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},a.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},a.prototype.getVisibleMovableCount=function(){return this.visibleMovable},a.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},a.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},a.prototype.getMovableColumns=function(){return this.movableColumns},a.prototype.splitStackedColumns=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].columns?this.splitStackedColumns(e[parseInt(t.toString(),10)].columns):"Left"===e[parseInt(t.toString(),10)].freeze||e[parseInt(t.toString(),10)].isFrozen?(!1!==e[parseInt(t.toString(),10)].visible&&this.visibleFrozenLeft++,this.leftcount++):"Right"===e[parseInt(t.toString(),10)].freeze?(!1!==e[parseInt(t.toString(),10)].visible&&this.visibleFrozenRight++,this.rightcount++):"Fixed"===e[parseInt(t.toString(),10)].freeze?(!1!==e[parseInt(t.toString(),10)].visible&&this.visibleFrozenFixed++,this.fixedcount++):(!1!==e[parseInt(t.toString(),10)].visible&&this.visibleMovable++,this.movablecount++)},a.prototype.pushStackedColumns=function(e,t,i,n,r){i[parseInt(t.toString(),10)]=n.headerText;for(var s,o=0;o<e.length;o++)e[parseInt(o.toString(),10)].columns?(t+=1,this.pushStackedColumns(e[parseInt(o.toString(),10)].columns,t,i,e[parseInt(o.toString(),10)],r),t-=1):(s=[],s=i.slice().slice(0,t+1),("Left"===e[parseInt(o.toString(),10)].freeze||e[parseInt(o.toString(),10)].isFrozen?(this.stackedLeft.push(s),this.stackedarrayLeft):"Right"===e[parseInt(o.toString(),10)].freeze?(this.stackedRight.push(s),this.stackedarrayRight):"Fixed"===e[parseInt(o.toString(),10)].freeze?(this.stackedFixed.push(s),this.stackedarrayFixed):(this.stackedMovable.push(s),this.stackedarrayMovable)).push(e[parseInt(o.toString(),10)]))},a.prototype.pushallcol=function(e,t,i,n,r){if(i.headerText===t)r?i.columns.push(n):i.columns.push({headerText:e,columns:[]});else if(i.columns&&i.columns.length)for(var s=0;s<i.columns.length;s++)this.pushallcol(e,t,i.columns[parseInt(s.toString(),10)],n,r)},a.prototype.resetStackedColumns=function(e,t,i){for(var n={},r=[],s=1;s<=e.length;s++)for(var o=e[s-1],a=0;a<o.length;a++)if(n.columns||1!==s?-1===r.indexOf(o[parseInt(a.toString(),10)])&&(this.pushallcol(o[parseInt(a.toString(),10)],o[a-1],n),r.push(o[parseInt(a.toString(),10)])):(n={headerText:o[parseInt(a.toString(),10)],columns:[]},r.push(o[parseInt(a.toString(),10)])),a===o.length-1){this.pushallcol(null,o[parseInt(a.toString(),10)],n,t[s-1],!0);for(var l=0;l!==e.length-1&&s!==e.length;)o.toString()===e[parseInt(s.toString(),10)].toString()&&(s++,this.pushallcol(null,o[parseInt(a.toString(),10)],n,t[s-1],!0)),l++}("Left"===i?this.frozenLeftColumns:"Right"===i?this.frozenRightColumns:this.movableColumns).push(n)},a.prototype.splitFrozenCount=function(e){if(this.frozenColumns||this.changedProperties&&0===this.changedProperties.frozenColumns){var t=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var i=0;i<t.length;i++)this.frozenColumns>i?t[parseInt(i.toString(),10)].freeze="Left":"Right"===t[parseInt(i.toString(),10)].freeze||"Fixed"===t[parseInt(i.toString(),10)].freeze?t[parseInt(i.toString(),10)].freeze=t[parseInt(i.toString(),10)].freeze:t[parseInt(i.toString(),10)].freeze=void 0}for(i=0;i<(P.isNullOrUndefined(e)?0:e.length);i++)e[parseInt(i.toString(),10)].columns?(this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.splitStackedColumns(e[parseInt(i.toString(),10)].columns),!this.leftcount||this.rightcount||this.movablecount||this.fixedcount?!this.rightcount||this.leftcount||this.movablecount||this.fixedcount?!this.movablecount||this.leftcount||this.rightcount||this.fixedcount?!this.fixedcount||this.leftcount||this.rightcount||this.movablecount?(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(e[parseInt(i.toString(),10)].columns,0,[],e[parseInt(i.toString(),10)],{headerText:e[parseInt(i.toString(),10)].headerText,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[]):(this.fixedCount+=this.fixedcount,this.fixedColumns.push(e[parseInt(i.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(e[parseInt(i.toString(),10)])):(this.movableCount+=this.movablecount,this.movableColumns.push(e[parseInt(i.toString(),10)])):(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(e[parseInt(i.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(e[parseInt(i.toString(),10)]))):"Right"===e[parseInt(i.toString(),10)].freeze?(!1!==e[parseInt(i.toString(),10)].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[parseInt(i.toString(),10)]),this.frozenRightCount++):"Left"===e[parseInt(i.toString(),10)].freeze||e[parseInt(i.toString(),10)].isFrozen?(!1!==e[parseInt(i.toString(),10)].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[parseInt(i.toString(),10)]),this.frozenLeftCount++):("Fixed"===e[parseInt(i.toString(),10)].freeze?(this.fixedColumns.push(e[parseInt(i.toString(),10)]),this.fixedCount++):!1!==e[parseInt(i.toString(),10)].visible&&this.visibleMovable++,this.movableColumns.push(e[parseInt(i.toString(),10)]),this.movableCount++);this.frozenLeftColumns.length&&(t=this.frozenLeftColumns[this.frozenLeftColumns.length-1],this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(t instanceof Q?this.lastVisibleLeftCol(this.frozenLeftColumns):t)),this.frozenRightColumns.length&&(t=this.frozenRightColumns[0],this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(t instanceof Q?this.firstVisibleRightCol(this.frozenRightColumns):t)),(this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh&&(t=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns),this.setProperties({columns:t},!0),this.freezeColumnRefresh=!1)},a.prototype.removeBorder=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].columns&&e[parseInt(t.toString(),10)].columns.length?("Right"!==e[parseInt(t.toString(),10)].border&&"Left"!==e[parseInt(t.toString(),10)].border||(e[parseInt(t.toString(),10)].border=void 0),this.removeBorder(e[parseInt(t.toString(),10)].columns)):"Right"!==e[parseInt(t.toString(),10)].border&&"Left"!==e[parseInt(t.toString(),10)].border||(e[parseInt(t.toString(),10)].border=void 0)},a.prototype.isVisibleColumns=function(e,t){if(e.columns&&e.columns.length)for(var i=0;i<e.columns.length;i++)this.isVisibleColumns(e.columns[parseInt(i.toString(),10)],t),e.columns[parseInt(i.toString(),10)].visible&&P.isNullOrUndefined(e.columns[parseInt(i.toString(),10)].columns)&&(!P.isNullOrUndefined(e.columns[parseInt(i.toString(),10)].freeze)||e.columns[parseInt(i.toString(),10)].isFrozen)&&t.push("true");else!e.visible||P.isNullOrUndefined(e.freeze)&&!e.isFrozen||t.push("true")},a.prototype.lastVisibleLeftCol=function(e){for(var t,i=e.length-1;0<=i;i--){var n=[];if(this.isVisibleColumns(e[parseInt(i.toString(),10)],n),e[parseInt(i.toString(),10)].visible&&-1!==n.indexOf("true")){t=e[parseInt(i.toString(),10)];break}}return t},a.prototype.firstVisibleRightCol=function(e){for(var t,i=0;i<e.length;i++){var n=[];if(this.isVisibleColumns(e[parseInt(i.toString(),10)],n),e[parseInt(i.toString(),10)].visible&&-1!==n.indexOf("true")){t=e[parseInt(i.toString(),10)];break}}return t},a.prototype.frozenLeftBorderColumns=function(e){var t;P.isNullOrUndefined(e)||(e.columns&&e.columns.length?(e.border="Left",t=e.columns[e.columns.length-1],this.frozenLeftBorderColumns(t instanceof Q&&t.columns?this.lastVisibleLeftCol(e.columns):t)):e.border="Left")},a.prototype.frozenRightBorderColumns=function(e){var t;P.isNullOrUndefined(e)||(e.columns&&e.columns.length?(e.border="Right",t=e.columns[0],this.frozenRightBorderColumns(t instanceof Q&&t.columns?this.firstVisibleRightCol(e.columns):t)):e.border="Right")},a.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},a.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},a.prototype.getVisibleFrozenColumnsCount=function(){for(var e=0,t=this.columnModel,i=0;i<this.frozenColumns;i++)t[parseInt(i.toString(),10)].visible&&e++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(i=0;i<t.length;i++)!t[parseInt(i.toString(),10)].visible||"Left"!==t[parseInt(i.toString(),10)].freeze&&"Right"!==t[parseInt(i.toString(),10)].freeze||e++;return e},a.prototype.getVisibleFrozenCount=function(e,t){if(!(this.frozenLeftCount||this.leftcount||this.frozenRightCount&&this.rightcount))for(var i=0,n=e.length;i<n;i++)e[parseInt(i.toString(),10)].columns?t=this.getVisibleFrozenCount(e[parseInt(i.toString(),10)].columns,t):e[parseInt(i.toString(),10)].isFrozen&&e[parseInt(i.toString(),10)].visible&&t++;return t},a.prototype.getFrozenCount=function(e,t,i){for(var n=0,r=P.isNullOrUndefined(e)?0:e.length;n<r;n++)e[parseInt(n.toString(),10)].columns?t=this.getFrozenCount(e[parseInt(n.toString(),10)].columns,t,i):(e[parseInt(n.toString(),10)].isFrozen&&i>this.frozenColumns-1&&t++,i++);return t},a.prototype.goToPage=function(e){this.pagerModule&&this.pagerModule.goToPage(e)},a.prototype.updateExternalMessage=function(e){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(e)},a.prototype.sortColumn=function(e,t,i){this.sortModule&&this.sortModule.sortColumn(e,t,i)},a.prototype.changeDataSource=function(e,t){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),t&&t.length&&this.setProperties({columns:t},!0),e&&(P.isNullOrUndefined(t)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:e},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},a.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},a.prototype.removeSortColumn=function(e){this.sortModule&&this.sortModule.removeSortColumn(e)},a.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},a.prototype.filterByColumn=function(e,t,i,n,r,s,o,a){this.filterModule&&this.filterModule.filterByColumn(e,t,i,n,r,s,o,a)},a.prototype.clearFiltering=function(e){this.filterModule&&this.filterModule.clearFiltering(e)},a.prototype.removeFilteredColsByField=function(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)},a.prototype.selectRow=function(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)},a.prototype.selectRows=function(e){this.selectionModule&&this.selectionModule.selectRows(e)},a.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},a.prototype.selectCell=function(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)},a.prototype.selectCellsByRange=function(e,t){this.selectionModule.selectCellsByRange(e,t)},a.prototype.search=function(e){this.searchModule&&this.searchModule.search(e)},a.prototype.print=function(){this.printModule&&this.printModule.print()},a.prototype.deleteRecord=function(e,t){this.editModule&&this.editModule.deleteRecord(e,t)},a.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},a.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},a.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},a.prototype.addRecord=function(e,t){this.editModule&&this.editModule.addRecord(e,t)},a.prototype.deleteRow=function(e){this.editModule&&this.editModule.deleteRow(e)},a.prototype.editCell=function(e,t){this.editModule&&this.editModule.editCell(e,t)},a.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},a.prototype.updateCell=function(e,t,i){this.editModule&&this.editModule.updateCell(e,t,i)},a.prototype.updateRow=function(e,t){this.editModule&&this.editModule.updateRow(e,t)},a.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},a.prototype.enableToolbarItems=function(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)},a.prototype.copy=function(e){this.clipboardModule&&this.clipboardModule.copy(e)},a.prototype.recalcIndentWidth=function(){var n=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,r=[].slice.call(this.getHeaderTable().querySelector(us).childNodes),s=[].slice.call(this.getContentTable().querySelector(us).childNodes),t=e/30,i="Right"===this.getFrozenMode()?this.groupSettings.columns.length+this.getColumns().length:0,o=this.element.offsetWidth,a=function(e,t){var i;ep(n)?(i=(t/o*100).toFixed(1)+"%",r[parseInt(e.toString(),10)].style.width=i,s[parseInt(e.toString(),10)].style.width=i):(r[parseInt(e.toString(),10)].style.width=t+"px",s[parseInt(e.toString(),10)].style.width=t+"px"),n.notify(Bt,{index:e,width:t})};for((e=1<=t?30/t:e)<1&&(e=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(e=30);i<this.groupSettings.columns.length;)a(i,e),i++;this.isDetail()&&(a(i,e),i++),this.isRowDragable()&&a(i,e),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},a.prototype.resetIndentWidth=function(){var e;this.isDestroyed||(ep(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit)&&this.preventAdjustColumns(),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&0<this.getColumns().filter(function(e){return(!e.width||"auto"===e.width)&&e.minWidth}).length&&(e=this.widthService.getTableWidth(this.getColumns()),this.allowResizing)&&"auto"!==e&&this.widthService.setMinwidthBycalculation(e),this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(zn,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder(),this.enableStickyHeader&&this.scrollModule.makeStickyHeader())},a.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},a.prototype.reorderColumns=function(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)},a.prototype.reorderColumnByIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)},a.prototype.reorderColumnByTargetIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)},a.prototype.reorderRows=function(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)},a.prototype.refreshDataSource=function(e){this.notify("refreshdataSource",e)},a.prototype.disableRowDD=function(e){var t=this.getHeaderTable(),i=this.getContentTable(),n=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),r=this.getRows(),s=e?"none":"";P.setStyleAttribute(t.querySelector(us).childNodes[0],{display:s}),P.setStyleAttribute(i.querySelector(us).childNodes[0],{display:s});for(var o=0;o<this.getRows().length;o++){var a=r[parseInt(o.toString(),10)].firstElementChild;e?P.addClass([a],"e-hide"):P.removeClass([a],["e-hide"])}for(var l=0;l<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;l++){a=n[parseInt(l.toString(),10)];e?P.addClass([a],"e-hide"):P.removeClass([a],["e-hide"])}},a.prototype.autoFitColumns=function(e,t,i){var n=this.getInjectedModules().find(function(e){return"function"!=typeof e||P.isNullOrUndefined(e.prototype)?"Resize"===e.name:"resize"===e.prototype.getModuleName()});!this.resizeModule&&n&&(this.autoFitColumnsResize=!0,this.injectModules()),this.resizeModule&&this.resizeModule.autoFitColumns(e,t,i)},a.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode||this.allowResizing&&"Auto"===this.resizeSettings.mode)){for(var e=this.getColumns(),t=this.getHeaderTable(),i=0,n=0;n<e.length;n++)if(e[parseInt(n.toString(),10)].visible){if(this.groupSettings.columns.length&&-1<this.groupSettings.columns.indexOf(e[parseInt(n.toString(),10)].field))if("none"===[].slice.call(t.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"))[parseInt(n.toString(),10)].style.display)continue;if(!e[parseInt(n.toString(),10)].width){i=0;break}i+=parseFloat(e[parseInt(n.toString(),10)].width.toString())}if(i){var r=this.isPercentageWidthGrid(),s=this.widthUnit(r),o=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var a=this.defaultIndentWidth(r),l=a.toString()+s,h=[].slice.call(t.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),p=[].slice.call(o.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),n=0;n<h.length;n++)h[parseInt(n.toString(),10)].style.setProperty("width",l),p[parseInt(n.toString(),10)].style.setProperty("width",l),i+=a;(r&&i<100||!r&&i<o.parentElement.clientWidth)&&(P.isNullOrUndefined(o.querySelector(".e-emptyrow"))?P.addClass([t,o],["e-tableborder"]):(P.addClass([t],["e-tableborder"]),P.removeClass([o],["e-tableborder"])));r=i.toString()+s;t.style.setProperty("width",r),o.style.setProperty("width",r)}else this.restoreAdjustColumns()}},a.prototype.restoreAdjustColumns=function(){var e,t,i;this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode||this.allowResizing&&"Auto"===this.resizeSettings.mode||(e=this.getHeaderTable(),t=this.getContentTable(),P.removeClass([e,t],["e-tableborder"]),e.style.removeProperty("width"),t.style.removeProperty("width"),(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&(t=this.isPercentageWidthGrid(),i=this.defaultIndentWidth(t).toString()+this.widthUnit(t),[].slice.call(e.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")).forEach(function(e){e.style.setProperty("width",i)}),e.querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.recalcIndentWidth()))},a.prototype.widthUnit=function(e){return e?"%":"px"},a.prototype.defaultIndentWidth=function(e){return e?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},a.prototype.isPercentageWidthGrid=function(){return-1<this.getColumns()[0].width.toString().indexOf("%")},a.prototype.createColumnchooser=function(e,t,i){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,i)},a.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Yo(this)),this.serviceLocator.register("cellRendererFactory",new Vo),this.serviceLocator.register("rendererFactory",new Qo),this.serviceLocator.register("localization",this.localeObj=new P.L10n(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new V(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Ca(this)),this.serviceLocator.register("ariaService",this.ariaService=new Ks),this.serviceLocator.register("focus",this.focusModule=new $o(this))},a.prototype.processModel=function(){var n,r,e,s=this.groupSettings.columns,o=this.sortSettings.columns;if(this.allowGrouping)for(var a=this,t=0,i=s.length;t<i;t++)!function(t){n=!1,r=0;for(var e,i=o.length;r<i;r++)if(o[parseInt(r.toString(),10)].field===s[parseInt(t.toString(),10)]){n=!0;break}n?a.allowSorting?a.sortedColumns.push(o[parseInt(r.toString(),10)].field):o[parseInt(r.toString(),10)].direction="Ascending":o.push({field:s[parseInt(t.toString(),10)],direction:"Ascending",isFromGroup:!0}),a.groupSettings.showGroupedColumn||((e=a.enableColumnVirtualization?a.columns.filter(function(e){return e.field===s[parseInt(t.toString(),10)]})[0]:a.getColumnByField(s[parseInt(t.toString(),10)]))?e.visible=!1:a.log("initial_action",{moduleName:"group",columnName:s[parseInt(t.toString(),10)]}))}(t);if(!s.length)for(t=0;t<o.length;t++)this.sortedColumns.push(o[parseInt(t.toString(),10)].field);this.rowTemplateFn=_l(this.rowTemplate),this.emptyRecordTemplateFn=_l(this.emptyRecordTemplate),this.detailTemplateFn=_l(this.detailTemplate),this.editTemplateFn=_l(this.editSettings.template),this.editHeaderTemplateFn=_l(this.editSettings.headerTemplate),this.editFooterTemplateFn=_l(this.editSettings.footerTemplate),P.isNullOrUndefined(this.parentDetails)||(e=P.isNullOrUndefined(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue,this.query.where(this.queryString,"equal",e,!0)),this.initForeignColumn()},a.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(xi,this.getForeignKeyColumns())},a.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},a.prototype.gridRender=function(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),P.Browser.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(-1!==this.cssClass.indexOf(" ")?(e=this.element.classList).add.apply(e,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&"mozilla"===P.Browser.info.name&&this.element.classList.add("e-disableuserselect"),this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top"),P.classList(this.element,["e-responsive","e-default"],[]);var e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(O.RenderType.Header),this.contentModule=e.getRenderer(O.RenderType.Content),this.printModule=new kl(this,this.scrollModule),this.clipboardModule=new Aa(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},a.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},a.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},a.prototype.createGridPopUpElement=function(){var e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:Zr,attrs:{tabIndex:"-1"}});P.append([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),P.append([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)},a.prototype.updateGridLines=function(){switch(P.classList(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},a.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},a.prototype.applyTextWrap=function(){if(this.allowTextWrap){var e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":Sh(this.element,!1),Sh(this.getContent(),!1),Sh(e,!0);break;case"Content":Sh(this.getContent(),!0),Sh(this.element,!1),Sh(e,!1);break;default:Sh(this.element,!0),Sh(this.getContent(),!1),Sh(e,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(zn,{})}},a.prototype.removeTextWrap=function(){Sh(this.element,!1),Sh([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),Sh(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(zn,{})},a.prototype.createTooltip=function(){this.toolTipObj=new L.Tooltip({opensOn:"custom",content:"",cssClass:this.cssClass||null},this.element)},a.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},a.prototype.getTooltipStatus=function(e){var t=this.getHeaderTable(),i=this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode?"e-gridcontent":"e-gridheader",n=this.createTable(t,i,"header"),t=this.createTable(t,i,"content"),i=e.classList.contains("e-headercell")?n:t,r=e.classList.contains("e-headercell")?"th":"tr",i=(i.querySelector(r).className=e.className,i.querySelector(r).innerHTML=e.innerHTML,i.querySelector(r).getBoundingClientRect().width);return document.body.removeChild(n),document.body.removeChild(t),!!(i>e.getBoundingClientRect().width&&!e.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&"Vertical"===this.rowRenderingMode&&i>.55*e.getBoundingClientRect().width-("auto"!==this.height?16:0))},a.prototype.mouseMoveHandler=function(e){var t,i,n,r;this.isEllipsisTooltip()&&(t=E(e.target,"e-ellipsistooltip"),this.prevElement===t&&"mouseout"!==e.type||this.toolTipObj.close(),i=e.target.tagName,!t||"mouseout"===e.type||P.Browser.isDevice&&-1!==["A","BUTTON","INPUT"].indexOf(i)||this.getTooltipStatus(t)&&(i=(e=this.getColumns()[parseInt(t.getAttribute(ps),10)]).disableHtmlEncode?"innerText":"innerHTML",n=this.createElement("div"),t.getElementsByClassName("e-headertext").length?(r=t.getElementsByClassName("e-headertext")[0],n[i]=this.sanitize(r.innerText)):n[i]=this.sanitize(t.innerText),this.toolTipObj.content=n,this.prevElement=t,this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),e.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(t)))},a.prototype.isEllipsisTooltip=function(){var e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[parseInt(t.toString(),10)].clipMode)return!0;return!1},a.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},a.prototype.createTable=function(e,t,i){var n=this.createElement("div"),r=(n.className=this.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute",this.createElement("div")),t=(r.className=t,this.createElement("table")),e=(t.className=e.className,t.style.cssText="table-layout: auto;width: auto","header"===i?"th":"td"),i=this.createElement("tr",{attrs:{role:"row"}}),e=this.createElement(e);return i.appendChild(e),t.appendChild(i),r.appendChild(t),n.appendChild(r),document.body.appendChild(n),n},a.prototype.onKeyPressed=function(e){"tab"!==e.action&&"shiftTab"!==e.action||this.toolTipObj.close()},a.prototype.wireEvents=function(){P.EventHandler.add(this.element,"click",this.mouseClickHandler,this),P.EventHandler.add(this.element,"touchend",this.mouseClickHandler,this),P.EventHandler.add(this.element,"focusout",this.focusOutHandler,this),P.EventHandler.add(this.element,"dblclick",this.dblClickHandler,this),P.EventHandler.add(this.element,"keydown",this.keyPressHandler,this),P.EventHandler.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new P.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),P.EventHandler.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),P.EventHandler.add(this.element,"mouseover",this.mouseMoveHandler,this),P.EventHandler.add(this.element,"mouseout",this.mouseMoveHandler,this),P.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this),P.EventHandler.add(document.body,"keydown",this.keyDownHandler,this)},a.prototype.unwireEvents=function(){P.EventHandler.remove(this.element,"click",this.mouseClickHandler),P.EventHandler.remove(this.element,"touchend",this.mouseClickHandler),P.EventHandler.remove(this.element,"focusout",this.focusOutHandler),P.EventHandler.remove(this.element,"dblclick",this.dblClickHandler),P.EventHandler.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),P.EventHandler.remove(this.element,"mouseover",this.mouseMoveHandler),P.EventHandler.remove(this.element,"mouseout",this.mouseMoveHandler),P.EventHandler.remove(this.element,"keydown",this.keyPressHandler),P.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent),P.EventHandler.remove(document.body,"keydown",this.keyDownHandler),P.EventHandler.remove(window,"resize",this.resetIndentWidth)},a.prototype.addListener=function(){this.isDestroyed||(this.on(ht,this.dataReady,this),this.on(pt,this.recalcIndentWidth,this),this.on(ft,this.recalcIndentWidth,this),this.on(Or,this.refreshFrozenPosition,this),this.on(Fr,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(ae,this.dataBoundFunction),this.on(Mt,this.onKeyPressed,this))},a.prototype.removeListener=function(){this.isDestroyed||(this.off(ht,this.dataReady),this.off(pt,this.recalcIndentWidth),this.off(ft,this.recalcIndentWidth),this.on(Or,this.refreshFrozenPosition,this),this.on(Fr,this.refreshSplitFrozenColumn,this),this.removeEventListener(ae,this.dataBoundFunction),this.off(Mt,this.onKeyPressed))},a.prototype.getCurrentViewRecords=function(){return Mh(this)?P.isNullOrUndefined(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:!this.groupSettings.enableLazyLoading&&this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},a.prototype.mouseClickHandler=function(e){var t,i,n;this.isChildGrid(e)||E(e.target,"e-gridpopup")&&e.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(e)||(!this.allowRowDragAndDrop&&(E(e.target,_r)||"TD"===e.target.tagName)||E(e.target,"e-headercell")&&E(e.target,"e-headercell").querySelector(".e-checkselectall")||!this.allowGrouping&&!this.allowReordering&&E(e.target,"e-gridheader"))&&e.touches||(E(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!E(e.target,"e-filterbarcell")&&e.target&&-1===["A","BUTTON","INPUT"].indexOf(e.target.tagName)&&e.preventDefault(),n=(t=this.getRowInfo(e.target)).cancel=!1,(n=(i=P.closest(e.target,"tr"))&&i.getAttribute("data-uid")?!!(i=this.getRowObjectFromUID(i.getAttribute("data-uid")))&&i.isDataRow:n)&&this.trigger(je,t),this.notify(Lt,e))},a.prototype.checkEdit=function(e){var t=E(e.target,I),t="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains(ts)||t.classList.contains(is)&&!this.editSettings.showAddNewRow);return!E(e.target,"e-unboundcelldiv")&&(t||E(e.target,b)&&E(e.target,b).classList.contains("e-editedbatchcell"))},a.prototype.dblClickHandler=function(e){var t,i=E(e.target,"e-grid");P.isNullOrUndefined(i)||i.id!==this.element.id||P.closest(e.target,".e-unboundcelldiv")||(i=!1,(t=P.closest(e.target,"tr"))&&t.getAttribute("data-uid")&&(i=!!(t=this.getRowObjectFromUID(t.getAttribute("data-uid")))&&t.isDataRow),(t=this.getRowInfo(e.target)).target=e.target,i&&this.trigger(He,t),this.notify(Wt,e))},a.prototype.focusOutHandler=function(e){var t,i;this.isChildGrid(e)||(E(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None"),(t=this.element.querySelector(".e-cancel:not(.e-hide)"))&&!t.parentElement.classList.contains("e-tbar-btn")&&t.classList.add("e-hide"),i=(t=e.relatedTarget)?t.getAttribute("aria-owns"):null,t&&(E(t,"e-grid")||(!P.isNullOrUndefined(i)&&i)===e.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||P.Browser.isDevice||("Batch"!==this.editSettings.mode||(E(t,"e-ddl")||E(t,"e-ddt"))&&(E(t,"e-multi-select-list-wrapper")||E(t,"e-input-filter"))&&E(t,"e-input-group")||!E(t,"e-uploader")&&t&&P.isNullOrUndefined(E(t,"e-input-group"))||(this.editModule.saveCell(),this.notify(Bi,{})),"Normal"!==this.editSettings.mode)||this.isWidgetsDestroyed||this.editModule.editFormValidate(),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1)},a.prototype.isChildGrid=function(e){var t=E(e.target,"e-grid");return!!(t&&t.id!==this.element.id||E(e.target,"e-unboundcelldiv")&&P.isNullOrUndefined(t))},a.prototype.mergePersistGridData=function(e){var t=this.getLocalData();if(!P.isNullOrUndefined(t)&&""!==t||!P.isNullOrUndefined(e)){var i=P.isNullOrUndefined(e)?JSON.parse(t):e,t=(this.enableVirtualization&&i.pageSettings&&(i.pageSettings.currentPage=1),Object.keys(i));this.isProtectedOnChange=!0;for(var n=0,r=t;n<r.length;n++){var s=r[n];"object"!=typeof this[""+s]||P.isNullOrUndefined(this[""+s])?this[""+s]=i[""+s]:Array.isArray(this[""+s])&&"columns"===s?(this.setFrozenCount(),Ql(this[""+s]),this.mergeColumns(i[""+s],this[""+s]),this.mergedColumns=!0,this[""+s]=i[""+s]):P.extend(this[""+s],i[""+s])}this.isProtectedOnChange=!1}},a.prototype.mergeColumns=function(e,i){for(var n=e,r=this.isFrozenGrid(),s=this,t=0;t<n.length;t++)!function(t){var e=i.filter(function(e){return r?e.index===n[parseInt(t.toString(),10)][xs]:e.index===n[parseInt(t.toString(),10)].index})[0];P.isNullOrUndefined(e)||(r&&((e=P.extend({},e,{},!0)).freeze=n[parseInt(t.toString(),10)].freeze),e.columns&&e.columns.length&&s.mergeColumns(n[parseInt(t.toString(),10)].columns,e.columns),n[parseInt(t.toString(),10)]=P.extend(e,n[parseInt(t.toString(),10)],{},!0))}(t)},a.prototype.isDetail=function(){return!P.isNullOrUndefined(this.detailTemplate)||!P.isNullOrUndefined(this.childGrid)},a.prototype.isCommandColumn=function(e){var t=this;return e.some(function(e){return e.columns?t.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate)})},a.prototype.isForeignKeyEnabled=function(e){var t=this;return e.some(function(e){return e.columns?t.isForeignKeyEnabled(e.columns):!(!e.dataSource||!e.foreignKeyValue)})},a.prototype.keyPressHandler=function(e){var t=P.extend(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()},a.prototype.keyDownHandler=function(e){if(e.altKey){if(74===e.keyCode&&(this.keyA?(this.notify(Nn,{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(P.removeClass([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),87===e.keyCode){var t=this.focusModule;if(t){if(!this.currentViewData.length)return;t.focusContent(),t.addOutline()}}65===e.keyCode&&(this.keyA=!0),72===e.keyCode&&this.keyA&&(this.notify(Nn,{target:e.target,collapse:!0}),this.keyA=!1)}13===e.keyCode&&this.notify(or,e)},a.prototype.keyActionHandler=function(e){this.isChildGrid(e)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(ts))&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify(Mt,e)))},a.prototype.setInjectedModules=function(e){this.injectedModules=e},a.prototype.updateColumnObject=function(){Xl(this.columns,this.enableColumnVirtualization,this),Ql(this.columns),this.initForeignColumn(),this.notify(Xt,{})},a.prototype.refreshFrozenPosition=function(e){e&&e.isModeChg?(this.refreshColumns(),this.notify(Ar,{})):this.refreshColumns()},a.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(e){return e.isForeignColumn()})},a.prototype.getRowHeight=function(){return this.rowHeight||dh(this.element)},a.prototype.refreshColumns=function(){var e;this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization&&(e=this.getContent().querySelector(".e-movablescrollbar").scrollLeft,this.getHeaderContent().querySelector("."+Kr).scrollLeft=e,this.getContent().querySelector("."+Zr).scrollLeft=e)},a.prototype.excelExport=function(e,t,i,n){var r;return this.exportGrids&&this.exportGrids.length?(r=this.exportGrids.slice(),this.exportMultipleExcelGrids(r,e,t,i,n)):this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!1,n):null},a.prototype.csvExport=function(e,t,i,n){return this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!0,n):null},a.prototype.pdfExport=function(e,t,i,n){var r;return this.exportGrids&&this.exportGrids.length?(r=this.exportGrids.slice(),this.exportMultiplePdfGrids(r,e,t,i,n)):this.pdfExportModule?this.pdfExportModule.Map(this,e,t,i,n):null},a.prototype.exportMultiplePdfGrids=function(t,i,n,e,r){var s,o=this;return 0!==t.length?(s=t.shift(),((s=document.getElementById(s).ej2_instances[0]).pdfExportModule?s.pdfExportModule.Map(s,i,n,e,r):Promise.resolve()).then(function(e){return n=1!==t.length,o.exportMultiplePdfGrids(t,i,n,e,r)})):null},a.prototype.exportMultipleExcelGrids=function(t,i,n,e,r){var s,o=this;return 0!==t.length?(s=t.shift(),((s=document.getElementById(s).ej2_instances[0]).excelExportModule?s.excelExportModule.Map(s,i,n,e,!1,r):null).then(function(e){return n=1!==t.length,o.exportMultipleExcelGrids(t,i,n,e,r)})):null},a.prototype.groupColumn=function(e){this.groupModule&&this.groupModule.groupColumn(e)},a.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},a.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},a.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},a.prototype.ungroupColumn=function(e){this.groupModule&&this.groupModule.ungroupColumn(e)},a.prototype.openColumnChooser=function(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)},a.prototype.scrollRefresh=function(){function e(){t.scrollModule.refresh(),t.off(pt,e)}var t=this;this.on(pt,e,this)},a.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},a.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},a.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},a.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},a.prototype.selectCells=function(e){this.selectionModule&&this.selectionModule.selectCells(e)},a.prototype.selectRowsByRange=function(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)},a.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},a.prototype.ensureModuleInjected=function(e){return 0<=this.getInjectedModules().indexOf(e)},a.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},a.prototype.log=function(e,t){this.getInjectedModules().find(function(e){return"Logger"===e.name})||(Ol.Inject(Ba),this.enableLogger=!0,this.injectModules()),this.loggerModule&&this.loggerModule.log(e,t)},a.prototype.applyBiggerTheme=function(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")},a.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},a.prototype.hideScroll=function(){var e=this.getContent().querySelector("."+Zr);e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto")},a.prototype.getRowIndexByPrimaryKey=function(e){for(var t=this.getPrimaryKeyFieldNames()[0],i=(e="object"==typeof e?e[""+t]:e,this.getRowsObject()),n=0;n<i.length;n++)if(!i[parseInt(n.toString(),10)].isDetailRow&&!i[parseInt(n.toString(),10)].isCaptionRow){var r=i[parseInt(n.toString(),10)].data[""+t];if((r=1<t.split(".").length?vp(t,i[parseInt(n.toString(),10)].data):r)===e)return i[parseInt(n.toString(),10)].index}return-1},a.prototype.grabColumnByFieldFromAllCols=function(e,t){this.columnModel=[],this.updateColumnModel(this.columns);for(var i,n=this.columnModel,r=0;r<n.length;r++)if(!t&&e===n[parseInt(r.toString(),10)].field||t&&n[parseInt(r.toString(),10)].isForeignColumn()&&e===n[parseInt(r.toString(),10)].foreignKeyValue){i=n[parseInt(r.toString(),10)];break}return i},a.prototype.grabColumnByUidFromAllCols=function(e){this.columnModel=[],this.updateColumnModel(this.columns);for(var t,i=this.columnModel,n=0;n<i.length;n++)e===i[parseInt(n.toString(),10)].uid&&(t=i[parseInt(n.toString(),10)]);return t},a.prototype.getFilteredRecords=function(){var e;return this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length?(e=this.renderModule.data.generateQuery(!0),this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof A.DataManager?this.renderModule.data.getData(this.dataSource,e):(this.dataSource instanceof A.DataManager?this.dataSource:new A.DataManager(this.dataSource,e)).executeLocal(e)):[]},a.prototype.getUserAgent=function(){var e=P.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(e)},a.prototype.tapEvent=function(e){this.getUserAgent()&&(O.Global.timer?(clearTimeout(O.Global.timer),O.Global.timer=null,this.dblClickHandler(e),this.notify(si,e)):O.Global.timer=setTimeout(function(){O.Global.timer=null},300))},a.prototype.getRowUid=function(e){return""+e+this.rowUid++},a.prototype.getRowElementByUID=function(e){for(var t,i=[].slice.call(this.getContent().querySelector(N).children),n=0,r=this.frozenRows?[].slice.call(this.getHeaderContent().querySelector(N).children).concat(i):i;n<r.length;n++){var s=r[n];if(s.getAttribute("data-uid")===e){t=s;break}}return t},a.prototype.getHiddenColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var n=i[t];!1===n.visible&&e.push(n)}return e},a.prototype.calculatePageSizeByParentHeight=function(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){var t=0;if(-1!==e.indexOf("%")&&(e=parseInt(e,10)/100*this.element.clientHeight),this.getNoncontentHeight()+this.getRowHeight()<e&&(t=(e-this.getNoncontentHeight())/this.getRowHeight()),0<t)return Math.floor(t)}return 0},a.prototype.getNoncontentHeight=function(){var e=0;if(P.isNullOrUndefined(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!P.isNullOrUndefined(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!P.isNullOrUndefined(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!P.isNullOrUndefined(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!P.isNullOrUndefined(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),0<this.aggregates.length&&!P.isNullOrUndefined(this.element.querySelector(".e-summaryrow").clientHeight))for(var t=0;t<this.element.getElementsByClassName("e-summaryrow").length;t++)e+=this.element.getElementsByClassName("e-summaryrow")[parseInt(t.toString(),10)].clientHeight;return e},a.prototype.getSummaryValues=function(e,t){return A.DataUtil.aggregates[e.type.toLowerCase()](t,e.field)},a.prototype.serverExcelExport=function(e){this.isExcel=!0,this.exportGrid(e)},a.prototype.serverPdfExport=function(e){this.isExcel=!1,this.exportGrid(e)},a.prototype.serverCsvExport=function(e){this.isExcel=!0,this.exportGrid(e)},a.prototype.exportGrid=function(e){var t=this.getDataModule().generateQuery(!0),t=(new A.UrlAdaptor).processQuery(new A.DataManager({url:""}),t),t=JSON.parse(t.data),i=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),t=(i.filterSettings.columns=t.where,i.searchSettings.fields=t.search&&t.search[0].fields||[],i.sortSettings.columns=t.sorted,i.columns=this.setHeaderText(i.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]),this.createElement("form",{id:"ExportForm",styles:"display:none;"})),n=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});n.value=JSON.stringify(i),t.method="POST",t.action=e,t.appendChild(n),document.body.appendChild(t),t.submit(),t.remove()},a.prototype.setHeaderText=function(e,t){for(var i=0;i<e.length;i++)for(var n=this.getColumnByUid(e[parseInt(i.toString(),10)].uid),r=(e[parseInt(i.toString(),10)].headerText=n.headerText,P.isNullOrUndefined(n.template)||(e[parseInt(i.toString(),10)].template="true"),e[parseInt(i.toString(),10)].format&&(e[parseInt(i.toString(),10)].format=yp(this.getFormat(e[parseInt(i.toString(),10)].format),e[parseInt(i.toString(),10)].type,this.isExcel,P.defaultCurrencyCode)),e[parseInt(i.toString(),10)].columns&&this.setHeaderText(e[parseInt(i.toString(),10)].columns,t),Object.keys(e[parseInt(i.toString(),10)])),s=0;s<r.length;s++)t.indexOf(r[parseInt(s.toString(),10)])<0&&delete e[parseInt(i.toString(),10)][r[parseInt(s.toString(),10)]];return e},a.prototype.getFormat=function(e){return"object"==typeof e?P.isNullOrUndefined(e.format)?e.skeleton:e.format:e},a.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},a.prototype.updateRowValue=function(e,t){t={requestType:"save",data:t};this.showSpinner(),this.notify(Jt,t),this.refresh()},a.prototype.setForeignKeyData=function(){this.dataBind();var e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},a.prototype.resetFilterDlgPosition=function(e){var t,i,e=this.getColumnHeaderByField(e);e&&(e=e.querySelector(".e-filtermenudiv"),t=this.element.querySelector(".e-filter-popup"),e)&&t&&(i=this.element.getBoundingClientRect(),e=e.getBoundingClientRect(),t)&&(t.offsetWidth+e.right>i.right?t.style.left=(e.right-t.offsetWidth-i.left).toString()+"px":t.style.left=(e.right-i.left).toString()+"px")},a.prototype.renderTemplates=function(e){this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact&&this.portals?(this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(e),this.portals=void 0):(this.notify("reactTemplateRender",this.portals),this.renderReactTemplates(e))},a.prototype.batchUpdate=function(e){this.processRowChanges(e)},a.prototype.batchAsyncUpdate=function(e){this.processBulkRowChanges(e)},a.prototype.processBulkRowChanges=function(e){var t=this;if(this.dataToBeUpdated)for(var i=[ss,rs,os],n=this.getPrimaryKeyFieldNames()[0],r=0;r<i.length;r++)e[i[parseInt(r.toString(),10)]]&&rp(this,e,i[parseInt(r.toString(),10)],n);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout(function(){t.processRowChanges(t.dataToBeUpdated),t.dataToBeUpdated=null},this.asyncTimeOut)},a.prototype.processRowChanges=function(e){var t=this,i=this.getPrimaryKeyFieldNames()[0],e=(e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),this.getDataModule().saveChanges(e,i,{},this.getDataModule().generateQuery().requiresCount()));this.getDataModule().isRemote()?e.then(function(){t.setNewData()}):this.setNewData()},a.prototype.setNewData=function(){var t=this,i=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(function(e){t.bulkRefresh(e.result,i,e.count)})},a.prototype.deleteRowElement=function(e){e=this.getRowElementByUID(e.uid);P.remove(e)},a.prototype.bulkRefresh=function(n,e,t){for(var i,r=this,s=this.getRowsObject(),o=this.getPrimaryKeyFieldNames()[0],a=this,l=0;l<s.length;l++)!function(t){n.filter(function(e){return e[""+o]===s[parseInt(t.toString(),10)].data[""+o]}).length||(a.deleteRowElement(s[parseInt(t.toString(),10)]),s.splice(t,1),t--),i=t}(l),l=i;for(var h=this,l=0;l<n.length;l++)!function(t){var i;e.filter(function(e){e[""+o]===n[parseInt(t.toString(),10)][""+o]&&(e!==n[parseInt(t.toString(),10)]&&r.setRowData(n[parseInt(t.toString(),10)][""+o],n[parseInt(t.toString(),10)]),i=!0)}),i||h.renderRowElement(n[parseInt(t.toString(),10)],t)}(l);this.currentViewData=n;var p=[].slice.call(this.getContentTable().getElementsByClassName(I));tp(this,this.getRowsObject(),p),sp(this),this.allowPaging&&this.notify(ct,{module:"pager",properties:{totalRecordsCount:t}})},a.prototype.renderRowElement=function(e,t){var i,n=new Rs(this.serviceLocator,null,this),e=new Ds(this).generateRows([e]),n=n.render(e[0],this.getColumns()),e=(this.addRowObject(e[0],t),this.getContentTable().querySelector(N));e.querySelector(".e-emptyrow")&&((i=e.querySelector(".e-emptyrow")).parentNode.removeChild(i),this.frozenRows)&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty"),e=(this.frozenRows&&t<this.frozenRows?this.getHeaderContent():this.getContent()).querySelector(N),(e=this.getContent().querySelector(N)).appendChild(n)},a.prototype.addRowObject=function(e,t){this.getRowsObject().splice(t,1,e)},a.prototype.updateVisibleExpandCollapseRows=function(){for(var e=this.getRowsObject(),t=0,i=e.length;t<i;t++)(e[parseInt(t.toString(),10)].isDataRow||e[parseInt(t.toString(),10)].isAggregateRow)&&this.getRowElementByUID(e[parseInt(t.toString(),10)].uid)&&"none"===this.getRowElementByUID(e[parseInt(t.toString(),10)].uid).style.display?e[parseInt(t.toString(),10)].visible=!1:e[parseInt(t.toString(),10)].visible=!0},a.prototype.sanitize=function(e){return this.enableHtmlSanitizer?P.SanitizeHtmlHelper.sanitize(e):e},a.prototype.getHeight=function(e){return e=Number.isInteger(e)||-1===e.indexOf("%")?Number.isInteger(e)||"auto"===this.height?this.height:parseInt(e,10):parseInt(e,10)/100*this.element.clientHeight},a.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},a.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},a.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(N)},a.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(N)},a.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(N)},a.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(N)},a.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(N)},a.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(N)},a.prototype.showResponsiveCustomFilter=function(e){this.filterModule&&this.filterModule.showCustomFilter(e||"Vertical"===this.rowRenderingMode)},a.prototype.showResponsiveCustomSort=function(e){this.sortModule&&this.sortModule.showCustomSort(e||"Vertical"===this.rowRenderingMode)},a.prototype.showResponsiveCustomColumnChooser=function(e){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(e||"Vertical"===this.rowRenderingMode)},a.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},a.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},a.prototype.getCurrentVisibleColumns=function(e){for(var t=[],i=0,n=e?this.getColumns():this.columnModel;i<n.length;i++){var r=n[i];r.visible&&t.push(r)}return t},a.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)},o([P.Property([])],a.prototype,"currentViewData",void 0),o([P.Property()],a.prototype,"parentDetails",void 0),o([P.Property()],a.prototype,"showHider",void 0),o([P.Property([])],a.prototype,"columns",void 0),o([P.Property(!0)],a.prototype,"enableAltRow",void 0),o([P.Property(!0)],a.prototype,"enableHover",void 0),o([P.Property(!1)],a.prototype,"enableAutoFill",void 0),o([P.Property(!0)],a.prototype,"allowKeyboard",void 0),o([P.Property(!1)],a.prototype,"enableStickyHeader",void 0),o([P.Property(!1)],a.prototype,"enableHtmlSanitizer",void 0),o([P.Property(!1)],a.prototype,"allowTextWrap",void 0),o([P.Complex({},gl)],a.prototype,"textWrapSettings",void 0),o([P.Complex({},yl)],a.prototype,"resizeSettings",void 0),o([P.Property(!1)],a.prototype,"allowPaging",void 0),o([P.Complex({},e)],a.prototype,"pageSettings",void 0),o([P.Complex({},El)],a.prototype,"loadingIndicator",void 0),o([P.Property(!0)],a.prototype,"enableVirtualMaskRow",void 0),o([P.Property(!1)],a.prototype,"enableVirtualization",void 0),o([P.Property(!1)],a.prototype,"enableColumnVirtualization",void 0),o([P.Property(!1)],a.prototype,"enableInfiniteScrolling",void 0),o([P.Complex({},ll)],a.prototype,"searchSettings",void 0),o([P.Property(!1)],a.prototype,"allowSorting",void 0),o([P.Property("Ellipsis")],a.prototype,"clipMode",void 0),o([P.Property(!0)],a.prototype,"allowMultiSorting",void 0),o([P.Property(!1)],a.prototype,"allowExcelExport",void 0),o([P.Property(!1)],a.prototype,"allowPdfExport",void 0),o([P.Complex({},Ka)],a.prototype,"sortSettings",void 0),o([P.Complex({},$a)],a.prototype,"infiniteScrollSettings",void 0),o([P.Property(!0)],a.prototype,"allowSelection",void 0),o([P.Property(-1)],a.prototype,"selectedRowIndex",void 0),o([P.Complex({},sl)],a.prototype,"selectionSettings",void 0),o([P.Property(!1)],a.prototype,"allowFiltering",void 0),o([P.Property("Horizontal")],a.prototype,"rowRenderingMode",void 0),o([P.Property(!1)],a.prototype,"enableAdaptiveUI",void 0),o([P.Property(!1)],a.prototype,"allowReordering",void 0),o([P.Property(!1)],a.prototype,"allowResizing",void 0),o([P.Property(!1)],a.prototype,"allowRowDragAndDrop",void 0),o([P.Complex({},dl)],a.prototype,"rowDropSettings",void 0),o([P.Complex({},il)],a.prototype,"filterSettings",void 0),o([P.Property(!1)],a.prototype,"allowGrouping",void 0),o([P.Property(!1)],a.prototype,"enableImmutableMode",void 0),o([P.Property(!1)],a.prototype,"showColumnMenu",void 0),o([P.Property(!1)],a.prototype,"autoFit",void 0),o([P.Complex({},Cl)],a.prototype,"groupSettings",void 0),o([P.Complex({},Il)],a.prototype,"editSettings",void 0),o([P.Collection([],fa)],a.prototype,"aggregates",void 0),o([P.Property(!1)],a.prototype,"showColumnChooser",void 0),o([P.Complex({},da)],a.prototype,"columnChooserSettings",void 0),o([P.Property(!1)],a.prototype,"enableHeaderFocus",void 0),o([P.Property("auto")],a.prototype,"height",void 0),o([P.Property("auto")],a.prototype,"width",void 0),o([P.Property("Default")],a.prototype,"gridLines",void 0),o([P.Property()],a.prototype,"rowTemplate",void 0),o([P.Property()],a.prototype,"emptyRecordTemplate",void 0),o([P.Property()],a.prototype,"detailTemplate",void 0),o([P.Property()],a.prototype,"childGrid",void 0),o([P.Property()],a.prototype,"queryString",void 0),o([P.Property("AllPages")],a.prototype,"printMode",void 0),o([P.Property("Expanded")],a.prototype,"hierarchyPrintMode",void 0),o([P.Property([])],a.prototype,"dataSource",void 0),o([P.Property(null)],a.prototype,"rowHeight",void 0),o([P.Property()],a.prototype,"query",void 0),o([P.Property("USD")],a.prototype,"currencyCode",void 0),o([P.Property()],a.prototype,"exportGrids",void 0),o([P.Property()],a.prototype,"toolbar",void 0),o([P.Property()],a.prototype,"contextMenuItems",void 0),o([P.Property()],a.prototype,"columnMenuItems",void 0),o([P.Property()],a.prototype,"toolbarTemplate",void 0),o([P.Property()],a.prototype,"pagerTemplate",void 0),o([P.Property(0)],a.prototype,"frozenRows",void 0),o([P.Property(0)],a.prototype,"frozenColumns",void 0),o([P.Property("")],a.prototype,"cssClass",void 0),o([P.Property("All")],a.prototype,"columnQueryMode",void 0),o([P.Property({})],a.prototype,"currentAction",void 0),o([P.Property("")],a.prototype,"ej2StatePersistenceVersion",void 0),o([P.Event()],a.prototype,"created",void 0),o([P.Event()],a.prototype,"destroyed",void 0),o([P.Event()],a.prototype,"load",void 0),o([P.Event()],a.prototype,"rowDataBound",void 0),o([P.Event()],a.prototype,"queryCellInfo",void 0),o([P.Event()],a.prototype,"headerCellInfo",void 0),o([P.Event()],a.prototype,"actionBegin",void 0),o([P.Event()],a.prototype,"actionComplete",void 0),o([P.Event()],a.prototype,"actionFailure",void 0),o([P.Event()],a.prototype,"dataBound",void 0),o([P.Event()],a.prototype,"recordDoubleClick",void 0),o([P.Event()],a.prototype,"recordClick",void 0),o([P.Event()],a.prototype,"rowSelecting",void 0),o([P.Event()],a.prototype,"rowSelected",void 0),o([P.Event()],a.prototype,"rowDeselecting",void 0),o([P.Event()],a.prototype,"rowDeselected",void 0),o([P.Event()],a.prototype,"cellSelecting",void 0),o([P.Event()],a.prototype,"cellSelected",void 0),o([P.Event()],a.prototype,"cellDeselecting",void 0),o([P.Event()],a.prototype,"cellDeselected",void 0),o([P.Event()],a.prototype,"columnSelecting",void 0),o([P.Event()],a.prototype,"columnSelected",void 0),o([P.Event()],a.prototype,"columnDeselecting",void 0),o([P.Event()],a.prototype,"columnDeselected",void 0),o([P.Event()],a.prototype,"columnDragStart",void 0),o([P.Event()],a.prototype,"columnDrag",void 0),o([P.Event()],a.prototype,"columnDrop",void 0),o([P.Event()],a.prototype,"printComplete",void 0),o([P.Event()],a.prototype,"beforePrint",void 0),o([P.Event()],a.prototype,"pdfQueryCellInfo",void 0),o([P.Event()],a.prototype,"pdfHeaderQueryCellInfo",void 0),o([P.Event()],a.prototype,"pdfAggregateQueryCellInfo",void 0),o([P.Event()],a.prototype,"excelAggregateQueryCellInfo",void 0),o([P.Event()],a.prototype,"exportDetailDataBound",void 0),o([P.Event()],a.prototype,"exportDetailTemplate",void 0),o([P.Event()],a.prototype,"excelQueryCellInfo",void 0),o([P.Event()],a.prototype,"excelHeaderQueryCellInfo",void 0),o([P.Event()],a.prototype,"beforeExcelExport",void 0),o([P.Event()],a.prototype,"excelExportComplete",void 0),o([P.Event()],a.prototype,"beforePdfExport",void 0),o([P.Event()],a.prototype,"pdfExportComplete",void 0),o([P.Event()],a.prototype,"rowDragStartHelper",void 0),o([P.Event()],a.prototype,"detailDataBound",void 0),o([P.Event()],a.prototype,"rowDragStart",void 0),o([P.Event()],a.prototype,"rowDrag",void 0),o([P.Event()],a.prototype,"rowDrop",void 0),o([P.Event()],a.prototype,"toolbarClick",void 0),o([P.Event()],a.prototype,"beforeOpenColumnChooser",void 0),o([P.Event()],a.prototype,"beforeOpenAdaptiveDialog",void 0),o([P.Event()],a.prototype,"batchAdd",void 0),o([P.Event()],a.prototype,"batchDelete",void 0),o([P.Event()],a.prototype,"batchCancel",void 0),o([P.Event()],a.prototype,"beforeBatchAdd",void 0),o([P.Event()],a.prototype,"beforeBatchDelete",void 0),o([P.Event()],a.prototype,"beforeBatchSave",void 0),o([P.Event()],a.prototype,"beginEdit",void 0),o([P.Event()],a.prototype,"commandClick",void 0),o([P.Event()],a.prototype,"cellEdit",void 0),o([P.Event()],a.prototype,"cellSave",void 0),o([P.Event()],a.prototype,"cellSaved",void 0),o([P.Event()],a.prototype,"resizeStart",void 0),o([P.Event()],a.prototype,"resizing",void 0),o([P.Event()],a.prototype,"resizeStop",void 0),o([P.Event()],a.prototype,"keyPressed",void 0),o([P.Event()],a.prototype,"beforeDataBound",void 0),o([P.Event()],a.prototype,"contextMenuOpen",void 0),o([P.Event()],a.prototype,"contextMenuClick",void 0),o([P.Event()],a.prototype,"columnMenuOpen",void 0),o([P.Event()],a.prototype,"columnMenuClick",void 0),o([P.Event()],a.prototype,"checkBoxChange",void 0),o([P.Event()],a.prototype,"beforeCopy",void 0),o([P.Event()],a.prototype,"beforePaste",void 0),o([P.Event()],a.prototype,"beforeAutoFill",void 0),o([P.Event()],a.prototype,"columnDataStateChange",void 0),o([P.Event()],a.prototype,"dataStateChange",void 0),o([P.Event()],a.prototype,"dataSourceChanged",void 0),o([P.Event()],a.prototype,"exportGroupCaption",void 0),o([P.Event()],a.prototype,"lazyLoadGroupExpand",void 0),o([P.Event()],a.prototype,"lazyLoadGroupCollapse",void 0);var Tl,Ol,Al=Ol=o([P.NotifyPropertyChanges],a);function a(e,t){e=Tl.call(this,e,t)||this;return e.isPreventScrollEvent=!1,e.inViewIndexes=[],e.keyA=!1,e.frozenRightCount=0,e.freezeColumnRefresh=!0,e.rightcount=0,e.frozenLeftCount=0,e.leftcount=0,e.tablesCount=1,e.movableCount=0,e.movablecount=0,e.fixedcount=0,e.fixedCount=0,e.visibleFrozenLeft=0,e.visibleFrozenFixed=0,e.isPreparedFrozenColumns=!1,e.visibleFrozenRight=0,e.visibleMovable=0,e.frozenLeftColumns=[],e.frozenRightColumns=[],e.movableColumns=[],e.fixedColumns=[],e.stackedLeft=[],e.stackedRight=[],e.stackedFixed=[],e.stackedMovable=[],e.stackedarrayLeft=[],e.stackedarrayRight=[],e.stackedarrayFixed=[],e.stackedarrayMovable=[],e.media={},e.autoFitColumnsResize=!1,e.tableIndex=0,e.componentRefresh=P.Component.prototype.refresh,e.isChangeDataSourceCall=!1,e.mergedColumns=!1,e.isVirtualAdaptive=!1,e.requireTemplateRef=!0,e.vRows=[],e.vcRows=[],e.vGroupOffsets={},e.rowUid=0,e.translateX=0,e.isManualRefresh=!1,e.isAutoFitColumns=!1,e.enableDeepCompare=!1,e.totalDataRecordsCount=0,e.disableSelectedRecords=[],e.partialSelectedRecords=[],e.isSpan=!1,e.islazyloadRequest=!1,e.isAddNewRow=!1,e.addNewRowFocus=!0,e.lockcolPositionCount=0,e.prevPageMoving=!1,e.pageTemplateChange=!1,e.isAutoGen=!1,e.isAutoGenerateColumns=!1,e.pageRequireRefresh=!0,e.mediaBindInstance={},e.commandDelIndex=void 0,e.asyncTimeOut=50,e.isExportGrid=!1,e.isWidgetsDestroyed=!1,e.enableLogger=!1,e.needsID=!0,Ol.Inject(ya),P.setValue("mergePersistData",e.mergePersistGridData,e),e}function Fl(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"]}Ml.prototype.isContentReady=function(){var e=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}:this.contentReady},Ml.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},Ml.prototype.print=function(){this.renderPrintGrid()},Ml.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},Ml.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},Ml.prototype.renderPrintGrid=function(){for(var e=this.parent,t=P.createElement("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"}),i=(t.classList.remove("e-gridhover"),document.body.appendChild(t),new Al(Bh(e,e.hierarchyPrintMode))),n=0;n<i.columns.length;n++)i.columns[parseInt(n.toString(),10)]=P.extend({},i.columns[parseInt(n.toString(),10)]),e.isFrozenGrid()&&!e.getFrozenColumns()&&(i.columns[parseInt(n.toString(),10)].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=e.getQuery().clone(),(window.printGridObj=i).isPrinting=!0;var r=i.getInjectedModules(),s=e.getInjectedModules();r&&r.length===s.length||i.setInjectedModules(s),e.notify(qi,{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,this.parent.isVue&&(i.vueInstance=this.parent.vueInstance),i.appendTo(t),e.isVue3||(i.trigger=e.trigger)},Ml.prototype.contentReady=function(){var e,t;this.isPrintGrid()&&(e=this.parent,this.isAsyncPrint?this.printGrid():(t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode},this.isAsyncPrint||e.trigger(De,t),t.cancel?P.detach(e.element):this.isAsyncPrint||this.printGrid()))},Ml.prototype.printGrid=function(){var e,t=this.parent;"auto"!==t.height&&(e=this.scrollModule.getCssProperties(),r=t.element.querySelector("."+Zr),l=t.element.querySelector("."+Gr),r.style.height="auto",r.style.overflowY="auto",l.style[e.padding]="",l.firstElementChild.style[e.border]=""),t.allowGrouping&&(t.groupSettings.columns.length?this.removeColGroup(t):t.element.querySelector(".e-groupdroparea").style.display="none");for(var i=0,n=[].slice.call(t.element.getElementsByClassName(Zr));i<n.length;i++)(a=n[i]).style.overflowX="hidden";for(var r=[].slice.call(t.element.getElementsByClassName("e-spin-show")),s=0,o=[].slice.call(r);s<o.length;s++){var a=o[s];P.classList(a,["e-spin-hide"],["e-spin-show"])}this.printGridElement(t),t.isPrinting=!1,delete window.printGridObj;var l={element:t.element};t.trigger(Te,l),t.destroy(),this.parent.log("exporting_complete",this.getModuleName())},Ml.prototype.printGridElement=function(e){P.classList(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&P.detach(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=P.print(e.element,this.printWind)},Ml.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,i=e.element,e="#"+e.element.id;if(t){for(var n=P.selectAll(".e-groupcaption",i),r=n[t-1].getAttribute("colspan"),s=0;s<n.length;s++)n[parseInt(s.toString(),10)].setAttribute("colspan",r);var e=P.selectAll("colgroup"+e+"colgroup",i),o=P.selectAll(".e-content colgroup",i),i=P.selectAll(".e-summarycontent colgroup",i);this.hideColGroup(e,t),this.hideColGroup(o,t),this.hideColGroup(i,t)}},Ml.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t;n++)e[parseInt(i.toString(),10)].children[parseInt(n.toString(),10)].style.display="none"},Ml.prototype.isPrintGrid=function(){return 0<this.parent.element.id.indexOf("_print")&&this.parent.isPrinting},Ml.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(pt,this.contentReady.bind(this)),this.parent.removeEventListener(y,this.actionBeginFunction),this.parent.off(dt,this.onEmpty.bind(this)),this.parent.off(zi,this.hierarchyPrint))},Ml.prototype.getModuleName=function(){return"print"},Ml.printGridProp=Fl().concat([De,Te,ie]);var kl=Ml;function Ml(e,t){this.isAsyncPrint=!1,this.defered=new A.Deferred,this.parent=e,this.parent.isDestroyed||(this.parent.on(pt,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(y,this.actionBeginFunction),this.parent.on(dt,this.onEmpty.bind(this)),this.parent.on(zi,this.hierarchyPrint,this),this.scrollModule=t)}function Ll(e,t){return e.prototype&&t in e.prototype}function Pl(e,t,i){return P.isNullOrUndefined(e)||""===e?"":A.DataUtil.getObject(e,t)}function Nl(e,t){requestAnimationFrame(function(){try{t(null,e())}catch(e){t(e)}})}function Bl(e){return!P.isNullOrUndefined(e)&&!P.isNullOrUndefined(e.columns)&&0<e.columns.length}function zl(e,t){for(var i=e.columns,n=t.columns,r=0;r<i.length;r++)if(n.length-1>=r)if(n[parseInt(r.toString(),10)].columns)for(var s=0;s<n[parseInt(r.toString(),10)].columns.length;s++)i[parseInt(r.toString(),10)].columns[parseInt(s.toString(),10)].type=n[parseInt(r.toString(),10)].columns[parseInt(s.toString(),10)].type;else i[parseInt(r.toString(),10)].type=n[parseInt(r.toString(),10)].type}function Ul(e){for(var t=[],i=e.vRows,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].isDataRow?t.push(i[parseInt(n.toString(),10)]):i[parseInt(n.toString(),10)].isDataRow||(t.push(i[parseInt(n.toString(),10)]),!i[parseInt(n.toString(),10)].isExpand&&i[parseInt(n.toString(),10)].isCaptionRow&&(n+=Hl(i[parseInt(n.toString(),10)],e)));e.vcRows=t}var ql=0;function Hl(e,t){ql=0;var i="gSummary",n=t.groupSettings.columns.length,r="records",s="items",o=e[i],a=0,l="aggregatesCount";if(o===e.data.count)t.groupSettings.columns.length&&!P.isNullOrUndefined(e[l])&&e[l]?1!==t.groupSettings.columns.length?ql+=0!==e.indent&&o<2?e[i]*(n-e.indent+(n-e.indent)*e[l]):e[i]*(n-e.indent+(n-e.indent-1)*e[l])+e[l]:1===t.groupSettings.columns.length&&(ql+=e[i]*(n-e.indent)+e[l]):t.groupSettings.columns.length&&(1!==t.groupSettings.columns.length?ql+=e[i]*(t.groupSettings.columns.length-e.indent):ql+=e[i]);else{for(var h=0,p=e.data[s].length;h<p;h++){var d=e.data[s][parseInt(h.toString(),10)];ql+=d[s].length+(n===t.columns.length||P.isNullOrUndefined(d[s][r])?0:d[s][r].length),a+=(P.isNullOrUndefined(d[s][r])||P.isNullOrUndefined(e[l])?d[s]:d[s][r]).length,d[s].GroupGuid&&0!==d[s].childLevels&&jl(d)}ql+=e.data[s].length,P.isNullOrUndefined(e[l])||e[l]&&ql&&0!==a&&(ql+=(ql-a)*e[l]+e[l])}return ql}function jl(e){for(var t=0,i=e.items.length;t<i;t++){var n=e.items[parseInt(t.toString(),10)];ql+=n.count,0!==n.items.childLevels&&jl(n)}}function Vl(e,t){for(var i=[],n=0,r=e.length;n<r;n++){var s=t(e[parseInt(n.toString(),10)],n);P.isNullOrUndefined(s)||i.push(s)}return i}function Gl(e){for(var t=[],i=0;i<e.length;i++)t.push(P.extend({},Jl(e[parseInt(i.toString(),10)]),{},!0));return t}function _l(t){if(t)try{var e="<"!==t[0];return"function"!=typeof t&&e&&document.querySelectorAll(t).length?P.compile(document.querySelector(t).innerHTML.trim()):P.compile(t)}catch(e){return P.compile(t)}}function Wl(e,t){var i={},n=["style","class"];P.extend(i,t,{}),"style"in i&&(P.setStyleAttribute(e,i[n[0]]),delete i[n[0]]),"class"in i&&(P.addClass([e],i[n[1]]),delete i[n[1]]),P.attributes(e,i)}function Kl(e,t,i,n){for(var r=P.extend(e,t,i),s=Object.keys(r),o=0;o<s.length;o++)n&&-1!==n.indexOf(s[parseInt(o.toString(),10)])&&delete r[s[parseInt(o.toString(),10)]];return r}function Ql(e,t){void 0===t&&(t=0);for(var i=0,n=P.isNullOrUndefined(e)?0:e.length;i<n;i++)e[parseInt(i.toString(),10)].columns?(e[parseInt(i.toString(),10)].index=P.isNullOrUndefined(e[parseInt(i.toString(),10)].index)?t:e[parseInt(i.toString(),10)].index,t++,t=Ql(e[parseInt(i.toString(),10)].columns,t)):(e[parseInt(i.toString(),10)].index=P.isNullOrUndefined(e[parseInt(i.toString(),10)].index)?t:e[parseInt(i.toString(),10)].index,t++);return t}function Xl(e,t,i){for(var n=0,r=P.isNullOrUndefined(e)?0:e.length;n<r;n++){var s=void 0;(s="string"==typeof e[parseInt(n.toString(),10)]?new Q({field:e[parseInt(n.toString(),10)]},i):e[parseInt(n.toString(),10)]instanceof Q&&!e[parseInt(n.toString(),10)].columns?e[parseInt(n.toString(),10)]:(e[parseInt(n.toString(),10)].columns&&(e[parseInt(n.toString(),10)].columns=Xl(e[parseInt(n.toString(),10)].columns,null,i)),new Q(e[parseInt(n.toString(),10)],i))).type&&"checkbox"===s.type.toLowerCase()&&(s.allowReordering=!1),s.headerText=P.isNullOrUndefined(s.headerText)?s.foreignKeyValue||s.field||"":s.headerText,s.foreignKeyField=s.foreignKeyField||s.field,s.valueAccessor=("string"==typeof s.valueAccessor?P.getValue(s.valueAccessor,window):s.valueAccessor)||Pl,s.width=t&&P.isNullOrUndefined(s.width)?200:s.width,P.isNullOrUndefined(s.visible)&&(s.visible=!0),e[parseInt(n.toString(),10)]=s}return e}function Yl(e,t,i){var n=e.querySelector("span"),r=e.parentElement.getBoundingClientRect(),s=t.target.getBoundingClientRect(),n=(n.className=i,e.style.display="",(P.isNullOrUndefined(t.clientY)?t.changedTouches[0]:t).clientY>e.offsetHeight+10);e.style.top=s.top-r.top+(n?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(e,t,i,n){e=e.offsetWidth/2,t=ih(t).x;return t-i.left<e?i.left-n:i.right-t<e?i.right-n-2*e:t-n-e}(e,t,s,r.left)+"px",n?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}function Jl(e){return e instanceof P.ChildProperty?P.getValue("properties",e):e}function E(e,t,i){for(var n=e;n&&(i?n.id!==t:!n.classList.contains(t));)n=n.parentElement;return n}function Zl(e,t){for(var i=-1,n=0,r=t.length;n<r;n++)if(t[parseInt(n.toString(),10)].isEqualNode(e)){i=n;break}return i}function $l(e,t){for(var i=0,n=t.length;i<n;i++)if(t[parseInt(i.toString(),10)]===e)return i;return-1}function eh(e){for(var t=[],i=0,n=e.length;i<n;i++)e[parseInt(i.toString(),10)].hasOwnProperty("properties")?t.push(e[parseInt(i.toString(),10)].properties):t.push(e[parseInt(i.toString(),10)]);return t}function th(e,t){for(var i=[].slice.call(e.querySelectorAll(t)),n=0;n<i.length;n++)P.remove(i[parseInt(n.toString(),10)])}function ih(e){var t={};return t.x=(P.isNullOrUndefined(e.clientX)?e.changedTouches[0]:e).clientX,t.y=(P.isNullOrUndefined(e.clientY)?e.changedTouches[0]:e).clientY,t}var nh=0;function rh(e){return e+nh++}function sh(e,t){for(var i=0,n=t.length;i<n;i++)n===t.length?e.appendChild(t[parseInt(i.toString(),10)]):e.appendChild(t[0]);return e}function oh(e,t,i){for(var n=e,r=[];n;)(i?n.id===t:n.classList.contains(t))&&r.push(n),n=n.parentElement;return r}function ah(e,t,i,n){var r;return"Custom"===e?(r="string"==typeof(r=i.customAggregate)?P.getValue(r,window):r)?r.call(n,t,i):"":i.field in t||t instanceof Array?A.DataUtil.aggregates[e.toLowerCase()](t,i.field):null}var lh,hh=null;function ph(){var e,t;return null!==hh?hh:(t=0,(e=document.createElement("div")).style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth|0,document.body.removeChild(e),hh=t)}function dh(e){var t,i;return void 0===lh&&((t=P.createElement("table",{className:$r,styles:"visibility: hidden",attrs:{role:"grid"}})).innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t),i=t.querySelector("td").getBoundingClientRect(),e.removeChild(t),lh=Math.ceil(i.height)),lh}function ch(e){return 1<e.split(".").length}function uh(e){return(e=void 0===e?"":e).replace(/\./g,"___")}function gh(e){return(e=void 0===e?"":e).replace(/[^a-zA-Z0-9_.]/g,"\\$&")}function fh(e){return(e=void 0===e?"":e).replace(/___/g,".")}function mh(e,t,i){i=E(i,I),i=!i||!i.classList.contains("e-insertedrow");return"beginEdit"===t&&i?!(e.isIdentity||e.isPrimaryKey||!e.allowEditing):!("add"===t&&e.isIdentity||i&&!e.allowEditing&&!e.isIdentity&&!e.isPrimaryKey)}function yh(e){var t=P.select("#"+e.element.id+"EditConfirm",e.element);return"Batch"===e.editSettings.mode&&(P.selectAll(".e-updatedtd",e.element).length||P.selectAll(".e-gridform.e-formvalidator",e.element).length)&&e.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function Sh(e,t){e=e instanceof Array?e:[e];for(var i=0;i<e.length;i++)t?e[parseInt(i.toString(),10)].classList.add("e-wrap"):e[parseInt(i.toString(),10)].classList.remove("e-wrap")}function vh(e,t){var i,n=e.getService("valueFormatter");switch("date"!==t.type&&"datetime"!==t.type&&"dateonly"!==t.type||(i={type:"dateonly"===t.type?"date":t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(i.format=t.format)),t.type){case"date":case"dateonly":case"datetime":t.setFormatter(n.getFormatFunction(i)),t.setParser(n.getParserFunction(i));break;case"number":t.setFormatter(n.getFormatFunction({format:t.format})),t.setParser(n.getParserFunction({format:t.format}))}}function Ch(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var r=0,s=e.length;r<s;r++)t?(P.classList(e[parseInt(r.toString(),10)],i.slice(),[]),e[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(P.classList(e[parseInt(r.toString(),10)],[],i.slice()),e[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function wh(e){for(var t={},i=[],n=0;n<e.length;n++)e[parseInt(n.toString(),10)]in t||(i.push(e[parseInt(n.toString(),10)].toString()),t[e[parseInt(n.toString(),10)]]=1);return i}function bh(e,t){var i=t.element.style.display,n=(t.element.style.display="block",t.width),r=L.calculateRelativeBasedPosition(e,t.element),i=(t.element.style.display=i,t.element.style.top=r.top+e.getBoundingClientRect().height-5+"px",r.left-n+e.clientWidth);t.element.style.left=i<1?n+i-16+"px":i+-4+"px"}function Ih(e,t){e.popup.element.style.zIndex=(t.zIndex+1).toString()}function xh(e){var e=e.querySelector(".e-frame"),t=e.previousSibling;e.classList.contains("e-check")?(t.checked=!1,P.classList(e,["e-uncheck"],["e-check"])):(t.checked=!0,P.classList(e,["e-check"],["e-uncheck"]))}function Rh(e,t){e.checked=t}function Eh(e,t,i){i=P.createElement("div",{className:i});return i.appendChild(t),i.setAttribute("uid",e),i}function Dh(e,t){P.removeClass([e],["e-check","e-stop","e-uncheck"]),t?e.classList.add("e-check"):e.classList.add("e-uncheck")}function Th(e,t,i){for(var n=0;n<(P.isNullOrUndefined(t)?0:t.length);n++)P.setValue(t[parseInt(n.toString(),10)].field,Oh(t[parseInt(n.toString(),10)],i),e.foreignKeyData);for(var r=e.cells,n=0;n<r.length;n++)r[parseInt(n.toString(),10)].isForeignKey&&P.setValue("foreignKeyData",P.getValue(r[parseInt(n.toString(),10)].column.field,e.foreignKeyData),r[parseInt(n.toString(),10)])}function Oh(e,t,i,n){var r=e.foreignKeyField,t=P.isNullOrUndefined(i)?Pl(e.field,t):i,t=P.isNullOrUndefined(t)?"":t,i=new A.Query,n=n||(e.dataSource instanceof A.DataManager&&e.dataSource.dataSource.json.length?e.dataSource.dataSource.json:e.columnData);return t.getDay?i.where(kh({field:r,operator:"equal",value:t,matchCase:!1})):i.where(r,"==",t,!1),new A.DataManager(n).executeLocal(i)}function Ah(t,e){var i;return e.some(function(e){return(i=e).foreignKeyValue===t})&&i}function Fh(e){return e<10?"0"+e:String(e)}function kh(e,t,i){var n,r,s,o,a=P.extend({},Jl(e)),l=P.extend({},Jl(e));return P.isNullOrUndefined(e.value)||""===e.value?new A.Predicate(a.field,a.operator,a.value,!1):(n=new Date(e.value),o="dateonly"!==t||i?"equal"===e.operator||"notequal"===e.operator?("datetime"===t?(r=new Date(n.setSeconds(n.getSeconds()-1)),s=new Date(n.setSeconds(n.getSeconds()+2)),e.value=new Date(n.setSeconds(s.getSeconds()-1))):(r=new Date(n.setHours(0)-1),s=new Date(n.setHours(24))),a.value=r,l.value=s,"equal"===e.operator?(a.operator="greaterthan",l.operator="lessthan"):"notequal"===e.operator&&(a.operator="lessthanorequal",l.operator="greaterthanorequal"),i=new A.Predicate(a.field,a.operator,a.value,!1),r=new A.Predicate(l.field,l.operator,l.value,!1),"equal"===e.operator?i.and(r):i.or(r)):("date"!==t||"lessthanorequal"!==e.operator&&"greaterthan"!==e.operator||(a.value=new Date(n.setHours(24)-1)),"string"==typeof a.value&&(a.value=new Date(a.value)),new A.Predicate(a.field,a.operator,a.value,!1)):("string"==typeof a.value&&(a.value=new Date(a.value)),s=a.value.getFullYear()+"-"+Fh(a.value.getMonth()+1)+"-"+Fh(a.value.getDate()),new A.Predicate(a.field,a.operator,s,!1)),e.setProperties?e.setProperties({ejpredicate:o},!0):e.ejpredicate=o,o)}function Mh(e){return e.enableVirtualization&&0<e.groupSettings.columns.length&&e.isVirtualAdaptive&&!e.groupSettings.enableLazyLoading}function Lh(e,t){if(e=void 0===e?"":e){for(var i,n=t,r=e.split("."),s=0;s<r.length&&!P.isNullOrUndefined(n);s++)n=n[r[parseInt(s.toString(),10)]],P.isUndefined(n)&&(n=t[""+(i=r[parseInt(s.toString(),10)].charAt(0).toUpperCase()+r[parseInt(s.toString(),10)].slice(1))]||t[(""+i).charAt(0).toLowerCase()+(""+i).slice(1)]);return n}}function Ph(e,t){var i=new P.Internationalization,t="date"===t?"object"==typeof e?i.getDatePattern({type:e.type||"date",format:e.format},!1):i.getDatePattern({type:"dateTime",skeleton:e},!1):"object"==typeof e?i.getDatePattern({type:e.type||"dateTime",format:e.format},!1):i.getDatePattern({type:"dateTime",skeleton:e},!1);return t}function Nh(e,t){for(var i={},n=0,r=e.getRowsObject();n<r.length;n++){var s,o=r[n];o.isExpand&&!o.isDetailRow&&(s=e.allowPaging&&"AllPages"===e.printMode?o.index+e.pageSettings.currentPage*e.pageSettings.pageSize-e.pageSettings.pageSize:o.index,P.isNullOrUndefined(s)||(i[parseInt(s.toString(),10)]={},i[parseInt(s.toString(),10)].isExpand=!0,e.childGrid&&(i[parseInt(s.toString(),10)].gridModel=Bh(o.childGrid,t),i[parseInt(s.toString(),10)].gridModel.query=e.childGrid.query)))}return i}function Bh(e,t){void 0===t&&(t="Expanded");var i={};if(e){for(var n=0,r=kl.printGridProp;n<r.length;n++){var s=r[n];i[""+s]="columns"===s?eh(e[""+s]):"allowPaging"===s?"CurrentPage"===e.printMode:Jl(e[""+s])}i.enableHover=!1,(e.childGrid||e.detailTemplate)&&"None"!==t&&(i.expandedRows=Nh(e,t))}return i}function zh(e,t,i,n){var r=e||{},s=arguments.length;n&&(s-=1);for(var o=1;o<s;o++)if(arguments[parseInt(o.toString(),10)])for(var a=arguments[parseInt(o.toString(),10)],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(Uh(a)):Object.keys(a),h=0;h<l.length;h++){var p=r[l[parseInt(h.toString(),10)]],d=a[l[parseInt(h.toString(),10)]],c=void 0;n&&(P.isObject(d)||Array.isArray(d))?P.isObject(d)?(c=p||{},r[l[parseInt(h.toString(),10)]]=P.extend({},c,d,n)):(c=p||[],r[l[parseInt(h.toString(),10)]]=P.extend([],c,d,n)):r[l[parseInt(h.toString(),10)]]=d}return r}function Uh(e){for(var t=[];Object.getPrototypeOf(e)&&Object.keys(Object.getPrototypeOf(e)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(e))),e=Object.getPrototypeOf(e);return t}function qh(e){for(var t=0,i=0;i<(P.isNullOrUndefined(e)?0:e.length);i++){var n=Hh(e[parseInt(i.toString(),10)],0);t<n&&(t=n)}return t+1}function Hh(e,t){var i=t,n=[];if(e.columns){t++;for(var r=0;r<e.columns.length;r++)n[parseInt(r.toString(),10)]=Hh(e.columns[parseInt(r.toString(),10)],t);for(var s=0;s<n.length;s++)i<n[parseInt(s.toString(),10)]&&(i=n[parseInt(s.toString(),10)]);t=i}return t}function jh(e,t){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].uid=(t[parseInt(i.toString(),10)].isForeignKey?Ah(t[parseInt(i.toString(),10)].field,e.getForeignKeyColumns()):e.enableColumnVirtualization?xp(e,t[parseInt(i.toString(),10)].field):e.getColumnByField(t[parseInt(i.toString(),10)].field)).uid}function Vh(e){e=document.defaultView.getComputedStyle(e,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(e.split(" ")[4]),height:parseFloat(e.split(" ")[5])}}function Gh(e,t){e.classList.contains("e-bigger")&&t.classList.add("e-bigger")}function _h(e){e=e.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?ph():0}function Wh(e,t){for(var i=0,n=e.getColumns(),r=30*t,s=(e.isRowDragable()&&(i++,r+=30),i+=e.groupSettings.columns.length-t,r+=30*(e.groupSettings.columns.length-t),("auto"===e.width?e.element.offsetWidth:parseInt(e.width.toString(),10))-_h(e)),o=0;o<n.length;o++)if(n[parseInt(o.toString(),10)].visible&&(r+=parseInt(n[parseInt(o.toString(),10)].width.toString(),10),i++),s<r){i--;break}return i}function Kh(e,t){for(var i=0,n=0,r=t.getVisibleFrozenLeftCount(),s=0;s<e.childNodes.length;s++){var o,a=e.childNodes[parseInt(s.toString(),10)];if(r===n)break;if((a.classList.contains("e-groupcaption")||a.classList.contains("e-summarycell"))&&(n+=parseInt(a.getAttribute("colspan"),10)),a.classList.add("e-leftfreeze"),a.classList.contains("e-groupcaption")&&1===parseInt(a.getAttribute("colspan"),10)&&a.classList.add("e-freezeleftborder"),pp(a,i,t.enableRtl,"Left"),(a.classList.contains("e-indentcell")||a.classList.contains("e-recordplusexpand")||a.classList.contains("e-recordpluscollapse"))&&(i+=30),a.classList.contains("e-groupcaption"))for(var l=parseInt(a.getAttribute("colspan"),10),h=(t.isRowDragable()&&(l--,i+=30),l-=t.groupSettings.columns.length-s,i+=30*(t.groupSettings.columns.length-s),t.getColumns()),p=0;p<h.length;p++){if(1<parseInt(a.getAttribute("colspan"),10)&&parseInt(h[parseInt(p.toString(),10)].width.toString(),10)+i>parseInt(t.width.toString(),10)-_h(t)){var d=Wh(t,s);a.setAttribute("colspan",d.toString());break}if(h[parseInt(p.toString(),10)].visible&&(i+=parseInt(h[parseInt(p.toString(),10)].width.toString(),10),l--),0===l)break}a.classList.contains("e-summarycell")&&(o=a.getAttribute("e-mappinguid"),o=t.getColumnByUid(o),i+=parseInt(o.width.toString(),10))}}function Qh(e,t){var i=t.getContent().firstElementChild;return e&&e.getBoundingClientRect().top-i.getBoundingClientRect().top+t.getRowHeight()>i.offsetHeight}function Xh(e,t){return e&&e.getBoundingClientRect().top<t}function Yh(e,t){var i=t.getRowHeight(),n=t.getContent().firstElementChild.scrollTop/i;return e<n+t.getContent().firstElementChild.offsetHeight/i&&n<e}function Jh(e,i){var n,r=e.getPrimaryKeyFieldNames()[0];return e.getCurrentViewRecords().filter(function(e,t){r.includes(".")?Lh(r,e)===Lh(r,i)&&(n=t):e[""+r]===i[""+r]&&(n=t)}),n}function Zh(e,t){var t=$h(t),i=new A.Deferred;return t.dataSource=i.resolve,t.action=e,{state:t,deffered:i}}function $h(e){var t=new A.UrlAdaptor,i=new A.DataManager({url:"",adaptor:new A.UrlAdaptor}),t=t.processQuery(i,e);return JSON.parse(t.data)}function ep(e){for(var t=e.getVisibleColumns(),i=0,n=0,r=0;r<t.length;r++)P.isUndefined(t[parseInt(r.toString(),10)].width)?n++:-1!==t[parseInt(r.toString(),10)].width.toString().indexOf("%")&&i++;return("auto"===e.width||"string"==typeof e.width&&-1!==e.width.indexOf("%"))&&!e.groupSettings.showGroupedColumn&&e.groupSettings.columns.length&&i&&!n}function tp(e,t,i,n,r){for(var s=n||0,o=r||0;o<t.length;o++)if(t[parseInt(o.toString(),10)]&&t[parseInt(o.toString(),10)].isDataRow){t[parseInt(o.toString(),10)].index=s,t[parseInt(o.toString(),10)].isAltRow=!!e.enableAltRow&&s%2!=0,i[parseInt(o.toString(),10)].setAttribute(x,s.toString()),i[parseInt(o.toString(),10)].setAttribute(cs,(s+1).toString()),t[parseInt(o.toString(),10)].isAltRow?i[parseInt(o.toString(),10)].classList.add("e-altrow"):i[parseInt(o.toString(),10)].classList.remove("e-altrow");for(var a=0;a<i[parseInt(o.toString(),10)].cells.length;a++)i[parseInt(o.toString(),10)].cells[parseInt(a.toString(),10)].setAttribute("index",s.toString());s++}t.length||e.renderModule.emptyRow(!0)}function ip(e){for(var t=e.enableInfiniteScrolling&&e.infiniteScrollSettings.enableCache?e.getRowsObject():e.vRows,i=e.getRows(),n=0,r=0,s=0;n<t.length;n++){var o=t[parseInt(n.toString(),10)];if(o.isDataRow){o.index=r,o.isAltRow=!!e.enableAltRow&&r%2!=0;var a=e.getRowElementByUID(o.uid);if(!P.isNullOrUndefined(a)){(i[parseInt(s.toString(),10)]=a).setAttribute(x,r.toString()),a.setAttribute(cs,(r+1).toString()),o.isAltRow?a.classList.add("e-altrow"):a.classList.remove("e-altrow");for(var l=0;l<a.cells.length;l++)a.cells[parseInt(l.toString(),10)].setAttribute("index",r.toString());s++}r++}}e.enableInfiniteScrolling&&e.infiniteScrollSettings.enableCache&&e.infiniteScrollModule.resetInfiniteCache(t)}function np(e,t,i,n){for(var r,s=e.enableVirtualization?e.vRows:e.getRowsObject(),o=[],a=n||e.getRowObjectFromUID(t.target.closest("tr").getAttribute("data-uid")),l=0;l<t.rows.length;l++){var h=e.getRowObjectFromUID(t.rows[parseInt(l.toString(),10)].getAttribute("data-uid"));a===h&&(r=s.indexOf(a)),o.push(s.splice(s.indexOf(h),1)[0])}if(!P.isNullOrUndefined(r)||(r=s.indexOf(a),t.fromIndex>t.dropIndex)?s.splice.apply(s,[r,0].concat(o)):s.splice.apply(s,[r+1,0].concat(o)),!e.enableVirtualization&&!e.infiniteScrollSettings.enableCache){for(var p={},d=e.getCurrentViewRecords(),l=0,c=i.length;l<c;l++){var u=parseInt(i[parseInt(l.toString(),10)].getAttribute(x),10);p[parseInt(l.toString(),10)]=d[parseInt(u.toString(),10)]}for(var g=e.getRows(),l=0,c=i.length;l<c;l++)g[parseInt(l.toString(),10)]=i[parseInt(l.toString(),10)],d[parseInt(l.toString(),10)]=p[parseInt(l.toString(),10)]}e.enableInfiniteScrolling&&e.infiniteScrollSettings.enableCache&&e.infiniteScrollModule.resetInfiniteCache(s)}function rp(e,t,i,n){var r=e.dataToBeUpdated[""+i].concat(t[""+i]).reduce(function(e,t){return e[t[""+n]]=void 0===e[t[""+n]]?t:Object.assign(e[t[""+n]],t),e},{});e.dataToBeUpdated[""+i]=Object.keys(r).map(function(e){return r[""+e]})}function sp(e){e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function op(e,t){var i=[];return i.push(e.uid),ap(e,i),-1<i.indexOf(t)}function ap(e,t){for(var i=0;i<e.columns.length;i++)e.columns[parseInt(i.toString(),10)].uid&&t.push(e.columns[parseInt(i.toString(),10)].uid),e.columns[parseInt(i.toString(),10)].columns&&e.columns[parseInt(i.toString(),10)].columns.length&&ap(e.columns[parseInt(i.toString(),10)],t)}function lp(e){return e.columns[0].freeze||e.columns[0].isFrozen?"Left"===e.columns[0].freeze||e.columns[0].isFrozen?"Left":"Right"===e.columns[0].freeze?"Right":"Fixed"===e.columns[0].freeze?"Fixed":"None":e.columns[0].columns&&e.columns[0].columns.length?lp(e.columns[0]):"None"}function hp(e){if(e.querySelector(".e-fixedfreeze"))for(var t=[].slice.call(e.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!t[i-1]||t[i-1]&&!t[i-1].classList.contains("e-fixedfreeze"))&&t[parseInt(i.toString(),10)].classList.add("e-freezeleftborder"),t[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!t[i+1]||t[i+1]&&!t[i+1].classList.contains("e-fixedfreeze"))&&t[parseInt(i.toString(),10)].classList.add("e-freezerightborder")}function pp(e,t,i,n){"Left"===n&&(i?e.style.right=t+"px":e.style.left=t+"px"),"Right"===n&&(i?e.style.left=t+"px":e.style.right=t+"px")}function dp(e,t,i,n){var r=e.getColumns(),s=t.index;if("Left"===t.freeze&&"Left"!==t.border){for(var o=s+(n-1);!1===r[parseInt(o.toString(),10)].visible;)o++;"Left"===r[parseInt(o.toString(),10)].border&&i.classList.add("e-freezeleftborder")}else if("Right"===t.freeze||"Fixed"===t.freeze){for(var a=0,l=s+1;l<s+n&&l!==r.length;l++)r[parseInt(l.toString(),10)].visible?a+=parseInt(r[parseInt(l.toString(),10)].width.toString(),10):n++;e.enableRtl?i.style.left=parseInt(i.style.left,10)-a+"px":i.style.right=parseInt(i.style.right,10)-a+"px"}}function cp(e,t,i){for(var n=e.getRowByIndex(t),r=0;r<n.cells.length;r++)if(n.cells[parseInt(r.toString(),10)].getAttribute("data-colindex")===i.toString())return n.cells[parseInt(r.toString(),10)];return null}function up(e,t,i){if("Left"===t.freeze||t.isFrozen)if(i.classList.add("e-leftfreeze"),"Left"===t.border&&i.classList.add("e-freezeleftborder"),0===t.index)pp(i,30*e.getIndentCount(),e.enableRtl,"Left"),e.enableColumnVirtualization&&(t.valueX=30*e.getIndentCount());else{for(var n=e.getColumns(),r=30*e.getIndentCount(),s=0;s<n.length&&t.uid!==n[parseInt(s.toString(),10)].uid;s++)n[parseInt(s.toString(),10)].visible&&(r+=parseFloat(n[parseInt(s.toString(),10)].width.toString()));pp(i,r,e.enableRtl,"Left"),e.enableColumnVirtualization&&(t.valueX=r)}else if("Right"===t.freeze){i.classList.add("e-rightfreeze");n=e.getColumns();if("Right"===t.border&&i.classList.add("e-freezerightborder"),t.index===n[n.length-1].index)pp(i,r="Right"===e.getFrozenMode()&&e.isRowDragable()?30:0,e.enableRtl,"Right");else{for(r="Right"===e.getFrozenMode()&&e.isRowDragable()?30:0,s=n.length-1;0<=s&&t.uid!==n[parseInt(s.toString(),10)].uid;s--)n[parseInt(s.toString(),10)].visible&&(r+=parseFloat(n[parseInt(s.toString(),10)].width.toString()));pp(i,r,e.enableRtl,"Right")}e.enableColumnVirtualization&&(t.valueX=r)}else if("Fixed"===t.freeze){i.classList.add("e-fixedfreeze");n=e.getColumns(),r=0;e.getVisibleFrozenLeftCount()?r=30*e.getIndentCount():"Right"===e.getFrozenMode()&&(r=30*e.groupSettings.columns.length);for(s=0;s<n.length&&t.uid!==n[parseInt(s.toString(),10)].uid;s++)("Left"===n[parseInt(s.toString(),10)].freeze||n[parseInt(s.toString(),10)].isFrozen||"Fixed"===n[parseInt(s.toString(),10)].freeze)&&n[parseInt(s.toString(),10)].visible&&(r+=parseFloat(n[parseInt(s.toString(),10)].width.toString()));pp(i,r-1,e.enableRtl,"Left"),r="Right"===e.getFrozenMode()&&e.isRowDragable()?30:0;for(s=n.length-1;0<=s&&t.uid!==n[parseInt(s.toString(),10)].uid;s--)"Right"!==n[parseInt(s.toString(),10)].freeze&&"Fixed"!==n[parseInt(s.toString(),10)].freeze||n[parseInt(s.toString(),10)].visible&&(r+=parseFloat(n[parseInt(s.toString(),10)].width.toString()));pp(i,r-1,e.enableRtl,"Right")}else i.classList.add("e-unfreeze")}function gp(e,t,i){return[].slice.call(e.getDataRows()[parseInt(i.toString(),10)].getElementsByClassName(b))}function fp(e,t,i,n){return gp(e,0,i)[parseInt(n.toString(),10)]}function mp(e,t,i,n,r,s,o){o||e.getFreezeTableName()===hs||!t&&e.getFreezeTableName()===ls||1===s?i[uh(e.field)]=e.validationRules:"movable"!==e.getFreezeTableName()&&e.getFreezeTableName()?e.getFreezeTableName()===ls&&(r[uh(e.field)]=e.validationRules):n[uh(e.field)]=e.validationRules}function yp(t,i,n,e){var r,s,o=new P.Internationalization;if("number"===i)try{s=o.getNumberPattern({format:t,currency:e,useGrouping:!0},!0)}catch(e){s=t}else if("date"===i||"time"===i||"datetime"===i)try{if(s=o.getDatePattern({skeleton:t,type:i},n),P.isNullOrUndefined(s))throw"error"}catch(e){try{s=o.getDatePattern({format:t,type:i},n)}catch(e){s=t}}else s=t;return"number"!==i&&(r={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"},s=s.replace(/G|H|c|'| a|yy|y|EEEE|E/g,function(e){return r[""+e]})),s}function Sp(e){if(e.enableAdaptiveUI)for(var t=document.getElementsByClassName("e-responsive-dialog"),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].classList.add("e-bigger")}function vp(e,t){for(var i,n=e.split(".").length,r=e.split("."),s=t,o=0;o<n;o++)s=i=s[r[parseInt(o.toString(),10)]];return i}function Cp(e,t,i,n,r,s){for(var o=Object.keys(e),a=t,l=0;l<o.length;l++){var h=e[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)];if(r&&!r.isFrozenGrid()&&!r.isRowDragable()){if(h=!P.isNullOrUndefined(h)&&(parseInt(h.getAttribute("data-colindex"),10)===t||E(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(t.toString(),10)]===h)?h:e[parseInt(l.toString(),10)].querySelector('td[data-colindex="'+t+'"]'),P.isNullOrUndefined(h))continue;t=r.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}e[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h&&(P.setStyleAttribute(e[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)],{display:i}),e[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)].classList.contains("e-hide")&&P.removeClass([e[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)]],["e-hide"]),s&&r.isRowDragable()||r&&r.isDetail()?(h=t+1,n[o[parseInt(l.toString(),10)]].cells[parseInt(h.toString(),10)].visible=""===i):P.isNullOrUndefined(n[o[parseInt(l.toString(),10)]])||(n[o[parseInt(l.toString(),10)]].cells[parseInt(t.toString(),10)].visible=""===i,!1===n[o[parseInt(l.toString(),10)]].cells[parseInt(t.toString(),10)].visible&&e[o[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)].classList.add("e-hide")),t=a)}}function wp(e,t,i,n){for(var r=0,s=t;r<s.length;r++){var o=s[r];i?e.on(o.event,o.handler,n):e.off(o.event,o.handler)}}function bp(e,t,i,n){var r=uh(t.field);return n=Object.assign(n,{id:e.element.id+r,name:r,"e-mappinguid":t.uid}),e.createElement("input",{className:i,attrs:n})}function Ip(e,t){for(var i,n=0,r=e.columnModel;n<r.length;n++){var s=r[n];if(s.uid===t){i=s;break}}return i}function xp(e,t){var i;e.columnModel||e.getColumns();for(var n=0,r=e.columnModel;n<r.length;n++){var s=r[n];if(s.field===t){i=s;break}}return i}function Rp(e,t,i,n){n.eventHandlers[""+e]={};for(var r=0;r<t.length;r++)n.eventHandlers[""+e][t[parseInt(r.toString(),10)]]=i[t[parseInt(r.toString(),10)]]}function Ep(e,t,i){for(var n=0;n<t.length&&!e.isDestroyed;n++)e.removeEventListener(t[parseInt(n.toString(),10)],i.eventHandlers[e.element.id][t[parseInt(n.toString(),10)]])}function Dp(e,t){e.destroyTemplate(t),e.isReact&&e.renderTemplates()}function Tp(e){return parseInt(e.getAttribute(x),10)}function Op(e){return e.parentDetails&&e.parentDetails.parentInstObj?Op(e.parentDetails.parentInstObj):e}function Ap(e,t,i){for(var n=[],r=0;r<e.length;r++){var s=i.parent.getColumnByField(e[parseInt(r.toString(),10)]),o="null"===t[parseInt(r.toString(),10)]?null:t[parseInt(r.toString(),10)],s={field:e[parseInt(r.toString(),10)],predicate:"or",uid:s.uid,operator:"equal",type:s.type,matchCase:i.allowCaseSensitive,ignoreAccent:i.parent.filterSettings.ignoreAccent};""===o||P.isNullOrUndefined(o)?n=n.concat(Bp.generateNullValuePredicates(s)):n.push(Kl({},{value:o},s))}return Bp.getPredicate(n)}function Fp(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];t.push(e[""+r])}return t}function kp(e,t){for(var i=[],n=[],r=e;0<=r&&(!t[parseInt(r.toString(),10)].isCaptionRow||-1!==i.indexOf(t[parseInt(r.toString(),10)].data.field)||!(t[parseInt(r.toString(),10)].indent<t[parseInt(e.toString(),10)].indent||r===e)||(i.push(t[parseInt(r.toString(),10)].data.field),n.push(t[parseInt(r.toString(),10)].data.key),0!==t[parseInt(r.toString(),10)].indent));r--);return{fields:i,keys:n}}function Mp(e,t,i){var n=e,r=t,s=!1;if(i)for(var o=r[0];o<n.length;o++)for(var a=n[parseInt(o.toString(),10)],l=0;l<a.length;l++){if(s&&1===n[parseInt(o.toString(),10)][parseInt(l.toString(),10)])return r=[o,l];s||r.toString()!==[o,l].toString()||(s=!0)}else for(o=r[0];0<=o;o--)for(l=(a=n[parseInt(o.toString(),10)]).length-1;0<=l;l--){if(s&&1===n[parseInt(o.toString(),10)][parseInt(l.toString(),10)])return r=[o,l];s||r.toString()!==[o,l].toString()||(s=!0)}return r}function Lp(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Pp(e){return!(Mh(e)||e.groupSettings.enableLazyLoading||!e.enableVirtualization&&e.enableColumnVirtualization)}function Np(e){for(var t=[],i=0;i<e.length;i++){var n=Math.ceil(e[parseInt(i.toString(),10)]/2);-1===t.indexOf(n)&&t.push(n)}return t}(O.Global||(O.Global={})).timer=null;S.prototype.destroy=function(){this.closeDialog()},S.prototype.wireEvents=function(){P.EventHandler.add(this.dlg,"click",this.clickHandler,this),P.EventHandler.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=P.debounce(this.searchBoxKeyUp,200);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(P.EventHandler.add(e,"keyup",this.searchHandler,this),P.EventHandler.add(e,"input",this.searchHandler,this))},S.prototype.unWireEvents=function(){P.EventHandler.remove(this.dlg,"click",this.clickHandler),P.EventHandler.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(P.EventHandler.remove(e,"keyup",this.searchHandler),P.EventHandler.remove(e,"input",this.searchHandler))},S.prototype.foreignKeyFilter=function(n,r,e){var s=this,o={},a=[],t=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(t.where(e)).then(function(e){s.options.column.columnData=e.result,s.parent.notify(Ei,{predicate:o,column:s.options.column}),n.ejpredicate=o.predicate.predicates;for(var t=o.predicate.predicates,i=0;i<t.length;i++)a.push({field:t[parseInt(i.toString(),10)].field,predicate:"or",matchCase:t[parseInt(i.toString(),10)].ignoreCase,ignoreAccent:t[parseInt(i.toString(),10)].ignoreAccent,operator:t[parseInt(i.toString(),10)].operator,value:t[parseInt(i.toString(),10)].value,type:s.options.type});n.filterCollection=a.length?a:r.filter(function(e){return e.field=s.options.field}),s.options.handler(n)})},S.prototype.searchBoxClick=function(e){var t=e.target;t.classList.contains("e-searchclear")&&(this.sInput.value=t.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},S.prototype.searchBoxKeyUp=function(e){!P.isNullOrUndefined(e)&&("ArrowUp"===e.key||"ArrowDown"===e.key||"Tab"===e.key||"Tab"===e.key&&e.shiftKey)||(P.isNullOrUndefined(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon())},S.prototype.updateSearchIcon=function(){this.sInput.value.length?(P.classList(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),P.isNullOrUndefined(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(P.classList(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),P.isNullOrUndefined(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},S.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},S.prototype.updateDataSource=function(){var e=this.options.dataSource;if(!(e instanceof A.DataManager))for(var t,i=0;i<e.length;i++)"object"!=typeof e&&((t={})[this.options.field]=e[parseInt(i.toString(),10)],e[parseInt(i.toString(),10)]=t)},S.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager||e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new A.Query,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.options.disableHtmlEncode=e.column.disableHtmlEncode||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length,this.infiniteRenderMod=!(!this.parent.filterSettings||!this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},S.prototype.getAndSetChkElem=function(e){return this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),e.hideSearchbox||(this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox),e={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}},z.Input.createInput(e,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)),this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},S.prototype.showDialog=function(e){var t={requestType:tt,columnName:this.options.field,columnType:this.options.type,cancel:!1};if((t.filterModel=this).parent.notify($i,t),t.cancel)e.cancel=t.cancel;else{this.dialogObj=new L.Dialog({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!P.isNullOrUndefined(E(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass||""});this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e);t=this.parent.filterSettings&&"CheckBox"===this.parent.filterSettings.type?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",t),(e.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv"):this.parent.element).appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),this.parent.enableAdaptiveUI){if(this.parent.enableAdaptiveUI&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator)return void this.getAllData();this.infiniteRenderMod&&(this.cBox.style.marginTop=this.getListHeight(this.cBox)+"px"),L.createSpinner({target:this.spinner,cssClass:this.parent.cssClass||null},this.parent.createElement),L.showSpinner(this.spinner)}else P.isNullOrUndefined(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||this.infiniteRenderMod||this.parent.showMaskRow(void 0,this.dialogObj.element),this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&this.showMask();this.getAllData()}},S.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},S.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":P.Browser.isDevice?this.dialogObj.position={X:"center",Y:"center"}:bh(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(bi,e)},S.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},S.prototype.closeDialog=function(){var e,t;this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed&&(this.isBlanks=!1,e=this.options.columns.filter(function(e){return e.getFilterItemTemplate()}),t=this.parent.registeredTemplate,e.length&&!P.isNullOrUndefined(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Dp(this.parent,["filterItemTemplate"]),this.parent.notify(Ii,{field:this.options.field}),this.unWireEvents(),this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate&&("CheckBox"===this.options.column.filter.type||"Excel"===this.options.column.filter.type)&&(this.dialogObj.element.querySelector(".e-dlg-content").innerHTML=""),this.dialogObj.destroy(),this.dlg&&this.dlg.parentElement&&P.remove(this.dlg),this.dlg=null,this.parent.notify(Jn,{}))},S.prototype.clearFilter=function(e){var t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(tn,t),t.cancel||this.options.handler({action:"clear-filter",field:(e||this.options).field})},S.prototype.btnClick=function(e){var t;this.filterState?("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")||13===e.keyCode||(t=e.target.firstChild.textContent.toLowerCase(),this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t)?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter(),this.closeDialog()):e.target&&e.target.firstChild&&e.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog()),this.options.column.showColumnMenu&&this.parent.notify(xr,{}),P.isNullOrUndefined(this.parent.focusModule)||this.parent.focusModule.filterfocus()},S.prototype.fltrBtnHandler=function(){var e,t=this,i=(this.infiniteRenderMod&&(this.cBox.innerHTML="",sh(this.cBox,this.infiniteLoadedElem.slice())),[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)"))),n=i,r="equal",s=this.dialogObj.element.querySelector(".e-dropdownlist"),s=(s&&(this.options.operator=r=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(e=this.searchBox.querySelector(".e-searchinput")),this.options.allowCaseSensitive),s={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:s,ignoreAccent:this.options.ignoreAccent},o=this.itemsCnt!==i.length&&this.itemsCnt-i.length<i.length,a=(o&&e&&""===e.value&&(r=this.isMenuNotEqual?"equal":"notequal",i=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),s.predicate=this.isMenuNotEqual?"or":"and",s.operator=r),[]);if(i.length!==this.itemsCnt||e&&e.value&&""!==e.value||this.infiniteRenderMod){this.infiniteRenderMod?this.infiniteRenderMod&&(!this.infiniteSearchPred||this.infiniteSearchPred&&!this.infiniteSearchPred.isComplex)?this.infiniteFltrBtnHandler(a):this.infiniteSearchPred.isComplex&&(a=this.predicateIterate(i,s,o)):a=this.predicateIterate(i,s,o),"date"!==this.options.type&&"datetime"!==this.options.type||!n.length||(r=n.length-1,e=this.values[E(n[parseInt(r.toString(),10)],"e-ftrchk").getAttribute("uid")],P.isNullOrUndefined(e)&&o&&a.push({field:s.field,matchCase:s.matchCase,operator:"equal",predicate:"or",value:null}));i=(this.infiniteRenderMod?this.sBox:this.cBox).querySelector(".e-add-current");if(i&&i.classList.contains("e-check")){var l=this.existingPredicate[this.options.field];if(!l)return;for(var h=0;h<l.length;h++)!function(t){a.some(function(e){return e.value===l[parseInt(t.toString(),10)].value})||a.push(l[parseInt(t.toString(),10)])}(h)}!this.infiniteRenderMod||a.length?this.initiateFilter(a):this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!a.length&&this.options.filteredColumns.some(function(e){return t.options.field===e.field})&&this.clearFilter()}else this.options.filteredColumns.some(function(e){return t.options.field===e.field})&&this.clearFilter()},S.prototype.predicateIterate=function(e,t,i){for(var n,r,s=[],o=0;o<e.length;o++)n=this.values[E(e[parseInt(o.toString(),10)],"e-ftrchk").getAttribute("uid")],r=P.extend({},{value:n},t),n&&!n.toString().length&&(r.operator=i?"notequal":"equal"),""===n||P.isNullOrUndefined(n)?s=s.concat(S.generateNullValuePredicates(t)):s.push(r),this.notifyFilterPrevEvent(r);return s},S.prototype.infiniteFltrBtnHandler=function(e){if(this.infiniteManualSelectMaintainPred.length)for(var t=0;t<this.infiniteManualSelectMaintainPred.length;t++){var i,n=this.infiniteManualSelectMaintainPred[t];!(i=n.value+"")||P.isNullOrUndefined(i)?(i={predicate:n.predicate,field:n.field,type:n.type,uid:n.uid,operator:n.operator,matchCase:n.matchCase,ignoreAccent:n.ignoreAccent},e.push.apply(e,S.generateNullValuePredicates(i))):e.push(this.infiniteManualSelectMaintainPred[t]),this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[t])}if(!this.localInfiniteSelectAllClicked&&""===this.sInput.value&&(this.options.parentCurrentViewDataCount||!e.length))for(t=0;t<this.infiniteUnloadParentExistPred.length;t++)e.unshift(this.infiniteUnloadParentExistPred[t]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][t]);""===this.sInput.value||this.localInfiniteSelectAllClicked&&!this.infiniteLocalSelectAll||(this.infiniteSearchPred.predicate="or",e.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},S.prototype.notifyFilterPrevEvent=function(e){e={instance:this,handler:this.fltrBtnHandler,arg1:e.field,arg2:e.predicate,arg3:e.operator,arg4:e.matchCase,arg5:e.ignoreAccent,arg6:e.value,cancel:!1};this.parent.notify(tn,e)},S.generateNullValuePredicates=function(e){var t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t},S.prototype.initiateFilter=function(e){var t=e[0];if(!P.isNullOrUndefined(t)){for(var i=t.ejpredicate||new A.Predicate(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent),n=1;n<e.length;n++)i=void 0!==e[parseInt(n.toString(),10)].ejpredicate?i[e[parseInt(n.toString(),10)].predicate](e[parseInt(n.toString(),10)].ejpredicate):i[e[parseInt(n.toString(),10)].predicate](e[parseInt(n.toString(),10)].field,e[parseInt(n.toString(),10)].operator,e[parseInt(n.toString(),10)].value,!e[parseInt(n.toString(),10)].matchCase,e[parseInt(n.toString(),10)].ignoreAccent);t={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:A.Predicate.or(i)};this.options.handler(t)}},S.prototype.isForeignColumn=function(e){return!!e.isForeignColumn&&e.isForeignColumn()},S.prototype.refreshCheckboxes=function(){var t,e,r=this,s=this.sInput.value,o=this.options.column,a=(this.isForeignColumn(o)?this.foreignKeyQuery:this.options.query).clone(),l=this.options.query.clone(),h=a.queries.filter(function(e){return e&&"onWhere"===e.fn})[0],p=(a.queries=[],l.queries=[],"string"!==this.options.type&&parseFloat(s)?parseFloat(s):s),d=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",c=this.options.ignoreAccent,u=this.isForeignColumn(o)?o.foreignKeyValue:o.field,g=(p=""===p||void 0===p?void 0:p,[]),f={field:u,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:!0,ignoreAccent:c},i=this.options.dataManager.adaptor.getModuleName,m=("boolean"===this.options.type&&(void 0!==p&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(p.toLowerCase())?p="true":void 0!==p&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(p.toLowerCase())&&(p="false"),void 0!==p&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(p.toLowerCase())&&i?(i(),p=!0):void 0!==p&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(p.toLowerCase())&&i&&(i(),p=!1),d="equal"),"date"!==this.options.type&&"datetime"!==this.options.type&&"dateonly"!==this.options.type||!this.options.format||(i=new P.Internationalization,e=("string"==typeof this.options.format?this.options:this.options.format).format,p=e&&i.parseDate(s,{format:e})||new Date(s),"dateonly"===this.options.type&&(p=p.getFullYear()+"-"+Fh(p.getMonth()+1)+"-"+Fh(p.getDate()))),this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],""===this.sInput.value?this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:this.infiniteUnloadParentExistPred=[],this.addDistinct(a),{requestType:it,filterModel:this,columnName:u,column:o,operator:d,matchCase:!0,ignoreAccent:c,filterChoiceCount:null,query:a,value:p});this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(m.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(y,m,function(i){i.operator=i.operator,t=new A.Predicate(u,i.operator,m.value,i.matchCase,i.ignoreAccent),"date"!==r.options.type&&"datetime"!==r.options.type&&"dateonly"!==r.options.type||(e={field:u,operator:d="equal",value:p,matchCase:!0,ignoreAccent:c},P.isNullOrUndefined(p))||(t=kh(e,r.options.type)),s&&"string"==typeof s&&r.isBlanks&&0<=r.getLocalizedLabel("Blanks").toLowerCase().indexOf(s.toLowerCase())?(g=g.concat(S.generateNullValuePredicates(f)),(e=S.generatePredicate(g)).predicates.push(t),t=e,a.where(e)):s.length?(t=P.isNullOrUndefined(h)?t:t.and(h.e),a.where(t)):P.isNullOrUndefined(h)||(t=h.e,a.where(h.e)),r.infiniteSearchPred=t,i.filterChoiceCount=P.isNullOrUndefined(i.filterChoiceCount)?1e3:i.filterChoiceCount,r.infiniteRenderMod&&r.parent.filterSettings.itemsCount!==i.filterChoiceCount&&(r.parent.filterSettings.itemsCount=m.filterChoiceCount);var e,n={};L.showSpinner(r.spinner),r.renderEmpty=!1,r.isForeignColumn(o)&&s.length?("result"in o.dataSource?new A.DataManager(o.dataSource.result):o.dataSource).executeQuery(a).then(function(e){var t=r.options.column.columnData;r.options.column.columnData=e.result,r.parent.notify(Ei,{predicate:n,column:o}),n.predicate.predicates.length?l.where(n.predicate):r.renderEmpty=!0,r.options.column.columnData=t,r.infiniteRenderMod?(r.infiniteInitialLoad=!!P.isNullOrUndefined(r.fullData),r.makeInfiniteScrollRequest(l),l.requiresCount()):l.take(i.filterChoiceCount),r.search(i,l)}):(r.infiniteRenderMod&&r.parent.filterSettings.itemsCount?(r.infiniteInitialLoad=!!P.isNullOrUndefined(r.fullData),r.makeInfiniteScrollRequest(a),a.requiresCount()):a.take(i.filterChoiceCount),r.search(i,a))})},S.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},S.prototype.getPredicateFromCols=function(e,t){for(var i=S.getPredicate(e,t),n=[],r={},s=void 0!==this.parent.getForeignKeyColumns,o=s?this.parent.getForeignKeyColumns():[],a=0,l=Object.keys(i);a<l.length;a++){var h=l[a],p=void 0;(p=s&&!this.parent.getColumnByField(h)?Ah(h,o):p)?(this.parent.notify(Ei,{predicate:r,column:p}),r.predicate.predicates.length&&n.push(A.Predicate.or(r.predicate.predicates))):n.push(i[""+h])}return n.length&&A.Predicate.and(n)},S.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new A.Query},S.prototype.getAllData=function(){var t=this,i=(this.customQuery=!1,this.getQuery()),e=this.options.dataManager.adaptor.getModuleName,e=(!P.isNullOrUndefined(this.parent.getDataModule)&&e&&"ODataV4Adaptor"===e()||i.requiresCount(),this.addDistinct(i),{requestType:$e,query:i,filterChoiceCount:null});(e.filterModel=this).infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(e.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(y,e,function(e){e.filterChoiceCount=P.isNullOrUndefined(e.filterChoiceCount)?1e3:e.filterChoiceCount,t.infiniteRenderMod&&t.parent.filterSettings.itemsCount!==e.filterChoiceCount&&(t.parent.filterSettings.itemsCount=e.filterChoiceCount),t.infiniteRenderMod||i.take(e.filterChoiceCount),e.query.distincts.length&&!t.infiniteRenderMod||(t.customQuery=!0,t.queryGenerate(i)),t.infiniteRenderMod&&(t.infiniteInitialLoad=!!P.isNullOrUndefined(t.fullData),t.makeInfiniteScrollRequest(i)),t.parent.dataSource&&"result"in t.parent.dataSource?t.filterEvent(e,i):t.processDataOperation(i,!0)})},S.prototype.addDistinct=function(e){var t,i=this,n=A.DataUtil.distinct(this.options.filteredColumns,"field");return n.indexOf(this.options.column.field)<=-1&&(n=n.concat(this.options.column.field)),this.infiniteRenderMod||e.distinct(n),this.infiniteRenderMod&&!this.options.isRemote&&""===this.sInput.value?(this.options.dataSource=this.options.dataSource instanceof A.DataManager?this.options.dataSource:new A.DataManager(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice(),this.options.dataSource.dataSource.json=A.DataUtil.distinct((t=this.options.parentFilteredLocalRecords).concat.apply(t,this.infinitePermenantLocalData),this.options.column.field,!0),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof A.DataManager?this.options.column.dataSource:new A.DataManager(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(e,t){return Object.assign({},e,i.options.column.dataSource.dataSource.json[t])}))):this.infiniteRenderMod&&this.options.isRemote&&(e.select(this.options.column.field),e.sortBy(this.options.column.field,"ascending"),t=this.options.dataManager.adaptor.getModuleName)&&t()&&("ODataV4Adaptor"===t()||"WebApiAdaptor"===t()||"CustomDataAdaptor"===t()||"GraphQLAdaptor"===t()||"ODataAdaptor"===t())&&e.distinct(n),e},S.prototype.filterEvent=function(e,t){var i=this,e=Zh(e,t);this.parent.trigger(Ai,e.state),e.deffered.promise.then(function(e){i.dataSuccess(e)})},S.prototype.infiniteScrollMouseKeyDownHandler=function(){P.EventHandler.remove(this.cBox,"scroll",this.infiniteScrollHandler)},S.prototype.infiniteScrollMouseKeyUpHandler=function(e){var t=this,i=(P.EventHandler.add(this.cBox,"scroll",this.infiniteScrollHandler,this),this.cBox);1<i.children.length&&(i.scrollTop>=i.scrollHeight-i.offsetHeight||i.scrollTop<=0)&&this.infiniteScrollHandler(),O.Global.timer=setTimeout(function(){t.clickHandler(e),O.Global.timer=null},0)},S.prototype.getListHeight=function(e){var t=P.createElement("div",{className:"e-ftrchk",styles:"visibility: hidden"}),i=(t.innerHTML='<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"></span><span class="e-label e-checkboxfiltertext">A</div></span>',e.appendChild(t),t.getBoundingClientRect());return e.removeChild(t),Math.round(i.height)},S.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},S.prototype.showMask=function(){var e,t,i,n,r=5,s=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist",styles:"z-index: 10;"}),o=this.cBox,a=(this.removeMask(),o&&(e=getComputedStyle(o),t=this.getListHeight(o),i=o.children.length?parseInt(e.height,10):Math.floor(parseInt(e.height.split("px")[0],10))-5,this.parent.enableAdaptiveUI&&this.infiniteRenderMod&&(s.style.height=i-t+"px",this.dlg.querySelector(".e-dlg-content").style.overflow="hidden"),n=!this.isExcel||o.children.length||this.dlg.classList.contains("e-excelfilter")?getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor:"",s.style.cssText="width: "+e.width+"; min-height: "+e.minHeight+"; height: "+i+"px; margin: "+e.margin+"; border-style: "+e.borderStyle+"; border-width: "+e.borderWidth+"; border-color: "+e.borderColor+"; position: absolute; background-color: "+n+";",r=Math.floor(i/t),r=o.children.length>r?o.children.length:r,e=t+"px"),'<div class="e-ftrchk e-mask-ftrchk" style="width: 100%; height:'+e+';"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>");s.innerHTML="",o.children.length||(this.spinner.insertAdjacentHTML("beforebegin",a),(l=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)")))[0].classList.add("e-mask-checkbox-filter-intent"),l[1].classList.add("e-mask-checkbox-filter-span-intent")),this.spinner.insertBefore(s,this.cBox);for(var l,h=0;r&&h<r;h++)s.innerHTML+=a,(l=[].slice.call(s.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)")))[0].classList.add("e-mask-checkbox-filter-intent"),l[1].classList.add("e-mask-checkbox-filter-span-intent");this.cBox&&(s.scrollTop=this.cBox.scrollTop)},S.prototype.removeMask=function(){var e=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(e.length)for(var t=0;t<e.length;t++)P.remove(e[t]);this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist")&&P.remove(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},S.prototype.infiniteScrollHandler=function(){var e=this.cBox;e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===3*this.parent.filterSettings.itemsCount&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===3*this.parent.filterSettings.itemsCount?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+="down"===this.prevInfiniteScrollDirection?this.parent.filterSettings.itemsCount:3*this.parent.filterSettings.itemsCount,sh(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):0===e.scrollTop&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>3*this.parent.filterSettings.itemsCount&&this.cBox.children.length===3*this.parent.filterSettings.itemsCount?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(2*this.parent.filterSettings.itemsCount,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-="up"===this.prevInfiniteScrollDirection?this.parent.filterSettings.itemsCount:3*this.parent.filterSettings.itemsCount,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):0===e.scrollTop&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<3*this.parent.filterSettings.itemsCount&&(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(2*this.parent.filterSettings.itemsCount,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},S.prototype.infiniteRemoveElements=function(e){for(var t=0;t<e.length;t++)P.remove(e[t])},S.prototype.infiniteAppendElements=function(e){for(var t=0;t<e.length;t++)this.cBox.insertBefore(e[t],this.cBox.children[t])},S.prototype.makeInfiniteScrollRequest=function(e){var t=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator?setTimeout(function(){t.infiniteQueryExecutionPending&&t.showMask()},500):this.infiniteInitialLoad||(L.createSpinner({target:this.spinner,cssClass:this.parent.cssClass||null},this.parent.createElement),L.showSpinner(this.spinner));if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var i=0;i<this.infiniteQuery.queries.length;i++)"onTake"!==this.infiniteQuery.queries[i].fn&&"onSkip"!==this.infiniteQuery.queries[i].fn||(this.infiniteQuery.queries.splice(i,1),i--);var n=!!e;e=e||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,e.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(e.take(3*this.parent.filterSettings.itemsCount),this.infiniteSkipCnt+=2*this.parent.filterSettings.itemsCount):e.take(this.parent.filterSettings.itemsCount),n||(this.processDataOperation(e),this.infiniteQueryExecutionPending=!0)},S.prototype.processDataOperation=function(t,e){var i=this,n=(this.options.dataSource=this.options.dataSource instanceof A.DataManager?this.options.dataSource:new A.DataManager(this.options.dataSource),[]),r=[];this.isForeignColumn(this.options.column)&&e&&(e="result"in this.options.column.dataSource?new A.DataManager(this.options.column.dataSource.result):this.options.column.dataSource,this.foreignKeyQuery.params=t.params,n.push(e.executeQuery(this.foreignKeyQuery)),r.push(function(e){return i.foreignKeyData=e})),this.infiniteRenderMod&&(this.infiniteQuery=t.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),P.EventHandler.add(this.cBox,"scroll",this.infiniteScrollHandler,this),P.EventHandler.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),P.EventHandler.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML="")),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote?(e=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field,this.options.dataSource.executeQuery((new A.Query).sortBy(e,A.DataUtil.fnAscending)).then(function(e){i.options.dataSource.dataSource.json=e.result,i.executeQueryOperations(t,n,r)})):this.executeQueryOperations(t,n,r)},S.prototype.executeQueryOperations=function(e,t,i){var n=this,r=(t.push(this.options.dataSource.executeQuery(e)),i.push(this.dataSuccess.bind(this)),0);Promise.all(t).then(function(e){n.infiniteQueryExecutionPending=!n.infiniteRenderMod&&n.infiniteQueryExecutionPending;for(var t=0;t<e.length;t++)n.infiniteDataCount=n.infiniteRenderMod&&!n.infiniteDataCount?e[t].count:n.infiniteDataCount,i[r++](e[parseInt(t.toString(),10)].result)}).catch(function(){n.infiniteRenderMod&&n.parent.filterSettings&&"Shimmer"===n.parent.filterSettings.loadingIndicator&&n.parent.showMaskRow(void 0,n.dialogObj.element)})},S.prototype.dataSuccess=function(e){var t,i;!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||0===e.length)||(this.fullData=e,e={dataSource:this.fullData,executeQuery:!0,field:this.options.field},this.parent.notify(Bn,e),e.executeQuery&&(t=new A.Query,this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(t),this.isExecuteLocal=!1),t=new A.DataManager(e.dataSource).executeLocal(t),i=this.options.column,this.filteredData=S.getDistinct(t,this.options.field,i,this.foreignKeyData,this).records||[]),t=e.executeQuery?this.filteredData:e.dataSource,this.processDataSource(null,!0,t,e),this.sInput&&(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&this.sInput.focus(),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1),((i={requestType:et,columnName:this.options.field,columnType:this.options.type}).filterModel=this).parent.notify(en,i),this.isCheckboxFilterTemplate&&L.hideSpinner(this.spinner))},S.prototype.queryGenerate=function(e){var t;if(this.parent.searchSettings&&this.parent.searchSettings.key.length&&(t=this.options.dataManager.adaptor.getModuleName,!P.isNullOrUndefined(this.parent.getDataModule)&&t&&"ODataV4Adaptor"===t()?this.parent.getDataModule().searchQuery(e):(s=(t=this.parent.searchSettings).fields.length?t.fields:this.options.columns.map(function(e){return e.field}),e.search(t.key,s,t.operator,t.ignoreCase,t.ignoreAccent))),this.options.filteredColumns.length){for(var i=[],n=0;n<this.options.filteredColumns.length;n++){var r=this.options.filteredColumns[parseInt(n.toString(),10)];this.options.uid?(r.uid=r.uid||this.parent.getColumnByField(r.field).uid,r.uid!==this.options.uid&&i.push(this.options.filteredColumns[parseInt(n.toString(),10)])):r.field!==this.options.field&&i.push(this.options.filteredColumns[parseInt(n.toString(),10)])}var s=this.getPredicateFromCols(i,this.isExecuteLocal);s&&e.where(s)}},S.prototype.processDataSource=function(e,t,i,n){L.showSpinner(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var r={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(Rr,r),this.isCheckboxFilterTemplate=r.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&this.removeMask():this.createFilterItems(i,t,n)},S.prototype.processSearch=function(e){this.processDataOperation(e)},S.prototype.updateResult=function(){this.result={};var e=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),t=new A.Query;e&&t.where(e),this.parent.notify(mr,{query:t});for(var i=0,n=new A.DataManager(this.fullData).executeLocal(t);i<n.length;i++){var r=n[i];this.result[Lh(this.options.field,r)]=!0}},S.prototype.clickHandler=function(e){P.isNullOrUndefined(O.Global.timer)||clearTimeout(O.Global.timer);var t,i,n,r=e.target;!P.isNullOrUndefined(this.parent.loadingIndicator)&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&E(r,"e-mask-ftrchk")||(t=E(r,"e-checkbox-wrapper"),E(r,"e-searchbox")&&this.searchBoxClick(e),t&&!this.isCheckboxFilterTemplate&&((r=t.querySelector(".e-selectall"))?this.updateAllCBoxes(!r.classList.contains("e-check")):(xh(t.parentElement),this.infiniteRenderMod&&!t.parentElement.querySelector(".e-add-current")&&(this.localInfiniteSelectionInteracted=!0,e=this.options.allowCaseSensitive,n=(r=t.parentElement.querySelector(".e-frame").previousSibling).checked?"equal":"notequal",i=r.checked?"or":"and",i={field:this.options.field,predicate:i,uid:this.options.uid,operator:n,type:this.options.type,matchCase:e,ignoreAccent:this.options.ignoreAccent},n=this.values[E(r,"e-ftrchk").getAttribute("uid")],this.updateInfiniteManualSelectPred(i,n),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(r=this.getPredicateFromCols((e=this.options.filteredColumns).concat.apply(e,this.infiniteManualSelectMaintainPred),!0),i=new A.Query,r&&i.where(r),n=new A.DataManager(this.infinitePermenantLocalData).executeLocal(i),this.options.parentTotalDataCount!==n.length&&(this.options.parentTotalDataCount=n.length),!this.options.parentTotalDataCount)&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[]),!this.infiniteUnloadParentExistPred.length||this.options.parentTotalDataCount!==this.infiniteDataCount&&this.options.parentTotalDataCount||(this.infiniteUnloadParentExistPred=[]))),this.updateIndeterminatenBtn(),t.querySelector(".e-chk-hidden").focus()),this.setFocus(E(t,"e-ftrchk")))},S.prototype.updateInfiniteManualSelectPred=function(e,t){for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var n=this.infiniteManualSelectMaintainPred[i];if(n.value+""==t+""&&("equal"===n.operator||"notequal"===n.operator)){this.infiniteManualSelectMaintainPred.splice(i,1);break}}("or"!==e.predicate||this.localInfiniteSelectAllClicked&&this.infiniteLocalSelectAll)&&("and"!==e.predicate||this.localInfiniteSelectAllClicked&&!this.infiniteLocalSelectAll)||(this.infiniteManualSelectMaintainPred.push(P.extend({},{value:t},e)),"or"===e.predicate?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},S.prototype.focusNextOrPrev=function(e,t){e="ArrowUp"===e.key?t.indexOf(document.activeElement)-1:t.indexOf(document.activeElement)+1,e=t[(e+t.length)%t.length];e&&(e.focus(),t=e.classList.contains("e-chk-hidden")?E(e,"e-ftrchk"):e,this.setFocus(t))},S.prototype.keyupHandler=function(e){var t;"Tab"!==e.key&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.altKey)||this.setFocus(E(e.target,"e-ftrchk")),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.altKey||"CheckBox"!==this.parent.filterSettings.type||(e.preventDefault(),t=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])')),this.focusNextOrPrev(e,t))},S.prototype.setFocus=function(e){var t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e!==t&&e.classList.add("e-chkfocus")},S.prototype.updateAllCBoxes=function(e){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=e,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var t=0,i=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(e){return e.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)"));t<i.length;t++){var n=i[t];Dh(n,e),Rh(n.previousSibling,e)}},S.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},S.prototype.createCheckbox=function(e,t,i){var n=(t?this.cBoxTrue:this.cBoxFalse).cloneNode(!0),t=(Rh(n.querySelector("input"),t),n.querySelector(".e-label")),r=zh({},i,{column:this.options.column,parent:this.parent}),s=(t[this.options.disableHtmlEncode?"textContent":"innerHTML"]=!P.isNullOrUndefined(e)&&e.toString().length?this.parent.enableHtmlSanitizer?P.SanitizeHtmlHelper.sanitize(e):e:this.getLocalizedLabel("Blanks"),rh("cbox"));return t.setAttribute("id",s+"cboxLabel"),n.querySelector("input").setAttribute("aria-labelledby",t.id),t.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof e&&(t.innerHTML=!0===e?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),P.addClass([t],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&i[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")&&(t.innerHTML="",s=this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate,e=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,s||e?(this.options.template(r,this.parent,"filterItemTemplate",null,null,null,t),this.parent.renderTemplates()):sh(t,this.options.template(r,this.parent,"filterItemTemplate",null,null,null,null,this.parent.root))),n},S.prototype.updateIndeterminatenBtn=function(){var e,t=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,i=[],n=!1,r=(this.infiniteRenderMod?this.sBox:this.cBox).querySelector(".e-selectall"),s=(this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(e){return e.querySelector(".e-check")}):this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")).length,o=(this.cBox.querySelector(".e-add-current")&&--t,this.options.isResponsiveFilter||((e=this.dialogObj.btnObj[0]).disabled=!1),r.previousSibling);Rh(o,!1),o.indeterminate=!1,!this.infiniteRenderMod||""!==this.sInput.value||this.options.parentCurrentViewDataCount||this.localInfiniteSelectionInteracted||this.localInfiniteSelectAllClicked&&(this.infiniteLocalSelectAll||s)||t===s&&t!==s?this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!s||t===s)&&this.infiniteLocalSelectAll&&(s?t+=this.infiniteUnloadParentExistPred.length:s+=this.infiniteUnloadParentExistPred.length):s=0,t===s?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-check"],Rh(o,!0)):s?(i=["e-stop"],o.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-uncheck"],n=!0,e&&(e.disabled=!0)),e&&(this.filterState=!e.disabled,e.dataBind()),P.removeClass([r],["e-check","e-stop","e-uncheck"]),P.addClass([r],i),this.parent.notify(Zn,{disabled:n})},S.prototype.createFilterItems=function(e,t,i){var n,r=this.parent.createElement("div"),s=!1,o=(this.options.isResponsiveFilter||(n=this.dialogObj.btnObj[0]),-1),a="ejValue";i.executeQuery||(a=i.field);for(var l=0;l<e.length;l++){var h=P.getValue(a,e[parseInt(l.toString(),10)]);""!==h&&!P.isNullOrUndefined(h)||(o+=1)}if(this.infiniteRenderMod||(this.itemsCnt=-1!==o?e.length-o:e.length),this.infiniteRenderMod&&this.parent.filterSettings&&"Shimmer"===this.parent.filterSettings.loadingIndicator&&this.removeMask(),e.length&&!this.renderEmpty){for(var p,i=this.getLocalizedLabel("SelectAll"),d=this.cBox.querySelector(".e-checkfltrnmdiv"),i=(d&&d.classList.remove("e-checkfltrnmdiv"),this.createCheckbox(i,!1,((d={})[this.options.field]=i,d))),d=(this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?P.addClass([i],this.parent.cssClass.split(" ")):P.addClass([i],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod?((p=Eh(rh("cbox"),i,"e-ftrchk")).querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?(p.classList.add("e-infinitescroll"),this.parent.enableAdaptiveUI&&(this.spinner.style.height=this.spinner.offsetHeight-this.getListHeight(this.cBox)+"px"),this.sBox.insertBefore(p,this.spinner)):r.appendChild(p)):this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled")),new A.Predicate("field","equal",this.options.field)),c=(this.options.foreignKeyValue&&(d=d.or("field","equal",this.options.foreignKeyValue)),new A.DataManager(this.options.filteredColumns).executeLocal((new A.Query).where(d)).length),u=(this.sInput.value?(d=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,((i={})[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),i)),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?P.addClass([d],this.parent.cssClass.split(" ")):P.addClass([d],[this.parent.cssClass])),this.infiniteRenderMod&&!P.isNullOrUndefined(this.sBox.children[2])&&"Add current selection to filter"!==this.sBox.children[2].innerText||!this.infiniteRenderMod?((i=Eh(rh("cbox"),d,"e-ftrchk")).querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod?(this.sBox.insertBefore(i,this.spinner),y=this.spinner.querySelector(".e-checkboxlist"),d=Math.ceil(i.getBoundingClientRect().height),y.style.height=parseInt(getComputedStyle(y).height.split("px")[0],10)-d+"px",y.style.minHeight=y.style.height):r.appendChild(i)):this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))):this.infiniteRenderMod&&!P.isNullOrUndefined(this.sBox.children[2])&&"Add current selection to filter"===this.sBox.children[2].innerText&&(y=this.spinner.querySelector(".e-checkboxlist"),d=Math.ceil(this.sBox.children[2].getBoundingClientRect().height),y.style.height=parseInt(getComputedStyle(y).height.split("px")[0],10)+d+"px",y.style.minHeight=y.style.height,P.remove(this.sBox.children[2])),void 0),l=0;l<e.length;l++){var g=rh("cbox"),f=(this.values[""+g]=P.getValue(a,e[parseInt(l.toString(),10)]),P.getValue(this.options.field,e[parseInt(l.toString(),10)])),m={value:f=this.options.formatFn?this.valueFormatter.toView(f,this.options.formatFn):f,column:this.options.column,data:e[parseInt(l.toString(),10)]};if(this.parent.notify(sn,m),""===(f=m.value)||P.isNullOrUndefined(f)){if(u)continue;u=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(f,this.infiniteUnloadParentExistPred);m=this.localInfiniteSelectAllClicked?this.createCheckbox(f,this.infiniteLocalSelectAll,P.getValue("dataObj",e[l])):this.createCheckbox(f,this.getCheckedState(c,this.values[""+g]),P.getValue("dataObj",e[l]));r.appendChild(Eh(g,m,"e-ftrchk")),this.infiniteRenderMod&&(r.lastChild.style.height=this.getListHeight(this.cBox)+"px")}i=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((d=this.infiniteLoadedElem).push.apply(d,[].slice.call(r.children)),this.itemsCnt=-1!==o?this.infiniteLoadedElem.length-o:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),sh(this.cBox,[].slice.call(r.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(i-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),s=this.infiniteRenderMod?!(!n||!n.disabled):(n&&(n.disabled=!1),!1)}else r.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod&&((p=this.sBox.querySelector(".e-ftrchk .e-selectall"))&&(y=p.parentElement.parentElement,p.classList.contains("e-check")?xh(y):p.classList.contains("e-stop")&&(xh(y),p.classList.remove("e-stop"),xh(y)),p.previousSibling.disabled=!0,p.parentElement.classList.add("e-checkbox-disabled")),d=this.sBox.querySelector(".e-ftrchk .e-add-current"))&&(i=d.parentElement.parentElement,d.classList.contains("e-check")&&xh(i),d.previousSibling.disabled=!0,d.parentElement.classList.add("e-checkbox-disabled")),this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),sh(this.cBox.children[0],[].slice.call(r.children)),n&&(n.disabled=!0),this.filterState=!(s=!0);n&&e.length&&(this.filterState=!n.disabled,n.dataBind());var y={requestType:$e,dataSource:this.renderEmpty?[]:e};(y.filterModel=this).parent.notify(en,y),this.parent.notify(Zn,{disabled:s}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),L.hideSpinner(this.spinner)},S.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];e!==(n.value instanceof Date?this.valueFormatter.toView(n.value,this.options.formatFn):n.value)||"equal"!==n.operator&&"notequal"!==n.operator||(this.infiniteManualSelectMaintainPred.push(t[i]),t.splice(i,1),i--)}},S.prototype.getCheckedState=function(e,t){return!this.isFiltered||!e||(e=!!this.sInput.value||this.result[""+t],!this.infiniteRenderMod&&"notequal"===this.options.operator?!e:e)},S.getDistinct=function(e,t,i,n,r){for(var s=e.length,o=[],a={},l=!(!i||!i.isForeignColumn)&&i.isForeignColumn();s--;){var h,p,d=e[parseInt(s.toString(),10)],c=(i&&"dateonly"===i.type&&"string"==typeof d[""+t]&&d[""+t]&&(c=d[""+t].split(/[^0-9.]/),d[""+t]=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))),"string"!=typeof(d=Lh(t,d))||P.isNullOrUndefined(r)||P.isNullOrUndefined(r.parent)||P.isNullOrUndefined(r.parent.filterSettings)||P.isNullOrUndefined(r.parent.filterSettings.enableCaseSensitivity)?d:d.toLowerCase());c in a||((h={}).ejValue=d,a[""+c]=!0,l&&(p=Oh(i,{},d,n)[0],P.setValue(Ti,p,e[parseInt(s.toString(),10)]),d=P.getValue(i.foreignKeyValue,p)),P.setValue(t,P.isNullOrUndefined(d)?null:d,h),P.setValue("dataObj",e[parseInt(s.toString(),10)],h),o.push(h))}return A.DataUtil.group(A.DataUtil.sort(o,t,A.DataUtil.fnAscending),"ejValue")},S.getPredicate=function(e,t){for(var i,n=A.DataUtil.distinct(e,"field",!0)||[],r={},s=0;s<n.length;s++)0!==(i=new A.DataManager(e).executeLocal((new A.Query).where("field","equal",n[parseInt(s.toString(),10)].field))).length&&(r[n[parseInt(s.toString(),10)].field]=S.generatePredicate(i,t));return r},S.generatePredicate=function(e,t){var i=e?e.length:0,n=S.updateDateFilter(e[0]);n.ignoreAccent=!P.isNullOrUndefined(n.ignoreAccent)&&n.ignoreAccent;for(var r="date"===n.type||"datetime"===n.type||"dateonly"===n.type?kh(n,n.type,t):n.ejpredicate||new A.Predicate(n.field,n.operator,n.value,!S.getCaseValue(n),n.ignoreAccent),s=1;s<i;s++)e[parseInt(s.toString(),10)]=S.updateDateFilter(e[parseInt(s.toString(),10)]),2<i&&1<s&&("or"===e[s].predicate&&"or"===e[s-1].predicate||"and"===e[s].predicate&&"and"===e[s-1].predicate)?"date"===e[s].type||"datetime"===e[s].type||"dateonly"===e[s].type?r.predicates.push(kh(e[parseInt(s.toString(),10)],e[s].type,t)):r.predicates.push(new A.Predicate(e[s].field,e[parseInt(s.toString(),10)].operator,e[parseInt(s.toString(),10)].value,!S.getCaseValue(e[parseInt(s.toString(),10)]),e[parseInt(s.toString(),10)].ignoreAccent)):r="date"===e[s].type||"datetime"===e[s].type||"dateonly"===e[s].type?"and"===e[parseInt(s.toString(),10)].predicate&&"equal"===e[parseInt(s.toString(),10)].operator?r.or(kh(e[parseInt(s.toString(),10)],e[parseInt(s.toString(),10)].type,t),e[parseInt(s.toString(),10)].type,e[parseInt(s.toString(),10)].ignoreAccent):r[e[parseInt(s.toString(),10)].predicate](kh(e[parseInt(s.toString(),10)],e[parseInt(s.toString(),10)].type,t),e[parseInt(s.toString(),10)].type,e[parseInt(s.toString(),10)].ignoreAccent):e[parseInt(s.toString(),10)].ejpredicate?r[e[parseInt(s.toString(),10)].predicate](e[parseInt(s.toString(),10)].ejpredicate):r[e[parseInt(s.toString(),10)].predicate](e[parseInt(s.toString(),10)].field,e[parseInt(s.toString(),10)].operator,e[parseInt(s.toString(),10)].value,!S.getCaseValue(e[parseInt(s.toString(),10)]),e[parseInt(s.toString(),10)].ignoreAccent);return r||null},S.getCaseValue=function(e){return P.isNullOrUndefined(e.matchCase)?!("string"===e.type||P.isNullOrUndefined(e.type)&&"string"==typeof e.value):e.matchCase},S.updateDateFilter=function(e){return("date"===e.type||"datetime"===e.type||"dateonly"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e};var Bp=S;function S(e){this.isExecuteLocal=!1,this.existingPredicate={},this.foreignKeyQuery=new A.Query,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new V(this.parent.locale),this.cBoxTrue=B.createCheckBox(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=B.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&P.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?P.addClass([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):P.addClass([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}zp=function(e,t){return(zp=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}zp(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(l,Up=Bp),l.prototype.getCMenuDS=function(e,t){for(var i={number:["Equal","NotEqual","","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","Between","","CustomFilter"],string:["Equal","NotEqual","","StartsWith","EndsWith","","Contains","NotContains","","CustomFilter"]},n=(i.date=i.number,i.datetime=i.number,i.dateonly=i.number,[]),r=0;r<i[""+e].length;r++)i[""+e][parseInt(r.toString(),10)].length?n.push(t?{text:this.getLocalizedLabel(i[""+e][parseInt(r.toString(),10)])+"...",iconCss:"e-icons e-icon-check "+(t===i[""+e][parseInt(r.toString(),10)].toLowerCase()?"":"e-emptyicon")}:{text:this.getLocalizedLabel(i[""+e][parseInt(r.toString(),10)])+"..."}):n.push({separator:!0});return n},l.prototype.destroy=function(){var e;this.dlg&&(this.unwireExEvents(),Up.prototype.closeDialog.call(this)),this.isDevice||!this.menuObj||(e=this.menuObj.element.querySelector("li.e-focused"))&&E(e,"e-excel-menu")||this.destroyCMenu(),this.dlgObj&&!this.dlgObj.isDestroyed&&this.removeDialog()},l.prototype.createMenu=function(e,t,i,n){this.menu=this.parent.createElement("div",{className:"e-contextmenu-wrapper"}),this.parent.enableRtl?this.menu.classList.add("e-rtl"):this.menu.classList.remove("e-rtl"),this.parent.cssClass&&this.menu.classList.add(this.parent.cssClass);var r,s,o,a=this.parent.createElement("ul"),l=t?"e-excl-filter-icon e-filtered":"e-excl-filter-icon";this.parent.allowSorting&&"grid"===this.parent.getModuleName()&&!this.options.isResponsiveFilter&&(o=this.parent.getColumnHeaderByUid(n.uid).getAttribute("aria-sort"),r=(n=this.parent.getColumnByField(n.field).allowSorting)&&"ascending"!==o?"e-excel-ascending":"e-disabled e-excel-ascending",n=n&&"descending"!==o?"e-excel-descending":"e-disabled e-excel-descending",o="string"===e?this.getLocalizedLabel("SortAtoZ"):"datetime"===e||"date"===e?this.getLocalizedLabel("SortByOldest"):this.getLocalizedLabel("SortSmallestToLargest"),s="string"===e?this.getLocalizedLabel("SortZtoA"):"datetime"===e||"date"===e?this.getLocalizedLabel("SortByNewest"):this.getLocalizedLabel("SortLargestToSmallest"),a.appendChild(this.createMenuElem(o,r,"e-sortascending")),a.appendChild(this.createMenuElem(s,n,"e-sortdescending")),o=this.parent.createElement("li",{className:"e-separator e-menu-item e-excel-separator"}),a.appendChild(o)),this.options.isResponsiveFilter||a.appendChild(this.createMenuElem(this.getLocalizedLabel("ClearFilter"),t?"":"e-disabled",l)),"boolean"!==e&&a.appendChild(this.createMenuElem(this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",dateonly:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[""+e]),"e-submenu",i&&this.ensureTextFilter()?"e-icon-check":l+" e-emptyicon",!0)),this.menu.appendChild(a),this.parent.notify(nn,{element:this.menu}),this.parent.notify($n,{isFiltered:t})},l.prototype.createMenuElem=function(e,t,i,n){t=this.parent.createElement("li",{className:t+" e-menu-item"});return t.innerHTML=e,t.tabIndex=t.classList.contains("e-disabled")?-1:0,t.insertBefore(this.parent.createElement("span",{className:"e-menu-icon e-icons "+i,attrs:{"aria-hidden":"true"}}),t.firstChild),n&&t.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),t},l.prototype.wireExEvents=function(){P.Browser.isDevice||P.EventHandler.add(this.dlg,"mouseover",this.hoverHandler,this),P.EventHandler.add(this.dlg,"click",this.clickExHandler,this),P.EventHandler.add(this.dlg,"keyup",this.keyUp,this),P.EventHandler.add(this.dlg,"keydown",this.keyDown,this)},l.prototype.unwireExEvents=function(){P.Browser.isDevice||P.EventHandler.remove(this.dlg,"mouseover",this.hoverHandler),P.EventHandler.remove(this.dlg,"click",this.clickExHandler),P.EventHandler.remove(this.dlg,"keyup",this.keyUp),P.EventHandler.remove(this.dlg,"keydown",this.keyDown)},l.prototype.clickExHandler=function(e){var t=E(e.target,"e-menu-item");t&&(this.getLocalizedLabel("ClearFilter")===t.innerText.trim()?(this.clearFilter(),this.closeDialog()):(this.options.isResponsiveFilter||P.Browser.isDevice)&&this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type])===t.innerText.trim()&&this.hoverHandler(e))},l.prototype.focusNextOrPrevElement=function(e,t,i){e="ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey?t.indexOf(document.activeElement)-1:t.indexOf(document.activeElement)+1,e=t[(e+t.length)%t.length];e&&(e.focus(),t=e.classList.contains("e-chk-hidden")?"e-chkfocus":i,i=e.classList.contains("e-chk-hidden")?E(e,"e-ftrchk"):E(e,"e-menu-item"),this.excelSetFocus(i,t))},l.prototype.keyUp=function(e){var t,i;"Tab"===e.key&&e.shiftKey||"Tab"===e.key?(t=e.target.classList.contains("e-chk-hidden")?"e-chkfocus":"e-menufocus",i=e.target.classList.contains("e-menu-item")?E(e.target,"e-menu-item"):E(e.target,"e-ftrchk"),this.excelSetFocus(i,t)):"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.altKey?"Enter"!==e.key&&"ArrowRight"!==e.code||!e.target.classList.contains("e-menu-item")||(e.preventDefault(),e.target.click(),e.target.classList.contains("e-submenu")&&(this.hoverHandler(e),this.menuObj.element.querySelector(".e-menu-item").focus(),this.excelSetFocus(E(this.menuObj.element.querySelector(".e-menu-item"),"e-menu-item"),"e-focused"),this.focusedMenuItem=this.menuObj.element.querySelector(".e-menu-item"))):(e.preventDefault(),i=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)')),this.focusNextOrPrevElement(e,i,"e-menufocus"))},l.prototype.keyDown=function(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()},l.prototype.excelSetFocus=function(e,t){var i=this.cmenu.querySelector("."+t);i&&i.classList.remove(t),e&&e.classList.add(t)},l.prototype.destroyCMenu=function(){this.isCMenuOpen=!1,this.menuObj&&!this.menuObj.isDestroyed&&(this.menuObj.destroy(),P.EventHandler.remove(this.menuObj.element,"keydown",this.contextKeyDownHandler),P.remove(this.cmenu),this.parent.notify(er,{target:null,header:"",isOpen:!1,col:this.options.column}))},l.prototype.hoverHandler=function(e){var t,i,n,r;this.options.isResponsiveFilter&&"mouseover"===e.type||(r=e.target.querySelector(".e-contextmenu"),i=E(e.target,"e-menu-item"),(n=this.menu.querySelector(".e-focused"))&&n.classList.remove("e-focused"),i&&(i.classList.add("e-focused"),t=i.classList.contains("e-submenu")),r)||(t||(n=this.menu.querySelector(".e-submenu"),P.isNullOrUndefined(n)||n.classList.remove("e-selected"),this.destroyCMenu()),r=this.ensureTextFilter(),!this.isCMenuOpen&&t&&(i.classList.add("e-selected"),this.isCMenuOpen=!0,n={items:this.getCMenuDS(this.options.type,r?r.replace(/\s/g,""):void 0),select:this.selectHandler.bind(this),onClose:this.destroyCMenu.bind(this),enableRtl:this.parent.enableRtl,animationSettings:{effect:"None"},beforeClose:this.preventClose.bind(this),cssClass:this.options.isResponsiveFilter&&this.parent.cssClass?"e-res-contextmenu-wrapper "+this.parent.cssClass:this.options.isResponsiveFilter?"e-res-contextmenu-wrapper":this.parent.cssClass||""},this.parent.element.appendChild(this.cmenu),this.menuObj=new H.ContextMenu(n,this.cmenu),P.EventHandler.add(this.menuObj.element,"keydown",this.contextKeyDownHandler,this),t=this.menu.querySelector(".e-submenu").getBoundingClientRect(),i={top:0,left:0},this.options.isResponsiveFilter?(r=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4,this.menuObj.element.style.height="calc(100% - "+r+"px)",this.menuObj.open(r,0,document.body),n=this.getLocalizedLabel({string:"TextFilter",date:"DateFilter",datetime:"DateTimeFilter",number:"NumberFilter"}[this.options.type]),this.parent.notify(er,{target:this.menuObj.element.parentElement,header:n,isOpen:!0})):(P.Browser.isDevice?(this.isDevice=!0,r=this.getContextBounds(),i.top=(window.innerHeight-r.height)/2,i.left=(window.innerWidth-r.width)/2,this.closeDialog(),this.isDevice=!1):(i.top=P.Browser.isIE?window.pageYOffset+t.top:window.scrollY+t.top,i.left=this.getCMenuYPosition(this.dlg)),this.menuObj.open(i.top,i.left,e.target)),Gh(this.parent.element,this.menuObj.element.parentElement)))},l.prototype.contextKeyDownHandler=function(e){var t;"Tab"===e.key&&e.shiftKey||"Tab"===e.key?(e.preventDefault(),t=Array.from(this.menuObj.element.querySelectorAll('[tabindex]:not([tabindex="-1"]), .e-menu-item:not(.e-disabled):not(.e-separator)')),this.focusNextOrPrevElement(e,t,"e-focused")):"ArrowLeft"!==e.key&&"Escape"!==e.key||(e.preventDefault(),this.menuObj.close(),this.focusedMenuItem=null,document.querySelector(".e-submenu.e-menu-item").classList.remove("e-selected"),document.querySelector(".e-submenu.e-menu-item").focus())},l.prototype.ensureTextFilter=function(){var e,t=this.existingPredicate[this.options.field];return t&&2===t.length?e="greaterthanorequal"===t[0].operator&&"lessthanorequal"===t[1].operator?"between":"customfilter":t&&1===t.length&&(this.optrData=this.customFilterOperators[this.options.type+"Operator"],e=t[0].operator),e},l.prototype.preventClose=function(e){var t;this.options&&this.options.isResponsiveFilter&&e.event?(t=(t=e.event.target).classList.contains("e-resfilterback")||t.classList.contains("e-res-back-btn")||t.classList.contains("e-menu-item"),e.cancel=!t):e.event instanceof MouseEvent&&e.event.target.classList.contains("e-submenu")&&(e.cancel=!0)},l.prototype.getContextBounds=function(){return this.menuObj.element.style.display="block",this.menuObj.element.getBoundingClientRect()},l.prototype.getCMenuYPosition=function(e){var t=this.getContextBounds().width,i=e.getBoundingClientRect(),n=i.right+t-this.parent.element.clientWidth,e=(e=e.offsetWidth-e.clientWidth)?1+e:0;return n<1?i.right+1-e:i.left-t-1+e},l.prototype.openDialog=function(e){var t,i=this;this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e),e.cancel||(this.dialogObj.dataBind(),t=this.existingPredicate[e.field]&&this.existingPredicate[e.field].length||this.options.filteredColumns.filter(function(e){return i.options.field===e.field}).length,this.createMenu(e.type,0<t,1===t||2===t,e),this.dlg.insertBefore(this.menu,this.dlg.firstChild),this.dlg.classList.add("e-excelfilter"),this.parent.enableRtl&&this.dlg.classList.add("e-rtl"),this.dlg.classList.remove("e-checkboxfilter"),this.cmenu=this.parent.createElement("ul",{className:"e-excel-menu"}),this.dlg.querySelectorAll(".e-menu-item").forEach(function(e){e.scrollWidth>e.clientWidth&&e.setAttribute("title",e.textContent)}),e.column.showColumnMenu&&this.parent.notify(bi,{}),this.wireExEvents())},l.prototype.closeDialog=function(){this.destroy()},l.prototype.selectHandler=function(e){e.item&&(this.parent.notify(tr,{}),this.menuItem=e.item,this.closeDialog(),this.renderDialogue(e))},l.prototype.renderDialogue=function(e){var l=this,e=e?e.element:void 0,t=this.options.field,i=!P.isNullOrUndefined(t)&&ch(t),n=!P.isNullOrUndefined(t)&&uh(t),r=this.parent.createElement("div",{className:"e-xlfl-maindiv",id:i?n+"-xlflmenu":t+"-xlflmenu"});this.dlgDiv=this.parent.createElement("div",{className:"e-xlflmenu",id:i?n+"-xlfldlg":t+"-xlfldlg"}),(this.options.isResponsiveFilter?document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv"):this.parent.element).appendChild(this.dlgDiv),this.dlgObj=new L.Dialog({header:this.getLocalizedLabel("CustomFilter"),isModal:!0,overlayClick:this.removeDialog.bind(this),showCloseIcon:!0,locale:this.parent.locale,closeOnEscape:!0,target:document.body,visible:!1,enableRtl:this.parent.enableRtl,open:function(){for(var e=[].slice.call(l.dlgObj.element.querySelectorAll("table.e-xlfl-table tr.e-xlfl-fields")),t=0;t<e.length;t++){var i=e[t].children[1].querySelector(".e-control"),n=e[t].querySelector(".e-dropdownlist.e-control").ej2_instances[0];"isempty"===n.value||"isnotempty"===n.value||"isnull"===n.value||"isnotnull"===n.value?i.ej2_instances[0].enabled=!1:i&&!P.isNullOrUndefined(i.getAttribute("disabled"))&&(i.ej2_instances[0].enabled=!0)}var r,s,o,a=l.dlgObj.element.querySelector("table.e-xlfl-table>tr");l.options.column.filterTemplate&&(r=ch(l.options.column.field)?uh(l.options.column.field):l.options.column.field,s=l.parent.isReact&&"string"!=typeof l.options.column.filterTemplate,o=l.parent.parentDetails&&l.parent.parentDetails.parentInstObj&&l.parent.parentDetails.parentInstObj.isReact,s||o?l.parent.renderTemplates(function(){a.querySelector("#"+r+"-xlfl-frstvalue").focus()}):a.querySelector("#"+r+"-xlfl-frstvalue").focus())},close:this.removeDialog.bind(this),created:this.createdDialog.bind(this,e,t),buttons:[{click:this.filterBtnClick.bind(this,t),buttonModel:{content:this.getLocalizedLabel("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-xlfl-okbtn "+this.parent.cssClass:"e-xlfl-okbtn"}},{click:this.removeDialog.bind(this),buttonModel:{content:this.getLocalizedLabel("CancelButton"),cssClass:this.parent.cssClass?"e-xlfl-cancelbtn "+this.parent.cssClass:"e-xlfl-cancelbtn"}}],content:r,width:430,animationSettings:{effect:"None"},cssClass:this.parent.cssClass||""});this.dlgObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dlgDiv.setAttribute("aria-label",this.getLocalizedLabel("CustomFilterDialogARIA")),this.childRefs.unshift(this.dlgObj),this.dlgObj.appendTo(this.dlgDiv)},l.prototype.renderResponsiveDialog=function(){var e;this.options.isResponsiveFilter&&((e=document.querySelector(".e-row-responsive-filter"))&&e.classList.remove("e-row-responsive-filter"),this.dlgObj.buttons=[{}],this.dlgObj.header=void 0,this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-xl-customfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.showCloseIcon=!1)},l.prototype.removeDialog=function(){this.parent.notify(ir,{}),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&Dp(this.parent,["filterTemplate"]),this.removeObjects(this.childRefs),P.remove(this.dlgDiv),this.parent.notify(Jn,{})},l.prototype.createdDialog=function(e,t){this.renderCustomFilter(e,t),this.dlgObj.element.style.left="0px",this.options.isResponsiveFilter?(e=document.querySelector(".e-responsive-dialog > .e-dlg-header-content").offsetHeight+4,this.dlgObj.element.style.top=e+"px"):this.dlgObj.element.style.top="0px",!this.options.isResponsiveFilter&&P.Browser.isDevice&&window.innerWidth<440&&(this.dlgObj.element.style.width="90%"),this.parent.notify(Yi,{column:t,dialog:this.dialogObj}),this.dlgObj.show(),Gh(this.parent.element,this.dlgObj.element.parentElement)},l.prototype.renderCustomFilter=function(e,t){var i=this.dlgObj.element.querySelector(".e-xlfl-maindiv"),n=this.parent.createElement("div",{innerHTML:this.getLocalizedLabel("ShowRowsWhere"),className:"e-xlfl-dlgfields"}),n=(i.appendChild(n),this.parent.createElement("div",{innerHTML:this.options.displayName,className:"e-xlfl-fieldset"}));i.appendChild(n),this.renderFilterUI(t,i)},l.prototype.filterBtnClick=function(e){var t,i=!P.isNullOrUndefined(e)&&ch(e),n=!P.isNullOrUndefined(e)&&uh(e),i=i?n:e,n=this.dlgDiv.querySelector("#"+i+"-xlfl-frstvalue").ej2_instances[0],e=this.dlgDiv.querySelector("#"+i+"-xlfl-frstoptr").ej2_instances[0],r=this.dlgDiv.querySelector("#"+i+"-xlfl-secndvalue").ej2_instances[0],s=this.dlgDiv.querySelector("#"+i+"-xlfl-secndoptr").ej2_instances[0];"string"===this.options.type&&(t=this.dlgDiv.querySelector("#"+i+"-xlflmtcase").ej2_instances[0].checked);i=this.dlgDiv.querySelector("#"+i+"e-xlfl-frstpredicate").ej2_instances[0].checked?"and":"or";null===r.value&&(i="or"),this.filterByColumn(this.options.field,e.value,n.value,i,t,this.options.ignoreAccent,s.value,r.value),this.removeDialog()},l.prototype.filterByColumn=function(e,t,i,n,r,s,o,a){var l=this.parent.getColumnByField?this.parent.getColumnByField(e):this.options.column,h=this.isForeignColumn(l)?l.foreignKeyValue:e,p=[],e={instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:i,arg4:n,arg5:r,arg6:s,arg7:o,arg8:a,cancel:!1};this.parent.notify(tn,e),e.cancel||(p.push({field:h,predicate:n,matchCase:r,ignoreAccent:s,operator:t,value:e.arg3,type:this.options.type}),i=new A.Predicate(h,t.toLowerCase(),e.arg3,!r,s),P.isNullOrUndefined(a)||P.isNullOrUndefined(o)||(p.push({field:h,predicate:n,matchCase:r,ignoreAccent:s,operator:o,value:e.arg8,type:this.options.type}),i=i[""+n](h,o.toLowerCase(),a,!r,s)),t={action:"filtering",filterCollection:p,field:this.options.field,ejpredicate:i,actualPredicate:p},this.isForeignColumn(l)?this.foreignKeyFilter(t,p,i):this.options.handler(t))},l.prototype.renderOperatorUI=function(e,t,i,n,r){var s=this.parent.createElement("tr",{className:"e-xlfl-fields",attrs:{role:"row"}}),t=(t.appendChild(s),this.parent.createElement("td",{className:"e-xlfl-optr"})),o=(s.appendChild(t),this.parent.createElement("div",{className:"e-xlfl-optrdiv"})),a=!P.isNullOrUndefined(e)&&ch(e),l=!P.isNullOrUndefined(e)&&uh(e),a=this.parent.createElement("input",{id:a?l+i:e+i}),l=(o.appendChild(a),t.appendChild(o),this.options.type+"Operator"),e=this.customFilterOperators[l],i=(this.optrData=e,this.dropSelectedVal(this.options.column,n,r)),o=(this.menuItem&&((t=this.menuItem.text.slice(0,-3))!==this.getLocalizedLabel("CustomFilter")&&(i=r?t:void 0),t===this.getLocalizedLabel("Between"))&&(i=this.getLocalizedLabel(r?"GreaterThanOrEqual":"LessThanOrEqual")),this.options.column),l=new U.DropDownList(Kl({dataSource:e,fields:{text:"text",value:"value"},text:i,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass||null},o.filter.params)),n=(this.childRefs.unshift(l),{open:this.dropDownOpen.bind(this),change:this.dropDownValueChange.bind(this)});return Rp(a.id,[gs,fs],n,this),l.addEventListener(gs,this.eventHandlers[a.id][gs]),l.addEventListener(fs,this.eventHandlers[a.id][fs]),l.appendTo(a),{fieldElement:s,operator:this.getSelectedValue(i)}},l.prototype.removeHandlersFromComponent=function(e){e.element.classList.contains("e-dropdownlist")?Ep(e,[gs,fs],this):e.element.classList.contains("e-autocomplete")&&Ep(e,[p,ms],this)},l.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},l.prototype.dropDownValueChange=function(e){e.element.id.includes("-xlfl-frstoptr")?this.firstOperator=e.value.toString():this.secondOperator=e.value.toString();var t=e.element.closest(".e-xlfl-fields").children[1].querySelector(".e-control"),e=e.element.ej2_instances[0];"isempty"===e.value||"isnotempty"===e.value||"isnull"===e.value||"isnotnull"===e.value?t.ej2_instances[0].enabled=!1:P.isNullOrUndefined(t.getAttribute("disabled"))||(t.ej2_instances[0].enabled=!0)},l.prototype.getFilterUIInfo=function(){return{firstOperator:this.firstOperator,secondOperator:this.secondOperator,field:this.options.field}},l.prototype.getSelectedValue=function(e){e=new A.DataManager(this.optrData).executeLocal((new A.Query).where("text","equal",e));return P.isNullOrUndefined(e[0])?"":e[0].value},l.prototype.dropSelectedVal=function(e,t,i){t=t&&0<t.length?2===t.length?(i?t[0]:t[1]).operator:i?t[0].operator:void 0:i&&"string"===e.type&&!e.filter.operator?"startswith":i?e.filter.operator||"equal":void 0;return this.getSelectedText(t)},l.prototype.getSelectedText=function(e){e=new A.DataManager(this.optrData).executeLocal((new A.Query).where("value","equal",e));return P.isNullOrUndefined(e[0])?"":e[0].text},l.prototype.renderFilterUI=function(e,t){var i=this.existingPredicate[""+e],n=this.parent.createElement("table",{className:"e-xlfl-table",attrs:{role:"grid"}}),t=(t.appendChild(n),this.parent.createElement(us)),t=(t.innerHTML='<col style="width: 50%"></col><col style="width: 50%"></col>',n.appendChild(t),this.renderOperatorUI(e,n,"-xlfl-frstoptr",i,!0)),r=(this.firstOperator=t.operator,this.renderFlValueUI(e,t,"-xlfl-frstvalue",i,!0),this.parent.createElement("tr",{className:"e-xlfl-predicate",attrs:{role:"row"}}));n.appendChild(r),this.renderRadioButton(e,r,i),t=this.renderOperatorUI(e,n,"-xlfl-secndoptr",i,!1),this.secondOperator=t.operator,this.renderFlValueUI(e,t,"-xlfl-secndvalue",i,!1)},l.prototype.renderRadioButton=function(e,t,i){var n=this.parent.createElement("td",{className:"e-xlfl-radio",attrs:{colSpan:"2"}}),r=(t.appendChild(n),this.parent.createElement("div",{className:"e-xlfl-radiodiv",attrs:{style:"display: inline-block"}})),s=!P.isNullOrUndefined(e)&&ch(e),o=!P.isNullOrUndefined(e)&&uh(e),a=this.parent.createElement("input",{id:s?o+"e-xlfl-frstpredicate":e+"e-xlfl-frstpredicate",attrs:{type:"radio"}}),s=this.parent.createElement("input",{id:s?o+"e-xlfl-secndpredicate":e+"e-xlfl-secndpredicate",attrs:{type:"radio"}}),o=(r.appendChild(a),r.appendChild(s),n.appendChild(r),"string"===this.options.type&&this.renderMatchCase(e,t,n,"-xlflmtcase",i),new B.RadioButton({label:this.getLocalizedLabel("AND"),name:"default",checked:!0,enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass||""})),r=(this.childRefs.unshift(o),new B.RadioButton({label:this.getLocalizedLabel("OR"),name:"default",enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass||""}));this.childRefs.unshift(r),"and"===(i&&2===i.length?i[1].predicate:"and")?(o.checked=!0,r.checked=!1):(r.checked=!0,o.checked=!1),o.appendTo(a),r.appendTo(s),o.element.nextElementSibling.classList.add("e-xlfl-radio-and"),r.element.nextElementSibling.classList.add("e-xlfl-radio-or")},l.prototype.removeObjects=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];n&&!n.isDestroyed&&(this.removeHandlersFromComponent(n),n.destroy())}},l.prototype.renderFlValueUI=function(t,e,i,n,r){var s,o,a=this.parent.createElement("td",{className:"e-xlfl-value"}),l=(e.fieldElement.appendChild(a),!P.isNullOrUndefined(t)&&ch(t)),h=!P.isNullOrUndefined(t)&&uh(t),p=this.parent.createElement("div",{className:"e-xlfl-valuediv"}),d=this.options.filteredColumns.some(function(e){return t===e.field}),c=this.options.filteredColumns.filter(function(e){return e.field===t});this.options.column.filterTemplate?(o={},s=this.options.column,d&&i&&(o=this.getExcelFilterData(i,o,s,n,c)),d=this.parent.isReact&&"string"!=typeof this.options.column.filterTemplate,c=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,s=this.parent.element.id+s.uid+"filterTemplate",d||c?this.options.column.getFilterTemplate()(o,this.parent,"filterTemplate",s,null,null,p):(o=this.options.column.getFilterTemplate()(o,this.parent,"filterTemplate",s,null,null,null,this.parent.root),sh(p,o)),d||c?this.parent.renderTemplates(function(){p.querySelector("input").id=l?h+i:t+i,a.appendChild(p)}):((this.parent.isAngular?p.children[0]:p.querySelector("input")).id=l?h+i:t+i,a.appendChild(p))):(s=this.parent.createElement("input",{id:l?h+i:t+i}),p.appendChild(s),o=void a.appendChild(p),d=void 0,n&&0<n.length&&(o=(d=2===n.length?r?n[0]:n[1]:r?n[0]:void 0)&&d.operator===e.operator?d.value:void 0,P.isNullOrUndefined(o))&&(o=void 0),{string:this.renderAutoComplete.bind(this),number:this.renderNumericTextBox.bind(this),date:this.renderDate.bind(this),dateonly:this.renderDate.bind(this),datetime:this.renderDateTime.bind(this)}[this.options.type](this.options,t,s,o,this.parent.enableRtl))},l.prototype.getExcelFilterData=function(e,t,i,n,r){var s="-xlfl-frstvalue"===e?0:1;return("-xlfl-frstvalue"===e||1<r.length)&&(t={column:n instanceof Array?n[parseInt(s.toString(),10)]:n},e=this.options.column.columnData&&1<r.length?1===this.options.column.columnData.length?0:1:s,t[this.options.field]=i.foreignKeyValue?this.options.column.columnData[parseInt(e.toString(),10)][i.foreignKeyValue]:r[parseInt(e.toString(),10)].value,this.options.foreignKeyValue)&&(t[this.options.foreignKeyValue]=this.options.column.columnData[parseInt(e.toString(),10)][i.foreignKeyValue]),t},l.prototype.renderMatchCase=function(e,t,i,n,r){var s=this.parent.createElement("div",{className:"e-xlfl-matchcasediv",attrs:{style:"display: inline-block"}}),o=!P.isNullOrUndefined(e)&&ch(e),a=!P.isNullOrUndefined(e)&&uh(e),o=this.parent.createElement("input",{id:o?a+n:e+n,attrs:{type:"checkbox"}}),a=(s.appendChild(o),i.appendChild(s),!!(r&&0<r.length)&&(r&&2===r.length?r[1]:r[0]).matchCase),e=new B.CheckBox({label:this.getLocalizedLabel("MatchCase"),enableRtl:this.parent.enableRtl,checked:a,cssClass:this.parent.cssClass||""});this.childRefs.unshift(e),e.appendTo(o)},l.prototype.renderDate=function(e,t,i,n,r){var s=Ph(e.format,e.type)||e.format,s=new q.DatePicker(Kl({format:s,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:r,value:new Date(n),locale:this.parent.locale},e.column.filter.params));this.childRefs.unshift(s),s.appendTo(i)},l.prototype.renderDateTime=function(e,t,i,n,r){var s=Ph(e.format,e.type),s=new q.DateTimePicker(Kl({format:s,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:this.getLocalizedLabel("CustomFilterDatePlaceHolder"),width:"100%",enableRtl:r,value:new Date(n),locale:this.parent.locale},e.column.filter.params));this.childRefs.unshift(s),s.appendTo(i)},l.prototype.completeAction=function(e){e.result=wh(e.result)},l.prototype.renderNumericTextBox=function(e,t,i,n,r){r=new z.NumericTextBox(Kl({format:e.format,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:r,value:n,locale:this.parent.locale,cssClass:this.parent.cssClass||null},e.column.filter.params));this.childRefs.unshift(r),r.appendTo(i)},l.prototype.renderAutoComplete=function(e,t,i,n,r){var s=this.options.column,o=this.isForeignColumn(s),a=(o?s:e).dataSource,o={value:o?s.foreignKeyValue:t},l=new U.AutoComplete(Kl({dataSource:a instanceof A.DataManager?a:new A.DataManager(a),fields:o,query:this.getQuery(),sortOrder:"Ascending",locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:this.getLocalizedLabel("CustomFilterPlaceHolder"),enableRtl:r,text:n},s.filter.params)),r=(a&&"result"in a&&(o=Zh({requestType:"stringfilterrequest"},this.getQuery()),this.parent.trigger(Ai,o.state),o.deffered.promise.then(function(e){l.dataSource=new A.DataManager(e)})),this.childRefs.unshift(l),{actionComplete:this.acActionComplete(l,t),focus:this.acFocus(l,t,e,i)});Rp(i.id,[p,ms],r,this),l.addEventListener(ms,this.eventHandlers[i.id][ms]),l.addEventListener(p,this.eventHandlers[i.id][p]),l.appendTo(i)},l.prototype.acActionComplete=function(r,t){return function(e){var n=!P.isNullOrUndefined(t)&&ch(t);e.result=e.result.filter(function(e,t,i){return i.map(function(e){return n?vp(r.fields.value,e):e[r.fields.value]}).indexOf(n?vp(r.fields.value,e):e[r.fields.value])===t})}},l.prototype.acFocus=function(i,n,r,s){var o=this;return function(){var e=!P.isNullOrUndefined(n)&&ch(n),t=!P.isNullOrUndefined(n)&&uh(n),e=e?t:n;i.filterType=o.dlgDiv.querySelector("#"+e+(s.id===e+"-xlfl-frstvalue"?"-xlfl-frstoptr":"-xlfl-secndoptr")).ej2_instances[0].value,i.ignoreCase="string"!==r.type||!o.dlgDiv.querySelector("#"+e+"-xlflmtcase").ej2_instances[0].checked,i.filterType=P.isNullOrUndefined(i.filterType)?"equal":i.filterType}};var zp,Up,qp=l;function l(e,t){e=Up.call(this,e)||this;return e.childRefs=[],e.eventHandlers={},e.isDevice=!1,e.focusedMenuItem=null,e.customFilterOperators=t,e.isExcel=!0,e}jp.prototype.updateModel=function(){var e={field:this.columnName,direction:this.direction},t=this.parent.groupSettings.columns,i=!1;if(this.isMultiSort)-1<(a=this.getSortedColsIndexByField(this.columnName))&&this.sortSettings.columns.splice(a,1),this.sortSettings.columns.push(e),this.sortSettings.columns=this.sortSettings.columns;else if(t.length){for(var n=[],r=0,s=t.length;r<s;r++){var o,a=this.getSortedColsIndexByField(t[parseInt(r.toString(),10)],n);this.columnName===t[parseInt(r.toString(),10)]?(i=!0,n.push(e)):(o=this.getSortColumnFromField(t[parseInt(r.toString(),10)]),n.push({field:o.field,direction:o.direction,isFromGroup:o.isFromGroup}))}i||n.push(e),this.sortSettings.columns=n}else this.sortSettings.columns=[e];this.parent.dataBind(),this.lastSortedCol=this.columnName},jp.prototype.onActionComplete=function(e){var t=this.isRemove?{requestType:"sorting",type:p}:{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:p};this.isRemove=!1,this.parent.trigger(p,P.extend(e,t))},jp.prototype.sortColumn=function(e,t,i){var n=this.parent;!1===this.parent.getColumnByField(e).allowSorting||this.parent.isContextMenuOpen()?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:e}):(n.allowMultiSorting||(i=n.allowMultiSorting),this.isActionPrevent()?n.notify(ei,{instance:this,handler:this.sortColumn,arg1:e,arg2:t,arg3:i}):(this.backupSettings(),this.columnName=e,this.direction=t,this.isMultiSort=i,this.removeSortIcons(),this.updateSortedCols(e,i),this.updateModel()))},jp.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,O.ResponsiveDialogAction.isSort)},jp.prototype.backupSettings=function(){this.lastSortedCols=Gl(this.sortSettings.columns),this.lastCols=this.sortedColumns},jp.prototype.restoreSettings=function(){this.isModelChanged=!1,this.isMultiSort=!0,this.parent.setProperties({sortSettings:{columns:this.lastSortedCols}},!0),this.sortedColumns=this.lastCols,this.isModelChanged=!0},jp.prototype.updateSortedCols=function(e,t){if(!t)if(this.parent.allowGrouping)for(var i=0,n=this.sortedColumns.length;i<n;i++)this.parent.groupSettings.columns.indexOf(this.sortedColumns[parseInt(i.toString(),10)])<0&&(this.sortedColumns.splice(i,1),n--,i--);else this.sortedColumns.splice(0,this.sortedColumns.length);this.sortedColumns.indexOf(e)<0&&this.sortedColumns.push(e)},jp.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(this.contentRefresh&&(e=this.sortSettings.columns.length?{columnName:this.columnName,direction:this.direction,requestType:"sorting",type:y,target:this.currentTarget,cancel:!1}:{requestType:"sorting",type:y,cancel:!1,target:this.currentTarget},this.parent.notify(ut,e)),this.refreshSortSettings(),this.removeSortIcons(),this.addSortIcons())},jp.prototype.refreshSortSettings=function(){this.sortedColumns.length=0;for(var e=this.sortSettings.columns,t=0;t<e.length;t++)e[parseInt(t.toString(),10)].isFromGroup||this.sortedColumns.push(e[parseInt(t.toString(),10)].field)},jp.prototype.clearSorting=function(){var e=eh(this.sortSettings.columns);if(this.isActionPrevent())this.parent.notify(ei,{instance:this,handler:this.clearSorting});else for(var t=0,i=e.length;t<i;t++)this.removeSortColumn(e[parseInt(t.toString(),10)].field)},jp.prototype.isActionPrevent=function(){return yh(this.parent)},jp.prototype.removeSortColumn=function(e){var t=this.parent,i=this.sortSettings.columns;if(!(0===i.length&&this.sortedColumns.indexOf(e)<0))if(this.isActionPrevent())this.parent.notify(ei,{instance:this,handler:this.removeSortColumn,arg1:e});else{this.backupSettings(),this.removeSortIcons();for(var n={requestType:"sorting",type:y,target:this.currentTarget},r=0,s=i.length;r<s;r++)if(i[parseInt(r.toString(),10)].field===e&&!(t.allowGrouping&&-1<t.groupSettings.columns.indexOf(i[parseInt(r.toString(),10)].field))){this.sortedColumns.splice(this.sortedColumns.indexOf(i[parseInt(r.toString(),10)].field),1),i.splice(r,1),this.isRemove=!0,this.isModelChanged&&this.parent.notify(ut,n);break}n.cancel||this.addSortIcons()}},jp.prototype.getSortedColsIndexByField=function(e,t){for(var i=t||this.sortSettings.columns,n=0,r=i.length;n<r;n++)if(i[parseInt(n.toString(),10)].field===e)return n;return-1},jp.prototype.getModuleName=function(){return"sort"},jp.prototype.initialEnd=function(){if(this.parent.off(pt,this.initialEnd),this.parent.getColumns().length&&this.sortSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.isMultiSort=1<this.sortSettings.columns.length;for(var t=0,i=e.sortSettings.columns.slice();t<i.length;t++){var n=i[t];-1<this.sortedColumns.indexOf(n.field)&&this.sortColumn(n.field,n.direction,!0)}this.isMultiSort=!1,this.contentRefresh=!0}},jp.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:nr,handler:this.setFullScreenDialog},{event:kr,handler:this.renderResponsiveChangeAction},{event:pt,handler:this.initialEnd},{event:yt,handler:this.onActionComplete},{event:ct,handler:this.onPropertyChanged},{event:Lt,handler:this.clickHandler},{event:ft,handler:this.refreshSortIcons},{event:Mt,handler:this.keyPressed},{event:Ni,handler:this.cancelBeginEvent},{event:r,handler:this.destroy}],wp(this.parent,this.evtHandlers,!0,this))},jp.prototype.removeEventListener=function(){this.parent.isDestroyed||wp(this.parent,this.evtHandlers,!1)},jp.prototype.destroy=function(){this.isModelChanged=!1;var e=this.parent.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-sortdirect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none"),this.parent.refreshing||!this.parent.isDestroyed&&this.parent.allowSorting||this.clearSorting(),this.isModelChanged=!0,this.removeEventListener())},jp.prototype.cancelBeginEvent=function(e){"sorting"===e.requestType&&(this.restoreSettings(),this.refreshSortIcons(),this.isMultiSort=!0)},jp.prototype.clickHandler=function(e){var t,i=this.parent,n=(this.currentTarget=null,this.popUpClickHandler(e),P.closest(e.target,".e-headercell"));!n||e.target.classList.contains("e-grptogglebtn")||n.classList.contains("e-resized")||e.target.classList.contains("e-rhandler")||e.target.classList.contains("e-columnmenu")||e.target.classList.contains("e-filtermenudiv")||E(e.target,"e-stackedheadercell")||i.allowSelection&&i.selectionSettings.allowColumnSelection&&e.target.classList.contains("e-headercell")||"checkbox"!==(t=this.parent.getColumnByUid(n.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"))).type&&(this.initiateSort(n,e,t),P.Browser.isDevice)&&this.showPopUp(e),n&&n.classList.remove("e-resized"),(E(e.target,"e-excel-ascending")||E(e.target,"e-excel-descending"))&&(t=P.closest(e.target,".e-filter-popup").getAttribute("uid"),n=P.isNullOrUndefined(E(e.target,"e-excel-descending"))?"Ascending":"Descending",this.sortColumn(i.getColumnByUid(t).field,n,!1))},jp.prototype.keyPressed=function(e){var t,i=e.target;this.parent.isEdit||"enter"!==e.action&&"ctrlEnter"!==e.action&&"shiftEnter"!==e.action||!P.closest(i,".e-headercell")||(i=this.focus.getFocusedElement(),!P.isNullOrUndefined(i)&&i.classList.contains("e-headercell")&&i.querySelector(".e-headercelldiv")&&(t=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid")),this.initiateSort(i,e,t)))},jp.prototype.initiateSort=function(e,t,i){var n=this.parent,i=i.field,r=(this.currentTarget=t.target,e.getElementsByClassName("e-ascending").length?"Descending":"Ascending");this.isMultiSort=t.ctrlKey||this.enableSortMultiTouch||-1!==navigator.userAgent.indexOf("Mac OS")&&t.metaKey,t.shiftKey||this.sortSettings.allowUnsort&&e.getElementsByClassName("e-descending").length&&!(-1<n.groupSettings.columns.indexOf(i))?this.removeSortColumn(i):this.sortColumn(i,r,this.isMultiSort)},jp.prototype.showPopUp=function(e){var t=P.closest(e.target,".e-headercell");!this.parent.allowMultiSorting||P.isNullOrUndefined(t)&&!this.parent.isContextMenuOpen()||Yl(this.parent.element.querySelector(".e-gridpopup"),e,"e-sortdirect e-icons e-icon-sortdirect"+(1<this.sortedColumns.length?" e-spanclicked":""))},jp.prototype.popUpClickHandler=function(e){var t=e.target;P.closest(t,".e-headercell")||e.target.classList.contains(b)||P.closest(t,".e-gridpopup")?t.classList.contains("e-sortdirect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSortMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSortMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},jp.prototype.addSortIcons=function(){for(var e,t=this.parent,i=this.sortSettings.columns,n=this.parent.getColumns().map(function(e){return e.field}),r=0,s=i.length;r<s;r++)e=t.getColumnHeaderByField(i[parseInt(r.toString(),10)].field),-1===n.indexOf(i[parseInt(r.toString(),10)].field)||P.isNullOrUndefined(e)||(this.aria.setSort(e,i[parseInt(r.toString(),10)].direction.toLowerCase()),1<i.length&&e.querySelector(".e-headercelldiv").insertBefore(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(r+1).toString()}),e.querySelector(".e-headertext")),e=e.querySelector(".e-sortfilterdiv"),"Ascending"===i[parseInt(r.toString(),10)].direction?P.classList(e,["e-ascending","e-icon-ascending"],[]):P.classList(e,["e-descending","e-icon-descending"],[]))},jp.prototype.removeSortIcons=function(e){for(var t,i=this.parent,n=this.sortSettings.columns,r=this.parent.getColumns().map(function(e){return e.field}),s=e||0,o=P.isNullOrUndefined(e)?n.length:e+1;s<o;s++)t=i.getColumnHeaderByField(n[parseInt(s.toString(),10)].field),P.isNullOrUndefined(t)||i.allowGrouping&&-1<i.groupSettings.columns.indexOf(n[parseInt(s.toString(),10)].field)&&!t.querySelector(".e-sortfilterdiv")||-1!==r.indexOf(n[parseInt(s.toString(),10)].field)&&(this.aria.setSort(t,"none"),P.classList(t.querySelector(".e-sortfilterdiv"),[],["e-descending","e-icon-descending","e-ascending","e-icon-ascending"]),t.querySelector(".e-sortnumber"))&&t.querySelector(".e-headercelldiv").removeChild(t.querySelector(".e-sortnumber"))},jp.prototype.getSortColumnFromField=function(e){for(var t=0,i=this.sortSettings.columns.length;t<i;t++)if(this.sortSettings.columns[parseInt(t.toString(),10)].field===e)return this.sortSettings.columns[parseInt(t.toString(),10)];return!1},jp.prototype.updateAriaAttr=function(){for(var e=this.parent.getColumns().map(function(e){return e.field}),t=0,i=this.sortedColumns;t<i.length;t++){var n,r=i[t];-1!==e.indexOf(r)&&(n=this.parent.getColumnHeaderByField(r),this.aria.setSort(n,this.getSortColumnFromField(r).direction))}},jp.prototype.refreshSortIcons=function(){this.removeSortIcons(),this.isMultiSort=!0,this.removeSortIcons(),this.addSortIcons(),this.isMultiSort=!1,this.updateAriaAttr()},jp.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action},jp.prototype.showCustomSort=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog()};var Hp=jp;function jp(e,t,i,n){this.contentRefresh=!0,this.isModelChanged=!0,this.aria=new Ks,this.currentTarget=null,this.parent=e,this.sortSettings=t,this.sortedColumns=i,this.serviceLocator=n,this.focus=n.getService("focus"),this.addEventListener(),this.setFullScreenDialog()}Gp.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},Gp.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()},Gp.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),n=document.createDocumentFragment();i.innerHTML="";for(var r=1;r<=t.pageCount;r++)e=P.createElement("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{tabindex:"-1","aria-label":t.getLocalizedLabel("Page")+r+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"),href:"#"}}),t.currentPage===r&&(P.classList(e,["e-currentitem","e-active"],["e-pager-default"]),e.setAttribute("aria-current","page")),n.appendChild(e);i.appendChild(n),this.links=[].slice.call(i.childNodes)},Gp.prototype.wireEvents=function(){P.EventHandler.add(this.pagerElement,"click",this.clickHandler,this),P.EventHandler.add(this.pagerElement,"auxclick",this.auxiliaryClickHandler,this)},Gp.prototype.unwireEvents=function(){P.EventHandler.remove(this.pagerModule.element,"click",this.clickHandler),P.EventHandler.remove(this.pagerModule.element,"auxclick",this.auxiliaryClickHandler)},Gp.prototype.destroy=function(){this.unwireEvents()},Gp.prototype.refreshAriaAttrLabel=function(){for(var e=this.pagerModule,t=e.element.querySelector(".e-numericcontainer").querySelectorAll("a"),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].hasAttribute("aria-label")&&t[parseInt(i.toString(),10)].hasAttribute("index")&&t[parseInt(i.toString(),10)].setAttribute("aria-label",e.getLocalizedLabel("Page")+t[parseInt(i.toString(),10)].getAttribute("index")+e.getLocalizedLabel("Of")+e.totalPages+e.getLocalizedLabel("Pages"))},Gp.prototype.renderNumericContainer=function(){this.element=P.createElement("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(P.createElement("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},Gp.prototype.renderFirstNPrev=function(e){this.first=P.createElement("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1",role:"button"}}),this.prev=P.createElement("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1",role:"button"}}),P.append([this.first,this.prev],e)},Gp.prototype.renderPrevPagerSet=function(e){var t=P.createElement("div");this.PP=P.createElement("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.PP),e.appendChild(t)},Gp.prototype.renderNextPagerSet=function(e){var t=P.createElement("div");this.NP=P.createElement("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.NP),e.appendChild(t)},Gp.prototype.renderNextNLast=function(e){this.next=P.createElement("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1",role:"button"}}),this.last=P.createElement("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1",role:"button"}}),P.append([this.next,this.last],e)},Gp.prototype.clickHandler=function(e){var t=this.pagerModule;return this.target=e.target,this.target.classList.contains("e-numericitem")&&e.preventDefault(),t.previousPageNo=t.currentPage,this.target.classList.contains("e-disable")||P.isNullOrUndefined(this.target.getAttribute("index"))||(t.currentPage=parseInt(this.target.getAttribute("index"),10),this.pagerModule.isInteracted=!0,t.dataBind()),!1},Gp.prototype.auxiliaryClickHandler=function(e){this.target=e.target,this.target.classList.contains("e-numericitem")&&1===e.button&&e.preventDefault()},Gp.prototype.updateLinksHtml=function(){var e,t=this.pagerModule,i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');t.currentPage=1===t.totalPages?1:t.currentPage,t.currentPage>t.totalPages&&t.totalPages&&(t.currentPage=t.totalPages),e=parseInt((t.currentPage/t.pageCount).toString(),10),t.currentPage%t.pageCount==0&&0<e&&(e-=1);for(var n=0;n<t.pageCount;n++){if(t.isPagerResized){var r=this.pagerElement.querySelector(".e-focus"),r=this.target||r||null,s=!1,o=!1,a=!1,l=!1,h=!1,p=!1,d=!1;if(r){var c=r.classList;if(c.contains("e-icons"))switch(!0){case c.contains("e-prev"):s=!0;break;case c.contains("e-next"):o=!0;break;case c.contains("e-first"):a=!0;break;case c.contains("e-last"):l=!0}else if(c.contains("e-numericitem"))switch(!0){case c.contains("e-np"):p=!0;break;case c.contains("e-pp"):d=!0;break;default:h=c.contains("e-numericitem")}}var u=l||"End"===this.pagerModule.keyAction,i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),r=Array.from(i).some(function(e){return parseInt(e.getAttribute("index"),10)===t.currentPage}),r=a||"Home"===this.pagerModule.keyAction?1+n:l||"End"===this.pagerModule.keyAction?e*t.pageCount+1+n:o||"ArrowRight"===this.pagerModule.keyAction||s||"ArrowLeft"===this.pagerModule.keyAction?r?parseInt(i[0].getAttribute("index"),10)+n:s||"ArrowLeft"===this.pagerModule.keyAction?parseInt(this.PP.getAttribute("index"),10)+n:t.currentPage+n:p||d?t.currentPage+n:h?parseInt(i[0].getAttribute("index"),10)+n:e*t.pageCount+1+n}else r=e*t.pageCount+1+n;r<=t.totalPages?(this.links[parseInt(n.toString(),10)].classList.remove("e-hide"),this.links[parseInt(n.toString(),10)].style.display="",this.links[parseInt(n.toString(),10)].setAttribute("index",r.toString()),this.links[parseInt(n.toString(),10)].innerHTML=t.customText?t.customText+r:r.toString(),t.currentPage!==r?this.links[parseInt(n.toString(),10)].classList.add("e-pager-default"):this.links[parseInt(n.toString(),10)].classList.remove("e-pager-default")):(this.links[parseInt(n.toString(),10)].innerHTML=t.customText?t.customText+r:r.toString(),this.links[parseInt(n.toString(),10)].style.display="none"),P.classList(this.links[parseInt(n.toString(),10)],[],["e-currentitem","e-active"]),this.links[parseInt(n.toString(),10)].removeAttribute("aria-current")}P.attributes(this.first,{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),P.attributes(this.pagerElement.querySelector(".e-mfirst"),{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),P.attributes(this.last,{index:t.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),P.attributes(this.pagerElement.querySelector(".e-mlast"),{index:t.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),P.attributes(this.prev,{index:(t.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),P.attributes(this.pagerElement.querySelector(".e-mprev"),{index:(t.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),P.attributes(this.next,{index:(t.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")}),P.attributes(this.pagerElement.querySelector(".e-mnext"),{index:(t.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});var g=this.pagerModule.isPagerResized&&i.length?u?parseInt(i[0].getAttribute("index"),10)-t.avgNumItems:parseInt(i[0].getAttribute("index"),10)-i.length:parseInt(this.links[0].getAttribute("index"),10)-t.pageCount,g=(P.attributes(this.PP,{index:g<1?"1":g.toString(),title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip")}),this.pagerModule.isPagerResized&&i.length?parseInt(i[i.length-1].getAttribute("index"),10):parseInt(this.links[this.links.length-1].getAttribute("index"),10));P.attributes(this.NP,{index:(g+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip")}),this.target=void 0},Gp.prototype.updateStyles=function(){var e,t=this;this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&(e=this.links.findIndex(function(e){return e.getAttribute("index")===t.pagerModule.currentPage.toString()}),e=this.pagerModule.isPagerResized&&-1!==e?e:(this.pagerModule.currentPage-1)%this.pagerModule.pageCount,P.classList(this.links[parseInt(e.toString(),10)],["e-currentitem","e-active"],[]),this.links[parseInt(e.toString(),10)].setAttribute("aria-current","page"))},Gp.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],n=["e-prevpagedisabled","e-disable"];0<this.pagerModule.totalPages&&1<this.pagerModule.currentPage?(P.classList(this.prev,i,n),P.classList(this.first,e,t),P.classList(this.pagerElement.querySelector(".e-mfirst"),e,t),P.classList(this.pagerElement.querySelector(".e-mprev"),i,n)):(P.classList(this.prev,n,i),P.classList(this.first,t,e),P.classList(this.pagerElement.querySelector(".e-mprev"),n,i),P.classList(this.pagerElement.querySelector(".e-mfirst"),t,e))},Gp.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount||this.pagerModule.isPagerResized&&this.links.findIndex(function(e){return 1===parseInt(e.getAttribute("index"),10)})?P.classList(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):P.classList(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},Gp.prototype.updateNextPagerSetStyles=function(){var t=this.pagerModule,e=this.links[0].innerHTML.replace(t.customText,""),i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');!e.length||!this.links.length||parseInt(e,10)+t.pageCount>t.totalPages||t.isPagerResized&&Array.from(i).some(function(e){return parseInt(e.getAttribute("index"),10)===t.totalPages})?P.classList(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):P.classList(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},Gp.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],n=["e-nextpagedisabled","e-disable"],r=this.pagerModule;r.currentPage===r.totalPages||0===r.totalRecordsCount?(P.classList(this.last,t,e),P.classList(this.next,n,i),P.classList(this.pagerElement.querySelector(".e-mlast"),t,e),P.classList(this.pagerElement.querySelector(".e-mnext"),n,i)):(P.classList(this.last,e,t),P.classList(this.next,i,n),P.classList(this.pagerElement.querySelector(".e-mlast"),e,t),P.classList(this.pagerElement.querySelector(".e-mnext"),i,n))};var Vp=Gp;function Gp(e){this.pagerModule=e}Wp.prototype.render=function(){var e=P.createElement("div",{className:"e-parentmsgbar"});this.pageNoMsgElem=P.createElement("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=P.createElement("span",{className:"e-pagecountmsg",styles:"textalign:right"}),P.append([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},Wp.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.classList.remove("e-hide")},Wp.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},Wp.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},Wp.prototype.destroy=function(){},Wp.prototype.format=function(e,t){for(var i,n=RegExp,r=0;r<t.length;r++)i=new n("\\{"+r+"\\}","gm"),e=e.replace(i,t[parseInt(r.toString(),10)].toLocaleString(this.pagerModule.locale));return e};var _p=Wp;function Wp(e){this.pagerModule=e}Kp=function(e,t){return(Kp=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var Kp,Qp,Ea=function(e,t){function i(){this.constructor=e}Kp(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},e=function(e,t,i,n){var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(o=(s<3?r(o):3<s?r(t,i,o):r(t,i))||o);return 3<s&&o&&Object.defineProperty(t,i,o),o},Xp=(Qp=P.Component,Ea(h,Qp),h.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this],name:"ExternalMessage"}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this],name:"PagerDropDown"}),e},h.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"},this.containerModule=new Vp(this),this.pagerMessageModule=new _p(this)},h.prototype.render=function(){var e;this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),this.cssClass&&(-1!==this.cssClass.indexOf(" ")?P.addClass([this.element],this.cssClass.split(" ")):P.addClass([this.element],[this.cssClass])),this.hasParent||this.element.setAttribute("tabindex","0"),this.enableQueryString&&(e=new URL(window.location.href).searchParams.get("page"),!P.isNullOrUndefined(e))&&0<window.location.href.indexOf("?page=")&&(e=parseInt(e,10),this.hasParent&&this.parent.setProperties({pageSettings:{currentPage:e}},!0),this.currentPage=e),this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()},h.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},h.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["pagerTemplate"])),this.removeListener(),this.unwireEvents(),Qp.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate())||(this.element.innerHTML="")},h.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},h.prototype.getModuleName=function(){return"pager"},h.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed)if(e.pageSize===this.getLocalizedLabel("All")&&t.pageSize===this.totalRecordsCount)this.pageSize=this.totalRecordsCount;else{e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var i=0,n=Object.keys(e);i<n.length;i++)switch(n[i]){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t),this.isCancel&&this.hasParent&&this.parent.setProperties({pageSettings:{pageSize:t.pageSize}},!0)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}this.resizePager()}},h.prototype.wireEvents=function(){this.hasParent||(P.EventHandler.add(this.element,"keydown",this.keyPressHandler,this),P.EventHandler.add(document.body,"keydown",this.keyDownHandler,this)),P.EventHandler.add(this.element,"focusin",this.onFocusIn,this),P.EventHandler.add(this.element,"focusout",this.onFocusOut,this),P.EventHandler.add(window,"resize",this.resizePager,this),P.EventHandler.add(window,"load",this.resizePager,this)},h.prototype.unwireEvents=function(){this.hasParent||(P.EventHandler.remove(this.element,"keydown",this.keyPressHandler),P.EventHandler.remove(document.body,"keydown",this.keyDownHandler)),P.EventHandler.remove(this.element,"focusin",this.onFocusIn),P.EventHandler.remove(this.element,"focusout",this.onFocusOut),P.EventHandler.remove(window,"resize",this.resizePager),P.EventHandler.remove(window,"load",this.resizePager)},h.prototype.onFocusIn=function(e){var t=this.getFocusedTabindexElement();P.isNullOrUndefined(t)&&(t=e.target,e=this.getDropDownPage(),this.hasParent||(this.element.tabIndex=-1),t!==this.element||this.hasParent?t===this.element?this.element.tabIndex=0:t===e||t.classList.contains("e-disable")||this.addFocus(t,!0):(e=this.getFocusablePagerElements(this.element,[]),this.addFocus(e[0],!0)))},h.prototype.onFocusOut=function(e){var t=this.getFocusedElement(),i=this.getDropDownPage();P.isNullOrUndefined(t)||this.removeFocus(t,!0),this.pageSizes&&i&&i.classList.contains("e-input-focus")&&this.removeFocus(i,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)},h.prototype.keyDownHandler=function(e){e.altKey&&74===e.keyCode&&0<(e=this.getFocusablePagerElements(this.element,[])).length&&e[0].focus()},h.prototype.keyPressHandler=function(e){var t=P.extend(e,{cancel:!1});this.notify(Mt,t),!0===t.cancel&&e.stopImmediatePropagation()},h.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(Mt,this.onKeyPress,this)},h.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(Mt,this.onKeyPress)},h.prototype.onKeyPress=function(e){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(e):(e.preventDefault(),this.setPagerFocus()))},h.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},h.prototype.setPagerContainerFocus=function(){this.element.focus()},h.prototype.setPagerFocus=function(){var e=this.getFocusablePagerElements(this.element,[]);0<e.length&&e[0].focus()},h.prototype.setPagerFocusForActiveElement=function(){var e=this.getActiveElement();e&&e.focus()},h.prototype.setTabIndexForFocusLastElement=function(){var e=this.getFocusablePagerElements(this.element,[]),t=this.getDropDownPage();this.pageSizes&&t&&!P.isNullOrUndefined(t.offsetParent)?t.tabIndex=0:0<e.length&&(e[e.length-1].tabIndex=0)},h.prototype.changePagerFocus=function(e){this.keyAction=e.key,e.shiftKey&&9===e.keyCode?this.changeFocusByShiftTab(e):9===e.keyCode?this.changeFocusByTab(e):13===e.keyCode||32===e.keyCode?this.navigateToPageByEnterOrSpace(e):37!==e.keyCode&&39!==e.keyCode&&35!==e.keyCode&&36!==e.keyCode||this.navigateToPageByKey(e),this.keyAction=""},h.prototype.getFocusedTabindexElement=function(){for(var e,t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];if(n&&(n.classList.contains("e-focused")||n.classList.contains("e-input-focus"))){e=n;break}}return e},h.prototype.changeFocusByTab=function(e){var t=this.getFocusedTabindexElement(),i=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(0<i.length)if(this.pageSizes&&n&&t===i[i.length-1])n.tabIndex=0;else for(var r=0;r<i.length;r++)if(t===i[parseInt(r.toString(),10)]){var s=r+1;s<i.length&&(e.preventDefault(),i[parseInt(s.toString(),10)].focus());break}},h.prototype.changeFocusByShiftTab=function(e){var t=this.getFocusedTabindexElement(),i=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(this.pageSizes&&n&&n.classList.contains("e-input-focus"))n.tabIndex=-1,this.addFocus(i[i.length-1],!0);else if(0<i.length)for(var r=0;r<i.length;r++)if(t===i[parseInt(r.toString(),10)]){var s=r-1;0<=s?(e.preventDefault(),i[parseInt(s.toString(),10)].focus()):this.hasParent&&(s=(s=this.parent.getRows())[s.length-1].lastChild,e.preventDefault(),s.focus(),this.firstPagerFocus=!0);break}},h.prototype.checkFirstPagerFocus=function(){return!!this.firstPagerFocus&&!(this.firstPagerFocus=!1)},h.prototype.navigateToPageByEnterOrSpace=function(e){var t,i,n,r=this.getFocusedElement();r&&(this.goToPage(parseInt(r.getAttribute("index"),10)),t=this.getActiveElement(),i=this.getClass(r),n=this.getElementByClass(i),"e-first"!==i&&"e-prev"!==i&&"e-next"!==i&&"e-last"!==i&&"e-pp"!==i&&"e-np"!==i||!n||n.classList.contains("e-disable")?this.checkFocusInAdaptiveMode(r)?this.changeFocusInAdaptiveMode(r):t&&t.focus():n.focus())},h.prototype.navigateToPageByKey=function(e){var e=37===e.keyCode?".e-prev":39===e.keyCode?".e-next":35===e.keyCode?".e-last":36===e.keyCode?".e-first":"",e=this.element.querySelector(e),t=this.getFocusedElement();P.isNullOrUndefined(e)||!e.hasAttribute("index")||isNaN(parseInt(e.getAttribute("index"),10))||(this.goToPage(parseInt(e.getAttribute("index"),10)),e=this.getActiveElement(),this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):e&&e.focus())},h.prototype.checkFocusInAdaptiveMode=function(e){e=this.getClass(e);return"e-mfirst"===e||"e-mprev"===e||"e-mnext"===e||"e-mlast"===e},h.prototype.changeFocusInAdaptiveMode=function(e){var e=this.getClass(e),t=this.getElementByClass(e);t&&t.classList.contains("e-disable")&&("e-mnext"===e||"e-mlast"===e?this.element.querySelector(".e-mprev").focus():this.setPagerFocus())},h.prototype.removeTabindexLastElements=function(){var e=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(1<e.length)for(var t=1;t<e.length;t++){var i=e[parseInt(t.toString(),10)];i&&(i.tabIndex=-1)}},h.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},h.prototype.getDropDownPage=function(){var e,t=this.element.querySelector(".e-pagerdropdown");return e=t?t.children[0]:e},h.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},h.prototype.getClass=function(e){for(var t,i=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],n=0;n<i.length;n++)if(e&&e.classList.contains(i[parseInt(n.toString(),10)]))return t=i[parseInt(n.toString(),10)];return t},h.prototype.getElementByClass=function(e){return this.element.querySelector("."+e)},h.prototype.getFocusablePagerElements=function(e,t){for(var i=e.children,n=t,r=0;r<i.length;r++){var s,o=i[parseInt(r.toString(),10)];0<o.children.length&&!o.classList.contains("e-pagesizes")?n=this.getFocusablePagerElements(o,n):!(s=i[parseInt(r.toString(),10)]).hasAttribute("tabindex")||o.classList.contains("e-disable")||"none"===o.style.display||P.isNullOrUndefined(o.offsetParent)||n.push(s)}return n},h.prototype.addFocus=function(e,t){P.isNullOrUndefined(e)||(t&&P.addClass([e],["e-focused","e-focus"]),e.tabIndex=0)},h.prototype.removeFocus=function(e,t){t&&P.removeClass([e],["e-focused","e-focus"]),e.tabIndex=-1},h.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},h.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.isInteracted=!1,this.dataBind())},h.prototype.setPageSize=function(e){this.pageSize=e,this.dataBind()},h.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},h.prototype.checkGoToPage=function(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),P.isNullOrUndefined(t)||(this.previousPageNo=t),this.previousPageNo!==e&&1<=e&&e<=this.totalPages},h.prototype.currentPageChanged=function(e,t){this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage===t.currentPage&&e.pageSize===t.pageSize||(e={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1,isInteracted:this.isInteracted},this.trigger("click",e),e.cancel?(this.isCancel=!0,t&&t.pageSize&&(this.setProperties({pageSize:t.pageSize},!0),this.pagerdropdownModule)&&(this.pagerdropdownModule.setDropDownValue("value",t.pageSize),this.pagerdropdownModule.dropDownListObject.text=t.pageSize+"")):(this.isCancel=!1,this.refresh()))},h.prototype.pagerTemplate=function(){var e,t;this.isReactTemplate()&&this.hasParent||(this.element.classList.add("e-pagertemplate"),this.compile(this.template),e={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},t=this.element.parentElement.id+"_template",this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(e,this,"pagerTemplate",t,null,null,this.element),this.renderReactTemplates()):(t=this.isVue?this.getPagerTemplate()(e,this,"pagerTemplate",null,null,null,null,this.root):this.getPagerTemplate()(e),sh(this.element,t)))},h.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},h.prototype.getPagerTemplate=function(){return this.templateFn},h.prototype.compile=function(t){if(t)try{"function"!=typeof t&&document.querySelectorAll(t).length?this.templateFn=P.compile(document.querySelector(t).innerHTML.trim()):this.templateFn=P.compile(t)}catch(e){this.templateFn=P.compile(t)}},h.prototype.refresh=function(){var e;this.template?this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),e=this.getFocusedTabindexElement(),this.containerModule.refresh(),this.removeTabindexLastElements(),e&&e.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(e)?this.changeFocusInAdaptiveMode(e):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement(),this.resizePager())},h.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},h.prototype.initLocalization=function(){this.localeObj=new P.L10n(this.getModuleName(),this.defaultConstants,this.locale)},h.prototype.updateQueryString=function(e){e=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:e},"",e)},h.prototype.getUpdatedURL=function(e,t,i){var n=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):(n="",-1!==e.indexOf("#")&&(n=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+i+n)},h.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(P.createElement("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(P.createElement("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},h.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(P.createElement("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(P.createElement("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},h.prototype.addAriaLabel=function(){var e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!P.Browser.isDevice)for(var t=0;t<e.length;t++){var i=this.element.querySelector(e[parseInt(t.toString(),10)]);i.setAttribute("aria-label",i.getAttribute("title"))}},h.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&"string"!=typeof this.template},h.prototype.calculateActualWidth=function(){for(var e=this.element.querySelectorAll(".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"),t=0,i=0;i<e.length;i++)"none"!==getComputedStyle(e[parseInt(i.toString(),10)]).display&&(t+=e[parseInt(i.toString(),10)].offsetWidth+parseFloat(getComputedStyle(e[parseInt(i.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(e[parseInt(i.toString(),10)]).marginRight));var n=this.element.querySelector(".e-pagercontainer");return t+=parseFloat(getComputedStyle(n).marginLeft)+parseFloat(getComputedStyle(n).marginRight)},e([P.Property(!(h.prototype.resizePager=function(){var t=this,e=this.element.classList.contains("e-pager")?getComputedStyle(this.element).getPropertyValue("border-style").includes("solid"):null;if(!this.template&&e){for(var i=this.element.querySelector(".e-pagercontainer"),e=this.calculateActualWidth(),n=this.element.clientWidth-parseFloat(getComputedStyle(this.element).paddingLeft)-parseFloat(getComputedStyle(this.element).paddingRight)-parseFloat(getComputedStyle(this.element).marginLeft)-parseFloat(getComputedStyle(this.element).marginRight),r=i.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),s=i.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])'),o=r.length,a=P.isNullOrUndefined(E(this.element,"e-bigger"))?5:10,l=i.querySelector(".e-np"),h=i.querySelector(".e-pp"),p=this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])'),d=0,c=(p.length&&(p.forEach(function(e){d+=e.offsetWidth}),this.averageDetailWidth=d/p.length),0),u=0;u<r.length;u++)c+=r[parseInt(u.toString(),10)].offsetWidth+parseFloat(getComputedStyle(r[parseInt(u.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(r[parseInt(u.toString(),10)]).marginRight);var g=c/r.length;if(0<n&&n-(g||0)<=e){this.isPagerResized=!0,this.currentPage!==this.totalPages&&P.classList(l,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]);for(var e=this.calculateActualWidth(),f=Math.abs(e-n),m=0===(m=Math.ceil(f/g))?1:m>r.length?r.length-1:m,u=1;u<=m;u++){var y=o-parseInt(u.toString(),10),r=i.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');1===this.currentPage||parseInt(r[Math.abs(y)].getAttribute("index"),10)!==this.currentPage&&parseInt(r[r.length-1].getAttribute("index"),10)!==this.currentPage||(y=0,P.classList(h,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])),r[Math.abs(y)]&&!r[Math.abs(y)].classList.contains("e-currentitem")&&r[Math.abs(y)].classList.add("e-hide")}if((r=i.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)')).length<=1&&p.length&&768<=window.innerWidth){var S=this.calculateActualWidth();if(n-a<S)for(var v=Math.floor((n-(S-d))/this.averageDetailWidth),v=p.length-v,u=0;u<(v>p.length?p.length:v);u++)p[parseInt(u.toString(),10)].classList.add("e-hide")}}else if(e<n&&s.length){var f=Math.abs(n-e),S=this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide");if(S.length&&f>this.averageDetailWidth+this.averageDetailWidth/4&&S[S.length-1].classList.remove("e-hide"),2*g<f&&!S.length&&768<=window.innerWidth)for(var C=(C=Math.floor(f/(g+a)))>s.length?s.length:C-1,n=Array.from(s).filter(function(e){return parseInt(e.getAttribute("index"),10)<t.currentPage}).sort(function(e,t){return parseInt(t.getAttribute("index"),10)-parseInt(e.getAttribute("index"),10)}),e=Array.from(s).filter(function(e){return parseInt(e.getAttribute("index"),10)>t.currentPage}),w=n.length&&n||e.length&&e,u=1;u<=C;u++){var b=w&&w[Math.abs(1-u)];b&&(b.classList.remove("e-hide"),b===w[w.length-1])&&(w=null)}}(r=i.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)')).length&&(parseInt(r[r.length-1].getAttribute("index"),10)===this.totalPages&&P.classList(l,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),1===parseInt(r[0].getAttribute("index"),10)&&P.classList(h,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),S=Array.from(r).some(function(e){return parseInt(e.getAttribute("index"),10)===t.totalPages}),f=parseInt(r[0].getAttribute("index"),10)-(S?this.avgNumItems:r.length),h.setAttribute("index",f<1?"1":f.toString()),l.setAttribute("index",(parseInt(r[r.length-1].getAttribute("index"),10)+1).toString()),this.avgNumItems=S?this.avgNumItems:r.length),this.element.offsetWidth<769&&"none"!==window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display")&&this.pageSizes?(this.element.querySelector(".e-pagesizes").classList.remove("e-hide"),this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide"),this.element.classList.add("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.element.offsetWidth<481?this.currentPage+" / "+this.totalPages:this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[0===this.totalRecordsCount?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" "):(this.element.classList.remove("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[0===this.totalRecordsCount?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" ")}}))],h.prototype,"enableQueryString",void 0),e([P.Property(!1)],h.prototype,"enableExternalMessage",void 0),e([P.Property(!0)],h.prototype,"enablePagerMessage",void 0),e([P.Property(12)],h.prototype,"pageSize",void 0),e([P.Property(10)],h.prototype,"pageCount",void 0),e([P.Property(1)],h.prototype,"currentPage",void 0),e([P.Property()],h.prototype,"totalRecordsCount",void 0),e([P.Property()],h.prototype,"externalMessage",void 0),e([P.Property(!1)],h.prototype,"pageSizes",void 0),e([P.Property()],h.prototype,"template",void 0),e([P.Property("")],h.prototype,"customText",void 0),e([P.Event()],h.prototype,"click",void 0),e([P.Property("")],h.prototype,"cssClass",void 0),e([P.Event()],h.prototype,"dropDownChanged",void 0),e([P.Event()],h.prototype,"created",void 0),e([P.NotifyPropertyChanges],h));function h(e,t,i){e=Qp.call(this,e,t)||this;return e.hasParent=!1,e.checkAll=!0,e.pageRefresh="pager-refresh",e.firstPagerFocus=!1,e.isCancel=!1,e.isInteracted=!1,e.parent=i,e}Jp.prototype.getModuleName=function(){return"pagerdropdown"},Jp.prototype.render=function(){var e=this.pagerModule,t=(this.pagerDropDownDiv=P.createElement("div",{className:"e-pagesizes"}),P.createElement("div",{className:"e-pagerdropdown"})),i=P.createElement("div",{className:"e-pagerconstant"}),n=P.createElement("input",{attrs:{type:"text",tabindex:"-1"}}),t=(this.pagerCons=P.createElement("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(n),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv),this.pagerModule.pageSizes),i=t.length?this.convertValue(t):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],r=this.pagerModule.pageSize;this.dropDownListObject=new U.DropDownList({dataSource:i,value:r.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(n),t.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=r,e.dataBind(),e.trigger("dropDownChanged",{pageSize:r}),this.addEventListener()},Jp.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.isCancel||this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage||void 0===this.pagerModule.isAllPage&&this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},Jp.prototype.refresh=function(){this.pagerCons&&(this.isPageSizeAll(this.pagerModule.pageSize)?(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerAllDropDown"),this.pagerCons.parentElement.classList.add("e-page-all")):(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerDropDown"),this.pagerCons.parentElement.classList.remove("e-page-all")),this.pagerDropDownDiv.classList.remove("e-hide"))},Jp.prototype.beforeValueChange=function(e){var t;"number"==typeof e.newProp.value&&(t=e.newProp.value.toString(),e.newProp.value=t)},Jp.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[parseInt(i.toString(),10)]=parseInt(t[parseInt(i.toString(),10)],10)?t[parseInt(i.toString(),10)].toString():""!==this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)])?this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)]):t[parseInt(i.toString(),10)];return t},Jp.prototype.isPageSizeAll=function(e){return("string"==typeof e&&e!==this.pagerModule.getLocalizedLabel("All")?parseInt(e,10):e)===this.pagerModule.totalRecordsCount||e===this.pagerModule.getLocalizedLabel("All")},Jp.prototype.setDropDownValue=function(e,t){var i;this.dropDownListObject&&(i=this.pagerModule.isAllPage,this.pagerModule.isAllPage=this.isPageSizeAll(t),this.pagerModule.checkAll=!(!i||!this.pagerModule.isAllPage),this.dropDownListObject[""+e]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t)},Jp.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},Jp.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},Jp.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),P.remove(this.pagerDropDownDiv))};var Yp=Jp;function Jp(e){this.pagerModule=e}$p.prototype.getModuleName=function(){return"externalMessage"},$p.prototype.render=function(){this.element=P.createElement("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}}),this.pagerModule.element.appendChild(this.element),this.refresh()},$p.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},$p.prototype.hideMessage=function(){P.isNullOrUndefined(this.element)||(this.element.style.display="none")},$p.prototype.showMessage=function(){this.element.style.display=""},$p.prototype.destroy=function(){this.element&&this.element.parentElement&&P.remove(this.element)};var Zp=$p;function $p(e){this.pagerModule=e}td.prototype.getModuleName=function(){return"pager"},td.prototype.render=function(){var e=this.parent,t=(this.pagerDestroy(),P.isNullOrUndefined(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"}),Kl({},P.extend({},Jl(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:e.enableRtl,locale:e.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]));t.cssClass=this.parent.cssClass||"",this.pagerObj=new Xp(t,void 0,this.parent),this.pagerObj.root=e.root||e,this.pagerObj.hasParent=!0,this.pagerObj.on(pr,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},td.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},td.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),n=this.element.querySelector(".e-numericcontainer"),r=n.querySelectorAll("a"),s=0;s<r.length;s++){this.parent.getContentTable()?r[parseInt(s.toString(),10)].setAttribute("aria-owns",this.parent.getContentTable().id+" "+(s+1)):r[parseInt(s.toString(),10)].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table "+(s+1));var o=this.parent.createElement("div");o.appendChild(r[parseInt(s.toString(),10)]),i.appendChild(o)}e.appendChild(i),t.replaceChild(e,n);for(var a=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],l=0;l<a.length;l++){var h=this.element.querySelector(a[parseInt(l.toString(),10)]);this.parent.getContentTable()&&h.setAttribute("aria-owns",this.parent.getContentTable().id+a[parseInt(l.toString(),10)].replace(".e-"," "))}}},td.prototype.dataReady=function(e){this.updateModel(e)},td.prototype.refresh=function(){this.pagerObj.refresh()},td.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},td.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},td.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count;var t="add"===e.action&&"save"===e.requestType||"batchsave"===e.requestType;this.pagerObj.isAllPage&&!t&&(this.parent.pageSettings.pageSize=this.parent.pageSettings.totalRecordsCount),t&&this.pagerObj.isAllPage&&e.count===this.pageSettings.pageSize&&this.pagerObj.setProperties({pageSize:e.count},!0),this.parent.dataBind()},td.prototype.onActionComplete=function(e){this.parent.trigger(p,P.extend(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:p}))},td.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.pagerObj[""+r]=t[""+r]}this.pagerObj.dataBind()}},td.prototype.clickHandler=function(e){var t,i,n=this.parent;this.isForceCancel||yh(n)&&!n.prevPageMoving&&!this.isCancel?(this.isForceCancel?this.isForceCancel=!1:(P.isNullOrUndefined(e.newProp)||P.isNullOrUndefined(e.newProp.pageSize)?e.currentPage&&(n.notify(ei,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=n.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:n.pageSettings.currentPage):(n.notify(ei,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.setProperties({pageSize:e.oldProp.pageSize},!0),this.parent.setProperties({pageSettings:{pageSize:e.oldProp.pageSize}},!0),this.pagerObj.setProperties({currentPage:n.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:n.pageSettings.currentPage},!0)),this.isForceCancel=!0,this.pagerObj.dataBind()),e.cancel=!0):(n.pageSettings.pageSize=this.pagerObj.pageSize,i={cancel:n.prevPageMoving=!1,requestType:"paging",previousPage:t=this.pageSettings.currentPage,currentPage:e.currentPage,pageSize:n.pageSettings.pageSize,type:y},this.isCancel||(this.pageSettings.currentPage=e.currentPage,this.parent.notify(ut,i),n.pageRequireRefresh=!1),i.cancel?(e.cancel=!0,this.parent.setProperties({pageSettings:{currentPage:t}},!0),this.pagerObj.setProperties({currentPage:t},!0),this.isCancel=!0):(this.isCancel=!1,this.parent.requestTypeAction="paging"))},td.prototype.keyPressHandler=function(e){e.action in id&&(e.preventDefault(),this.element.querySelector(id[e.action]).click())},td.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},td.prototype.appendToElement=function(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},td.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate())&&(this.pagerObj.updateTotalPages(),this.created())},td.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(ys,this.handlers.created.bind(this)),this.evtHandlers=[{event:at,handler:this.handlers.load},{event:lt,handler:this.handlers.end},{event:ht,handler:this.handlers.ready},{event:mt,handler:this.handlers.complete},{event:g,handler:this.handlers.updateLayout},{event:ct,handler:this.handlers.inboundChange},{event:Mt,handler:this.handlers.keyPress},{event:r,handler:this.destroy}],wp(this.parent,this.evtHandlers,!0,this))},td.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},td.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&"string"!=typeof this.pagerObj.template},td.prototype.renderReactPagerTemplate=function(){var e,t,i;!this.isInitialRender&&this.isReactTemplate()&&(e=void 0,this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template),t={currentPage:(t=this.parent.pageSettings).currentPage,pageSize:t.pageSize,pageCount:t.pageCount,totalRecordsCount:t.totalRecordsCount,totalPages:this.pagerObj.totalPages},i=this.parent.id+"_pagertemplate",this.parent.isReact?(this.pagerObj.templateFn(t,this.parent,"pagerTemplate",i,null,null,this.pagerObj.element),this.parent.renderTemplates()):(e=this.pagerObj.templateFn(t,this.parent,"pagerTemplate"),sh(this.pagerObj.element,e)))},td.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(ys,this.handlers.created),this.parent.off(pr,this.renderReactPagerTemplate),wp(this.parent,this.evtHandlers,!1))},td.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},td.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),P.remove(this.element))};var ed=td;function td(e,t){this.isInitialRender=!0,this.isCancel=!1,Xp.Inject(Zp,Yp),this.parent=e,this.pageSettings=t,this.addEventListener()}var id={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"};nd=function(e,t){return(nd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}nd(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(od,rd=_s),od.prototype.getGui=function(){return this.parent.createElement("div")},od.prototype.render=function(e,t){var i,n,r,s,o,a=this.parent.element.querySelector(".e-filterbar"),l=this.element.cloneNode(),h=this.getGui(),p=e.column;return a.appendChild(l),l.setAttribute("e-mappinguid",p.uid),p.filterTemplate?(a={},t&&(a[p.field]=t[p.field]),(a.column=p).visible?(n=this.parent.isReact&&"string"!=typeof p.filterTemplate,r=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,s=this.parent.element.id+p.uid+"filterTemplate",n||r?(p.getFilterTemplate()(a,this.parent,"filterTemplate",s,null,null,l),this.parent.renderTemplates()):sh(l,p.getFilterTemplate()(a,this.parent,"filterTemplate",s,null,null,null,this.parent.root))):l.classList.add("e-hide")):"checkbox"!==p.type?(!P.isNullOrUndefined(p.allowFiltering)&&!p.allowFiltering||P.isNullOrUndefined(p.filterBarTemplate)?(P.attributes(h,{class:"e-filterdiv e-fltrinputdiv"}),i=this.parent.createElement("input",{id:p.field+"_filterBarcell",className:"e-filtertext",attrs:{type:"search",title:p.headerText+e.attributes.title,value:t[e.column.field]||""}}),h.appendChild(i),o={element:i,floatLabelType:"Never",properties:{enableRtl:this.parent.enableRtl,showClearButton:!0,cssClass:this.parent.cssClass}},z.Input.createInput(o,this.parent.createElement)):(l.classList.add("e-fltrtemp"),P.attributes(h,{class:"e-fltrtempdiv"}),P.isNullOrUndefined(p.filterBarTemplate.create)?i=this.parent.createElement("input",{id:p.field+"_filterBarcell",className:"e-filterUi_input e-filtertext e-fltrTemp",attrs:{type:"search",title:p.headerText}}):(o={column:p,node:Element},"string"==typeof(i=(n="string"==typeof(n=p.filterBarTemplate.create)?P.getValue(n,window):n)(o))&&((r=this.parent.createElement("div")).innerHTML=i,i=r.firstChild),P.attributes(h,{class:"e-filterUi_input e-filtertext e-fltrTemp",title:p.headerText,id:p.field+"_filterBarcell"})),h.appendChild(i)),!1!==p.allowFiltering&&""!==p.field&&!P.isNullOrUndefined(p.field)||(i.setAttribute("disabled","true"),i.classList.add("e-disable")),(a=h.querySelector(".e-clear-icon"))&&a.setAttribute("title",this.parent.localeObj.getConstant("ClearButton")),p.visible||l.classList.add("e-hide"),this.appendHtml(l,h),this.parent.filterSettings.showFilterBarOperator&&"FilterBar"===this.parent.filterSettings.type&&!this.parent.isPrinting&&P.isNullOrUndefined(p.filterTemplate)&&P.isNullOrUndefined(p.filterBarTemplate)&&this.operatorIconRender(h,p,e),!P.isNullOrUndefined(p.allowFiltering)&&!p.allowFiltering||P.isNullOrUndefined(p.filterBarTemplate)||(o={element:i,column:p},(s="string"==typeof(s=p.filterBarTemplate.write)?P.getValue(s,window):s).call(this,o))):p.visible||l.classList.add("e-hide"),this.parent.isFrozenGrid()&&up(this.parent,p,l),l},od.prototype.appendHtml=function(e,t){return e.appendChild(t),e},od.prototype.operatorIconRender=function(e,i,t){var n,r=this.parent,t=this.parent.createElement("input",{className:" e-filterbaroperator e-icons e-icon-filter",id:t.column.uid});if(e.querySelector("span").appendChild(t),i.filter&&i.filter.operator)n=i.filter.operator;else if(r.filterSettings.columns.length)for(var s=0,o=r.filterSettings.columns;s<o.length;s++){var a=o[parseInt(s.toString(),10)];if(a.field===i.field){n=a.operator;break}n="equal"}else n="equal";P.isNullOrUndefined(r.filterModule.operators[i.field])||(n=r.filterModule.operators[i.field]),this.dropOptr=new U.DropDownList({fields:{text:"text",value:"value"},popupHeight:"auto",value:n,width:"0px",enabled:i.allowFiltering,popupWidth:"auto",enableRtl:this.parent.enableRtl,change:this.internalEvent.bind(this),beforeOpen:function(){var e=r.filterModule.customOperators;this.dataSource=e[r.getColumnByUid(this.element.id).type+"Operator"];for(var t=0;t<this.dataSource.length;t++)i.filter&&i.filter.operator&&P.isNullOrUndefined(r.filterModule.operators[i.field])&&this.dataSource[parseInt(t.toString(),10)].value===i.filter.operator&&(this.value=i.filter.operator)},cssClass:this.parent.cssClass?"e-popup-flbar "+this.parent.cssClass:"e-popup-flbar"}),this.dropOptr.appendTo(t);e=P.closest(this.dropOptr.element,"span");e.classList.add("e-filterbardropdown"),e.removeAttribute("tabindex")},od.prototype.internalEvent=function(e){var t=this.parent,i=t.getColumnByUid(e.element.getAttribute("id"));e.column=i,t.filterModule.operators[i.field]=e.value,t.notify(An,e)};var nd,rd,sd=od;function od(){var e=null!==rd&&rd.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-filterbarcell",attrs:{role:"columnheader"}}),e}ld.prototype.renderOperatorUI=function(e,t,i,n,r){this.dialogObj=n;var n=i.type+"Operator",r=(this.optrData=this.customOptr=P.isNullOrUndefined(r)?(P.isNullOrUndefined(this.parent.filterSettings.operators)||P.isNullOrUndefined(this.parent.filterSettings.operators[n])?this.customFilterOperators:this.parent.filterSettings.operators)[n]:r,this.customOptr),n=this.dropSelectedVal(i,n),s=this.parent.createElement("div",{className:"e-flm_optrdiv"}),e=(e.appendChild(s),this.parent.createElement("input",{id:i.uid+"-floptr"}));s.appendChild(e),this.dropOptr=new U.DropDownList({dataSource:r,fields:{text:"text",value:"value"},cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",enableRtl:this.parent.enableRtl,text:n,change:function(){var e=document.querySelector(".e-flmenu-valuediv").querySelector("input");"isempty"===this.value||"isnotempty"===this.value||"isnotnull"===this.value||"isnull"===this.value?P.isNullOrUndefined(e.ej2_instances)?e.setAttribute("disabled","true"):e.ej2_instances[0].enabled=!1:P.isNullOrUndefined(e.getAttribute("disabled"))||(P.isNullOrUndefined(e.ej2_instances)?e.removeAttribute("disabled"):e.ej2_instances[0].enabled=!0)}}),this.dropOptr.addEventListener(gs,this.ddOpen),this.dropOptr.appendTo("#"+i.uid+"-floptr")},ld.prototype.renderResponsiveDropDownList=function(e){e.popup.element.style.width="100%"},ld.prototype.dropDownOpen=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString(),this.parent.enableAdaptiveUI&&this.renderResponsiveDropDownList(e)},ld.prototype.dropSelectedVal=function(e,t){for(var i="",n=0,r=this.parent.filterSettings.columns;n<r.length;n++){var s=r[n];(e.field===s.field||e.isForeignColumn()&&e.foreignKeyValue===s.field)&&(s=new A.DataManager(this.optrData).executeLocal((new A.Query).where("value","equal",s.operator)),i=P.isNullOrUndefined(s[0])?"":s[0].text)}if(""===i)if(e.filter.operator)for(var o=Object.keys(this.optrData).length,a=0;a<o;a++)this.optrData[parseInt(a.toString(),10)].value===e.filter.operator&&(i=this.optrData[parseInt(a.toString(),10)].text);else i=this.optrData[0].text;return i},ld.prototype.getFlOperator=function(){return this.dropOptr.value},ld.prototype.destroyDropDownList=function(){this.dropOptr.isDestroyed||(this.dropOptr.removeEventListener(gs,this.ddOpen),this.dropOptr.destroy(),this.parent.off(Ii,this.destroyDropDownList),this.parent.off(r,this.destroyDropDownList))};var ad=ld;function ld(e,t,i,n){this.ddOpen=this.dropDownOpen.bind(this),this.parent=e,this.serviceLocator=i,this.filterSettings=n,this.customFilterOperators=t,this.parent&&(this.parent.on(Ii,this.destroyDropDownList,this),this.parent.on(r,this.destroyDropDownList,this))}pd.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"strui-"+e.column.uid}),e.target.appendChild(this.instance),this.dialogObj=e.dialogObj,this.processDataOperation(e)},pd.prototype.processDataOperation=function(t){var i=this;t.column.isForeignColumn()?this.parent.getDataModule().dataManager.executeQuery(this.parent.getDataModule().generateQuery(!0)).then(function(e){i.getAutoCompleteOptions(t,e)}):this.getAutoCompleteOptions(t)},pd.prototype.getAutoCompleteOptions=function(e,t){var i,n=e.column.isForeignColumn();if(n){for(var r=Bp.getDistinct(t.result,e.column.field).records||[],s=void 0,o=0;o<r.length;o++)s=s?s.or(e.column.field,"contains",r[parseInt(o.toString(),10)][e.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent):new A.Predicate(e.column.field,"contains",r[parseInt(o.toString(),10)][e.column.field],this.parent.filterSettings.enableCaseSensitivity,this.parent.filterSettings.ignoreAccent);(i=(new A.Query).where(s)).params=this.parent.query.params}var t=(n?e.column:this.parent).dataSource,a={value:n?e.column.foreignKeyValue:e.column.field},l=new U.AutoComplete(P.extend({dataSource:t instanceof A.DataManager?t:new A.DataManager(t),fields:a,locale:this.parent.locale,enableRtl:this.parent.enableRtl,query:n?i:this.parent.getDataModule().generateQuery(!0,!0),sortOrder:"Ascending",cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",autofill:!0,placeholder:e.localizeText.getConstant("EnterValue"),actionBegin:function(){if(this.query.queries.length&&"onWhere"===this.query.queries[0].fn&&this.query.queries[0].e&&this.query.queries[0].e.predicates){for(var e=0;e<this.query.queries[0].e.predicates.length;e++)this.properties.fields.value===this.query.queries[0].e.predicates[""+e].field&&(this.query.queries[0].e.predicates.splice(e,1),e-=1);this.query.queries[0].e.predicates.length||this.query.queries.splice(0,1)}}},e.column.filter.params));this.acFocus=this.focus(l,e),this.acComplete=this.actionComplete(l),this.acOpen=this.openPopup.bind(this),l.addEventListener(ms,this.acFocus),l.addEventListener(gs,this.acOpen),l.addEventListener(p,this.acComplete),t&&"result"in t&&(a=Zh({requestType:"stringfilterrequest"},this.parent.getQuery?this.parent.getQuery().clone():new A.Query),this.parent.trigger(Ai,a.state),a.deffered.promise.then(function(e){l.dataSource=new A.DataManager(e)})),this.actObj=l,this.actObj.appendTo(this.instance),n&&this.parent.filterModule.filterModule.afterRenderFilterUI()},pd.prototype.write=function(e){""===e.filteredValue||P.isNullOrUndefined(e.filteredValue)||(document.querySelector("#strui-"+e.column.uid).ej2_instances[0].value=e.filteredValue)},pd.prototype.read=function(e,t,i,n){var r=document.querySelector("#strui-"+t.uid).ej2_instances[0],r=(P.Browser.isDevice&&(r.hidePopup(),r.focusOut()),r.value);!P.isNullOrUndefined(r)&&""!==r||(r=null),n.filterByColumn(t.field,i,r,"and",this.parent.filterSettings.enableCaseSensitivity)},pd.prototype.openPopup=function(e){Ih(e,this.dialogObj)},pd.prototype.focus=function(e,t){return function(){e.filterType=t.getOptrInstance.getFlOperator()}},pd.prototype.actionComplete=function(n){return function(e){e.result=e.result.filter(function(e,t,i){return i.map(function(e){return P.getValue(n.fields.value,e)}).indexOf(P.getValue(n.fields.value,e))===t})}},pd.prototype.destroy=function(){this.actObj&&!this.actObj.isDestroyed&&(this.actObj.removeEventListener(ms,this.acFocus),this.actObj.removeEventListener(gs,this.acOpen),this.actObj.removeEventListener(p,this.acComplete),this.actObj.destroy(),this.parent.off(Ii,this.destroy),this.parent.off(r,this.destroy))};var hd=pd;function pd(e,t,i){this.parent=e,this.serLocator=t,this.filterSettings=i,this.parent&&(this.parent.on(Ii,this.destroy,this),this.parent.on(r,this.destroy,this))}cd.prototype.keyEventHandler=function(e){13!==e.keyCode&&9!==e.keyCode||((e=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),this.dispatchEvent(e))},cd.prototype.create=function(e){this.instance=this.parent.createElement("input",{className:"e-flmenu-input",id:"numberui-"+e.column.uid}),e.target.appendChild(this.instance),this.numericTxtObj=new z.NumericTextBox(P.extend({format:("string"==typeof e.column.format||P.isUndefined(e.column.format)?e.column:e.column.format).format,locale:this.parent.locale,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("EnterValue"),enableRtl:this.parent.enableRtl},e.column.filter.params)),this.numericTxtObj.appendTo(this.instance)},cd.prototype.write=function(e){var t=document.querySelector("#numberui-"+e.column.uid).ej2_instances[0];t.element.addEventListener("keydown",this.keyEventHandler),t.value=e.filteredValue},cd.prototype.read=function(e,t,i,n){var r=document.querySelector("#numberui-"+t.uid).ej2_instances[0].value;n.filterByColumn(t.field,i,r,"and",!0)},cd.prototype.destroy=function(){this.numericTxtObj&&!this.numericTxtObj.isDestroyed&&(this.numericTxtObj.destroy(),this.parent.off(Ii,this.destroy),this.parent.off(r,this.destroy))};var dd=cd;function cd(e,t,i){this.filterSettings=i,this.parent=e,this.serviceLocator=t,this.parent&&(this.parent.on(Ii,this.destroy,this),this.parent.on(r,this.destroy,this))}gd.prototype.create=function(e){var t=e.column.isForeignColumn(),i=(t?e.column:this.parent).dataSource,t=t?e.column.foreignKeyValue:e.column.field;this.elem=this.parent.createElement("input",{className:"e-flmenu-input",id:"bool-ui-"+e.column.uid}),e.target.appendChild(this.elem),this.dialogObj=e.dialogObj,this.dropInstance=new U.DropDownList(P.extend({dataSource:i instanceof A.DataManager?i:new A.DataManager(i),query:(new A.Query).select(t),fields:{text:t,value:t},placeholder:e.localizeText.getConstant("SelectValue"),cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params)),this.ddOpen=this.openPopup.bind(this),this.ddComplete=this.actionComplete(t),this.dropInstance.addEventListener(gs,this.ddOpen),this.dropInstance.addEventListener(p,this.ddComplete),this.dropInstance.appendTo(this.elem)},gd.prototype.write=function(e){var t=document.querySelector("#bool-ui-"+e.column.uid).ej2_instances[0];P.isNullOrUndefined(e.filteredValue)||(t.value=e.filteredValue)},gd.prototype.read=function(e,t,i,n){var r=document.querySelector("#bool-ui-"+t.uid).ej2_instances[0].value;n.filterByColumn(t.field,i,r,"and",!1)},gd.prototype.openPopup=function(e){Ih(e,this.dialogObj)},gd.prototype.actionComplete=function(t){return function(e){e.result=A.DataUtil.distinct(e.result,t,!0)}},gd.prototype.destroy=function(){this.dropInstance&&!this.dropInstance.isDestroyed&&(this.dropInstance.removeEventListener(gs,this.ddOpen),this.dropInstance.removeEventListener(p,this.ddComplete),this.dropInstance.destroy(),this.parent.off(Ii,this.destroy),this.parent.off(r,this.destroy))};var ud=gd;function gd(e,t,i){this.parent=e,this.serviceLocator=t,this.filterSettings=i,this.parent&&(this.parent.on(Ii,this.destroy,this),this.parent.on(r,this.destroy,this))}md.prototype.create=function(e){var t=Ph(e.column.format,e.column.type);this.dialogObj=e.dialogObj,this.inputElem=this.parent.createElement("input",{className:"e-flmenu-input",id:"dateui-"+e.column.uid}),e.target.appendChild(this.inputElem),"date"===e.column.type||"dateonly"===e.column.type?this.datePickerObj=new q.DatePicker(P.extend({format:t,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params)):"datetime"===e.column.type&&(this.datePickerObj=new q.DateTimePicker(P.extend({format:t,cssClass:this.parent.cssClass?"e-popup-flmenu "+this.parent.cssClass:"e-popup-flmenu",placeholder:e.localizeText.getConstant("ChooseDate"),width:"100%",locale:this.parent.locale,enableRtl:this.parent.enableRtl},e.column.filter.params))),this.datePickerObj.addEventListener(gs,this.dpOpen),this.datePickerObj.appendTo(this.inputElem)},md.prototype.write=function(e){document.querySelector("#dateui-"+e.column.uid).ej2_instances[0].value=P.isNullOrUndefined(e.filteredValue)?null:new Date(e.filteredValue)},md.prototype.read=function(e,t,i,n){var r=document.querySelector("#dateui-"+t.uid).ej2_instances[0].value,r=P.isNullOrUndefined(r)?null:r;n.filterByColumn(t.field,i,r,"and",!0)},md.prototype.openPopup=function(e){e.popup.element.style.zIndex=(this.dialogObj.zIndex+1).toString()},md.prototype.destroy=function(){this.parent.off(Ii,this.destroy),this.parent.off(r,this.destroy),P.isNullOrUndefined(this.datePickerObj)||this.datePickerObj.isDestroyed||(this.datePickerObj.removeEventListener(gs,this.dpOpen),this.datePickerObj.destroy())};var fd=md;function md(e,t,i){this.dpOpen=this.openPopup.bind(this),this.parent=e,this.locator=t,this.fltrSettings=i,this.parent&&(this.parent.on(Ii,this.destroy,this),this.parent.on(r,this.destroy,this))}Sd.prototype.clearCustomFilter=function(e){this.clearBtnClick(e)},Sd.prototype.applyCustomFilter=function(e){this.filterBtnClick(e.col)},Sd.prototype.openDialog=function(e){this.options=e,this.col=this.parent.getColumnByField(e.field),(P.isNullOrUndefined(this.col.filter)||P.isNullOrUndefined(this.col.filter.type)||"Menu"===this.col.filter.type)&&this.renderDlgContent(e.target,this.col)},Sd.prototype.closeDialog=function(e){var t=this;if(this.dlgObj){var i=document.getElementById(this.dlgObj.element.id);if(this.dlgObj&&!this.dlgObj.isDestroyed&&i){e={cancel:!1,column:this.col,target:e,element:i};if(this.parent.notify(Ii,e),e.cancel)return;this.isDialogOpen=!1,this.isMenuCheck&&(this.menuFilterBase.unWireEvents(),this.parent.off(en,this.actionComplete),this.isMenuCheck=!1),(this.parent.isReact||this.parent.isVue)&&this.col.filterTemplate&&this.col.filterTemplate instanceof Function?this.parent.clearTemplate(["filterTemplate"],void 0,function(){t.dlgObj.destroy()}):(this.dlgObj.destroy(),P.remove(i))}this.parent.notify(Jn,{})}},Sd.prototype.renderDlgContent=function(e,t){var i={requestType:tt,columnName:t.field,columnType:t.type},i=((i.filterModel=this).parent.trigger(y,i),this.parent.createElement("div",{className:"e-flmenu-maindiv",id:t.uid+"-flmenu"}));this.dlgDiv=this.parent.createElement("div",{className:"e-flmenu",id:t.uid+"-flmdlg"}),this.dlgDiv.setAttribute("aria-label",this.l10n.getConstant("FilterMenuDialogARIA")),(this.parent.enableAdaptiveUI?document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"):this.parent.element).appendChild(this.dlgDiv),this.dlgObj=new L.Dialog({showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,created:this.dialogCreated.bind(this,e,t),position:this.parent.element.classList.contains("e-device")?{X:"center",Y:"center"}:{X:"",Y:""},target:this.parent.element.classList.contains("e-device")?document.body:this.parent.element,buttons:[{click:this.filterBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("FilterButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-flmenu-okbtn "+this.parent.cssClass:"e-flmenu-okbtn"}},{click:this.clearBtnClick.bind(this,t),buttonModel:{content:this.l10n.getConstant("ClearButton"),cssClass:this.parent.cssClass?"e-flmenu-cancelbtn "+this.parent.cssClass:"e-flmenu-cancelbtn"}}],content:i,width:!P.isNullOrUndefined(E(e,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:250,animationSettings:{effect:"None"},cssClass:this.parent.cssClass?"e-filter-popup "+this.parent.cssClass:"e-filter-popup"});this.dlgObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dlgObj.appendTo(this.dlgDiv)},Sd.prototype.renderResponsiveDialog=function(){this.parent.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""},this.dlgObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dlgObj.width="100%",this.dlgObj.isModal=!1,this.dlgObj.buttons=[{}])},Sd.prototype.dialogCreated=function(e,t){!P.Browser.isDevice&&e&&bh(e,this.dlgObj),this.currentDialogCreatedColumn=t,this.renderFilterUI(e,t),t.isForeignColumn()&&(P.isNullOrUndefined(t.filter)||P.isNullOrUndefined(t.filter.ui)||P.isNullOrUndefined(t.filter.ui.create))||this.afterRenderFilterUI();var e=this.parent.isReact&&"string"!=typeof t.filterTemplate,i=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;P.isNullOrUndefined(t.filterTemplate)||e||i?P.isNullOrUndefined(this.dlgDiv.querySelector(".e-flmenu-input"))||(this.dlgDiv.querySelector(".e-flmenu-input").focus(),this.dlgDiv.querySelector(".e-flmenu-input").parentElement.classList.add("e-input-focus")):(this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.focus(),this.dlgDiv.querySelector(".e-flmenu-valuediv").firstElementChild.classList.add("e-input-focus"))},Sd.prototype.afterRenderFilterUI=function(){var e=this.currentDialogCreatedColumn,t=(e.showColumnMenu&&this.parent.notify(bi,{}),this.parent.enableAdaptiveUI?(this.dlgObj.element.style.left="0px",this.dlgObj.element.style.maxHeight="none"):this.dlgObj.element.style.maxHeight=this.maxHeight,this.dlgObj.show(),this.dlgObj.element.querySelector(".e-flm_optrdiv").querySelector("input")),i=this.dlgObj.element.querySelector(".e-flmenu-valuediv").querySelector("input"),t=("Empty"===t.value||"Not Empty"===t.value||"Null"===t.value||"Not Null"===t.value?P.isNullOrUndefined(i.ej2_instances)?i.setAttribute("disabled","true"):i.ej2_instances[0].enabled=!1:P.isNullOrUndefined(i&&i.getAttribute("disabled"))||(P.isNullOrUndefined(i.ej2_instances)?i.removeAttribute("disabled"):i.ej2_instances[0].enabled=!0),e.filterTemplate||this.writeMethod(e,this.dlgObj.element.querySelector("#"+e.uid+"-flmenu")),{requestType:et,columnName:e.field,columnType:e.type});(t.filterModel=this).isDialogOpen=!0,this.isMenuCheck||this.parent.trigger(p,t)},Sd.prototype.renderFilterUI=function(e,t){var i=this.dlgObj.element.querySelector(".e-flmenu-maindiv");this.parent.log("column_type_missing",{column:t}),this.renderOperatorUI(i,e,t),this.renderFlValueUI(i,e,t)},Sd.prototype.renderOperatorUI=function(e,t,i){this.flMuiObj.renderOperatorUI(e,t,i,this.dlgObj,this.filterObj.menuOperator)},Sd.prototype.renderFlValueUI=function(e,t,i){var n,r,s,o=this.parent.createElement("div",{className:"e-flmenu-valuediv"}),a=this.filterObj,e=(e.appendChild(o),new this.colTypes[i.type](this.parent,this.serviceLocator,this.parent.filterSettings));i.filterTemplate?((n={})[i.field]=n.value=a.values[i.field],i.foreignKeyValue&&(n[i.foreignKeyValue]=a.values[i.field],n[i.field]=void 0),a=this.parent.isReact&&"string"!=typeof i.filterTemplate,r=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,s=this.parent.element.id+(n.column=i).uid+"filterTemplate",a||r?(i.getFilterTemplate()(n,this.parent,"filterTemplate",s,null,null,o),this.parent.renderTemplates()):sh(o,i.getFilterTemplate()(n,this.parent,"filterTemplate",s,null,null,null,this.parent.root)),this.isMenuCheck&&(this.menuFilterBase.cBox=this.dlgObj.element.querySelector(".e-checkboxlist.e-fields"),this.menuFilterBase.wireEvents(),this.parent.on(en,this.actionComplete,this),this.menuFilterBase.getAllData())):P.isNullOrUndefined(i.filter)||P.isNullOrUndefined(i.filter.ui)||P.isNullOrUndefined(i.filter.ui.create)?e.create({column:i,target:o,getOptrInstance:this.flMuiObj,localizeText:this.l10n,dialogObj:this.dlgObj}):(a="string"==typeof(a=i.filter.ui.create)?P.getValue(a,window):a)({column:i,target:o,getOptrInstance:this.flMuiObj,dialogObj:this.dlgObj})},Sd.prototype.writeMethod=function(e,t){for(var i,t=t.querySelector(".e-flmenu-valinput"),n=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings),r=0,s=this.filterSettings.columns;r<s.length;r++){var o=s[r];e.uid===o.uid&&(i=o.value)}P.isNullOrUndefined(e.filter)||P.isNullOrUndefined(e.filter.ui)||P.isNullOrUndefined(e.filter.ui.write)?n.write({column:e,target:t,parent:this.parent,filteredValue:i}):(n="string"==typeof(n=e.filter.ui.write)?P.getValue(n,window):n)({column:e,target:t,parent:this.parent,filteredValue:i})},Sd.prototype.filterBtnClick=function(e){var t,i,n,r=this.dlgObj.element.querySelector(".e-flmenu-valuediv input"),s=this.flMuiObj.getFlOperator(),o=new this.colTypes[e.type](this.parent,this.serviceLocator,this.parent.filterSettings);e.filterTemplate?(i=void 0,(t=this.dlgDiv.querySelector(".e-flmenu-valuediv")).children[0].value?i=t.children[0].value:P.isNullOrUndefined(t.children[0].ej2_instances)?(n=t.querySelector(".e-control"),P.isNullOrUndefined(n)||(i="boolean"===e.type?n.checked:(P.isNullOrUndefined(n.ej2_instances)?n:n.ej2_instances[0]).value)):i=(this.parent.isAngular?t.children[0]:t.querySelector("input")).ej2_instances[0].value,this.filterObj.filterByColumn(e.field,s,i)):P.isNullOrUndefined(e.filter)||P.isNullOrUndefined(e.filter.ui)||P.isNullOrUndefined(e.filter.ui.read)?o.read(r,e,s,this.filterObj):(n="string"==typeof(n=e.filter.ui.read)?P.getValue(n,window):n)({element:r,column:e,operator:s,fltrObj:this.filterObj}),this.closeDialog(),this.parent.showColumnMenu&&this.parent.notify(xr,{})},Sd.prototype.closeResponsiveDialog=function(){this.closeDialog()},Sd.prototype.clearBtnClick=function(e){this.filterObj.removeFilteredColsByField(e.field),this.closeDialog()},Sd.prototype.destroy=function(){this.closeDialog()},Sd.prototype.getFilterUIInfo=function(){return{field:this.col.field,operator:this.flMuiObj.getFlOperator()}},Sd.prototype.renderCheckBoxMenu=function(){return this.isMenuCheck=!0,this.menuFilterBase.updateModel(this.options),this.menuFilterBase.getAndSetChkElem(this.options),this.dlgObj.buttons=[{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{content:this.menuFilterBase.getLocalizedLabel("FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.menuFilterBase.btnClick.bind(this.menuFilterBase),buttonModel:{cssClass:"e-flat",content:this.menuFilterBase.getLocalizedLabel("ClearButton")}}],this.menuFilterBase.dialogObj=this.dlgObj,this.menuFilterBase.dlg=this.dlgObj.element,this.menuFilterBase.dlg.classList.add("e-menucheckbox"),this.menuFilterBase.dlg.classList.remove("e-checkboxfilter"),this.maxHeight="800px",this.menuFilterBase.sBox.innerHTML},Sd.prototype.actionComplete=function(e){this.isMenuCheck&&this.parent.trigger(p,e)};var yd=Sd;function Sd(e,t,i,n,r){this.isDialogOpen=!1,this.maxHeight="350px",this.isMenuCheck=!1,this.colTypes={string:hd,number:dd,date:fd,dateonly:fd,boolean:ud,datetime:fd},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.customFilterOperators=n,this.filterObj=r,this.flMuiObj=new ad(this.parent,this.customFilterOperators,this.serviceLocator),this.l10n=this.serviceLocator.getService("localization"),this.menuFilterBase=new Bp(e)}Cd.prototype.destroy=function(){this.removeEventListener(),this.checkBoxBase.closeDialog()},Cd.prototype.openDialog=function(e){this.checkBoxBase.openDialog(e),this.parent.log("column_type_missing",{column:e.column})},Cd.prototype.closeDialog=function(){this.destroy(),this.isresetFocus&&this.parent.notify(on,{})},Cd.prototype.closeResponsiveDialog=function(){this.checkBoxBase.closeDialog()},Cd.prototype.getModuleName=function(){return"checkboxFilter"},Cd.prototype.actionBegin=function(e){this.parent.trigger(y,e)},Cd.prototype.actionComplete=function(e){this.parent.trigger(p,e)},Cd.prototype.actionPrevent=function(e){yh(this.parent)&&(this.parent.notify(ei,e),e.cancel=!0)},Cd.prototype.clearCustomFilter=function(e){this.checkBoxBase.clearFilter(e)},Cd.prototype.applyCustomFilter=function(){this.checkBoxBase.fltrBtnHandler(),this.checkBoxBase.closeDialog()},Cd.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on($i,this.actionBegin,this),this.parent.on(en,this.actionComplete,this),this.parent.on(tn,this.actionPrevent,this))},Cd.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off($i,this.actionBegin),this.parent.off(en,this.actionComplete),this.parent.off(tn,this.actionPrevent))};var vd=Cd;function Cd(e,t,i){this.parent=e,this.isresetFocus=!0,this.checkBoxBase=new Bp(e),this.addEventListener()}wd=function(e,t){return(wd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}wd(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(xd,bd=vd),xd.prototype.destroy=function(){this.excelFilterBase.closeDialog()},xd.prototype.openDialog=function(e){this.excelFilterBase.openDialog(e)},xd.prototype.closeDialog=function(){this.excelFilterBase.closeDialog(),this.isresetFocus&&this.parent.notify(on,{})},xd.prototype.clearCustomFilter=function(e){this.excelFilterBase.clearFilter(e)},xd.prototype.closeResponsiveDialog=function(e){e?this.excelFilterBase.removeDialog():this.closeDialog()},xd.prototype.applyCustomFilter=function(e){e.isCustomFilter?this.excelFilterBase.filterBtnClick(e.col.field):(this.excelFilterBase.fltrBtnHandler(),this.excelFilterBase.closeDialog())},xd.prototype.filterByColumn=function(e,t,i,n,r,s,o,a){this.excelFilterBase.filterByColumn(e,t,i,n,r,s,o,a)},xd.prototype.getFilterUIInfo=function(){return this.excelFilterBase.getFilterUIInfo()},xd.prototype.getModuleName=function(){return"excelFilter"};var wd,bd,Id=xd;function xd(e,t,i,n){t=bd.call(this,e,t,i)||this;return t.parent=e,t.isresetFocus=!0,t.excelFilterBase=new qp(e,n),t}d.prototype.render=function(e){if(!A.DataUtil.getObject("args.isFrozen",e)){e=this.parent;if(this.l10n=this.serviceLocator.getService("localization"),this.getLocalizedCustomOperators(),"FilterBar"===this.parent.filterSettings.type&&e.columns.length){var t=this.parent.element.querySelector(".e-filterbar"),t=(t&&P.remove(t),new Rs(this.serviceLocator,O.CellType.Filter,e)),i=(this.serviceLocator.getService("cellRendererFactory").addCellRenderer(O.CellType.Filter,new sd(this.parent,this.serviceLocator)),this.valueFormatter=this.serviceLocator.getService("valueFormatter"),t.element=this.parent.createElement("tr",{className:"e-filterbar",attrs:{role:"row"}}),this.generateRow()),n=(i.data=this.values,this.parent.getHeaderContent().querySelector("thead:not(.e-masked-thead)").appendChild(t.element),this.parent.element.querySelector(".e-rowdragheader"));if(this.element=t.render(i,e.getColumns(),null,null,t.element),this.element.querySelectorAll(".e-leftfreeze").length&&(this.element.querySelectorAll(".e-indentcell").length||this.element.querySelectorAll(".e-grouptopleftcell").length))for(var r=this.element.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),s=0;s<r.length;s++)r[parseInt(s.toString(),10)].classList.add("e-leftfreeze"),pp(r[parseInt(s.toString(),10)],30*s,this.parent.enableRtl,"Left");hp(this.element);i=this.element.querySelector(".e-detailheadercell"),e=(i&&(i.className="e-filterbarcell e-mastercell"),n&&(n.classList.contains("e-leftfreeze")?n.className="e-dragheadercell e-mastercell e-leftfreeze":n.className="e-filterbarcell e-mastercell"),[].slice.call(this.element.getElementsByClassName("e-grouptopleftcell")));e.length&&e[e.length-1].classList.add("e-lastgrouptopleftcell"),this.wireEvents(),this.parent.notify(yi,{case:"filter"})}}},d.prototype.showCustomFilter=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog(this.column)},d.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action},d.prototype.setFilterModel=function(e){e=e.filter.type||this.parent.filterSettings.type;this.filterModule=new this.type[""+e](this.parent,this.parent.filterSettings,this.serviceLocator,this.customOperators,this)},d.prototype.destroy=function(){var e=this.parent.element;if(e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))){if(this.filterModule&&this.filterModule.destroy(),this.parent.refreshing||!this.parent.isDestroyed&&this.parent.allowFiltering||(this.filterSettings.columns=[]),this.updateFilterMsg(),this.removeEventListener(),this.unWireEvents(),"FilterBar"===this.filterSettings.type&&!this.parent.isDestroyed){if(this.filterSettings.showFilterBarOperator)for(var t=[].slice.call(this.element.getElementsByClassName("e-filterbaroperator")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].ej2_instances[0]&&t[parseInt(i.toString(),10)].ej2_instances[0].destroy();this.parent.getColumns().map(function(e){e.filterBarTemplate&&!P.isNullOrUndefined(e.filterBarTemplate.destroy)&&(e="string"==typeof(e=e.filterBarTemplate.destroy)?P.getValue(e,window):e)()})}this.element&&(this.element.parentElement&&P.remove(this.element),e=this.parent.getHeaderContent().querySelector(".e-filterbar"))&&P.remove(e)}},d.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,O.ResponsiveDialogAction.isFilter)},d.prototype.generateRow=function(){var e=new zr({});return e.cells=this.generateCells(),e},d.prototype.generateCells=function(){var e=[];if(this.parent.allowGrouping)for(var t=0,i=this.parent.groupSettings.columns.length;t<i;t++)e.push(this.generateCell({},O.CellType.HeaderIndent));(this.parent.detailTemplate||this.parent.childGrid)&&e.push(this.generateCell({},O.CellType.DetailHeader)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&e.push(this.generateCell({},O.CellType.RowDragHIcon));for(var n=0,r=this.parent.getColumns();n<r.length;n++){var s=r[n];e.push(this.generateCell(s))}return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&e.push(this.generateCell({},O.CellType.RowDragHIcon)),e},d.prototype.generateCell=function(e,t){e={visible:e.visible,isDataCell:!1,rowId:"",column:e,cellType:t||O.CellType.Filter,attributes:{title:this.l10n.getConstant("FilterbarTitle")}};return new qr(e)},d.prototype.updateModel=function(){for(var e=this.column.isForeignColumn()?this.parent.getColumnByUid(this.column.uid):this.parent.getColumnByField(this.fieldName),t=(this.filterObjIndex=this.getFilteredColsIndexByField(e),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex],Array.isArray(this.value)?this.value:[this.value]),i=this.parent.dataSource.adaptor&&this.parent.dataSource.adaptor.getModuleName?this.parent.dataSource.adaptor.getModuleName():void 0,n=0,r=t.length;n<r;n++){var s=e.isForeignColumn()?e.foreignKeyValue:this.fieldName,o="notequal"===this.operator,a=(this.currentFilterObject={field:s,uid:e.uid,isForeignKey:e.isForeignColumn(),operator:this.operator,value:t[parseInt(n.toString(),10)],predicate:this.predicate,matchCase:this.matchCase,ignoreAccent:this.ignoreAccent,actualFilterValue:{},actualOperator:{}},this.getFilteredColsIndexByField(e));if(-1<a&&!Array.isArray(this.value)?this.filterSettings.columns[parseInt(a.toString(),10)]=this.currentFilterObject:this.filterSettings.columns.push(this.currentFilterObject),!this.column.isForeignColumn()&&P.isNullOrUndefined(this.value)&&("equal"===this.operator||"notequal"===this.operator)&&"ODataAdaptor"!==i&&"ODataV4Adaptor"!==i){for(var l=0;l<this.filterSettings.columns.length;l++)this.filterSettings.columns[""+l].field!==s||"equal"!==this.filterSettings.columns[""+l].operator&&"notequal"!==this.filterSettings.columns[""+l].operator||!P.isNullOrUndefined(this.filterSettings.columns[""+l].value)||(this.filterSettings.columns.splice(l,1),l-=1);"string"===e.type&&this.filterSettings.columns.push({field:s,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:""}),this.filterSettings.columns.push({field:s,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:void 0}),this.filterSettings.columns.push({field:s,ignoreAccent:this.ignoreAccent,matchCase:this.matchCase,operator:this.operator,predicate:o?"and":"or",value:null})}}this.filterSettings.columns=this.filterSettings.columns,this.parent.dataBind()},d.prototype.getFilteredColsIndexByField=function(e){for(var t=this.filterSettings.columns,i=0,n=t.length;i<n;i++)if(t[parseInt(i.toString(),10)].uid===e.uid||e.isForeignColumn()&&this.parent.getColumnByUid(e.uid).field===e.foreignKeyValue)return i;return-1},d.prototype.onActionComplete=function(e){var t=this.isRemove?{requestType:"filtering",type:p}:{currentFilterObject:this.currentFilterObject,currentFilteringColumn:P.isNullOrUndefined(this.column)?void 0:this.column.field,columns:this.filterSettings.columns,requestType:"filtering",type:p};this.parent.trigger(p,P.extend(e,t)),this.isRemove=!1},d.prototype.wireEvents=function(){P.EventHandler.add(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate,this)},d.prototype.unWireEvents=function(){P.EventHandler.remove(this.parent.getHeaderContent(),"keyup",this.keyUpHandlerImmediate)},d.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.parent.getHeaderTable().classList.add("e-sortfilter"),this.render())},d.prototype.refreshFilterValue=function(){P.isNullOrUndefined(this.parent.modelObserver.boundedEvents)||this.parent.removeEventListener(Ve,this.refreshFilterValueFn),"FilterBar"===this.filterSettings.type&&this.filterSettings.columns.length&&!this.parent.getCurrentViewRecords().length&&this.initialEnd()},d.prototype.initialEnd=function(){if(this.parent.off(pt,this.initialEnd),this.parent.getColumns().length&&this.filterSettings.columns.length){var e=this.parent;this.contentRefresh=!1,this.initialLoad=!0;for(var t=0,i=e.filterSettings.columns;t<i.length;t++){var n=i[t];this.filterByColumn(n.field,n.operator,n.value,n.predicate,n.matchCase,n.ignoreAccent,n.actualFilterValue,n.actualOperator,n.isForeignKey)}this.initialLoad=!1,this.updateFilterMsg(),this.contentRefresh=!0}},d.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(nr,this.setFullScreenDialog,this),this.parent.on(g,this.enableAfterRender,this),this.parent.on(St,this.onActionComplete,this),this.parent.on(ct,this.onPropertyChanged,this),this.parent.on(Mt,this.keyUpHandler,this),this.parent.on(zt,this.columnPositionChanged,this),this.parent.on(ft,this.render,this),this.parent.on(pt,this.initialEnd,this),this.parent.on(Ii,this.filterMenuClose,this),this.parent.on(kr,this.renderResponsiveChangeAction,this),this.docClickHandler=this.clickHandler.bind(this),P.EventHandler.add(document,"click",this.docClickHandler,this),P.EventHandler.add(this.parent.element,"mousedown",this.refreshClearIcon,this),this.parent.on(wi,this.columnMenuFilter,this),this.parent.on(Lt,this.filterIconClickHandler,this),this.parent.on("persist-data-changed",this.initialEnd,this),this.parent.on(Tn,this.clickHandler,this),this.parent.on(r,this.destroy,this),this.refreshFilterValueFn=this.refreshFilterValue.bind(this),this.parent.addEventListener(Ve,this.refreshFilterValueFn))},d.prototype.removeEventListener=function(){P.EventHandler.remove(document,"click",this.docClickHandler),P.EventHandler.remove(this.parent.element,"mousedown",this.refreshClearIcon),this.parent.isDestroyed||(this.parent.off(nr,this.setFullScreenDialog),this.parent.off(g,this.enableAfterRender),this.parent.off(St,this.onActionComplete),this.parent.off(ct,this.onPropertyChanged),this.parent.off(Mt,this.keyUpHandler),this.parent.off(zt,this.columnPositionChanged),this.parent.off(ft,this.render),this.parent.off(wi,this.columnMenuFilter),this.parent.off(Ii,this.filterMenuClose),this.parent.off(kr,this.renderResponsiveChangeAction),this.parent.off(Lt,this.filterIconClickHandler),this.parent.off(Tn,this.clickHandler),this.parent.off(r,this.destroy))},d.prototype.refreshClearIcon=function(e){this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type&&e.target.closest("th")&&e.target.closest("th").classList.contains("e-filterbarcell")&&e.target.classList.contains("e-clear-icon")&&(e=e.target.previousElementSibling,z.Input.setValue(null,e,"Never",!0),"Immediate"===this.filterSettings.mode)&&this.removeFilteredColsByField(e.id.slice(0,-14))},d.prototype.filterMenuClose=function(){this.fltrDlgDetails.isOpen=!1},d.prototype.filterByColumn=function(e,t,i,n,r,s,o,a,l){var h,p=this,d=this.parent;if("string"==typeof i&&(i=this.parent.sanitize(i)),this.column=d.grabColumnByFieldFromAllCols(e,l),"like"===(t="FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&P.isNullOrUndefined(this.column.filterBarTemplate)&&P.isNullOrUndefined(this.column.filterTemplate)?this.getOperatorName(e):t)&&i&&-1===i.indexOf("%")&&(i="%"+i+"%"),this.column)if("FilterBar"===this.filterSettings.type&&(h=d.getHeaderContent().querySelector("[id='"+this.column.field+"_filterBarcell']")),P.isNullOrUndefined(this.column.allowFiltering)||this.column.allowFiltering)if(yh(d))d.notify(ei,{instance:this,handler:this.filterByColumn,arg1:e,arg2:t,arg3:i,arg4:n,arg5:r,arg6:s,arg7:o,arg8:a});else{if(this.predicate=n||(Array.isArray(i)?"or":"and"),this.value=i,this.matchCase=r||!1,this.ignoreAccent=this.ignoreAccent=P.isNullOrUndefined(s)?this.parent.filterSettings.ignoreAccent:s,this.fieldName=e,this.operator=t,""===(i=P.isNullOrUndefined(i)?i:i.toString())&&(i=null),"number"!==this.column.type&&"date"!==this.column.type||(this.matchCase=!0),h&&"FilterBar"===this.filterSettings.type){if(i&&i.length<1||!this.filterByMethod&&this.checkForSkipInput(this.column,i))return this.filterStatusMsg=i&&i.length<1?"":this.l10n.getConstant("InvalidFilterMessage"),void this.updateFilterMsg();h.value!==i&&(h.value=i)}P.isNullOrUndefined(this.column.format)?this.values[this.column.field]=i:(this.applyColumnFormat(i),this.initialLoad&&"FilterBar"===this.filterSettings.type&&(h.value=this.values[this.column.field]));l={field:this.fieldName,predicate:n,matchCase:r,ignoreAccent:s,operator:this.operator,value:this.value,type:this.column.type};1<this.parent.filterSettings.columns.filter(function(e){return e.field===p.fieldName}).length&&!P.isNullOrUndefined(this.actualPredicate[this.fieldName])?this.actualPredicate[this.fieldName].push(l):this.actualPredicate[this.fieldName]=[l],this.checkAlreadyColFiltered(this.column.field)||this.updateModel()}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:this.column.headerText})},d.prototype.applyColumnFormat=function(e){var t=this,i="date"===this.column.type||"datetime"===this.column.type||"dateonly"===this.column.type?new Date(e):parseFloat(e);("date"===this.column.type||"datetime"===this.column.type||"dateonly"===this.column.type)&&e&&Array.isArray(this.value)&&1<e.split(",").length?this.values[this.column.field]=e.split(",").map(function(e){return""===e&&(e=null),t.setFormatForFlColumn(new Date(e),t.column)}):this.values[this.column.field]=this.setFormatForFlColumn(i,this.column)},d.prototype.skipUid=function(e){for(var t=!0,i=Object.keys(e),n=0;n<i.length;n++){var r=Object.keys(e[i[parseInt(n.toString(),10)]]);1===r.length&&"uid"===r[0]&&(t=!1)}return t},d.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var n=i[t];switch(n){case"columns":var r={currentFilterObject:this.currentFilterObject,currentFilteringColumn:this.column?this.column.field:void 0,action:"filter",columns:this.filterSettings.columns,requestType:"filtering",type:y,cancel:!1};if(this.contentRefresh&&this.skipUid(e.properties.columns)){if(this.parent.notify(ut,r),r.cancel)return void("CheckBox"===this.filterSettings.type||"Excel"===this.filterSettings.type?(this.filterSettings.columns=this.actualData.length<=1?this.checkboxPrevFilterObject:this.checkboxFilterObject,this.actualPredicate[this.column.field]=this.filterSettings.columns,r=this.parent.getColumnByField(this.column.field),r=this.parent.showColumnMenu&&r.showColumnMenu?".e-columnmenu":".e-icon-filter",r=this.parent.getColumnHeaderByField(this.column.field).querySelector(r),0===this.checkboxPrevFilterObject.length?r.classList.remove("e-filtered"):r.classList.add("e-filtered")):P.isNullOrUndefined(this.prevFilterObject)?this.filterSettings.columns.splice(this.filterSettings.columns.length-1,1):this.filterSettings.columns[this.filterObjIndex]=this.prevFilterObject);this.updateFilterIcon(),this.refreshFilterSettings(),this.updateFilterMsg(),this.updateFilter()}break;case"showFilterBarStatus":e.properties[""+n]?this.updateFilterMsg():this.parent.allowPaging&&this.parent.updateExternalMessage("");break;case"showFilterBarOperator":case"type":this.parent.refreshHeader(),this.refreshFilterSettings(),"100%"===this.parent.height&&this.parent.scrollModule.refresh()}}},d.prototype.refreshFilterSettings=function(){if("FilterBar"===this.filterSettings.type){for(var e=0;e<this.filterSettings.columns.length;e++){this.column=this.parent.grabColumnByUidFromAllCols(this.filterSettings.columns[parseInt(e.toString(),10)].uid);var t,i=this.filterSettings.columns[parseInt(e.toString(),10)].value,i=!P.isNullOrUndefined(i)&&i.toString();P.isNullOrUndefined(this.column.format)?(t=this.filterSettings.columns[parseInt(e.toString(),10)].field,this.values[""+t]=this.filterSettings.columns[parseInt(e.toString(),10)].value):this.applyColumnFormat(i),(n=this.getFilterBarElement(this.column.field))&&(""===this.cellText[this.filterSettings.columns[parseInt(e.toString(),10)].field]||P.isNullOrUndefined(this.cellText[this.filterSettings.columns[parseInt(e.toString(),10)].field])?n.value=this.filterSettings.columns[parseInt(e.toString(),10)].value:n.value=this.cellText[this.column.field])}if(0===this.filterSettings.columns.length)for(var n,r=this.parent.getColumns(),e=0;e<r.length;e++)(n=this.getFilterBarElement(r[parseInt(e.toString(),10)].field))&&""!==n.value&&(n.value="",delete this.values[r[parseInt(e.toString(),10)].field])}},d.prototype.updateFilterIcon=function(){if(0===this.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered"))for(var e=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),t=0,i=e.length;t<i;t++)e[parseInt(t.toString(),10)].classList.remove("e-filtered")},d.prototype.getFilterBarElement=function(e){var t,e="[id='"+e+"_filterBarcell']";return t=e&&!P.isNullOrUndefined(this.element)?this.element.querySelector(e):t},d.prototype.refreshFilter=function(){this.refreshFilterSettings(),this.updateFilterMsg()},d.prototype.clearFiltering=function(e){var t=this,i=eh(this.filterSettings.columns);if(P.isNullOrUndefined(e))if(yh(this.parent))this.parent.notify(ei,{instance:this,handler:this.clearFiltering});else{for(var n=0;n<i.length;n++)i[parseInt(n.toString(),10)].uid=i[parseInt(n.toString(),10)].uid||this.parent.getColumnByField(i[parseInt(n.toString(),10)].field).uid;var r=i.map(function(e){return e.uid}),s=r.filter(function(e,t){return r.indexOf(e)===t});this.refresh=!1;for(var n=0,o=s.length;n<o;n++)this.removeFilteredColsByField(this.parent.getColumnByUid(s[parseInt(n.toString(),10)]).field,!1);if(this.refresh=!0,s.length&&this.parent.renderModule.refresh(),0===this.parent.filterSettings.columns.length&&this.parent.element.querySelector(".e-filtered"))for(var a=[].slice.call(this.parent.element.getElementsByClassName("e-filtered")),n=0,o=a.length;n<o;n++)a[0].classList.remove("e-filtered");this.isRemove=!0,this.filterStatusMsg="",this.updateFilterMsg()}else this.refresh=!1,e.forEach(function(e){t.removeFilteredColsByField(e,!1)}),this.parent.setProperties({filterSettings:{columns:this.filterSettings.columns}},!0),this.parent.renderModule.refresh(),this.refresh=!0},d.prototype.checkAlreadyColFiltered=function(e){for(var t=0,i=this.filterSettings.columns;t<i.length;t++){var n=i[t];if(n.field===e&&"Menu"===this.parent.filterSettings.type&&("date"===n.type||"datetime"===n.type))return this.checkDateColumnValue(n.value,this.value)&&n.operator===this.operator&&n.predicate===this.predicate;if(n.field===e&&n.value===this.value&&n.operator===this.operator&&n.predicate===this.predicate)return!0}return!1},d.prototype.checkDateColumnValue=function(e,t){return!(!P.isNullOrUndefined(e)||!P.isNullOrUndefined(t))||e instanceof Date&&t instanceof Date&&e.getTime()===t.getTime()},d.prototype.columnMenuFilter=function(e){this.column=e.col;var t=P.closest(e.target,"#"+e.id);e.isClose&&!t?this.filterModule.closeDialog():t&&this.filterDialogOpen(this.column,e.target)},d.prototype.filterDialogOpen=function(e,t,i,n){this.filterModule&&(this.filterModule.isresetFocus=!1,this.filterModule.closeDialog()),this.setFilterModel(e),this.filterModule.openDialog(this.createOptions(e,t,i,n))},d.prototype.createOptions=function(e,t,i,n){var r=this.parent,s=e.filter.dataSource||r.dataSource&&"result"in r.dataSource?r.dataSource:r.getDataModule().dataManager,o=e.filter.type||this.parent.filterSettings.type;return{type:e.type,field:e.field,displayName:e.headerText,dataSource:s,format:e.format,height:800,columns:r.getColumns(),filteredColumns:r.filterSettings.columns,target:t,dataManager:r.getDataModule().dataManager,formatFn:e.getFormatter(),ignoreAccent:r.filterSettings.ignoreAccent,parserFn:e.getParser(),query:r.query,template:e.getFilterItemTemplate(),hideSearchbox:!P.isNullOrUndefined(e.filter.hideSearchbox)&&e.filter.hideSearchbox,handler:this.filterHandler.bind(this),localizedStrings:r.getLocaleConstants(),position:{X:i,Y:n},column:e,foreignKeyValue:e.foreignKeyValue,actualPredicate:this.actualPredicate,localeObj:r.localeObj,isRemote:r.getDataModule().isRemote(),allowCaseSensitive:this.filterSettings.enableCaseSensitivity,isResponsiveFilter:this.parent.enableAdaptiveUI,operator:this.actualPredicate[e.field]&&"Menu"===o?this.actualPredicate[e.field][0].operator:"equal",parentTotalDataCount:r.getDataModule().isRemote()&&r.allowPaging?r.pagerModule.pagerObj.totalRecordsCount:r.getDataModule().isRemote()?r.totalDataRecordsCount:r.getFilteredRecords().length,parentCurrentViewDataCount:r.currentViewData.length,parentFilteredLocalRecords:r.getDataModule().isRemote()?[]:r.getFilteredRecords()}},d.prototype.removeFilteredColsByField=function(s,o){var a,l=this.filterSettings.columns;if(yh(this.parent))e={instance:this,handler:this.removeFilteredColsByField,arg1:s,arg2:o},this.parent.notify(ei,e);else{for(var e,i=l.map(function(e){return e.uid}),h=i.filter(function(e,t){return i.indexOf(e)===t}),p=(P.isNullOrUndefined(this.column)||(e=this.column.isForeignColumn()?this.parent.getColumnByUid(this.column.uid):this.parent.getColumnByField(s),this.filterObjIndex=this.getFilteredColsIndexByField(e),this.prevFilterObject=this.filterSettings.columns[this.filterObjIndex]),this),t=0,n=h.length;t<n;t++)if("break"===function(e){l[parseInt(e.toString(),10)].uid=l[parseInt(e.toString(),10)].uid||p.parent.getColumnByField(l[parseInt(e.toString(),10)].field).uid;var t=l.length,i=p.parent.grabColumnByUidFromAllCols(h[parseInt(e.toString(),10)]);if(i.field===s||i.field===i.foreignKeyValue&&i.isForeignColumn()){e=p.filterSettings.columns.filter(function(e){return e.uid===i.uid})[0];for("FilterBar"===p.filterSettings.type&&!o&&(r="[id='"+i.field+"_filterBarcell']",a=p.parent.getHeaderContent().querySelector(r))&&(a.value="",delete p.values[""+s]);t--;)l[parseInt(t.toString(),10)].uid===i.uid&&l.splice(t,1);var n,r=p.parent.getColumnHeaderByField(i.field);return"FilterBar"===p.filterSettings.type&&!p.parent.showColumnMenu||(n=p.parent.showColumnMenu&&i.showColumnMenu?".e-columnmenu":".e-icon-filter",r.querySelector(n).classList.remove("e-filtered")),p.isRemove=!0,p.actualPredicate[""+s]&&delete p.actualPredicate[""+s],p.values[""+s]&&delete p.values[""+s],p.refresh&&p.parent.notify(ut,{requestType:"filtering",type:y,currentFilterObject:e,currentFilterColumn:i,action:"clearFilter"}),"break"}}(t))break;this.updateFilterMsg()}},d.prototype.getModuleName=function(){return"filter"},d.prototype.keyUpHandlerImmediate=function(e){13!==e.keyCode&&this.keyUpHandler(e)},d.prototype.keyUpHandler=function(e){var t=this.parent,i=e.target;if(i&&P.matches(i,".e-filterbar input")){var n=P.closest(i,"th.e-filterbarcell");if(this.column=t.getColumnByUid(n.getAttribute("e-mappinguid")),!this.column)return;"altDownArrow"===e.action&&this.parent.filterSettings.showFilterBarOperator&&((n=P.closest(i,"span").querySelector(".e-filterbaroperator")).ej2_instances[0].showPopup(),n.focus()),"Immediate"!==this.filterSettings.mode&&(13!==e.keyCode||e.target.classList.contains("e-filterbaroperator"))||9===e.keyCode||this.column.filterTemplate||(this.value=i.value.trim(),this.processFilter(e))}"altDownArrow"===e.action&&"FilterBar"!==this.filterSettings.type&&!E(e.target,"e-toolbar")&&P.isNullOrUndefined(this.parent.element.querySelector(".e-filter-popup"))&&(n=t.focusModule.currentInfo.element)&&n.classList.contains("e-headercell")&&(i=t.getColumnByUid(n.firstElementChild.getAttribute("e-mappinguid")),this.openMenuByField(i.field),this.parent.focusModule.clearIndicator()),"escape"===e.action&&"Menu"===this.filterSettings.type&&this.filterModule&&(this.filterModule.closeDialog(),t.notify(on,{}))},d.prototype.updateCrossIcon=function(e){e.value.length&&e.nextElementSibling.classList.remove("e-hide")},d.prototype.updateFilterMsg=function(){if("FilterBar"===this.filterSettings.type){var e=this.parent,t=void 0,i=this.filterSettings.columns,n=void 0;if(this.filterSettings.showFilterBarStatus){if(0<i.length&&this.filterStatusMsg!==this.l10n.getConstant("InvalidFilterMessage")){this.filterStatusMsg="";for(var r=0;r<i.length;r++){var s,n=e.grabColumnByUidFromAllCols(i[parseInt(r.toString(),10)].uid)||e.grabColumnByFieldFromAllCols(i[parseInt(r.toString(),10)].field,i[parseInt(r.toString(),10)].isForeignKey);r&&(this.filterStatusMsg+=" && "),P.isNullOrUndefined(n.format)?this.filterStatusMsg+=n.headerText+": "+this.values[n.field]:(s="date"===n.type||"datetime"===n.type||"dateonly"===n.type?this.valueFormatter.fromView(this.values[n.field],n.getParser(),"dateonly"===n.type?"date":n.type):this.values[n.field],t="date"!==n.type&&"datetime"!==n.type&&"dateonly"!==n.type?this.serviceLocator.getService("valueFormatter").toView(s,n.getParser()).toString():this.setFormatForFlColumn(s,n),this.filterStatusMsg+=n.headerText+": "+t)}}e.allowPaging&&(e.updateExternalMessage(this.filterStatusMsg),"100%"===this.parent.height)&&this.parent.scrollModule.refresh(),this.filterStatusMsg=""}}},d.prototype.setFormatForFlColumn=function(e,t){return this.serviceLocator.getService("valueFormatter").toView(e,t.getFormatter()).toString()},d.prototype.checkForSkipInput=function(e,t){var i;if("number"===e.type)(A.DataUtil.operatorSymbols[""+t]||-1<this.skipNumberInput.indexOf(t))&&(i=!0);else if("string"===e.type)for(var n=0,r=t;n<r.length;n++){var s=r[n];-1<this.skipStringInput.indexOf(s)&&(i=!0)}return i},d.prototype.processFilter=function(e){this.stopTimer(),this.startTimer(e)},d.prototype.startTimer=function(e){var t=this;this.timer=window.setInterval(function(){t.onTimerTick()},13===e.keyCode?0:this.filterSettings.immediateModeDelay)},d.prototype.stopTimer=function(){window.clearInterval(this.timer)},d.prototype.onTimerTick=function(){var e,t="[id='"+this.column.field+"_filterBarcell']",i=(i=this.element.querySelector(t))||this.parent.getHeaderContent().querySelector(t);this.cellText[this.column.field]=i.value,this.stopTimer(),P.isNullOrUndefined(this.column.filterBarTemplate)?e=JSON.parse(JSON.stringify(i.value)):("string"==typeof(t=this.column.filterBarTemplate.read)&&(t=P.getValue(t,window)),P.isNullOrUndefined(t)||(this.value=t.call(this,i))),P.isNullOrUndefined(this.value)||""===this.value?this.removeFilteredColsByField(this.column.field):(this.validateFilterValue(this.value),this.filterByMethod=!1,this.filterByColumn(this.column.field,this.operator,this.value,this.predicate,this.filterSettings.enableCaseSensitivity,this.ignoreAccent,this.column.isForeignColumn()),this.filterByMethod=!0,i.value=e,this.updateFilterMsg())},d.prototype.validateFilterValue=function(e){var t;switch(this.matchCase=this.filterSettings.enableCaseSensitivity,this.column.type){case"number":this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal;for(var i=[">","<","=","!"],n=0;n<e.length;n++)if(-1<i.indexOf(e[parseInt(n.toString(),10)])){t=n;break}this.getOperator(e.substring(t)),0!==t&&(this.value=e.substring(0,t)),""!==this.value&&1<=e.length&&(this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type)),isNaN(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage"));break;case"date":case"datetime":this.operator=this.filterOperators.equal,""===this.value||this.value instanceof Date||(this.getOperator(e),this.value=this.valueFormatter.fromView(this.value,this.column.getParser(),this.column.type),P.isNullOrUndefined(this.value)&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")));break;case"string":this.matchCase=!1,this.column.filter.operator?this.operator=this.column.filter.operator:-1!==e.indexOf("*")||-1!==e.indexOf("?")||-1!==e.indexOf("%3f")?this.operator=this.filterOperators.wildCard:-1!==e.indexOf("%")?this.operator=this.filterOperators.like:this.operator=this.filterOperators.startsWith;break;case"boolean":"true"===e.toLowerCase()||"1"===e?this.value=!0:"false"===e.toLowerCase()||"0"===e?this.value=!1:e.length&&(this.filterStatusMsg=this.l10n.getConstant("InvalidFilterMessage")),this.operator=this.filterOperators.equal;break;default:this.column.filter.operator?this.operator=this.column.filter.operator:this.operator=this.filterOperators.equal}},d.prototype.getOperator=function(e){var t=e.charAt(0),i=e.slice(0,2),n=P.extend({"=":this.filterOperators.equal,"!":this.filterOperators.notEqual},A.DataUtil.operatorSymbols);(n.hasOwnProperty(t)||n.hasOwnProperty(i))&&(this.operator=n[""+t],this.value=e.substring(1),this.operator||(this.operator=n[""+i],this.value=e.substring(2))),this.operator!==this.filterOperators.lessThan&&this.operator!==this.filterOperators.greaterThan||"="===this.value.charAt(0)&&(this.operator=this.operator+"orequal",this.value=this.value.substring(1))},d.prototype.columnPositionChanged=function(){this.parent.filterSettings.type},d.prototype.getLocalizedCustomOperators=function(){var e=[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"greaterthan",text:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",text:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",text:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",text:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnull",text:this.l10n.getConstant("IsNull")},{value:"isnotnull",text:this.l10n.getConstant("NotNull")}];this.customOperators={stringOperator:[{value:"startswith",text:this.l10n.getConstant("StartsWith")},{value:"endswith",text:this.l10n.getConstant("EndsWith")},{value:"contains",text:this.l10n.getConstant("Contains")},{value:"equal",text:this.l10n.getConstant("Equal")},{value:"isempty",text:this.l10n.getConstant("IsEmpty")},{value:"doesnotstartwith",text:this.l10n.getConstant("NotStartsWith")},{value:"doesnotendwith",text:this.l10n.getConstant("NotEndsWith")},{value:"doesnotcontain",text:this.l10n.getConstant("NotContains")},{value:"notequal",text:this.l10n.getConstant("NotEqual")},{value:"isnotempty",text:this.l10n.getConstant("IsNotEmpty")},{value:"like",text:this.l10n.getConstant("Like")}],numberOperator:e,dateOperator:e,datetimeOperator:e,dateonlyOperator:e,booleanOperator:[{value:"equal",text:this.l10n.getConstant("Equal")},{value:"notequal",text:this.l10n.getConstant("NotEqual")}]}},d.prototype.openMenuByField=function(e){var t,i,n=this.parent;n.enableAdaptiveUI?this.showCustomFilter(!1):(t=n.getColumnByField(e),(e=n.getColumnHeaderByField(e).querySelector(".e-filtermenudiv"))&&(n=n.element.getBoundingClientRect(),i=e.getBoundingClientRect(),this.filterDialogOpen(t,e,i.right-n.left,i.bottom-n.top)))},d.prototype.filterIconClickHandler=function(e){var e=e.target;!e.classList.contains("e-filtermenudiv")||"Menu"!==this.parent.filterSettings.type&&"CheckBox"!==this.parent.filterSettings.type&&"Excel"!==this.parent.filterSettings.type||(e=this.parent.getColumnByUid(E(e,"e-headercell").firstElementChild.getAttribute("e-mappinguid")),this.column=e,this.fltrDlgDetails.field===e.field&&this.fltrDlgDetails.isOpen)||(this.filterModule&&this.filterModule.closeDialog(),this.fltrDlgDetails={field:e.field,isOpen:!0},this.openMenuByField(e.field))},d.prototype.clickHandler=function(e){var t,i,n,r,s;"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&(E(e.target,"e-filterbarcell")&&e.target.classList.contains("e-input-group-icon")&&(P.closest(e.target,"div").querySelector(".e-filterbaroperator")||e.target).focus(),e.target.classList.contains("e-list-item"))&&-1!==(t=document.querySelector(".e-popup-open").getAttribute("id").replace("_popup","")).indexOf("grid-column")&&P.closest(document.getElementById(t),"div").querySelector(".e-filtertext").focus(),"Immediate"!==this.filterSettings.mode&&"Menu"!==this.parent.filterSettings.type&&"CheckBox"!==this.parent.filterSettings.type&&"Excel"!==this.parent.filterSettings.type||(e=(t=e.target).classList.contains("e-day"),i=E(this.parent.element,"e-dialog"),n=!1,r=E(t,"e-popup"),s=(this.parent.element.classList.contains("e-device")?document:this.parent.element).querySelector(".e-filter-popup"),i&&r&&(n=i.id===r.id),this.filterModule&&s&&(E(t,"e-excel-ascending")||E(t,"e-excel-descending"))&&this.filterModule.closeDialog(t),E(t,"e-filter-popup"))||t.classList.contains("e-filtermenudiv")||!this.filterModule||E(t,"e-date-overflow")||E(t,"e-popup-wrapper")||P.closest(t,".e-filter-item.e-menu-item")||e||E(t,"e-search-wrapper")&&!s||(n&&!E(t,"e-filter-popup")&&!E(t,"e-popup-flmenu")||!r&&s)&&(this.filterModule.isresetFocus=E(t,"e-grid")&&E(t,"e-grid").id===this.parent.element.id&&!(E(t,"e-search-wrapper")&&s),this.filterModule.closeDialog(t))},d.prototype.filterHandler=function(e){this.actualPredicate[e.field]=e.actualPredicate,this.actualData=Object.keys(this.actualPredicate);var t=new A.DataManager(this.filterSettings.columns),i=(new A.Query).where("field",this.filterOperators.equal,e.field);this.checkboxFilterObject=t.dataSource.json,this.checkboxPrevFilterObject=t.executeLocal(i);for(var n=0;n<this.checkboxPrevFilterObject.length;n++){for(var r=-1,s=0;s<this.filterSettings.columns.length;s++)if(this.checkboxPrevFilterObject[parseInt(n.toString(),10)].field===this.filterSettings.columns[parseInt(s.toString(),10)].field){r=s;break}-1!==r&&this.filterSettings.columns.splice(r,1)}this.values[e.field]&&delete this.values[e.field];t=this.parent.getColumnByField(e.field),i=this.parent.showColumnMenu&&t.showColumnMenu?".e-columnmenu":".e-icon-filter",t=this.parent.getColumnHeaderByField(e.field).querySelector(i);"filtering"===e.action?(this.filterSettings.columns=this.filterSettings.columns.concat(e.filterCollection),this.filterSettings.columns.length&&t&&t.classList.add("e-filtered")):(t&&t.classList.remove("e-filtered"),e.requestType="filtering",this.parent.renderModule.refresh(e)),this.parent.dataBind()},d.prototype.updateFilter=function(){var e=this.filterSettings.columns;this.actualPredicate={};for(var t=0;t<e.length;t++){this.column=this.parent.getColumnByField(e[parseInt(t.toString(),10)].field)||Ah(e[parseInt(t.toString(),10)].field,this.parent.getForeignKeyColumns());var i=e[parseInt(t.toString(),10)].field;this.parent.getColumnByField(e[parseInt(t.toString(),10)].field)||(i=Ah(e[parseInt(t.toString(),10)].field,this.parent.getForeignKeyColumns()).field),this.refreshFilterIcon(i,e[parseInt(t.toString(),10)].operator,e[parseInt(t.toString(),10)].value,e[parseInt(t.toString(),10)].type,e[parseInt(t.toString(),10)].predicate,e[parseInt(t.toString(),10)].matchCase,e[parseInt(t.toString(),10)].ignoreAccent,e[parseInt(t.toString(),10)].uid)}},d.prototype.refreshFilterIcon=function(e,t,i,n,r,s,o,a){r={field:e,predicate:r,matchCase:s,ignoreAccent:o,operator:t,value:i,type:n},this.actualPredicate[""+e]?this.actualPredicate[""+e].push(r):this.actualPredicate[""+e]=[r],s=a?this.parent.grabColumnByUidFromAllCols(a).field:e;this.addFilteredClass(s)},d.prototype.addFilteredClass=function(e){var t,i=this.parent.getColumnByField(e);this.parent.showColumnMenu&&i.showColumnMenu?t=this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu"):i&&(t=this.parent.getColumnHeaderByField(e).querySelector(".e-icon-filter")),t&&t.classList.add("e-filtered")},d.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},d.prototype.getOperatorName=function(e){return document.getElementById(this.parent.getColumnByField(e).uid).ej2_instances[0].value},d.prototype.renderCheckboxOnFilterMenu=function(){return this.filterModule.renderCheckBoxMenu()};var Rd=d;function d(e,t,i){this.predicate="and",this.contentRefresh=!0,this.filterByMethod=!0,this.refresh=!0,this.values={},this.operators={},this.cellText={},this.nextFlMenuOpen="",this.type={Menu:yd,CheckBox:vd,Excel:Id},this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.fltrDlgDetails={field:"",isOpen:!1},this.skipNumberInput=["="," ","!"],this.skipStringInput=[">","<","="],this.actualPredicate={},this.parent=e,this.filterSettings=t,this.serviceLocator=i,this.addEventListener(),this.setFullScreenDialog()}var Ed={root:"e-rhandler",suppress:"e-rsuppress",icon:"e-ricon",helper:"e-rhelper",header:"th.e-headercell",cursor:"e-rcursor"},Dd=(c.prototype.autoFitColumns=function(e,t,i){var n=this,r=null==e||e.length<=0?this.parent.getColumns().map(function(e){return e.autoFit=!0,e.field}):"string"==typeof e?[e]:e;this.parent.isAutoFitColumns=!0,P.isNullOrUndefined(e)||"object"!=typeof e||0===e.length?"string"==typeof e&&""!==e.trim()&&(this.parent.getColumnByField(e).autoFit=!0):e.forEach(function(e){n.parent.getColumnByField(e)&&(n.parent.getColumnByField(e).autoFit=!0)}),this.parent.enableAdaptiveUI&&this.parent.element.classList.add("e-grid-autofit"),this.findColumn(r,t,i)},c.prototype.autoFit=function(){var e=this.parent.getColumns(),t=0,e=e.filter(function(e){return P.isNullOrUndefined(e.maxWidth)||t++,!0===e.autoFit}).map(function(e){return e.field||e.headerText}),i=(0<e.length&&this.autoFitColumns(e),this.parent.getContentTable());this.parent.allowResizing&&t&&("Auto"===this.parent.resizeSettings.mode||"Normal"===this.parent.resizeSettings.mode&&!this.parent.autoFit&&0===e.length)?this.widthService.setWidthToTable(-1===i.style.width.indexOf("px")):this.parent.autoFit&&"Auto"===this.parent.resizeSettings.mode&&this.widthService.setWidthToTable(),-1!==i.style.width.indexOf("px")&&i.getBoundingClientRect().width<i.parentElement.clientWidth&&P.addClass([this.parent.getHeaderTable(),i],["e-tableborder"])},c.prototype.getCellElementsByColumnIndex=function(e){return this.parent.frozenRows?[].slice.call(this.parent.getHeaderTable().querySelectorAll("td.e-rowcell:nth-child("+(e+1)+"):not(.e-groupcaption):not(.e-detailcell)")).concat([].slice.call(this.parent.getContentTable().querySelectorAll("td.e-rowcell:nth-child("+(e+1)+"):not(.e-groupcaption):not(.e-detailcell)"))):[].slice.call(this.parent.getContentTable().querySelectorAll("td.e-rowcell:nth-child("+(e+1)+"):not(.e-groupcaption):not(.e-detailcell)"))},c.prototype.resizeColumn=function(e,t,i,n,r){var s,o,a=this.parent,l=0,h=a.getHeaderTable(),p=a.getContentTable(),d=0,i=i||this.parent.getUidByColumnField(e),c=this.parent.getNormalizedColumnIndex(i),i=h.querySelector('[e-mappinguid="'+i+'"]').parentElement.cloneNode(!0),u=this.getCellElementsByColumnIndex(c),e=this.parent.getColumnIndexByField(e),g=((s=P.isNullOrUndefined(a.getFooterContent())?s:a.getFooterContentTable())&&(o=s.querySelectorAll("td:nth-child("+(c+1)+"):not(.e-groupcaption)")),[].slice.call(h.querySelector("tr").getElementsByClassName("e-grouptopleftcell")));if(0<g.length)for(var f=0;f<g.length;f++)d+=g[parseInt(f.toString(),10)].offsetWidth;var c=p.querySelector(".e-detailrowcollapse")||p.querySelector(".e-detailrowexpand"),c=((this.parent.detailTemplate||this.parent.childGrid)&&c&&(d+=c.offsetWidth),[i]),m=[],y=[];if(s)for(f=0;f<o.length;f++)y[parseInt(f.toString(),10)]=o[parseInt(f.toString(),10)].cloneNode(!0);for(f=0;f<u.length;f++)m[parseInt(f.toString(),10)]=u[parseInt(f.toString(),10)].cloneNode(!0);var i=this.createTable(h,c,"e-gridheader"),c=null,S=null,n=(a.getCurrentViewRecords().length&&(S=this.createTable(p,m,"e-gridcontent",n,r)),y.length&&(c=this.createTable(s,y,"e-gridfooter")),a.getColumns()[parseInt(e.toString(),10)]),r=n.width=P.formatUnit(Math.max(i,S,c)),i=n.maxWidth&&parseFloat(n.maxWidth.toString());if(parseInt(r,10)>i&&(n.width=i),this.widthService.setColumnWidth(a.getColumns()[parseInt(e.toString(),10)]),!1===a.getColumns().some(function(e){return(e.visible||a.groupSettings.columns.length)&&(null===e.width||void 0===e.width||e.width.length<=0)}))for(var v=a.getColumns(),f=0;f<v.length;f++)v[parseInt(f.toString(),10)].visible&&(l+=parseFloat(v[parseInt(f.toString(),10)].width));S=l+d;0<l&&((this.parent.detailTemplate||this.parent.childGrid)&&this.widthService.setColumnWidth(new Q({width:"30px"})),"Auto"===this.parent.resizeSettings.mode&&(S="100%"),h.style.width=P.formatUnit(S),p.style.width=P.formatUnit(S),P.isNullOrUndefined(s)||(s.style.width=P.formatUnit(S))),a.isFrozenGrid()&&a.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar(),h.offsetWidth<p.parentElement.scrollWidth?(P.isNullOrUndefined(p.querySelector(".e-emptyrow"))?P.addClass([h,p],["e-tableborder"]):(P.addClass([h],["e-tableborder"]),P.removeClass([p],["e-tableborder"])),P.removeClass([a.element],["e-left-shadow","e-right-shadow"])):(P.removeClass([h,p],["e-tableborder"]),a.getVisibleFrozenRightCount()&&P.addClass([a.element],["e-right-shadow"])),P.isNullOrUndefined(s)||s.classList.add("e-tableborder")},c.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.widthService=null,this.unwireEvents(),this.removeEventListener())},c.prototype.getModuleName=function(){return"resize"},c.prototype.findColumn=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[parseInt(n.toString(),10)],s=this.parent.getColumnIndexByField(r),o=this.parent.getColumns()[parseInt(s.toString(),10)];-1<s&&!P.isNullOrUndefined(o)&&!0===o.visible&&this.resizeColumn(r,s,null,t,i)}this.parent.allowTextWrap&&this.parent.notify(yi,{case:"refreshHeight",isModeChg:!0}),this.parent.isFrozenGrid()&&this.refreshResizefrzCols(!0,!0)},c.prototype.createTable=function(e,t,i,n,r){(r=void 0===r?t.length:r)<(n=void 0===n?1:n)&&(n=(n^=r)^(r^=n));for(var s=this.parent.createElement("div"),o=this.parent.enableAdaptiveUI?" e-bigger":"",o=(s.className=this.parent.element.className+o,s.style.cssText="display: inline-block;visibility:hidden;position:absolute",this.parent.createElement("div")),a=(o.className=i,this.parent.createElement("table",{attrs:{role:"grid"}})),l=(a.className=e.className,a.classList.add("e-resizetable"),a.style.cssText="table-layout: auto;width: auto",this.parent.createElement("tr")),h=n<=0?1:n;h<=(r>t.length?t.length:r);h++){var p=l.cloneNode();p.className=e.querySelector("tr").className,p.appendChild(t[parseInt((h-1).toString(),10)]),a.appendChild(p)}o.appendChild(a),s.appendChild(o),document.body.appendChild(s);i=a.getBoundingClientRect().width;return document.body.removeChild(s),Math.ceil(i)},c.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ft,this.refreshHeight,this),this.parent.on(Ar,this.refreshResizePosition,this),this.parent.on(lt,this.wireEvents,this),this.parent.on(pt,this.autoFit,this),this.parent.on(zn,this.refreshHeight,this),this.parent.on(r,this.destroy,this))},c.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ft,this.refreshHeight),this.parent.off(Ar,this.refreshResizePosition),this.parent.off(lt,this.wireEvents),this.parent.off(zn,this.refreshHeight),this.parent.off(r,this.destroy))},c.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},c.prototype.refreshHeight=function(){if(this.parent.getHeaderTable()){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)0<e[parseInt(t.toString(),10)].parentElement.offsetHeight&&(e[parseInt(t.toString(),10)].style.height=e[parseInt(t.toString(),10)].parentElement.offsetHeight+"px");this.setHandlerHeight()}},c.prototype.wireEvents=function(){P.EventHandler.add(this.parent.getHeaderContent(),P.Browser.touchStartEvent,this.touchResizeStart,this),P.EventHandler.add(this.parent.getHeaderContent(),Wt,this.callAutoFit,this)},c.prototype.unwireEvents=function(){P.EventHandler.remove(this.parent.getHeaderContent(),P.Browser.touchStartEvent,this.touchResizeStart),P.EventHandler.remove(this.parent.getHeaderContent(),Wt,this.callAutoFit)},c.prototype.getResizeHandlers=function(){return[].slice.call(this.parent.getHeaderTable().getElementsByClassName(Ed.root))},c.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName(Ed.suppress)),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.height=e[parseInt(t.toString(),10)].parentElement.offsetHeight+"px"},c.prototype.callAutoFit=function(e){var t;!e.target.classList.contains("e-rhandler")||this.isCancelAutoFit||(t=this.getTargetColumn(e)).columns||(this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),this.parent.isFrozenGrid()&&this.refreshResizefrzCols(!0,!0),P.closest(e.target,Ed.header).classList.add("e-resized"))},c.prototype.touchResizeStart=function(e){if(!O.Global.timer)return O.Global.timer=setTimeout(function(){O.Global.timer=null},300),this.resizeStart(e);clearTimeout(O.Global.timer),O.Global.timer=null,this.callAutoFit(e)},c.prototype.resizeStart=function(e){var t=this;if(e.target.classList.contains("e-rhandler")){this.isCancelAutoFit=!1;var i={e:e,column:this.getTargetColumn(e)};if(this.parent.trigger(We,i,function(e){(e.cancel||t.parent.isEdit)&&(t.cancelResizeAction(),t.isCancelAutoFit=!0)}),!this.isCancelAutoFit){if(!this.helper){if(0===this.getScrollBarWidth()){if(this.resizeProcess=!0,this.parent.allowGrouping)for(var n=0;n<this.parent.groupSettings.columns.length;n++)this.widthService.setColumnWidth(new Q({width:"30px"}),n);for(var r=0,s=this.refreshColumnWidth();r<s.length;r++){var o=s[r];this.widthService.setColumnWidth(o)}this.widthService.setWidthToTable(),this.resizeProcess=!1}this.refreshStackedColumnWidth(),this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),this.column.getFreezeTableName()===ls?this.parent.enableRtl?this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(P.isNullOrUndefined(this.column.width)?"":this.column.width.toString()):this.minMove=parseFloat(P.isNullOrUndefined(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(P.isNullOrUndefined(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}P.Browser.isDevice&&!this.helper.classList.contains(Ed.icon)?(this.helper.classList.add(Ed.icon),P.EventHandler.add(document,P.Browser.touchStartEvent,this.removeHelper,this),P.EventHandler.add(this.helper,P.Browser.touchStartEvent,this.resizeStart,this)):(P.EventHandler.add(document,P.Browser.touchEndEvent,this.resizeEnd,this),P.EventHandler.add(this.parent.element,P.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add"))}}},c.prototype.cancelResizeAction=function(e){e&&(P.EventHandler.remove(this.parent.element,P.Browser.touchMoveEvent,this.resizing),P.EventHandler.remove(document,P.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),P.Browser.isDevice&&!P.isNullOrUndefined(this.helper)&&(P.EventHandler.remove(document,P.Browser.touchStartEvent,this.removeHelper),P.EventHandler.remove(this.helper,P.Browser.touchStartEvent,this.resizeStart)),P.isNullOrUndefined(this.helper)||P.detach(this.helper),this.refresh()},c.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&i<e?i:e},c.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().getElementsByClassName("e-rhandler")),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].style.height=this.element.parentElement.offsetHeight+"px"},c.prototype.getColData=function(e,t){return{width:parseFloat(P.isNullOrUndefined(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},c.prototype.refreshResizeFixedCols=function(e){for(var t=this.parent.getColumns(),i=this.parent.enableColumnVirtualization?this.parent.translateX:0,n=[].slice.call(this.parent.getHeaderContent().querySelector("tbody").querySelectorAll(".e-fixedfreeze")).concat([].slice.call(this.parent.getContent().querySelectorAll(".e-fixedfreeze"))),r=0;r<n.length;r++){var s,o=n[parseInt(r.toString(),10)],a=void 0,l=(a=o.classList.contains("e-summarycell")?(s=o.getAttribute("e-mappinguid"),this.parent.getColumnByUid(s)):(s=parseInt(o.getAttribute("data-colindex"),10),t[parseInt(s.toString(),10)]),0);if("Left"===e){this.parent.getVisibleFrozenLeftCount()?l=30*this.parent.getIndentCount():"Right"===this.parent.getFrozenMode()&&(l=30*this.parent.groupSettings.columns.length);for(var h=0;h<t.length;h++)if(a.index>t[parseInt(h.toString(),10)].index){if(a.uid===t[parseInt(h.toString(),10)].uid)break;("Left"===t[parseInt(h.toString(),10)].freeze||t[parseInt(h.toString(),10)].isFrozen||"Fixed"===t[parseInt(h.toString(),10)].freeze)&&t[parseInt(h.toString(),10)].visible&&(l+=parseFloat(t[parseInt(h.toString(),10)].width.toString()))}pp(o,(0===l?l:l-1)-i,this.parent.enableRtl,"Left")}if("Right"===e){for(l="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0,h=t.length-1;0<=h&&a.uid!==t[parseInt(h.toString(),10)].uid;h--)"Right"!==t[parseInt(h.toString(),10)].freeze&&"Fixed"!==t[parseInt(h.toString(),10)].freeze||t[parseInt(h.toString(),10)].visible&&(l+=parseFloat(t[parseInt(h.toString(),10)].width.toString()));var p=0;pp(o,l-(p=1<o.colSpan?this.calculateColspanWidth(t,o,a.index):p)+i,this.parent.enableRtl,"Right")}}},c.prototype.calculateColspanWidth=function(e,t,i){for(var n=0,r=i+1;r<i+t.colSpan;r++)n+=parseInt(e[parseInt(r.toString(),10)].width.toString(),10);return n},c.prototype.refreshResizePosition=function(){this.refreshResizefrzCols(!0)},c.prototype.refreshResizefrzCols=function(e,t){var n=this,r=this.parent.enableColumnVirtualization?this.parent.translateX:0;if(e||"Left"===this.column.freeze||this.column.isFrozen||this.column.columns&&"Left"===lp(this.column)){var i=30*this.parent.getIndentCount(),s=this.parent.getColumns().filter(function(e){return"Left"===e.freeze||e.isFrozen});e&&!t||this.frzHdrRefresh("Left");for(var o=0;o<s.length;o++)(e||s[parseInt(o.toString(),10)].index>this.column.index)&&((this.parent.frozenRows?[].slice.call(this.parent.getHeaderContent().querySelectorAll('td[data-colindex="'+o+'"]')).concat([].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex="'+o+'"]'))):[].slice.call(this.parent.getContent().querySelectorAll('td[data-colindex="'+o+'"]'))).filter(function(e){pp(e,i-r,n.parent.enableRtl,"Left")}),this.parent.enableColumnVirtualization)&&(s[parseInt(o.toString(),10)].valueX=i),s[parseInt(o.toString(),10)].visible&&(i+=parseFloat(s[parseInt(o.toString(),10)].width.toString()));this.refreshResizeFixedCols("Left")}if(e||"Right"===this.column.freeze||this.column.columns&&"Right"===lp(this.column)){for(var a="Right"===this.parent.getFrozenMode()&&this.parent.isRowDragable()?30:0,l=this.parent.getColumns(),h=(e&&!t||this.frzHdrRefresh("Right"),l.filter(function(e){return"Right"===e.freeze})),p=this,o=l.length-1;o>=l.length-h.length;o--)!function(i){(p.parent.frozenRows?[].slice.call(p.parent.getHeaderContent().querySelectorAll('td[data-colindex="'+i+'"]')).concat([].slice.call(p.parent.getContent().querySelectorAll('td[data-colindex="'+i+'"]'))):[].slice.call(p.parent.getContent().querySelectorAll('td[data-colindex="'+i+'"]'))).filter(function(e){var t=0;1<e.colSpan&&(t=n.calculateColspanWidth(l,e,l[parseInt(i.toString(),10)].index)),pp(e,a-t+r,n.parent.enableRtl,"Right")}),p.parent.enableColumnVirtualization&&(l[parseInt(i.toString(),10)].valueX=a),l[parseInt(i.toString(),10)].visible&&(a+=parseFloat(l[parseInt(i.toString(),10)].width.toString()))}(o);this.refreshResizeFixedCols("Right")}this.column&&("Fixed"===this.column.freeze||this.column.columns&&"Fixed"===lp(this.column))&&(this.refreshResizeFixedCols("Left"),this.refreshResizeFixedCols("Right"),this.frzHdrRefresh("Left"),this.frzHdrRefresh("Right")),this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&this.parent.getContent().querySelector(".e-groupcaptionrow")&&this.refreshGroupCaptionRow()},c.prototype.refreshGroupCaptionRow=function(){for(var e=[].slice.call(this.parent.getContent().querySelectorAll(".e-groupcaptionrow")),t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)];i.querySelector(".e-summarycell")&&Kh(i,this.parent)}},c.prototype.frzHdrRefresh=function(e){var a=this,l=this.parent.enableColumnVirtualization?this.parent.translateX:0;if("Left"===e)for(var t=[].slice.call(this.parent.getHeaderContent().querySelector("thead").querySelectorAll("tr")),i=0;i<t.length;i++)for(var h=[].slice.call(t[parseInt(i.toString(),10)].querySelectorAll(".e-leftfreeze,.e-fixedfreeze")),p=this,n=0;n<h.length;n++)!function(e){e=h[parseInt(e.toString(),10)];if(e.classList.contains("e-rowdragheader")||e.classList.contains("e-dragheadercell")||e.classList.contains("e-grouptopleftcell"))return;var t=p.getParticularCol(e),i=p.parent.getColumns(),n=0,r=[];if(p.parent.aggregates.length&&p.parent.getFooterContent()&&(p.parent.getContent().querySelectorAll(".e-summaryrow").length&&[].slice.call(p.parent.getContent().querySelectorAll(".e-summaryrow")).filter(function(e){r.push(e.querySelector('[e-mappinguid="'+t.uid+'"]'))}),r=r.concat([].slice.call(p.parent.getFooterContent().querySelectorAll('[e-mappinguid="'+t.uid+'"]')))),e.classList.contains("e-fixedfreeze")){p.parent.getVisibleFrozenLeftCount()?n=30*p.parent.getIndentCount():"Right"===p.parent.getFrozenMode()&&(n=30*p.parent.groupSettings.columns.length);for(var s=0;s<i.length;s++)if(t.index>i[parseInt(s.toString(),10)].index){if(t.uid===i[parseInt(s.toString(),10)].uid)break;("Left"===i[parseInt(s.toString(),10)].freeze||i[parseInt(s.toString(),10)].isFrozen||"Fixed"===i[parseInt(s.toString(),10)].freeze)&&i[parseInt(s.toString(),10)].visible&&(n+=parseInt(i[parseInt(s.toString(),10)].width.toString(),10))}r&&r.length&&r.filter(function(e){pp(e,n-l,a.parent.enableRtl,"Left")}),pp(e,(0===n?n:n-1)-l,p.parent.enableRtl,"Left")}else{if(n=30*p.parent.getIndentCount(),0===t.index)r&&r.length&&r.filter(function(e){pp(e,n-l,a.parent.enableRtl,"Left")});else{for(var o=0;o<i.length&&!(t.index<i[parseInt(o.toString(),10)].index||t.uid===i[parseInt(o.toString(),10)].uid);o++)i[parseInt(o.toString(),10)].visible&&(n+=parseInt(i[parseInt(o.toString(),10)].width.toString(),10));r&&r.length&&r.filter(function(e){pp(e,n-l,a.parent.enableRtl,"Left")})}pp(e,n-l,p.parent.enableRtl,"Left"),p.parent.enableColumnVirtualization&&(t.valueX=n)}}(n);if("Right"===e)for(t=[].slice.call(this.parent.getHeaderContent().querySelector("thead").querySelectorAll("tr")),i=0;i<t.length;i++)for(var h=[].slice.call(t[parseInt(i.toString(),10)].querySelectorAll(".e-rightfreeze, .e-fixedfreeze")),d=this,n=h.length-1;0<=n;n--)!function(e){var e=h[parseInt(e.toString(),10)],t=d.getParticularCol(e),i=d.parent.getColumns(),n=0,r=[];if(d.parent.aggregates.length&&d.parent.getFooterContent()&&(d.parent.getContent().querySelectorAll(".e-summaryrow").length&&[].slice.call(d.parent.getContent().querySelectorAll(".e-summaryrow")).filter(function(e){r.push(e.querySelector('[e-mappinguid="'+t.uid+'"]'))}),r=r.concat([].slice.call(d.parent.getFooterContent().querySelectorAll('[e-mappinguid="'+t.uid+'"]')))),e.classList.contains("e-fixedfreeze")){for(var n="Right"===d.parent.getFrozenMode()&&d.parent.isRowDragable()?30:0,s=i.length-1;0<=s;s--)if(t.index<i[parseInt(s.toString(),10)].index){if(t.columns&&op(t,i[parseInt(s.toString(),10)].uid)||t.index>i[parseInt(s.toString(),10)].index)break;"Right"!==i[parseInt(s.toString(),10)].freeze&&"Fixed"!==i[parseInt(s.toString(),10)].freeze||i[parseInt(s.toString(),10)].visible&&(n+=parseFloat(i[parseInt(s.toString(),10)].width.toString()))}r.length&&r.filter(function(e){pp(e,n+l,a.parent.enableRtl,"Right")}),pp(e,n+l,d.parent.enableRtl,"Right")}else{n="Right"===d.parent.getFrozenMode()&&d.parent.isRowDragable()?30:0;for(var o=i.length-1;0<=o&&!(t.columns&&op(t,i[parseInt(o.toString(),10)].uid)||t.index>i[parseInt(o.toString(),10)].index||t.uid===i[parseInt(o.toString(),10)].uid);o--)i[parseInt(o.toString(),10)].visible&&(n+=parseInt(i[parseInt(o.toString(),10)].width.toString(),10));r.length&&r.filter(function(e){pp(e,n+l,a.parent.enableRtl,"Right")}),pp(e,n+l,d.parent.enableRtl,"Right"),d.parent.enableColumnVirtualization&&(t.valueX=n)}}(n)},c.prototype.getParticularCol=function(e){e=(e.classList.contains("e-filterbarcell")?e:e.querySelector("[e-mappinguid]")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(e)},c.prototype.resizing=function(e){if(!P.isNullOrUndefined(this.column)){this.parent.isFrozenGrid()&&this.refreshResizefrzCols();var t=0,i=(P.isNullOrUndefined(this.column)&&(t=E(this.element,"th").offsetWidth),this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight()),this.getPointX(e)),n=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,r=this.getColData(this.column,n),r=(r.width||(r.width=P.closest(this.element,"th").offsetWidth),this.getWidth(r.width,r.minWidth,r.maxWidth));if(this.parent.log("resize_min_max",{column:this.column,width:r}),(!this.parent.enableRtl&&this.minMove>=i||this.parent.enableRtl&&this.minMove<=i)&&(r=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=i=this.minMove),r!==parseFloat((P.isNullOrUndefined(this.column.width)||"auto"===this.column.width?t:this.column.width).toString())){this.pageX=i,this.column.width=P.formatUnit(r);t={e:e,column:this.column};if(this.parent.trigger(Ke,t),t.cancel)return void this.cancelResizeAction(!0);this.column;i=[this.column];this.column.columns&&(r=this.getSubColumns(this.column,[]),r=this.calulateColumnsWidth(r,!1,n),i=this.calulateColumnsWidth(r,!0,n)),this.resizeProcess=!0;for(var s=0,o=i;s<o.length;s++){var a=o[s];this.widthService.setColumnWidth(a,null,"resize")}this.resizeProcess=!1,this.updateHelper()}this.isDblClk=!1}},c.prototype.calulateColumnsWidth=function(e,t,i){for(var n=[],r=0,s=e;r<s.length;r++){for(var o=s[r],a=0,l=0;l<e.length;l++)a+=parseFloat(e[parseInt(l.toString(),10)].width.toString());var h=this.getColData(o,parseFloat(o.width)*i/a),h=this.getWidth(h.width,h.minWidth,h.maxWidth);h!==parseFloat(o.width.toString())&&(t&&(o.width=P.formatUnit(h<1?1:h)),n.push(o))}return n},c.prototype.getSubColumns=function(e,t){for(var i=0,n=e.columns;i<n.length;i++){var r=n[i];!1!==r.visible&&r.allowResizing&&(r.columns?this.getSubColumns(r,t):t.push(r))}return t},c.prototype.resizeEnd=function(e){var t,i,n,r;this.helper&&!this.parent.isDestroyed&&(t=this.parent,P.EventHandler.remove(this.parent.element,P.Browser.touchMoveEvent,this.resizing),P.EventHandler.remove(document,P.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),P.detach(this.helper),n={e:e,column:this.column},(i=this.parent.getContent().querySelector("."+Zr)).scrollHeight>i.clientHeight&&(this.parent.scrollModule.setPadding(),i.style.overflowY="scroll"),this.parent.trigger(Qe,n),P.closest(this.element,".e-headercell").classList.add("e-resized"),this.isFrozenColResized=!1,this.parent.allowTextWrap&&(this.updateResizeEleHeight(),this.parent.notify(Li,{case:"textwrap"})),i=t.getHeaderTable(),n=t.getContentTable(),P.isNullOrUndefined(t.getFooterContent())||(r=t.getFooterContentTable()),i.offsetWidth<t.getContent().scrollWidth?(P.isNullOrUndefined(n.querySelector(".e-emptyrow"))?P.addClass([i,n],["e-tableborder"]):(P.addClass([i],["e-tableborder"]),P.removeClass([n],["e-tableborder"])),P.removeClass([t.element],["e-left-shadow","e-right-shadow"])):(P.removeClass([i,n],["e-tableborder"]),t.getVisibleFrozenRightCount()&&P.addClass([t.element],["e-right-shadow"])),P.isNullOrUndefined(r)||r.classList.add("e-tableborder"),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0)},c.prototype.getPointX=function(e){return(e.touches&&e.touches.length?e.touches[0]:e).pageX},c.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var n=i[t],r=0,s=e;r<s.length;r++){var o=s[r];if(n.querySelector("[e-mappinguid]")&&n.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===o.uid&&o.visible){o.width=n.getBoundingClientRect().width;break}}return e},c.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.columns);e<t.length;e++){var i=t[e];i.width=this.getStackedWidth(i,0)}},c.prototype.getStackedWidth=function(e,t){for(var i=0,n=e.columns;i<n.length;i++){var r=n[i];!1!==r.visible&&(r.columns?t=this.getStackedWidth(r,t):t+=parseFloat(r.width.toString()))}return t},c.prototype.getTargetColumn=function(e){e=P.closest(e.target,Ed.header),e=(e=e.querySelector(".e-headercelldiv")||e.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(e)},c.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,n=t;i<n.length;i++)n[i].classList[""+e](Ed.cursor)},c.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},c.prototype.appendHelper=function(){this.helper=this.parent.createElement("div",{className:Ed.helper}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},c.prototype.setHelperHeight=function(){for(var e=this.parent.getContent().offsetHeight-this.getScrollBarWidth(),t=P.closest(this.element,Ed.header),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),n=i.indexOf(t.parentElement);n<i.length&&-1<n;n++)e+=i[parseInt(n.toString(),10)].offsetHeight;var r=this.calcPos(t);r.left+=this.parent.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+r.top+"px; left:"+Math.floor(r.left)+"px;",this.parent.enableVirtualization&&this.helper.classList.add("e-virtual-rhandler")},c.prototype.getScrollBarWidth=function(e){var t=this.parent.getContent().firstChild;return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?ph():0},c.prototype.removeHelper=function(e){e=e.target.classList;e.contains(Ed.root)||e.contains(Ed.icon)||!this.helper||(P.EventHandler.remove(document,P.Browser.touchStartEvent,this.removeHelper),P.EventHandler.remove(this.helper,P.Browser.touchStartEvent,this.resizeStart),P.detach(this.helper),this.refresh())},c.prototype.updateHelper=function(){var e=P.closest(this.element,Ed.header),e=Math.floor(this.calcPos(e).left+(this.parent.enableRtl?-1:e.offsetWidth-2));e>this.parentElementWidth&&(e=this.parentElementWidth-2),this.helper.style.left=e+"px"},c.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),n=e.ownerDocument,r=E(e,"e-grid")||n.documentElement;r&&(r===n.body||r===n.documentElement)&&"static"===r.style.position;)r=r.parentNode;return r&&r!==e&&1===r.nodeType&&(t=r.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},c.prototype.doubleTapEvent=function(e){var t=this;this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(function(){t.tapped=null},300))},c.prototype.getUserAgent=function(){var e=P.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},c.prototype.timeoutHandler=function(){this.tapped=null},c);function c(e){this.tapped=!1,this.isDblClk=!0,this.resizeProcess=!1,this.isCancelAutoFit=!1,this.parent=e,this.parent.isDestroyed||(this.widthService=new Yo(e),this.addEventListener())}Td.prototype.chkDropPosition=function(e,t){var i=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),i=!i||!i.lockColumn;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.enableColumnVirtualization||this.parent.isFrozenGrid()&&Array.prototype.indexOf.call(P.closest(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(P.closest(t,"thead").children,t.parentElement))&&-1<this.targetParentContainerIndex(e,t)&&i},Td.prototype.chkDropAllCols=function(e,t){for(var i,n=this.getHeaderCells();!i&&0<n.length;)i=e!==n.pop()&&-1<this.targetParentContainerIndex(e,t);return i},Td.prototype.findColParent=function(e,t,i){for(var n=0,r=t.length;n<r;n++){if(e===t[parseInt(n.toString(),10)])return!0;if(t[parseInt(n.toString(),10)].columns){var s=i.length;if(i.push(t[parseInt(n.toString(),10)]),this.findColParent(e,t[parseInt(n.toString(),10)].columns,i))return!0;i.splice(s,i.length-s)}}return!1},Td.prototype.getColumnsModel=function(e,t){for(var i=[],n=[],r=0,s=e.length;r<s;r++)P.isNullOrUndefined(e[parseInt(r.toString(),10)])||((e[parseInt(r.toString(),10)].visible||t)&&i.push(e[parseInt(r.toString(),10)]),e[parseInt(r.toString(),10)].columns&&(n=n.concat(e[parseInt(r.toString(),10)].columns)));return i=n.length?i.concat(this.getColumnsModel(n)):i},Td.prototype.headerDrop=function(e){var t=this.parent,i=(this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),i=t.getColumnByUid(i);if(P.closest(e.target,"th")&&(P.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)){var n,r,s,o,e=P.closest(e.target,".e-headercell"),a=(e.querySelector(".e-headercelldiv")||e.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");if(!P.isNullOrUndefined(a)){var t=t.getColumnByUid(a);if(P.isNullOrUndefined(t)||!t.allowReordering||t.lockColumn)return void this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:i,destColumn:t})}e&&this.chkDropPosition(this.element,e)&&this.chkDropAllCols(this.element,e)&&(this.parent.enableColumnVirtualization?(o=this.parent.columns,n=this.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),a=this.parent.columns.filter(function(e){return e.uid===n}),r=null,t=a[0],s=e.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),o.some(function(e,t){return e.uid===s&&(r=t,e.uid===s)}),P.isNullOrUndefined(r)||this.moveColumns(r,t)):(a=this.targetParentContainerIndex(this.element,e),t=this.element.firstElementChild.getAttribute("e-mappinguid"),this.destElement=e,this.parent.notify(qn,{ele:e}),t?this.moveColumns(a,this.parent.getColumnByUid(t)):(e=this.getHeaderCells(),t=Zl(this.element,e),o=this.getColumnsModel(this.parent.columns),this.moveColumns(a,o[parseInt(t.toString(),10)]))))}else this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:i})},Td.prototype.isActionPrevent=yh,Td.prototype.moveColumns=function(e,t,i,n){var r=this.parent;if(this.isActionPrevent(r))r.notify(ei,{instance:this,handler:this.moveColumns,arg1:e,arg2:t});else{var s=this.getColParent(t,this.parent.columns),o=(s||this.parent).columns,a=$l(t,o);if((s||this.parent.lockcolPositionCount)&&!i&&!this.parent.enableColumnVirtualization){for(var l=0;l<o.length;l++)if(o[parseInt(l.toString(),10)].field===t.field){a=l;break}var h=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(h){for(l=0;l<o.length;l++)if(o[parseInt(l.toString(),10)].field===h.field){e=l;break}}else for(l=0;l<o.length;l++)o[parseInt(l.toString(),10)].headerText===this.destElement.innerText.trim()&&(e=l)}if(r.allowReordering&&a!==e&&-1!==a&&-1!==e){o.splice(e,0,o.splice(a,1)[0]);i={column:t,destIndex:e,columns:o,parent:s,cancel:!1};if(r.notify(Un,i),!i.cancel){if(this.parent.isFrozenGrid())if(this.parent.frozenColumns)for(l=0;l<o.length;l++)"Left"===o[parseInt(l.toString(),10)].freeze&&(o[parseInt(l.toString(),10)].freeze=void 0);else this.parent.getFrozenLeftCount()>e?t.freeze="Left":o.length-this.parent.getFrozenRightColumnsCount()<=e?t.freeze="Right":t.freeze="Fixed"===t.freeze?"Fixed":void 0;r.getColumns(!0),r.notify(zt,{fromIndex:e,toIndex:a}),!1!==n&&r.notify(ut,{type:y,requestType:"reorder",fromIndex:e,toIndex:a,toColumnUid:t.uid}),this.parent.isFrozenGrid()&&(s=this.parent.columns,this.idx=0,this.refreshColumnIndex(s),this.parent.notify(Or,{}))}}}},Td.prototype.refreshColumnIndex=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].index=this.idx,this.idx++,e[parseInt(t.toString(),10)].columns&&e[parseInt(t.toString(),10)].columns.length&&this.refreshColumnIndex(e[parseInt(t.toString(),10)].columns)},Td.prototype.targetParentContainerIndex=function(e,t){var i=this.parent.columns,n=this.getHeaderCells(),r=this.parent.getStackedColumns(i),s=[],r=(r.length&&(s=this.getAllStackedheaderParentColumns(n)),r.length&&s.length?this.getColumnsModel(s):this.getColumnsModel(i,!0)),s=this.getColParent(r[Zl(e,n)],i),i=s?s.columns:i;return $l(r[Zl(t,n)],i)},Td.prototype.getAllStackedheaderParentColumns=function(e){for(var t=[],i=0;i<e.length;i++)e[parseInt(i.toString(),10)].classList.contains("e-hide")?(e.splice(i,1),i--):e[parseInt(i.toString(),10)].closest("thead").firstChild===e[parseInt(i.toString(),10)].parentElement&&t.push(this.parent.getColumnByUid(e[parseInt(i.toString(),10)].firstElementChild.getAttribute("e-mappinguid")));return t},Td.prototype.getHeaderCells=function(){return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},Td.prototype.getColParent=function(e,t){var i=[];return this.findColParent(e,t,i),i[i.length-1]},Td.prototype.reorderSingleColumn=function(t,i){var e,n=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(e){return e.field===t})[0]:this.parent.getColumnByField(t),r=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(e){return e.field===i})[0]:this.parent.getColumnByField(i);(P.isNullOrUndefined(n)||n.allowReordering&&!n.lockColumn)&&(P.isNullOrUndefined(r)||r.allowReordering&&!r.lockColumn)?-1<(e=$l(r,(this.getColParent(r,this.parent.columns)||this.parent).columns))&&this.moveColumns(e,n,!0):this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),column:n,destColumn:r})},Td.prototype.reorderMultipleColumns=function(e,t){var i=this.parent.getColumnIndexByField(t),t=this.parent.getColumnByField(t);if(!(i<0)&&(P.isNullOrUndefined(t)||t.allowReordering&&!t.lockColumn)){for(var n=0;n<e.length;n++){var r=this.parent.getColumnByField(e[parseInt(n.toString(),10)]);if(!P.isNullOrUndefined(r)&&(!r.allowReordering||r.lockColumn))return}for(n=0;n<e.length;n++){var r=this.parent.getColumnByIndex(i),s=this.getColParent(r,this.parent.columns),s=$l(r,(s||this.parent).columns);-1<s&&this.moveColumns(s,this.parent.getColumnByField(e[parseInt(n.toString(),10)]),!0,!0),this.parent.getColumnIndexByField(e[n+1])>=s&&i++}}},Td.prototype.moveTargetColumn=function(e,t){-1<t&&this.moveColumns(t,e,!0)},Td.prototype.reorderSingleColumnByTarget=function(e,t){this.moveTargetColumn(this.parent.getColumnByField(e),t)},Td.prototype.reorderMultipleColumnByTarget=function(e,t){for(var i=0;i<e.length;i++)this.reorderSingleColumnByTarget(e[parseInt(i.toString(),10)],t)},Td.prototype.reorderColumns=function(e,t){"string"==typeof e?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},Td.prototype.reorderColumnByIndex=function(e,t){this.moveTargetColumn(this.parent.getColumnByIndex(e),t)},Td.prototype.reorderColumnByTargetIndex=function(e,t){"string"==typeof e?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},Td.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.createReorderElement()},Td.prototype.createReorderElement=function(e){e&&e.args&&e.args.isXaxis&&this.setDisplay("none");e=this.parent.element.querySelector("."+Kr);this.upArrow=e.appendChild(this.parent.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=e.appendChild(this.parent.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}}))},Td.prototype.onActionComplete=function(e){this.parent.trigger(p,P.extend(e,{type:p}));e=this.fromCol&&this.parent.getColumnHeaderByField(this.fromCol);e&&this.parent.focusModule.onClick({target:e},!0)},Td.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.upArrow.parentNode&&P.remove(this.upArrow),this.downArrow.parentNode&&P.remove(this.downArrow),this.parent.off(jt,this.headerDrop),this.parent.off(g,this.enableAfterRender),this.parent.off(Ct,this.onActionComplete),this.parent.off(we,this.drag),this.parent.off(Ce,this.dragStart),this.parent.off(Ht,this.dragStop),this.parent.off(ft,this.createReorderElement),this.parent.off(Mt,this.keyPressHandler),this.parent.off(r,this.destroy))},Td.prototype.keyPressHandler=function(e){var t=this.parent;switch(/(Mac)/i.test(navigator.platform)&&e.metaKey&&("leftArrow"===e.action?e.action="ctrlLeftArrow":"rightArrow"===e.action&&(e.action="ctrlRightArrow")),e.action){case"ctrlLeftArrow":case"ctrlRightArrow":var i,n,r=t.focusModule.currentInfo.element;r&&r.classList.contains("e-headercell")&&(r=t.getColumnByUid(r.firstElementChild.getAttribute("e-mappinguid")),i=(n=t.getVisibleColumns()).indexOf(r),n="ctrlLeftArrow"===e.action?n[i-1]:n[i+1])&&n.field&&r.field&&this.reorderColumns(r.field,n.field)}},Td.prototype.drag=function(e){var t,i=this.parent,n=e.target,r=P.closest(n,".e-headercell:not(.e-stackedHeaderCell)"),s=i.element.querySelector(".e-cloneproperties"),o=i.getContent().firstElementChild,o=this.x>ih(e.event).x+o.scrollLeft;P.removeClass([].slice.call(i.getHeaderTable().getElementsByClassName("e-reorderindicate")),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),P.classList(s,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),r&&!r.isEqualNode(this.element)?(t=(n=r).querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid"),this.chkDropPosition(this.element,n)&&this.chkDropAllCols(this.element,n)&&i.getColumnByUid(t).allowReordering&&e.column.allowReordering?(this.updateArrowPosition(n,o),P.classList(n,["e-allowDrop","e-reorderindicate"],[])):i.allowGrouping&&E(e.target,"e-groupdroparea")||P.classList(s,["e-notallowedcur"],["e-defaultcur"])):(!r||!r.isEqualNode(this.element)||i.allowGrouping&&e.column.allowGrouping||e.column.allowReordering)&&(r||i.allowGrouping&&E(e.target,"e-groupdroparea"))||P.classList(s,["e-notallowedcur"],["e-defaultcur"]),e.column.allowReordering&&!e.column.lockColumn&&i.trigger(we,{target:n,draggableType:"headercell",column:e.column})},Td.prototype.updateScrollPostion=function(e){var t=this,e=ih(e).x,i=this.parent.element.getBoundingClientRect(),n=i.right,i=i.left,r=this.parent.getContent().firstElementChild;i<e&&e<i+35?this.timer=window.setInterval(function(){t.setScrollLeft(r,!0)},50):e<n&&n-35<e&&(this.timer=window.setInterval(function(){t.setScrollLeft(r,!1)},50))},Td.prototype.setScrollLeft=function(e,t){var i=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),i!==e.scrollLeft&&this.setDisplay("none")},Td.prototype.stopTimer=function(){window.clearInterval(this.timer)},Td.prototype.updateArrowPosition=function(e,t){var i,e=e.getBoundingClientRect(),n=this.parent.element.getBoundingClientRect();t&&e.left<n.left||!t&&e.right>n.right||(i=this.parent.getHeaderContent().classList.contains("e-sticky"),this.upArrow.style.top=i?e.top+e.height+"px":e.top+e.height-n.top+"px",this.downArrow.style.top=i?e.top-7+"px":e.top-n.top-7+"px",this.upArrow.style.left=this.downArrow.style.left=i?(t?e.left:e.right)-4+"px":(t?e.left:e.right)-n.left-4+"px",this.setDisplay(""))},Td.prototype.dragStart=function(e){var t,i=this.parent,n=e.target;this.element=n.classList.contains("e-headercell")?n:E(n,"e-headercell"),e.column.allowReordering&&!e.column.lockColumn&&(t=i.getContent().firstElementChild,this.x=ih(e.event).x+t.scrollLeft,i.trigger(Ce,{target:n,draggableType:"headercell",column:e.column}))},Td.prototype.dragStop=function(e){var t=this.parent;this.setDisplay("none"),this.stopTimer(),e.cancel||t.trigger(be,{target:e.target,draggableType:"headercell",column:e.column}),P.removeClass([].slice.call(t.getHeaderTable().getElementsByClassName("e-reorderindicate")),["e-reorderindicate"])},Td.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},Td.prototype.getModuleName=function(){return"reorder"};fa=Td;function Td(e){this.idx=0,this.parent=e,this.parent.isDestroyed||(this.parent.on(jt,this.headerDrop,this),this.parent.on(g,this.enableAfterRender,this),this.parent.on(Ct,this.onActionComplete,this),this.parent.on(we,this.drag,this),this.parent.on(Ce,this.dragStart,this),this.parent.on(Ht,this.dragStop,this),this.parent.on(jt,this.headerDrop,this),this.parent.on(ft,this.createReorderElement,this),this.parent.on(Mt,this.keyPressHandler,this),this.parent.on(r,this.destroy,this))}Od.prototype.getParentGrid=function(e){for(var t=e,i=!1;!i;)(t=t.ej2_instances[0].parentDetails?document.getElementById(t.ej2_instances[0].parentDetails.parentID):t).classList.contains("e-childgrid")||(i=!0);return t},Od.prototype.isNewRowAdded=function(){return this.parent.editSettings&&this.parent.editSettings.showAddNewRow&&!(this.parent.enableInfiniteScrolling||this.parent.enableVirtualization)},Od.prototype.groupRowDDIndicator=function(e,t){Ch([e[0]],t,"e-dragleft"),Ch(e,t,"e-dragtop","e-dragbottom"),Ch([e[e.length-1]],t,"e-dragright")},Od.prototype.refreshRow=function(e,t,i){for(var n=this.parent,r=n.getContentTable().querySelector(N),s=n.getHeaderTable().querySelector(N),o=0,a=e.rows.length;o<a;o++){var l,h=e.rows[parseInt(o.toString(),10)],p=((n.enableVirtualization&&n.allowGrouping&&n.groupSettings.columns.length||n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache)&&1===e.rows.length&&(p=n.getRowElementByUID(h.getAttribute("data-uid")),P.isNullOrUndefined(p)||P.remove(p)),h.querySelector(".e-dragstartrow"));p&&p.classList.remove("e-dragstartrow"),t.insertBefore(h,i),n.allowGrouping&&n.groupSettings.columns.length&&(h=h.getAttribute("data-uid"),l=e.target.parentElement.getAttribute("data-uid"),h=n.getRowObjectFromUID(h),l=n.getRowObjectFromUID(l),h.parentUid!==l.parentUid)&&n.groupModule.groupReorderHandler(h,l)}var d=[].slice.call(n.editSettings.showAddNewRow?t.querySelectorAll(".e-row:not(.e-addedrow)"):t.getElementsByClassName(I));if(n.allowGrouping&&n.groupSettings.columns.length?n.groupSettings.enableLazyLoading||n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache&&d.length>3*n.pageSettings.pageSize?n.refresh():(np(this.parent,e,d),n.enableVirtualization||n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache?ip(n):tp(this.parent,n.getRowsObject().filter(function(e){return e.isDataRow}),d),this.parent.notify(rr,{rows:n.enableVirtualization?this.parent.vRows:this.parent.getRowsObject()})):n.enableInfiniteScrolling&&n.infiniteScrollSettings.enableCache&&!n.groupSettings.columns.length?d.length>3*n.pageSettings.pageSize?n.refresh():(np(this.parent,e,d),ip(n)):this.refreshData(d),this.parent.frozenRows)for(o=0,a=d.length;o<a;o++)(o<this.parent.frozenRows?s:r).appendChild(d[parseInt(o.toString(),10)])},Od.prototype.updateFrozenRowreOrder=function(e){for(var t=this.parent,i=t.getContentTable().querySelector(N),n=t.getHeaderTable().querySelector(N),r=[].slice.call(n.getElementsByClassName(I)).concat([].slice.call(i.getElementsByClassName(I))),s=t.createElement(N,{attrs:{role:"rowgroup"}}),n=(t.selectionSettings.persistSelection||0!==Object.keys(t.selectionModule.selectedRowState).length?this.parent.clearRowSelection():this.parent.clearSelection(),this.refreshRowTarget(e)),o=0,a=r.length;o<a;o++)s.appendChild(r[parseInt(o.toString(),10)]);this.refreshRow(e,s,n)},Od.prototype.refreshRowTarget=function(e){var t=this.parent,i=parseInt(e.target.parentElement.getAttribute(x),10),n=(t.enableVirtualization&&t.allowGrouping&&t.groupSettings.columns.length&&(i=this.parent.getDataRows().indexOf(e.target.parentElement)),!(e.fromIndex<e.dropIndex||e.fromIndex===e.dropIndex)||t.allowGrouping&&t.groupSettings.columns.length||(i+=1),t.getRowByIndex(i));return i===t.getRows().length&&this.isNewRowAdded()&&"Bottom"===this.parent.editSettings.newRowPosition&&(n=this.parent.element.querySelector(".e-row.e-addedrow")),t.allowGrouping&&t.groupSettings.columns.length&&-1!==i&&e.fromIndex<e.dropIndex&&n?n.nextSibling:n},Od.prototype.updateFrozenColumnreOrder=function(e){var t=this.parent,i=t.getContentTable().querySelector(N),t=(t.selectionSettings.persistSelection||0!==Object.keys(t.selectionModule.selectedRowState).length?this.parent.clearRowSelection():this.parent.clearSelection(),this.refreshRowTarget(e));this.refreshRow(e,i,t)},Od.prototype.refreshData=function(e){for(var t={},i={},n=this.parent.getRowsObject(),r=this.parent.getCurrentViewRecords(),s=0,o=e.length;s<o;s++){var a=parseInt(e[parseInt(s.toString(),10)].getAttribute(x),10);t[parseInt(s.toString(),10)]=n[parseInt(a.toString(),10)],i[parseInt(s.toString(),10)]=r[parseInt(a.toString(),10)]}for(var l=this.parent.getRows(),s=0,o=e.length;s<o;s++)l[parseInt(s.toString(),10)]=e[parseInt(s.toString(),10)],n[parseInt(s.toString(),10)]=t[parseInt(s.toString(),10)],r[parseInt(s.toString(),10)]=i[parseInt(s.toString(),10)];tp(this.parent,n,e)},Od.prototype.rowOrder=function(e){if(e.dropIndex!==e.fromIndex&&!isNaN(e.dropIndex)){if(this.parent.isDetail()){this.parent.detailCollapseAll();var t=[].slice.call(this.parent.getContentTable().querySelector(N).children),i=this.parent.getRowsObject();t.filter(function(e){e.classList.contains("e-detailrow")&&e.remove()});for(var n=0,r=i.length;n<r&&i[parseInt(n.toString(),10)];n++)i[parseInt(n.toString(),10)].isDetailRow&&(this.parent.getRowsObject().splice(n,1),n--)}if((e.target.classList.contains("e-rowcelldrag")||e.target.classList.contains("e-dtdiagonalright")||e.target.classList.contains("e-dtdiagonaldown"))&&(e.target=e.target.parentElement),!e.target.classList.contains("e-rowcell")&&E(e.target,"e-rowcell")&&(e.target=E(e.target,"e-rowcell")),this.parent.frozenRows?this.updateFrozenRowreOrder(e):this.updateFrozenColumnreOrder(e),(!this.parent.allowGrouping||!this.parent.groupSettings.columns.length)&&0<this.selectedRowColls.length){this.parent.selectRows(this.selectedRowColls);var s=[];if(this.parent.filterSettings.columns.length||this.parent.sortSettings.columns.length){for(n=0,r=e.rows.length;n<r;n++)s.push(parseInt(e.rows[parseInt(n.toString(),10)].getAttribute(x),10));this.selectedRowColls=s}}this.selectedRowColls=[]}},Od.prototype.currentViewData=function(){for(var e=this.parent.getSelectedRowIndexes(),t=[],i=parseInt(this.startedRow.getAttribute(x),10),n=0,r=e.length;n<r;n++)t[parseInt(n.toString(),10)]=this.parent.currentViewData[e[parseInt(n.toString(),10)]];return this.parent.rowDropSettings.targetID||0!==e.length||(t[0]=this.parent.currentViewData[parseInt(i.toString(),10)]),t},Od.prototype.saveChange=function(e,t){var i=this;this.parent.getDataModule().saveChanges(e,this.parent.getPrimaryKeyFieldNames()[0],{},t).then(function(){i.parent.notify(ut,{type:y,requestType:"rowdraganddrop"})}).catch(function(e){var t="error";P.isNullOrUndefined(e[t])||P.isNullOrUndefined(e[t].message)||(e[t]=e[t].message),i.parent.trigger(oe,e)})},Od.prototype.reorderRows=function(e,t){for(var i=this.parent.getSelectedRowIndexes(),n=[],r=[],s=this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json,o=this.parent.allowPaging?this.parent.pageSettings.currentPage*this.parent.pageSettings.pageSize-this.parent.pageSettings.pageSize:0,a=t+o,l=e[0]+o,h=0,p=e.length;h<p;h++)r[parseInt(h.toString(),10)]=s[e[parseInt(h.toString(),10)]+o];for(h=0,p=i.length;h<p;h++)n[parseInt(h.toString(),10)]=s[i[parseInt(h.toString(),10)]+o];for(h=0,p=r.length;h<p;h++){if(0!==h){for(var d=0,c=s.length;d<c;d++)if(JSON.stringify(s[parseInt(d.toString(),10)])===JSON.stringify(r[parseInt(h.toString(),10)])){l=d;break}for(d=0,c=s.length;d<c;d++)if(JSON.stringify(s[parseInt(d.toString(),10)])===JSON.stringify(r[h-1])){d<l&&(a=d+1);break}}this.reorderRow(l-o,a-o)}this.isRefresh&&this.parent.notify(ut,{type:y,requestType:"rowdraganddrop"});for(h=0,p=n.length;h<p;h++)for(d=0,c=s.length;d<c;d++)if(JSON.stringify(s[parseInt(d.toString(),10)])===JSON.stringify(n[parseInt(h.toString(),10)])){i[parseInt(h.toString(),10)]=d-o;break}this.selectedRowColls=i},Od.prototype.stopTimer=function(){window.clearInterval(this.timer)},Od.prototype.onActionComplete=function(e){this.parent.trigger(p,P.extend(e,{type:p,requestType:"rowdraganddrop"}))},Od.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new P.Draggable(e.element,{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isReplaceDragEle:this.isReplaceDragEle,isPreventSelect:!1})},Od.prototype.updateScrollPostion=function(e){var t,i,n=this,e=ih(e).y,r=this.isDropGrid.getContent().getBoundingClientRect(),s=this.isDropGrid.getRowHeight()-15,o=this.isDropGrid.getContent().firstElementChild,a=this.parent.enableVirtualization?20:0;r.top>=e?(t=-this.isDropGrid.getRowHeight(),this.isOverflowBorder=!1,this.timer=window.setInterval(function(){n.setScrollDown(o,t)},200)):r.top+this.isDropGrid.getContent().clientHeight-s-33-a<=e&&(i=this.isDropGrid.getRowHeight(),this.isOverflowBorder=!1,this.timer=window.setInterval(function(){n.setScrollDown(o,i)},200))},Od.prototype.setScrollDown=function(e,t){e.scrollTop=e.scrollTop+t},Od.prototype.moveDragRows=function(e,t,i){var n=this.parent.element.querySelector(".e-cloneproperties"),r=(this.parent.element.classList.contains("e-childgrid")&&(n=this.getParentGrid(this.parent.element).querySelector(".e-cloneproperties")),P.closest(e.target,"tr"));E(r,"e-grid")&&(!this.parent.rowDropSettings.targetID&&E(n.parentElement,"e-grid").id===E(r,"e-grid").id||this.istargetGrid)&&this.setBorder(r||t,e.event,t,i)},Od.prototype.setBorder=function(e,t,i,n){var r,s=this.parent.element,o=(this.istargetGrid&&(s=this.isDropGrid.element),this.parent.element.querySelector(".e-cloneproperties"));this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.removeBorder(e):(this.removeFirstRowBorder(e),this.removeLastRowBorder(e)),E(e,"e-grid")&&e.classList.contains(I)&&(!this.parent.rowDropSettings.targetID&&E(o.parentElement,"e-grid").id===E(e,"e-grid").id||this.istargetGrid)&&(this.parent.allowGrouping&&this.parent.groupSettings.columns&&this.parent.groupSettings.columns.length?P.removeClass(s.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"),["e-dragtop","e-dragright","e-dragbottom","e-dragleft"]):P.removeClass(s.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"),["e-dragborder"]),o=[],r=parseInt(n.getAttribute(x),10),!n||0!==r||this.isNewRowAdded()&&"Top"===this.parent.editSettings.newRowPosition?o=this.parent.rowDropSettings.targetID&&n?(e=this.isDropGrid.getRowByIndex(r-1),[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):n&&parseInt(i.getAttribute(x),10)>r?(this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(r=this.parent.getDataRows().indexOf(n)),this.parent.allowGrouping&&this.parent.groupSettings.columns.length?[].slice.call((e=n).querySelectorAll(".e-groupcaption,.e-summarycell,.e-rowcell:not(.e-hide),.e-rowdragdrop:not(.e-hide),\n                        .e-detailrowcollapse:not(.e-hide)")):(e=0===r&&this.isNewRowAdded()&&"Top"===this.parent.editSettings.newRowPosition?this.parent.element.querySelector(".e-row.e-addedrow tr"):this.parent.getRowByIndex(r-1),[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse,.e-dragindentcell")))):[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):this.parent.allowGrouping&&this.parent.groupSettings.columns.length?o=[].slice.call((e=n).querySelectorAll(".e-groupcaption,.e-summarycell,.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):(i=this.parent.createElement("div",{className:"e-firstrow-dragborder"}),(r=this.isDropGrid.getHeaderContent()).classList.add("e-grid-relative"),i.style.width=s.offsetWidth-this.getScrollWidth()+"px",r.getElementsByClassName("e-firstrow-dragborder").length||(this.parent.frozenRows?(this.parent.isFrozenGrid()&&(i.style.width=this.parent.getContent().firstElementChild.scrollWidth+"px"),r.querySelector("thead").appendChild(i),i.style.position="relative"):r.appendChild(i))),0<o.length)&&(this.parent.allowGrouping&&this.parent.groupSettings.columns&&this.parent.groupSettings.columns.length?this.groupRowDDIndicator(o,!0):Ch(o,!0,"e-dragborder"))},Od.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?ba.getScrollBarWidth():0},Od.prototype.removeFirstRowBorder=function(e){0<this.isDropGrid.element.getElementsByClassName("e-firstrow-dragborder").length&&e&&(0!==e.rowIndex||e.classList.contains("e-columnheader"))?P.remove(this.isDropGrid.element.getElementsByClassName("e-firstrow-dragborder")[0]):(e=this.parent.element.querySelector(".e-row.e-addedrow tr"))&&e.querySelector(".e-dragborder")&&Ch([].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse,.e-dragindentcell")),!1,"e-dragborder")},Od.prototype.removeLastRowBorder=function(e){var t;t=this.parent.enableVirtualization?e&&parseInt(e.getAttribute(x),10)!==this.parent.renderModule.data.dataManager.dataSource.json.length-1:(t=this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?this.parent.pageSettings.currentPage*this.parent.pageSettings.pageSize-1:this.parent.getCurrentViewRecords().length-1,t=this.parent.getRowByIndex(t),e&&t&&t.getAttribute("data-uid")!==e.getAttribute("data-uid")),0<this.parent.element.getElementsByClassName("e-lastrow-dragborder").length&&e&&t&&P.remove(this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0])},Od.prototype.removeBorder=function(e){this.removeFirstRowBorder(e),this.parent.rowDropSettings.targetID||this.removeLastRowBorder(e),(e=(this.parent.allowGrouping&&this.parent.groupSettings.columns.length?[].slice.call(this.isDropGrid.getContentTable().querySelectorAll("tr")).filter(function(e){return e.querySelector("td.e-dragtop.e-dragbottom")}):this.isDropGrid.getRows().filter(function(e){return e.querySelector("td.e-dragborder")}))[0])&&(e=this.parent.allowGrouping&&this.parent.groupSettings.columns.length?[].slice.call(e.querySelectorAll(".e-dragtop.e-dragbottom")):[].slice.call(e.getElementsByClassName("e-dragborder")),this.parent.allowGrouping&&this.parent.groupSettings.columns&&this.parent.groupSettings.columns.length?this.groupRowDDIndicator(e,!1):Ch(e,!1,"e-dragborder"))},Od.prototype.getElementFromPosition=function(e,t){t=ih(t),e.style.display="none",t=document.elementFromPoint(t.x,t.y);return e.style.display="",t},Od.prototype.onDataBound=function(){0<this.selectedRowColls.length&&(this.parent.enableVirtualization||this.parent.allowRowDragAndDrop)&&(this.parent.selectRows(this.selectedRowColls),this.selectedRowColls=[])},Od.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute(x),10):0},Od.prototype.singleRowDrop=function(e){var t=P.closest(e.target,"tr"),e=e.droppedElement.parentElement.ej2_instances[0],t=t?t.rowIndex:e.currentViewData.length-1;this.reorderRow(this.startedRowIndex,t)},Od.prototype.columnDrop=function(e){var t=this.parent;if("grouping"!==e.droppedElement.getAttribute("action")&&(E(e.target,I)||E(e.target,"e-emptyrow")||E(e.target,_r))){var i=P.closest(e.target,"tr"),n=void 0,r=document.querySelector(".e-drag-ref");if(!("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&(e.droppedElement.parentElement.id===t.element.id||r&&r.parentElement.id===t.element.id)||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)){if(e.droppedElement.parentElement.id!==t.element.id)r?(n=r.parentElement.ej2_instances[0],P.remove(r)):n=e.droppedElement.parentElement.ej2_instances[0];else if(this.isSingleRowDragDrop||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow"))return void this.singleRowDrop(e);if(n.element.id===t.element.id||n.rowDropSettings.targetID===t.element.id){var r=n.getSelectedRecords(),i=this.getTargetIdx(i),s=(e.target&&e.target.classList.contains("e-content")&&t.getCurrentViewRecords().length&&(e=t.getContentTable().querySelector("tr:last-child"))&&(i=parseInt(e.getAttribute(cs),10)),isNaN(i)&&(i=0),t.allowPaging&&(i=i+t.pageSettings.currentPage*t.pageSettings.pageSize-t.pageSettings.pageSize),t.notify(Ut,{toIndex:i,records:r}),t.notify(ut,{type:y,requestType:"rowdraganddrop"}),n.getSelectedRowIndexes()),o=n.allowPaging?n.pageSettings.currentPage*n.pageSettings.pageSize-n.pageSettings.pageSize:0;this.selectedRows=[];for(var a=0,l=r.length;a<l;a++)this.selectedRows.push(o+s[parseInt(a.toString(),10)]);n.notify(qt,{indexes:this.selectedRows,records:r}),n.dataSource instanceof A.DataManager&&n.dataSource.dataSource.offline&&n.notify(ut,{type:y,requestType:"rowdraganddrop"})}}}},Od.prototype.reorderRow=function(e,t){var i,n=this.parent;n.groupSettings.columns.length||(t+=i=n.allowPaging?n.pageSettings.currentPage*n.pageSettings.pageSize-n.pageSettings.pageSize:0,this.selectedRows=n.getSelectedRowIndexes(),n.notify(Vi,{fromIndex:e+i,toIndex:t}))},Od.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.initializeDrag()},Od.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.draggable.destroy(),this.parent.off(lt,this.initializeDrag),this.parent.off(be,this.columnDrop),this.parent.off(wt,this.onActionComplete),this.parent.removeEventListener(ae,this.onDataBoundFn),this.parent.off(g,this.enableAfterRender),this.parent.off(r,this.destroy))},Od.prototype.getModuleName=function(){return"rowDragAndDrop"},Od.prototype.processArgs=function(e){var t=this.parent,i=parseInt(this.startedRow.getAttribute(x),10);0<t.getSelectedRecords().length&&!1===this.startedRow.cells[0].classList.contains("e-selectionbackground")||0===t.getSelectedRecords().length?(t.enableInfiniteScrolling&&t.infiniteScrollSettings.enableCache?this.rows=[this.startedRow]:this.rows=[t.getRowByIndex(i)],this.rowData=[t.getRowInfo(this.startedRow.querySelector("."+b)).rowData],(t.enableVirtualization||t.enableInfiniteScrolling&&t.infiniteScrollSettings.enableCache)&&t.allowGrouping&&t.groupSettings.columns.length&&t.getSelectedRows().length&&(this.rows=t.getSelectedRows(),this.rowData=Array.from(this.rows,function(e){return t.getRowObjectFromUID(e.getAttribute("data-uid")).data}))):(this.rows=t.getSelectedRows(),this.rowData=Array.from(this.rows,function(e){return t.getRowObjectFromUID(e.getAttribute("data-uid")).data}))};da=Od;function Od(e){var p=this;this.selectedRows=[],this.isOverflowBorder=!0,this.selectedRowColls=[],this.isRefresh=!0,this.isReplaceDragEle=!0,this.istargetGrid=!1,this.helper=function(e){var t=p.parent,i=p.draggable.currentStateTarget,n=(P.isNullOrUndefined(i)||!t.rowDropSettings.targetID||P.isNullOrUndefined(i.classList)||i.classList.contains("e-rowcell")||(i=E(i,"e-rowcell")),p.parent.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+t.element.offsetWidth})),r=p.parent.createElement("table",{styles:"width:"+t.element.offsetWidth,attrs:{role:"grid"}}),s=p.parent.createElement(N,{attrs:{role:"rowgroup"}});if(document.getElementsByClassName("e-griddragarea").length||t.rowDropSettings.targetID&&(!P.isNullOrUndefined(i)&&!i.classList.contains("e-selectionbackground")&&"Single"!==t.selectionSettings.type||!E(i,"e-rowcell"))||!t.rowDropSettings.targetID&&!E(i,"e-rowdragdrop"))return!1;if(t.rowDropSettings.targetID&&"Row"===t.selectionSettings.mode&&"Single"===t.selectionSettings.type&&t.selectRow(parseInt(p.draggable.currentStateTarget.parentElement.getAttribute(x),10)),p.startedRow=P.closest(i,"tr").cloneNode(!0),p.parent.isFrozenGrid())for(var o=[].slice.call(p.startedRow.querySelectorAll(".e-rowcell")),a=0;a<o.length;a++)P.removeClass([o[parseInt(a.toString(),10)]],["e-leftfreeze","e-freezeleftborder","e-fixedfreeze","e-freezerightborder","e-rightfreeze","e-unfreeze"]),o[parseInt(a.toString(),10)].removeAttribute("style");p.processArgs(i);var l={selectedRow:p.rows,dragelement:i,cloneElement:n,cancel:!1,data:p.rowData},h=t.getSelectedRows();t.trigger(Ie,l);if(l.cancel)return!1;th(p.startedRow,".e-indentcell"),th(p.startedRow,".e-detailrowcollapse"),th(p.startedRow,".e-detailrowexpand"),t.enableInfiniteScrolling&&t.infiniteScrollSettings.enableCache||p.removeCell(p.startedRow,es);var l=new RegExp("e-active","g"),h=(p.startedRow.innerHTML=p.startedRow.innerHTML.replace(l,""),s.appendChild(p.startedRow),1<t.getSelectedRowIndexes().length&&p.startedRow.hasAttribute("aria-selected")&&(l=p.parent.createElement("span",{className:"e-dropitemscount",innerHTML:""+h.length}),n.appendChild(l)),P.closest(i,"tr").querySelector(".e-icon-rowdragicon"));return h&&h.classList.add("e-dragstartrow"),r.appendChild(s),n.appendChild(r),t.element.appendChild(n),n},this.dragStart=function(e){var t,i,n=p.parent;if((n.enableVirtualization||n.infiniteScrollSettings.enableCache)&&n.allowGrouping&&n.groupSettings.columns.length&&!P.isNullOrUndefined(e.target.closest("tr")))for(var r=e.dragElement.querySelectorAll("tr"),s=e.target.closest("tr").querySelectorAll(".e-indentcell"),o=0;o<r.length;o++)for(var a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)].cloneNode(!0);r[parseInt(o.toString(),10)].insertBefore(l,r[parseInt(o.toString(),10)].firstElementChild)}n.element.classList.contains("e-childgrid")&&(p.getParentGrid(n.element).appendChild(e.dragElement),n.element.appendChild(n.createElement("div",{className:"e-drag-ref"}))),document.body.classList.add("e-prevent-select"),document.getElementsByClassName("e-griddragarea").length||(t=e.target,i=p.parent.element.querySelector(".e-dropitemscount"),1<p.parent.getSelectedRecords().length&&i&&(i.style.left=p.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px"),p.processArgs(t),n.trigger(xe,{rows:p.rows,target:e.target,draggableType:"rows",fromIndex:parseInt(p.rows[0].getAttribute(x),10),data:p.rowData[0]&&0<Object.keys(p.rowData[0]).length?p.rowData:p.currentViewData()}),p.dragStartData=p.rowData,i=document.getElementById(n.rowDropSettings.targetID),n.rowDropSettings.targetID&&i&&i.ej2_instances&&"grid"===i.ej2_instances[0].getModuleName()&&i.ej2_instances[0].getContent().classList.add("e-allowRowDrop"))},this.drag=function(e){var t,i,n=p.parent,r=(p.isDropGrid=p.parent,p.istargetGrid=!1,p.parent.rowDropSettings.targetID&&(r=document.getElementById(n.rowDropSettings.targetID),p.isDropGrid=r.ej2_instances[0],E(e.target,"e-grid"))&&(p.istargetGrid=p.parent.rowDropSettings.targetID===E(e.target,"e-grid").id),p.parent.element.querySelector(".e-cloneproperties")),s=(n.element.classList.contains("e-childgrid")&&(r=p.getParentGrid(n.element).querySelector(".e-cloneproperties")),p.getElementFromPosition(r,e.event)),o=(P.classList(r,["e-defaultcur"],["e-notallowedcur","e-movecur","e-grabcur"]),p.isOverflowBorder=!0,p.hoverState=n.enableHover,E(s,"e-grid")?P.closest(e.target,"tr"):null);e.target&&(p.processArgs(s),n.enableVirtualization&&P.isNullOrUndefined(p.rows[0])&&P.classList(r,["e-notallowedcur"],["e-movecur"]),i={rows:p.rows,target:s,draggableType:"rows",data:p.rowData,originalEvent:e,cancel:!1},n.trigger(Re,i),p.stopTimer(),i.cancel||(n.element.classList.add("e-rowdrag"),o&&(E(s,"e-grid").id===r.parentElement.id||E(s,"e-grid").id)?p.isDropGrid.element.querySelector(".e-emptyrow")?p.dragTarget=0:p.dragTarget=parseInt(o.getAttribute("data-rowindex"),10):p.dragTarget=parseInt(p.startedRow.getAttribute("data-rowindex"),10),n.rowDropSettings.targetID?(i=document.querySelector(".e-drag-ref"),!E(s,"e-grid")||i&&E(i.parentElement,"e-grid").id===E(s,"e-grid").id||E(r.parentElement,"e-grid").id===E(s,"e-grid").id?P.classList(r,["e-notallowedcur"],["e-defaultcur"]):P.classList(r,["e-grabcur"],["e-notallowedcur"])):(i=E(s,"e-grid"))&&i.id===r.parentElement.id&&E(s,"e-row")&&!E(s,"e-addedrow")?P.classList(r,["e-movecur"],["e-defaultcur"]):P.classList(r,["e-notallowedcur"],["e-movecur"]),E(p.isDropGrid.element,"e-grid")&&(p.isDropGrid.groupSettings.columns.length&&!p.isDropGrid.groupSettings.columns.length||p.isDropGrid.element.querySelector(".e-emptyrow")||(E(s,"e-grid")&&E(s,"e-grid").id===p.isDropGrid.element.id&&p.updateScrollPostion(e.event),(p.isOverflowBorder||p.parent.frozenRows>p.dragTarget)&&(parseInt(p.startedRow.getAttribute(x),10)!==p.dragTarget||p.istargetGrid)||p.istargetGrid&&o&&p.isDropGrid.getRowByIndex(p.isDropGrid.getCurrentViewRecords().length-1).getAttribute("data-uid")===o.getAttribute("data-uid")?p.moveDragRows(e,p.startedRow,o):(i=void 0,p.parent.enableVirtualization?i=o&&parseInt(o.getAttribute(x),10)===p.parent.renderModule.data.dataManager.dataSource.json.length-1:(t=p.parent.enableInfiniteScrolling&&p.parent.infiniteScrollSettings.enableCache&&!p.parent.groupSettings.enableLazyLoading?p.parent.pageSettings.currentPage*p.parent.pageSettings.pageSize-1:p.parent.getCurrentViewRecords().length-1,r=p.parent.getRowByIndex(t),i=o&&r&&r.getAttribute("data-uid")===o.getAttribute("data-uid")&&r.getAttribute("data-uid")!==p.startedRow.getAttribute("data-uid"),p.isNewRowAdded()&&"Bottom"===p.parent.editSettings.newRowPosition&&(i=!1)),i&&!p.parent.rowDropSettings.targetID&&(e=p.parent.createElement("div",{className:"e-lastrow-dragborder"}),r=p.parent.getContent(),e.style.width=p.parent.element.offsetWidth-p.getScrollWidth()+"px",p.parent.enableVirtualization&&(e.style.zIndex="1"),r.getElementsByClassName("e-lastrow-dragborder").length||n.allowGrouping&&n.groupSettings.columns.length&&!P.isNullOrUndefined(o.nextSibling)||(r.classList.add("e-grid-relative"),r.appendChild(e),e.style.bottom=p.getScrollWidth()+"px")),p.removeBorder(o))),s)&&s.classList.contains(Zr)&&!p.isDropGrid.element.querySelector(".e-emptyrow")&&p.istargetGrid&&(p.removeBorder(o),t=p.isDropGrid.getCurrentViewRecords().length-1,i=[],0<(i=p.parent.allowGrouping&&p.parent.groupSettings.columns&&p.parent.groupSettings.columns.length?[].slice.call(p.isDropGrid.getRowByIndex(t).querySelectorAll(".e-rowcell:not(.e-hide),.e-rowdragdrop:not(.e-hide),.e-detailrowcollapse:not(.e-hide)")):[].slice.call(p.isDropGrid.getRowByIndex(t).querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length)&&(p.parent.allowGrouping&&p.parent.groupSettings.columns&&p.parent.groupSettings.columns.length?p.groupRowDDIndicator(i,!0):Ch(i,!0,"e-dragborder"))))},this.dragStop=function(e){p.parent.isCheckBoxSelection&&p.parent.enableInfiniteScrolling&&window.getSelection().removeAllRanges(),document.body.classList.remove("e-prevent-select"),yh(p.parent)?p.parent.notify(ei,{instance:p,handler:p.processDragStop,arg1:e}):p.processDragStop(e)},this.processDragStop=function(t){var e,i,n,r,s=p.parent;p.parent.isDestroyed||(e=p.getElementFromPosition(t.helper,t.event),i=e&&!e.classList.contains("e-dlg-overlay")?e:t.target,s.element.classList.remove("e-rowdrag"),n=document.getElementById(s.rowDropSettings.targetID),s.rowDropSettings.targetID&&n&&n.ej2_instances&&"grid"===n.ej2_instances[0].getModuleName()&&n.ej2_instances[0].getContent().classList.remove("e-allowRowDrop"),E(p.isDropGrid.element,"e-grid")&&(p.stopTimer(),p.isDropGrid.enableHover=p.hoverState,p.isDropGrid.getContent().classList.remove("e-grid-relative"),p.removeBorder(e),n=p.isDropGrid.element.querySelector(".e-dragstartrow"))&&n.classList.remove("e-dragstartrow"),p.processArgs(i),s.enableVirtualization&&P.isNullOrUndefined(p.rows[0]))||(r={target:i,draggableType:"rows",cancel:!1,fromIndex:parseInt(p.rows[0].getAttribute(x),10),dropIndex:p.dragTarget,rows:p.rows,data:0<Object.keys(p.dragStartData[0]).length?p.dragStartData:p.currentViewData()},s.trigger(Ee,r,function(){var e;!(E(i,I)||E(i,"e-emptyrow")||E(i,_r))||r.cancel?(p.dragTarget=null,P.remove(t.helper)):(p.isRefresh=!1,e=p.parent.getSelectedRowIndexes(),s.isRowDragable()&&(!p.parent.rowDropSettings.targetID&&p.startedRow.querySelector("td.e-selectionbackground")&&1<e.length&&e.length!==p.parent.getCurrentViewRecords().length?p.reorderRows(e,r.dropIndex):p.reorderRows([parseInt(p.startedRow.getAttribute(x),10)],p.dragTarget),p.dragTarget=null,s.rowDropSettings.targetID||(t.helper.classList.contains("e-cloneproperties")&&document.querySelector("."+t.helper.classList[0])&&P.remove(t.helper),!s.enableVirtualization||s.sortSettings.columns.length||s.filterSettings.columns.length||p.parent.allowGrouping&&s.groupSettings.columns.length?p.rowOrder(r):s.refresh()),p.parent.getContentTable().scrollHeight<p.parent.getContent().clientHeight)&&p.parent.scrollModule.setLastRowCell(),p.isRefresh=!0)}))},this.removeCell=function(t,i){return[].slice.call(t.querySelectorAll("td")).filter(function(e){e.classList.contains(i)&&t.deleteCell(e.cellIndex)})},this.parent=e,this.parent.isDestroyed||(this.parent.on(lt,this.initializeDrag,this),this.parent.on(be,this.columnDrop,this),this.parent.on(wt,this.onActionComplete,this),this.onDataBoundFn=this.onDataBound.bind(this),this.parent.addEventListener(ae,this.onDataBoundFn),this.parent.on(g,this.enableAfterRender,this),this.parent.on(r,this.destroy,this))}u.prototype.addLabel=function(){var e;this.element.getElementsByClassName("e-group-animator").length||(e=this.l10n.getConstant("GroupDropArea"),this.element.innerHTML=e,this.element.classList.remove("e-grouped"))},u.prototype.rearrangeGroup=function(){this.sortRequired=!1,this.updateModel()},u.prototype.columnDrag=function(e){this.groupSettings.allowReordering&&e.column.allowGrouping&&this.animateDropper(e);var t=this.parent.element.querySelector(".e-cloneproperties");this.parent.allowReordering||P.classList(t,["e-defaultcur"],["e-notallowedcur"]),e.column.allowGrouping&&(E(e.target,"e-groupdroparea")||E(e.target,"e-headercell")&&E(e.target,"e-headercell").isEqualNode(this.parent.getColumnHeaderByField(e.column.field)))||this.parent.allowReordering&&E(e.target,"e-headercell")||P.classList(t,["e-notallowedcur"],["e-defaultcur"]),e.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},u.prototype.columnDragStart=function(e){var t;e.target.classList.contains("e-stackedheadercell")||(t=this.parent.element.querySelector(".e-groupdroparea"),this.aria.setDropTarget(t,e.column.allowGrouping),t=e.target.classList.contains("e-headercell")?e.target:E(e.target,"e-headercell"),this.aria.setGrabbed(t,!0,!e.column.allowGrouping))},u.prototype.columnDrop=function(e){var t=this.parent;"grouping"===e.droppedElement.getAttribute("action")&&(e=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid")),P.isNullOrUndefined(e)||!1===e.allowGrouping||E(t.getColumnHeaderByUid(e.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id")||this.ungroupColumn(e.field))},u.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(g,this.enableAfterRender,this),this.parent.on(bt,this.onActionComplete,this),this.parent.on(It,this.onActionComplete,this),this.parent.on(ct,this.onPropertyChanged,this),this.parent.on(Lt,this.clickHandler,this),this.parent.on(we,this.columnDrag,this),this.parent.on(Ce,this.columnDragStart,this),this.parent.on(jt,this.columnDrop,this),this.parent.on(be,this.columnDrop,this),this.parent.on(ft,this.refreshSortIcons,this),this.parent.on(yt,this.refreshSortIcons,this),this.parent.on(Mt,this.keyPressHandler,this),this.parent.on(pt,this.initialEnd,this),this.parent.on(dt,this.initialEnd,this),this.parent.on(lt,this.render,this),this.parent.on(xt,this.onGroupAggregates,this),this.parent.on(r,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},u.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(lt,this.render),this.parent.off(g,this.enableAfterRender),this.parent.off(bt,this.onActionComplete),this.parent.off(It,this.onActionComplete),this.parent.off(ct,this.onPropertyChanged),this.parent.off(Lt,this.clickHandler),this.parent.off(we,this.columnDrag),this.parent.off(Ce,this.columnDragStart),this.parent.off(be,this.columnDrop),this.parent.off(jt,this.columnDrop),this.parent.off(ft,this.refreshSortIcons),this.parent.off(yt,this.refreshSortIcons),this.parent.off(Mt,this.keyPressHandler),this.parent.off(xt,this.onGroupAggregates),this.parent.off(r,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))},u.prototype.initialEnd=function(){var e=this.parent;if(this.parent.off(pt,this.initialEnd),this.parent.off(dt,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var t=0,i=e.groupSettings.columns;t<i.length;t++){var n=i[t];this.groupColumn(n)}this.contentRefresh=!0}},u.prototype.keyPressHandler=function(e){var t=this.parent;if(e.target&&E(e.target,"e-groupheadercell")&&("tab"===e.action||"shiftTab"===e.action)){var i=this.getFocusableGroupedItems();if("tab"===e.action&&e.target===i[i.length-1]||"shiftTab"===e.action&&e.target===i[0])return;for(var n,r=0;r<i.length;r++)if(e.target===i[parseInt(r.toString(),10)])return e.preventDefault(),n="tab"===e.action?r+1:r-1,void i[parseInt(n.toString(),10)].focus()}if(/(Mac)/i.test(navigator.platform)&&e.metaKey&&("downArrow"===e.action?e.action="ctrlDownArrow":"upArrow"===e.action&&(e.action="ctrlUpArrow")),"ctrlSpace"===e.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(e.action))switch(e.action){case"altDownArrow":case"altUpArrow":var s=t.allowSelection?t.getSelectedRowIndexes():[];if(s.length){e.preventDefault();for(var o=t.getContentTable().querySelector(N).children,a=void 0,r=t.getDataRows()[s[s.length-1]].rowIndex;0<=r;r--)if(!o[parseInt(r.toString(),10)].classList.contains(I)&&!o[parseInt(r.toString(),10)].classList.contains("e-detailrow")){a=o[parseInt(r.toString(),10)];break}this.expandCollapseRows(a.querySelector("altUpArrow"===e.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":e.preventDefault(),this.expandAll();break;case"ctrlUpArrow":e.preventDefault(),this.collapseAll();break;case"enter":e.target.classList.contains("e-groupsort")?(this.groupSortFocus=!0,e.preventDefault(),this.applySortFromTarget(e.target)):e.target.classList.contains("e-ungroupbutton")?(this.groupCancelFocus=!0,e.preventDefault(),this.unGroupFromTarget(e.target)):this.parent.isEdit||null!==P.closest(e.target,"#"+this.parent.element.id+"_searchbar")||E(e.target,"e-pager")||E(e.target,"e-toolbar")||(l=(s=(s=this.focus.getFocusedElement())&&(s.classList.contains("e-icon-grightarrow")||s.classList.contains("e-icon-gdownarrow"))?s.parentElement:s)?s.parentElement.querySelector('[class^="e-record"]'):null)&&s.children.length&&(s.children[0].classList.contains("e-icon-grightarrow")||s.children[0].classList.contains("e-icon-gdownarrow"))&&(e.preventDefault(),this.expandCollapseRows(l));break;case"ctrlSpace":var l,s=t.focusModule.currentInfo.element;s&&s.classList.contains("e-headercell")&&(e.preventDefault(),(l=t.getColumnByUid(s.firstElementChild.getAttribute("e-mappinguid"))).field&&t.groupSettings.columns.indexOf(l.field)<0?this.groupColumn(l.field):this.ungroupColumn(l.field))}},u.prototype.getFocusableGroupedItems=function(){var e=[];if(this.groupSettings.columns.length)for(var t=this.element.querySelectorAll(".e-groupheadercell"),i=0;i<t.length;i++)e.push(t[parseInt(i.toString(),10)].querySelector(".e-grouptext")),e.push(t[parseInt(i.toString(),10)].querySelector(".e-groupsort")),e.push(t[parseInt(i.toString(),10)].querySelector(".e-ungroupbutton"));return e},u.prototype.wireEvent=function(){P.EventHandler.add(this.element,"focusin",this.onFocusIn,this),P.EventHandler.add(this.element,"focusout",this.onFocusOut,this),P.EventHandler.add(this.parent.element,"auxclick",this.auxilaryclickHandler,this)},u.prototype.unWireEvent=function(){P.EventHandler.remove(this.element,"focusin",this.onFocusIn),P.EventHandler.remove(this.element,"focusout",this.onFocusOut),P.EventHandler.remove(this.parent.element,"auxclick",this.auxilaryclickHandler)},u.prototype.onFocusIn=function(e){this.parent.focusModule.currentInfo&&this.parent.focusModule.currentInfo.element&&(P.removeClass([this.parent.focusModule.currentInfo.element,this.parent.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.parent.focusModule.currentInfo.element.tabIndex=-1),this.addOrRemoveFocus(e)},u.prototype.onFocusOut=function(e){this.addOrRemoveFocus(e)},u.prototype.addOrRemoveFocus=function(e){var t;(e.target.classList.contains("e-groupdroparea")||e.target.classList.contains("e-grouptext")||e.target.classList.contains("e-groupsort")||e.target.classList.contains("e-ungroupbutton"))&&(t=e.target.classList.contains("e-grouptext")?e.target.parentElement.parentElement:e.target,"focusin"===e.type?(this.parent.focusModule.currentInfo.element=e.target,this.parent.focusModule.currentInfo.elementToFocus=e.target,P.addClass([t],["e-focused","e-focus"]),e.target.tabIndex=0):(P.removeClass([t],["e-focused","e-focus"]),e.target.tabIndex=-1))},u.prototype.clickHandler=function(e){e.target.classList.contains("e-grouptext")&&(this.groupTextFocus=!0),e.target.classList.contains("e-groupsort")&&(this.groupSortFocus=!0),e.target.classList.contains("e-ungroupbutton")&&(this.groupCancelFocus=!0),(e.target.classList.contains("e-icon-grightarrow")||e.target.classList.contains("e-icon-gdownarrow"))&&e.preventDefault();var t=E(e.target,"e-recordplusexpand")||E(e.target,"e-recordpluscollapse");t&&(t.children[0].classList.contains("e-icon-gdownarrow")||t.children[0].classList.contains("e-icon-grightarrow"))&&this.expandCollapseRows(e.target),this.applySortFromTarget(e.target),this.unGroupFromTarget(e.target),this.toogleGroupFromHeader(e.target)},u.prototype.auxilaryclickHandler=function(e){(e.target.classList.contains("e-icon-grightarrow")||e.target.classList.contains("e-icon-gdownarrow")&&1===e.button)&&e.preventDefault()},u.prototype.unGroupFromTarget=function(e){e.classList.contains("e-ungroupbutton")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname"))},u.prototype.toogleGroupFromHeader=function(e){this.groupSettings.showToggleButton&&(e.classList.contains("e-grptogglebtn")?e.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(e.parentElement.getAttribute("e-mappinguid")).field):e.classList.contains("e-toggleungroup")&&this.ungroupColumn(e.parentElement.getAttribute("ej-mappingname")))},u.prototype.applySortFromTarget=function(e){var t=this.parent,i=P.closest(e,".e-groupheadercell");t.allowSorting&&i&&!e.classList.contains("e-ungroupbutton")&&!e.classList.contains("e-toggleungroup")&&(e=i.firstElementChild.getAttribute("ej-mappingname"),t.getColumnHeaderByField(e).getElementsByClassName("e-ascending").length?t.sortColumn(e,"Descending",!0):t.sortColumn(e,"Ascending",!0))},u.prototype.expandCollapseRows=function(e){var t=E(e,"e-recordplusexpand")||E(e,"e-recordpluscollapse");if(t){var i=[].slice.call(this.parent.getContentTable().querySelector(N).children),n=(this.parent.editSettings.showAddNewRow&&(i[0].classList.contains("e-addedrow")?i.shift():i[i.length-1].classList.contains("e-addedrow")&&i.pop()),void 0),r=this.parent,s=t.parentElement.getElementsByClassName("e-indentcell").length,o=t.parentElement.getAttribute("data-uid"),a=r.getRowObjectFromUID(o),l=!1;if(t.classList.contains("e-recordpluscollapse")?(P.addClass([t],"e-recordplusexpand"),P.removeClass([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",t.firstElementChild.setAttribute("title",this.l10n.getConstant("Expanded")),a.isExpand=l=!0,Mh(r)&&this.updateVirtualRows(r,e,l,void 0,void 0),this.parent.groupSettings.enableLazyLoading&&((this.parent.filterSettings.columns.length||this.parent.sortSettings.columns.length||this.parent.searchSettings.key.length)&&0===this.parent.getContent().firstElementChild.scrollTop&&(this.parent.contentModule.isTop=!0),(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).captionExpand(t.parentElement))):(a.isExpand=!(n=!0),P.removeClass([t],"e-recordplusexpand"),P.addClass([t],"e-recordpluscollapse"),t.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",t.firstElementChild.setAttribute("title",this.l10n.getConstant("Collapsed")),Mh(r)&&this.updateVirtualRows(r,e,!n,void 0,void 0),this.parent.groupSettings.enableLazyLoading&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).captionCollapse(t.parentElement)),this.aria.setExpand(t,l),!Mh(r)&&!this.parent.groupSettings.enableLazyLoading){for(var h=r.getRowsObject(),p=h.indexOf(a),d={},c=r.enableInfiniteScrolling&&r.infiniteScrollSettings&&r.infiniteScrollSettings.enableCache&&h.length!==i.length?Array.from(i).indexOf(t.parentElement):void 0,u=p;u<h.length&&!(p<u&&h[parseInt(u.toString(),10)].indent===s);u++){if(h[parseInt(u.toString(),10)].isDetailRow){var g=h[u-1].isExpand&&h[u-1].visible;c&&0<c&&c<i.length?i[parseInt(c.toString(),10)].style.display=g?"":"none":P.isNullOrUndefined(c)&&(i[parseInt(u.toString(),10)].style.display=g?"":"none")}else if(!1===d[h[parseInt(u.toString(),10)].parentUid])h[parseInt(u.toString(),10)].visible=!1,c&&0<c&&c<i.length?i[parseInt(c.toString(),10)].style.display="none":P.isNullOrUndefined(c)&&(i[parseInt(u.toString(),10)].style.display="none");else{if(!(h[parseInt(u.toString(),10)].isDataRow||h[parseInt(u.toString(),10)].isCaptionRow||h[parseInt(u.toString(),10)].isDetailRow||h[parseInt(u.toString(),10)].isAggregateRow))if((g=h[parseInt(u.toString(),10)].cells.some(function(e){return e.isDataCell&&e.visible}))===h[parseInt(u.toString(),10)].visible)continue;h[parseInt(u.toString(),10)].visible=!0,c&&0<c&&c<i.length?(i[parseInt(c.toString(),10)].style.display="",i[parseInt(c.toString(),10)].classList.remove("e-hide")):P.isNullOrUndefined(c)&&(i[parseInt(u.toString(),10)].style.display="",i[parseInt(u.toString(),10)].classList.remove("e-hide"))}h[parseInt(u.toString(),10)].isCaptionRow&&(d[h[parseInt(u.toString(),10)].uid]=h[parseInt(u.toString(),10)].isExpand&&h[parseInt(u.toString(),10)].visible),P.isNullOrUndefined(c)||c++}this.lastCaptionRowBorder(),this.parent.notify(rr,{rows:this.parent.getRowsObject()})}this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading||this.parent.notify(wr,{isCollapse:n,parentUid:o})}},u.prototype.lastCaptionRowBorder=function(){var e=this.parent.getContentTable(),t=this.parent.getContent().clientHeight;if((!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.groupSettings.enableLazyLoading)&&(e.scrollHeight<t||this.isAppliedCaptionRowBorder)){if(this.isAppliedCaptionRowBorder||e.querySelector(".e-lastrowcell")){for(var i=e.querySelectorAll(".e-lastrowcell"),n=0,r=i.length;n<r;n++)P.removeClass([i[parseInt(n.toString(),10)]],"e-lastrowcell");this.isAppliedCaptionRowBorder=!1}var s=this.parent.getContentTable().querySelector(N).children,o=s[s.length-1];if("none"===o.style.display||o.classList.contains("e-groupcaptionrow")){for(n=s.length-1,r=0;r<n;n--)if("none"!==s[parseInt(n.toString(),10)].style.display&&s[parseInt(n.toString(),10)].classList.contains("e-groupcaptionrow")&&s[parseInt(n.toString(),10)].querySelector(".e-recordpluscollapse")){P.addClass(s[parseInt(n.toString(),10)].childNodes,"e-lastrowcell"),this.isAppliedCaptionRowBorder=!0;break}}else e.scrollHeight<t&&(P.addClass(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.isAppliedCaptionRowBorder=!0)}},u.prototype.updateVirtualRows=function(t,e,i,n,r){var e=t.getRowObjectFromUID(e.closest("tr").getAttribute("data-uid")),s=(e.isExpand=i,Ul(t),this.parent.notify(ar,{}),(n=t.getDataModule().generateQuery(!1)).queries=t.getDataModule().aggregateQuery(t.getQuery().clone()).queries,{requestType:"virtualscroll",rowObject:e});t.contentModule&&(s.virtualInfo=t.contentModule.prevInfo),t.getDataModule().getData(s,n.requiresCount()).then(function(e){return t.renderModule.dataManagerSuccess(e,s)})},u.prototype.expandCollapse=function(e){if(this.parent.groupSettings.columns.length){e||this.parent.notify(Dn,e);for(var t,i=this.parent.getContentTable().querySelector(N).children,n=this.parent.getRowsObject(),r=0,s=i.length;r<s;r++)i[parseInt(r.toString(),10)].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length&&((t=i[parseInt(r.toString(),10)].querySelector(e?".e-recordpluscollapse":".e-recordplusexpand"))&&(e?(t.className="e-recordplusexpand",t.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",t.setAttribute("aria-expanded","true"),t.firstElementChild.setAttribute("title",this.l10n.getConstant("Expanded"))):(t.className="e-recordpluscollapse",t.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",t.setAttribute("aria-expanded","false"),t.firstElementChild.setAttribute("title",this.l10n.getConstant("Collapsed")))),i[parseInt(r.toString(),10)].firstElementChild.classList.contains("e-recordplusexpand")||i[parseInt(r.toString(),10)].firstElementChild.classList.contains("e-recordpluscollapse"))||(i[parseInt(r.toString(),10)].style.display=e?"":"none"),n[parseInt(r.toString(),10)].isCaptionRow&&(n[parseInt(r.toString(),10)].isExpand=!!e);this.parent.updateVisibleExpandCollapseRows(),this.lastCaptionRowBorder(),this.parent.notify(rr,{rows:this.parent.getRowsObject()})}},u.prototype.expandAll=function(){this.expandCollapse(!0)},u.prototype.collapseAll=function(){this.expandCollapse(!1)},u.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn(),this.wireEvent()},u.prototype.renderGroupDropArea=function(){var e=this.parent.element.querySelector(".e-groupdroparea");e&&P.remove(e),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea&&"Vertical"!==this.parent.rowRenderingMode||(this.element.style.display="none")},u.prototype.updateGroupDropArea=function(e){var t;this.groupSettings.showDropArea&&!this.groupSettings.columns.length?(t=this.l10n.getConstant("GroupDropArea"),this.element.innerHTML=t,this.element.classList.remove("e-grouped")):((this.element.innerHTML!==this.l10n.getConstant("GroupDropArea")||1!==this.groupSettings.columns.length&&(this.isAppliedGroup||this.isAppliedUnGroup))&&!e||(this.element.innerHTML=""),this.element.classList.add("e-grouped"))},u.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},u.prototype.initializeGHeaderDrag=function(){new P.Draggable(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},u.prototype.initializeGHeaderDrop=function(){new P.Droppable(this.element,{accept:".e-dragclone",drop:this.drop})},u.prototype.groupColumn=function(e){var t=this.parent,i=t.getColumnByField(e);P.isNullOrUndefined(i)||!1===i.allowGrouping||this.contentRefresh&&-1<this.groupSettings.columns.indexOf(e)?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:i.headerText}):yh(t)?t.notify(ei,{instance:this,handler:this.groupColumn,arg1:e}):(i.visible=t.groupSettings.showGroupedColumn,this.colName=e,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(e),this.updateGroupDropArea(),this.isAppliedGroup=!1)},u.prototype.ungroupColumn=function(t){var e=this.parent,i=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(e){return e.field===t})[0]:e.getColumnByField(t);if(!(P.isNullOrUndefined(i)||!1===i.allowGrouping||this.groupSettings.columns.indexOf(t)<0))if(yh(e))e.notify(ei,{instance:this,handler:this.ungroupColumn,arg1:t});else{i.visible=!0,this.colName=i.field;i=JSON.parse(JSON.stringify(this.groupSettings.columns));if(i.splice(i.indexOf(this.colName),1),this.sortedColumns.indexOf(t)<0)for(var n=0,r=e.sortSettings.columns.length;n<r;n++)if(t===e.sortSettings.columns[parseInt(n.toString(),10)].field){e.sortSettings.columns.splice(n,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=i),this.groupSettings.columns=i,e.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},u.prototype.updateModel=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns)),e=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):e;this.sortRequired&&(-1===e.indexOf(this.colName)&&e.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=e,this.parent.dataBind()},u.prototype.onActionComplete=function(e){"grouping"===e.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var t=-1<this.groupSettings.columns.indexOf(this.colName)?{columnName:this.colName,requestType:"grouping",type:p}:{requestType:"ungrouping",type:p};this.parent.trigger(p,P.extend(e,t)),this.colName=null},u.prototype.groupAddSortingQuery=function(e){for(var t=0;t<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[parseInt(t.toString(),10)].field!==e;)t++;this.parent.sortSettings.columns.length===t?this.parent.sortSettings.columns.push({field:e,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[parseInt(t.toString(),10)].direction="Ascending")},u.prototype.createElement=function(e){var t=this.parent,i="Ascending",n=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),r=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),s=this.parent.createElement("div",{attrs:{"ej-mappingname":e}}),e=(ch(e)&&s.setAttribute("ej-complexname",uh(e)),this.parent.getColumnByField(e)),t=t.getColumnHeaderByUid(e.uid);return this.groupSettings.allowReordering&&s.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":this.l10n.getConstant("GroupedDrag")}})),s.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:e.headerText,attrs:{tabindex:"-1"}})),this.groupSettings.showToggleButton&&s.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupAria")}})),t.querySelectorAll(".e-ascending,.e-descending").length&&(i=t.querySelector(".e-ascending")?"Ascending":"Descending"),s.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+i.toLowerCase()+" e-icon-"+i.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+e.headerText,role:"button"}})),s.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupIcon")+e.headerText,role:"button"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),r.appendChild(s),this.groupSettings.allowReordering&&(n.appendChild(r),n.appendChild(this.createSeparator()),r=n),r},u.prototype.addColToGroupDrop=function(e){var t=ch(e)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+gh(uh(e))+"]"):this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+gh(e)+"]");this.groupSettings.allowReordering&&t||(t=this.parent.getColumnByField(e),P.isNullOrUndefined(t))||(t=this.createElement(e),this.groupSettings.allowReordering&&(e=this.element.getElementsByClassName("e-group-animator").length,t.setAttribute("index",e.toString())),this.element.appendChild(t),(e=this.parent.focusModule).setActive(!0),0===e.active.matrix.matrix[(t=[0,0])[0]][t[1]]&&(t=Mp(e.active.matrix.matrix,t,!0)),e.active.matrix.current=t,this.parent.editSettings.showAddNewRow?this.parent.notify(Lr,{}):e.focus())},u.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupSeperator")},styles:this.groupSettings.showUngroupButton?"":"display:none"})},u.prototype.refreshToggleBtn=function(e){if(this.groupSettings.showToggleButton)for(var t,i=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),n=0,r=i.length;n<r;n++)i[parseInt(n.toString(),10)].classList.contains("e-emptycell")||i[parseInt(n.toString(),10)].classList.contains("e-headerchkcelldiv")||(t=this.parent.getColumnByUid(i[parseInt(n.toString(),10)].getAttribute("e-mappinguid")),this.parent.showColumnMenu&&(!this.parent.showColumnMenu||t.showColumnMenu))||(i[parseInt(n.toString(),10)].getElementsByClassName("e-grptogglebtn").length&&P.remove(i[parseInt(n.toString(),10)].querySelectorAll(".e-grptogglebtn")[0]),e)||i[parseInt(n.toString(),10)].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(-1<this.groupSettings.columns.indexOf(t.field)?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":(P.isNullOrUndefined(this.l10n)?this.parent.localeObj:this.l10n).getConstant("GroupButton")}}))},u.prototype.removeColFromGroupDrop=function(e){var t;P.isNullOrUndefined(this.getGHeaderCell(e))||(e=this.getGHeaderCell(e),this.groupSettings.allowReordering?(t=E(e,"e-group-animator"),P.remove(t)):P.remove(e),this.updateGroupDropArea(),this.parent.editSettings.showAddNewRow&&this.parent.notify(Lr,{})),this.isAppliedUnGroup=!1},u.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=0,i=Object.keys(e.properties);t<i.length;t++){var n=i[t];switch(n){case"columns":var r=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)r={columnName:this.colName,requestType:"ungrouping",type:y};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var s=0;s<this.parent.sortSettings.columns.length;s++)this.parent.sortSettings.columns[parseInt(s.toString(),10)].isFromGroup&&(this.parent.sortSettings.columns.splice(s,1),s--);for(var o=0;o<this.groupSettings.columns.length;o++)this.colName=this.groupSettings.columns[parseInt(o.toString(),10)],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),o<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[parseInt(o.toString(),10)])}r={columnName:this.colName,requestType:e.properties[""+n].length?"grouping":"ungrouping",type:y}}if(!this.groupSettings.showGroupedColumn)for(var a=e.oldProperties[""+n],o=0;o<a.length;o++)-1===e.properties[""+n].indexOf(a[parseInt(o.toString(),10)])&&(this.parent.getColumnByField(a[parseInt(o.toString(),10)]).visible=!0);this.parent.notify(ut,r)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?(this.element.style.display="",this.parent.headerModule.refreshUI()):this.element.style.display="none","100%"===this.parent.height&&this.parent.scrollModule.refresh();break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(ut,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},u.prototype.updateGroupedColumn=function(e){for(var t=0;t<this.groupSettings.columns.length;t++)this.parent.getColumnByField(this.groupSettings.columns[parseInt(t.toString(),10)]).visible=e},u.prototype.updateButtonVisibility=function(e,t){for(var i=[].slice.call(this.element.getElementsByClassName(t)),n=0;n<i.length;n++)i[parseInt(n.toString(),10)].style.display=e?"":"none"},u.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},u.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(!this.parent.isDestroyed&&this.parent.allowGrouping||this.parent.refreshing||this.clearGrouping(),this.unWireEvent(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode)&&P.remove(this.element)},u.prototype.clearGrouping=function(){var e=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var t=0,i=e.length;t<i;t++)t===i-1&&(this.contentRefresh=!0),this.ungroupColumn(e[parseInt(t.toString(),10)]);this.contentRefresh=!0},u.prototype.getModuleName=function(){return"group"},u.prototype.refreshSortIcons=function(){var e,t=this.parent,i=t.sortSettings.columns,n=t.groupSettings.columns,r=this.parent.getColumns().map(function(e){return e.field});this.refreshToggleBtn();for(var s=0,o=i.length;s<o;s++)-1!==r.indexOf(i[parseInt(s.toString(),10)].field)&&(e=t.getColumnHeaderByField(i[parseInt(s.toString(),10)].field),!t.allowSorting&&(-1<this.sortedColumns.indexOf(i[parseInt(s.toString(),10)].field)||-1<this.groupSettings.columns.indexOf(i[parseInt(s.toString(),10)].field))?(P.classList(e.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),1<i.length&&e.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(s+1).toString()}))):this.getGHeaderCell(i[parseInt(s.toString(),10)].field)&&this.getGHeaderCell(i[parseInt(s.toString(),10)].field).getElementsByClassName("e-groupsort").length&&("Ascending"===i[parseInt(s.toString(),10)].direction?P.classList(this.getGHeaderCell(i[parseInt(s.toString(),10)].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):P.classList(this.getGHeaderCell(i[parseInt(s.toString(),10)].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(s=0,o=n.length;s<o;s++)-1!==r.indexOf(n[parseInt(s.toString(),10)])&&t.getColumnHeaderByField(n[parseInt(s.toString(),10)]).setAttribute("aria-grouped","true")},u.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},u.prototype.onGroupAggregates=function(e){if(this.parent.groupSettings.enableLazyLoading)"Batch"!==this.parent.editSettings.mode&&this.updateLazyLoadGroupAggregates(e);else{var e=this.iterateGroupAggregates(e),e=this.groupGenerator.generateRows(e,{}),t=this.parent.getRowsObject().filter(function(e){return!e.isDataRow}),i=e.filter(function(e){return!e.isDataRow});(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(var n=0;n<i.length;n++){var r=i[parseInt(n.toString(),10)],r={cells:r.cells.filter(function(e){return e.isDataCell}),data:r.data,dataUid:t[parseInt(n.toString(),10)]?t[parseInt(n.toString(),10)].uid:""};this.parent.notify(Et,r)}}},u.prototype.updateLazyLoadGroupAggregates=function(l,e){var h=this,p=this.getGroupAggregateTemplates(!0),d=this.getGroupAggregateTemplates(!1);if(p.length||d.length)for(var c=this.parent,u=c.getDataModule().isRemote(),g=l[0],f=l.row,m=c.groupSettings.columns,y=c.contentModule,S=y.getGroupCache()[c.pageSettings.currentPage],v=e||[],C=this,t=0;t<m.length;t++)if("break"===function(t){var i,e=m[parseInt(t.toString(),10)],n=g[""+e],r=C.getGroupCaptionRowObject(f,m.length-t);if(u&&v.length)0!==t&&(e=m[t-1],i=g[""+e],v=v.find(function(e){return e.key===i}).items),C.updateLazyLoadGroupAggregatesRow(v,n,r,S,p,d);else{var s,o,a,e=c.renderModule.data.generateQuery();if(0!==t&&(s=S.filter(function(e){return e.isCaptionRow&&e.parentUid===r.parentUid}).indexOf(r),o=(a=c.groupSettings.columns.slice(0,t).reverse()).map(function(e){return g[""+e]}),a=Fp(Ap(a,o,y)),e.lazyLoad.push({key:"onDemandGroupInfo",value:{level:t,skip:s,take:1,where:a}})),c.renderModule.data.getData({},e).then(function(e){u?h.updateLazyLoadGroupAggregates(l,e.result):h.updateLazyLoadGroupAggregatesRow(e.result,n,r,S,p,d),t!==m.length-1&&!u||h.destroyRefreshGroupCaptionFooterTemplate()}).catch(function(e){return c.renderModule.dataManagerFailure(e,{requestType:"grouping"})}),u)return"break"}}(t))break},u.prototype.destroyRefreshGroupCaptionFooterTemplate=function(){var e=this.parent;(e.isAngular||e.isReact||e.isVue)&&e.destroyTemplate(["groupCaptionTemplate","groupFooterTemplate"]),e.refreshGroupCaptionFooterTemplate(),e.removeMaskRow(),e.hideSpinner()},u.prototype.updateLazyLoadGroupAggregatesRow=function(e,t,i,n,r,s){e=e.find(function(e){return e.key===t});r.length&&this.updateLazyLoadGroupAggregatesCell(e,i,r),s.length&&(r=n.find(function(e){return e.isAggregateRow&&e.parentUid===i.uid}),this.updateLazyLoadGroupAggregatesCell(e,r,s))},u.prototype.updateLazyLoadGroupAggregatesCell=function(e,t,i){var n=t.data,r=e.aggregates;t.isCaptionRow&&(n.aggregates=r);for(var s=0;s<i.length;s++){var o=i[parseInt(s.toString(),10)],a=o.field+" - "+o.type,l=n[o.field];l[a]=r[a],l[Lp(o.type)]=r[a],l[o.type]&&(l[o.type]=r[a])}},u.prototype.getGroupCaptionRowObject=function(e,t){for(var i=this.parent,e=e.getAttribute("data-uid"),n=i.getRowObjectFromUID(e),r=0;r<t;r++)n=i.getRowObjectFromUID(n.parentUid);return n},u.prototype.getGroupAggregateTemplates=function(e){for(var t=[],i=this.parent.aggregates,n=0;n<i.length;n++)for(var r,s=i[parseInt(n.toString(),10)],o=0;o<s.columns.length;o++)(e&&s.columns[parseInt(o.toString(),10)].groupCaptionTemplate||!e&&s.columns[parseInt(o.toString(),10)].groupFooterTemplate)&&(r={},r={type:s.columns[parseInt(o.toString(),10)].type.toString().toLowerCase(),field:s.columns[parseInt(o.toString(),10)].field},t.push(r));return t},u.prototype.groupedRowReorder=function(e,t){var i=this.parent.getRowElementByUID(e.uid),n=this.parent.getRowElementByUID(t.uid),r={rows:[i],target:n,fromIndex:e.index,dropIndex:t.index};P.isNullOrUndefined(e)||P.isNullOrUndefined(t)||e.parentUid===t.parentUid||(n?("none"===n.style.display&&(i.style.display="none"),r.dropIndex<r.fromIndex?this.parent.getContentTable().querySelector(N).insertBefore(i,n):this.parent.getContentTable().querySelector(N).insertBefore(i,n.nextSibling)):P.remove(i),this.groupReorderHandler(e,t),n=[].slice.call(this.parent.getContentTable().getElementsByClassName(I)),np(this.parent,r,n,t),this.parent.enableVirtualization?ip(this.parent):tp(this.parent,this.parent.getRowsObject().filter(function(e){return e.isDataRow}),n),this.parent.notify(rr,{rows:this.parent.getRowsObject()}))},u.prototype.groupReorderHandler=function(e,t){for(var i=this.parent,n=e.data,r=t.data,s=i.groupModule.getGroupAggregateTemplates(!1),o=i.getRowObjectFromUID(t.parentUid),a=i.getRowObjectFromUID(e.parentUid),l=[o],h=[a],p=i.groupSettings.columns,d=0;d<p.length;d++)n[p[parseInt(d.toString(),10)]]=r[p[parseInt(d.toString(),10)]],0<d&&(l.push(i.getRowObjectFromUID(l[d-1].parentUid)),h.push(i.getRowObjectFromUID(h[d-1].parentUid)));e.parentUid=t.parentUid,e.visible=t.visible,e.parentGid=t.parentGid,e.changes!==n&&(e.changes=n);var c=(o=this.iterateGroupAggregates([{dragRowObjects:h,dropRowObjects:l}])).filter(function(e){return e.key===h[h.length-1].data.key||e.key instanceof Date&&e.key.toString()===h[h.length-1].data.key.toString()}),u=o.filter(function(e){return e.key===l[l.length-1].data.key||e.key instanceof Date&&e.key.toString()===l[l.length-1].data.key.toString()}),o=[];P.isNullOrUndefined(c[0])||o.push(c[0]),P.isNullOrUndefined(u[0])||o.push(u[0]);for(var g=i.currentViewData,f=0;f<g.length;f++)P.isNullOrUndefined(c[0])&&g[parseInt(f.toString(),10)].key===h[h.length-1].data.key||P.isNullOrUndefined(u[0])&&g[parseInt(f.toString(),10)].key===l[l.length-1].data.key?(g.splice(f,1),f--):P.isNullOrUndefined(c[0])||g[parseInt(f.toString(),10)].key!==c[0].key?P.isNullOrUndefined(u[0])||g[parseInt(f.toString(),10)].key!==u[0].key||(g[parseInt(f.toString(),10)]=u[0]):g[parseInt(f.toString(),10)]=c[0];for(var a=this.groupGenerator.generateRows(o,{}),m=[],y=[],f=0;f<h.length;f++)m.push.apply(m,this.getGroupParentFooterAggregateRowObject(h[parseInt(f.toString(),10)].uid));for(f=0;f<l.length;f++)y.push.apply(y,this.getGroupParentFooterAggregateRowObject(l[parseInt(f.toString(),10)].uid));h.push.apply(h,m),l.push.apply(l,y),this.updatedRowObjChange(h,a,s,!0),this.updatedRowObjChange(l,a,s),this.groupReorderRefreshHandler(h),this.groupReorderRefreshHandler(l)},u.prototype.updatedRowObjChange=function(e,t,i,n){var r=this.parent,s=r.getRowsObject(),o={},a=[];r.enableVirtualization&&(o=r.contentModule.vgenerator.cache,a=r.vcRows);for(var l=0;l<e.length;l++){for(var h=!1,p=e[parseInt(l.toString(),10)],d=0;d<t.length;d++){var c=t[parseInt(d.toString(),10)];if(P.isNullOrUndefined(c)||P.isNullOrUndefined(p.data.key)||P.isNullOrUndefined(c.data.key)||!(p.data.key===c.data.key||p.data.key instanceof Date&&p.data.key.toString()===c.data.key.toString())){if(p.isAggregateRow&&c.isAggregateRow){for(var u=0;u<i.length;u++)if(this.evaluateGroupAggregateValueChange(p,c,i[parseInt(u.toString(),10)])){-1!==(m=s.indexOf(p))&&(s[parseInt(m.toString(),10)].data=c.data,s[parseInt(m.toString(),10)].gSummary=c.gSummary),r.enableVirtualization&&-1!==(y=a.indexOf(p))&&(a[parseInt(y.toString(),10)].data=c.data,a[parseInt(y.toString(),10)].gSummary=c.gSummary),p.data=c.data,p.gSummary=c.gSummary,h=!0;break}if(h)break}}else{var g,f,m,y,S=!0,v=e[parseInt((l+1).toString(),10)];if((S=n&&v&&!v.isAggregateRow&&(g=v.data.key.toString(),v=v.data.field,f=c.data.items.records||c.data.items)&&f.length&&f[0][""+v]&&f[0][""+v].toString()!==g?!1:S)||!n){-1!==(m=s.indexOf(p))&&(s[parseInt(m.toString(),10)].data=c.data,s[parseInt(m.toString(),10)].gSummary=c.gSummary),r.enableVirtualization&&-1!==(y=a.indexOf(p))&&(a[parseInt(y.toString(),10)].data=c.data,a[parseInt(y.toString(),10)].gSummary=c.gSummary),p.data=c.data,p.gSummary=["gSummary"],t.splice(d,1),d--,h=!0;break}}}if(!h){var C=r.getRowElementByUID(p.uid);if(P.isNullOrUndefined(C)||P.remove(C),s.splice(s.indexOf(p),1),r.enableVirtualization){a.splice(a.indexOf(p),1);for(var w=1;w<=Object.keys(o).length;w++){var b=o[parseInt(w.toString(),10)].indexOf(p);-1!==b&&o[parseInt(w.toString(),10)].splice([parseInt(b.toString(),10)],1)}}r.enableInfiniteScrolling&&r.infiniteScrollSettings.enableCache&&r.infiniteScrollModule.resetInfiniteCache(s)}}},u.prototype.groupReorderRefreshHandler=function(e){for(var t=this.parent,i=new Rs(t.serviceLocator,null,t),n=t.getColumns(),r=0;r<e.length;r++){var s=e[parseInt(r.toString(),10)];P.isNullOrUndefined(s.uid)||P.isNullOrUndefined(t.getRowElementByUID(s.uid))||i.refresh(s,n,!1)}},u.prototype.getGroupParentFooterAggregateRowObject=function(e){for(var t=this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&this.parent.groupSettings.columns.length?this.parent.contentModule.rows:this.parent.getRowsObject(),i=[],n=0;n<t.length;n++){var r=t[parseInt(n.toString(),10)];r.parentUid===e&&r.isAggregateRow&&i.push(r)}return i},u.prototype.evaluateGroupAggregateValueChange=function(e,t,i){var n=!1;return n=e.data[i.field].field===t.data[i.field].field&&e.data[i.field].key===t.data[i.field].key&&e.data[i.field].hasOwnProperty(i.field+" - "+i.type)&&t.data[i.field].hasOwnProperty(i.field+" - "+i.type)?!0:n},u.prototype.gettingVirtualData=function(n,r,s){for(var o=[],e=function(e){if(-1===r.indexOf(n[parseInt(e.toString(),10)].data)&&o.push(n[parseInt(e.toString(),10)].data),n[parseInt(e.toString(),10)].data.field===a.parent.groupSettings.columns[0])for(var i=n[parseInt(e.toString(),10)].data.items,t=(P.isNullOrUndefined(i.records)||(i=i.records),0);t<i.length;t++)!function(t){s&&-1===r.findIndex(function(e){return e[s.toString()]===i[parseInt(t.toString(),10)][s.toString()]})&&o.push(i[parseInt(t.toString(),10)])}(t)},a=this,t=0;t<n.length;t++)e(t);return o},u.prototype.iterateGroupAggregates=function(e){var i=this,t=e instanceof Array?e:[],n=this.parent.getRowsObject(),r=this.parent.getCurrentViewRecords().slice(),s=this.parent.getPrimaryKeyFieldNames()[0],o=e&&e.length?e[0]&&e[0].dragRowObjects:null,a=e&&e.length?e[0]&&e[0].dropRowObjects:null,l=null,h=null,p=(!(this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length)||P.isNullOrUndefined(o)&&P.isNullOrUndefined(a)||(o&&r.push.apply(r,this.gettingVirtualData(o,r,s)),a&&r.push.apply(r,this.gettingVirtualData(a,r,s))),this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&e.length&&this.parent.groupSettings.columns.length&&!P.isNullOrUndefined(o)&&!P.isNullOrUndefined(a)),d=(p&&(r=[],l=a[a.length-1].data.key,h=o[o.length-1].data.key,this.parent.getRowsObject().map(function(e){var t=e.data[i.parent.groupSettings.columns[0]];e.isDataRow&&(t===l||t===h||t instanceof Date&&(t.toString()===l.toString()||t.toString()===h.toString()))&&r.push(e.data)})),[]),c=n.map(function(e){return"delete"===e.edit&&d.push(e.data),e.changes instanceof Object?e.changes:e.data}),c=0===t.length?c:t,u=r.map(function(e){var t,i=A.DataUtil.getObject(s,e);return c.some(function(e){return t=e,i===A.DataUtil.getObject(s,e)})?t:e});if((!e.type||"cancel"!==e.type)&&0<d.length)for(var g=0;g<d.length;g++){var f=u.indexOf(d[parseInt(g.toString(),10)]);u.splice(f,1)}for(var m,y=[],S=this.parent.aggregates,v=0;v<S.length;v++)for(var C=S[parseInt(v.toString(),10)],w=0;w<C.columns.length;w++)for(var b=0,I=C.columns[parseInt(w.toString(),10)].type.toString().split(",").map(function(e){return e.trim()});b<I.length;b++){var x={type:I[b].toLowerCase(),field:C.columns[parseInt(w.toString(),10)].field};y.push(x)}for(var R=this.parent.groupSettings.columns,E=0;E<R.length;E++)m=A.DataUtil.group(m||u,R[parseInt(E.toString(),10)],y,null,null);if(p){a=this.parent.currentViewData[this.parent.currentViewData.length-1].key;if(a instanceof Date&&(a.toString()===l.toString()||a.toString()===h.toString())||a===l||a===h){for(var D=[],g=0;g<m.length;g++)D.push(m[parseInt(g.toString(),10)]);for(var T=[],o=this.parent.getDataModule().generateQuery(!0),n=o,O=0;O<D.length;O++)T.push(new A.Predicate("field","==",D[parseInt(O.toString(),10)].field).and(i.parent.renderModule.getPredicate("key","equal",D[parseInt(O.toString(),10)].key)));n.where(A.Predicate.or(T));t=this.parent.getDataModule().dataManager.executeLocal(o);this.parent.renderModule.updateGroupInfo(m,t)}}return m},u.prototype.updateExpand=function(e){for(var i=e.uid,t=e.isExpand,n=this.parent.getRowsObject(),r=0;r<n.length;r++){var s=n[parseInt(r.toString(),10)];if(s.uid===i||P.isNullOrUndefined(i)){s.isExpand=t;for(var o=r+1;o<n.length;o++)if("break"===function(e){var t=n[parseInt(e.toString(),10)],e=void 0;if(t.parentUid!==s.uid&&(e=n.filter(function(e){return e.uid===t.parentUid})[0]),t.parentUid===s.uid?t.visible=s.isExpand:P.isNullOrUndefined(e)||t.parentUid!==e.uid||(e.isExpand&&!0===e.visible?t.visible=!0:e.isExpand&&!1===e.visible&&(t.visible=!1)),P.isNullOrUndefined(i))return"break"}(o))break}}this.parent.notify(pt,{rows:n,args:{isFrozen:!1,rows:n}})};var Ad=u;function u(e,t,i,n){var o=this;this.sortRequired=!0,this.groupSortFocus=!1,this.groupTextFocus=!1,this.groupCancelFocus=!1,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.isAppliedCaptionRowBorder=!1,this.reorderingColumns=[],this.visualElement=P.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var t=o.parent,e=e.sender.target,i=e.classList.contains("e-groupheadercell")?e:E(e,"e-groupheadercell");return!(!i||!e.classList.contains("e-drag")&&o.groupSettings.allowReordering)&&(o.column=t.getColumnByField(i.firstElementChild.getAttribute("ej-mappingname")),o.visualElement.textContent=i.textContent,o.visualElement.style.width=i.offsetWidth+2+"px",o.visualElement.style.height=i.offsetHeight+2+"px",o.visualElement.setAttribute("e-mappinguid",o.column.uid),t.element.appendChild(o.visualElement),o.visualElement)},this.dragStart=function(e){o.parent.element.classList.add("e-ungroupdrag")},this.drag=function(e){o.groupSettings.allowReordering&&o.animateDropper(e);var e=e.target,t=o.parent.element.querySelector(".e-cloneproperties");o.parent.trigger(we,{target:e,draggableType:"headercell",column:o.column}),o.groupSettings.allowReordering||(P.classList(t,["e-defaultcur"],["e-notallowedcur"]),E(e,_r))||E(e,"e-headercell")||P.classList(t,["e-notallowedcur"],["e-defaultcur"])},this.dragStop=function(e){o.parent.element.classList.remove("e-ungroupdrag");var t,i=!(E(e.target,_r)||E(e.target,"e-gridheader"));o.groupSettings.allowReordering&&i?(P.remove(e.helper),E(e.target,"e-groupdroparea")?o.rearrangeGroup():E(e.target,"e-grid")||(t=o.parent.getColumnByUid(e.helper.getAttribute("e-mappinguid")).field,-1!==o.groupSettings.columns.indexOf(t)&&o.ungroupColumn(t))):i&&P.remove(e.helper)},this.animateDropper=function(e){var t=o.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),t=o.parent.getColumnByUid(t).field,i=E(e.target,"e-groupdroparea"),e=E(e.target,"e-group-animator"),n=[].slice.call(o.element.getElementsByClassName("e-groupheadercell")).map(function(e){return e.querySelector("div").getAttribute("ej-mappingname")}),r=JSON.parse(JSON.stringify(n));if(e||i){e?(n=e.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),e=+e.getAttribute("index"),n!==t&&(-1!==(n=r.indexOf(t))&&r.splice(n,1),r.splice(e+(-1!=e&&n===e?1:0),0,t))):i&&-1===r.indexOf(t)&&r.push(t),o.element.innerHTML="",r.length&&!o.element.classList.contains("e-grouped")&&o.element.classList.add("e-grouped"),o.reorderingColumns=r;for(var s=0;s<r.length;s++)o.addColToGroupDrop(r[parseInt(s.toString(),10)])}else o.addLabel(),o.removeColFromGroupDrop(t)},this.drop=function(e){var t=o.parent,i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));o.element.classList.remove("e-hover"),P.remove(e.droppedElement),o.aria.setDropTarget(o.parent.element.querySelector(".e-groupdroparea"),!1),o.aria.setGrabbed(o.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),P.isNullOrUndefined(i)||!1===i.allowGrouping||E(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id")?o.parent.log("action_disabled_column",{moduleName:o.getModuleName(),columnName:i?i.headerText:void 0}):o.groupColumn(i.field)},this.contentRefresh=!0,this.aria=new Ks,this.parent=e,this.groupSettings=t,this.serviceLocator=n,this.sortedColumns=i,this.focus=n.getService("focus"),this.addEventListener(),this.groupGenerator=new qs(this.parent)}Fd.prototype.addEventListener=function(){this.parent.isDestroyed||(P.EventHandler.add(this.parent.element,"auxclick",this.auxilaryclickHandler,this),this.parent.on(Lt,this.clickHandler,this),this.parent.on(r,this.destroy,this),this.parent.on(Mt,this.keyPressHandler,this),this.parent.on(Ui,this.expand,this),this.parent.on(Pt,this.refreshColSpan,this),this.parent.on(r,this.destroyChildGrids,this),this.parent.on(vr,this.destroyChildGrids,this))},Fd.prototype.clickHandler=function(e){(e.target.classList.contains("e-icon-grightarrow")||e.target.classList.contains("e-icon-gdownarrow")&&!this.parent.allowGrouping)&&e.preventDefault(),this.toogleExpandcollapse(P.closest(e.target,"td"))},Fd.prototype.auxilaryclickHandler=function(e){(e.target.classList.contains("e-icon-grightarrow")||e.target.classList.contains("e-icon-gdownarrow")&&!this.parent.allowGrouping&&1===e.button)&&e.preventDefault()},Fd.prototype.toogleExpandcollapse=function(e){this.l10n=this.serviceLocator.getService("localization");var t,i=this.parent,n=this.parent.getContentTable(),r=this.parent.getCurrentViewRecords().length-1,s=e&&e.classList.contains("e-detailrowcollapse");if(!(!e||!e.classList.contains("e-detailrowcollapse")&&!e.classList.contains("e-detailrowexpand")||e&&e.classList.contains("e-masked-cell"))){var o=e.parentElement,a=o.getAttribute("data-uid"),a=i.getRowObjectFromUID(a),l=!1,h=this.parent.getContentTable().querySelector(N).children[o.rowIndex+1];if(e.classList.contains("e-detailrowcollapse")){var p=a.data;if(this.isDetailRow(h))h.style.display="",i.notify(an,{data:p,childGrid:i.childGrid,detailElement:e,isExpanded:s}),l=!0;else if(i.getDetailTemplate()||i.childGrid){var d=rh("grid-row"),c=this.parent.createElement("tr",{className:"e-detailrow",attrs:{"data-uid":d,role:"row"}}),u=this.parent.createElement("th",{className:"e-detailcell",attrs:{scope:"col",role:"columnheader"}}),g=this.parent.getVisibleColumns().length,f=(this.parent.allowRowDragAndDrop&&g++,u.setAttribute("colspan",g.toString()),new zr({isDataRow:!0,isExpand:!0,uid:d,isDetailRow:!0,cells:[new qr({cellType:O.CellType.Indent}),new qr({isDataCell:!0,visible:!0})]}));f.parentUid=a.uid;for(var m=0,y=i.groupSettings.columns.length;m<y;m++)c.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),f.cells.unshift(new qr({cellType:O.CellType.Indent}));c.appendChild(this.parent.createElement("th",{className:"e-detailindentcell",attrs:{scope:"col"}})),c.appendChild(u),o.parentNode.insertBefore(c,o.nextSibling);var g=void 0,d=void 0,S=(i.detailTemplate?(g=this.parent.isReact&&"string"!=typeof i.detailTemplate,d=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,v=i.element.id+"detailTemplate",g||d?(i.getDetailTemplate()(p,i,"detailTemplate",v,null,null,u),this.parent.renderTemplates(function(){i.trigger(Oe,{detailElement:u,data:p,childGrid:t})})):sh(u,i.getDetailTemplate()(p,i,"detailTemplate",v,void 0,void 0,void 0,this.parent.root))):((t=new Al(this.getGridModel(i,a,i.printMode))).root=i.root||i,this.childRefs.push(t),t.query&&(t.query=t.query.clone()),t.parentDetails={parentID:i.element.id,parentPrimaryKeys:i.getPrimaryKeyFieldNames(),parentKeyField:i.childGrid.queryString,parentKeyFieldValue:i.childGrid.queryString&&ch(i.childGrid.queryString)?Lh(i.childGrid.queryString,p):p[i.childGrid.queryString],parentRowData:p},i.isReact||i.isVue?t.parentDetails.parentInstObj=i:i.parentDetails&&i.parentDetails.parentInstObj&&(i.parentDetails.parentInstObj.isReact||i.parentDetails.parentInstObj.isVue)&&(t.parentDetails.parentInstObj=i.parentDetails.parentInstObj),t.isLegacyTemplate=i.isReact||i.isLegacyTemplate,i.isPrinting&&(t.isPrinting=!0,t.on(pt,this.promiseResolve(t),this),t.on(dt,this.promiseResolve(t),this)),v=(a.childGrid=t).getInjectedModules(),S=i.getInjectedModules(),v&&v.length===S.length||t.setInjectedModules(S),v=this.parent.createElement("div",{id:"child"+oh(o,"e-grid").length+"_grid"+o.rowIndex+rh(""),className:"e-childgrid"}),u.appendChild(v),t.appendTo(v)),c.appendChild(u),o.nextSibling?o.parentNode.insertBefore(c,o.nextSibling):o.parentNode.appendChild(c),i.getRows()),v=i.getRowsObject();S.splice(S.indexOf(o)+1,0,c),v.splice(v.indexOf(a)+1,0,f),g&&d||i.trigger(Oe,{detailElement:u,data:p,childGrid:t}),i.notify(Oe,{rows:v})}P.classList(e,["e-detailrowexpand"],["e-detailrowcollapse"]),P.classList(e.firstElementChild,["e-dtdiagonaldown","e-icon-gdownarrow"],["e-dtdiagonalright","e-icon-grightarrow"]),a.isExpand=!0,e.classList.contains("e-lastrowcell")&&this.parent.getContent().clientHeight>n.scrollHeight&&(P.removeClass(e.parentElement.querySelectorAll("td"),"e-lastrowcell"),S=n.querySelector(N).getElementsByClassName("e-detailrow").length-1,P.addClass(n.querySelector(N).getElementsByClassName("e-detailrow")[parseInt(S.toString(),10)].childNodes,["e-lastrowcell"]),this.lastrowcell=!0),this.aria.setExpand(e,!0),e.firstElementChild.setAttribute("title",this.l10n.getConstant("Expanded"))}else this.isDetailRow(h)&&(h.style.display="none",i.notify(an,{data:a.data,childGrid:i.childGrid,detailElement:e,isExpanded:s})),P.classList(e,["e-detailrowcollapse"],["e-detailrowexpand"]),P.classList(e.firstElementChild,["e-dtdiagonalright","e-icon-grightarrow"],["e-dtdiagonaldown","e-icon-gdownarrow"]),parseInt(o.getAttribute(x),10)===r&&this.lastrowcell&&(P.addClass(e.parentElement.querySelectorAll("td"),"e-lastrowcell"),this.lastrowcell=!1),a.isExpand=!1,this.aria.setExpand(e,!(l=!0)),e.firstElementChild.setAttribute("title",this.l10n.getConstant("Collapsed"));(!P.isNullOrUndefined(i.detailTemplate)||i.childGrid&&l)&&(i.updateVisibleExpandCollapseRows(),i.notify(rr,{rows:i.getRowsObject()})),this.parent.allowTextWrap&&"auto"===this.parent.height&&(this.parent.getContentTable().scrollHeight>this.parent.getContent().clientHeight?this.parent.scrollModule.setPadding():this.parent.scrollModule.removePadding())}},Fd.prototype.getGridModel=function(e,t,i){t=e.isPrinting&&t.isExpand&&e.expandedRows&&e.expandedRows[t.index]&&e.expandedRows[t.index].gridModel?(e.expandedRows[t.index].gridModel.hierarchyPrintMode=e.childGrid.hierarchyPrintMode,P.extend({},e.expandedRows[t.index].gridModel,e.childGrid,!0)):(e.isPrinting&&e.childGrid.allowPaging&&(e.childGrid.allowPaging="CurrentPage"===i),P.extend({},{},e.childGrid,!0));return t},Fd.prototype.promiseResolve=function(e){var t=this;return function(){e.off(pt,t.promiseResolve),e.off(dt,t.promiseResolve),e.notify(zi,{})}},Fd.prototype.isDetailRow=function(e){return e&&e.classList.contains("e-detailrow")},Fd.prototype.destroy=function(){var e=this.parent.element;!this.parent.isDestroyed&&e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(P.EventHandler.remove(this.parent.element,"auxclick",this.auxilaryclickHandler),this.parent.off(Lt,this.clickHandler),this.parent.off(r,this.destroy),this.parent.off(Mt,this.keyPressHandler),this.parent.off(Ui,this.expand),this.parent.off(Pt,this.refreshColSpan),this.parent.off(r,this.destroyChildGrids),this.parent.off(vr,this.destroyChildGrids))},Fd.prototype.getTDfromIndex=function(e,t){e=P.isNullOrUndefined(e)?void 0:this.parent.getDataRows()[parseInt(e.toString(),10)];return e&&e.querySelector(t)?e.querySelector(t):null},Fd.prototype.expand=function(e){(e=isNaN(e)?e:this.getTDfromIndex(e,".e-detailrowcollapse"))&&e.classList.contains("e-detailrowcollapse")&&this.toogleExpandcollapse(e)},Fd.prototype.collapse=function(e){(e=isNaN(e)?e:this.getTDfromIndex(e,".e-detailrowexpand"))&&e.classList.contains("e-detailrowexpand")&&this.toogleExpandcollapse(e)},Fd.prototype.expandAll=function(){this.expandCollapse(!0),this.parent.trigger(p,{requestType:"expandAllComplete",type:p,moduleObj:this})},Fd.prototype.collapseAll=function(){this.expandCollapse(!1),this.parent.trigger(p,{requestType:"collapseAllComplete",type:p,moduleObj:this})},Fd.prototype.expandCollapse=function(e){for(var t,i=this.parent.getDataRows(),n=0,r=i.length;n<r;n++)t=i[parseInt(n.toString(),10)].querySelector(".e-detailrowcollapse, .e-detailrowexpand"),e?this.expand(t):this.collapse(t)},Fd.prototype.keyPressHandler=function(e){var t=this.parent;switch(/(Mac)/i.test(navigator.platform)&&e.metaKey&&("downArrow"===e.action?e.action="ctrlDownArrow":"upArrow"===e.action&&(e.action="ctrlUpArrow")),e.action){case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"altUpArrow":case"altDownArrow":var i=t.allowSelection?t.getSelectedRowIndexes():[];i.length&&(i=t.getDataRows()[i[i.length-1]].querySelector(".e-detailrowcollapse, .e-detailrowexpand"),"altDownArrow"===e.action?this.expand(i):this.collapse(i));break;case"enter":!this.parent.isEdit&&(!(i=(i=this.focus.getFocusedElement())&&(i.classList.contains("e-icon-grightarrow")||i.classList.contains("e-icon-gdownarrow"))?i.parentElement:i)||i.classList.contains("e-detailrowcollapse")||i.classList.contains("e-detailrowexpand"))&&this.toogleExpandcollapse(i)}},Fd.prototype.refreshColSpan=function(){for(var e=this.parent.contentModule.getTable().querySelectorAll("tr.e-detailrow"),t=this.parent.getVisibleColumns().length,i=0;i<e.length;i++)e[parseInt(i.toString(),10)].querySelector(".e-detailcell").setAttribute("colspan",t+"")},Fd.prototype.destroyChildGrids=function(){for(var e=this.parent.getRowsObject(),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].childGrid=null;for(t=0;t<this.childRefs.length;t++)this.childRefs[parseInt(t.toString(),10)].isDestroyed||this.childRefs[parseInt(t.toString(),10)].destroy();this.childRefs=[]},Fd.prototype.getModuleName=function(){return"detailRow"};o=Fd;function Fd(e,t){this.aria=new Ks,this.childRefs=[],this.parent=e,this.serviceLocator=t,this.focus=t.getService("focus"),this.addEventListener()}f.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=this.parent.enableAdaptiveUI,t=["Edit","Delete","Update","Cancel"],i=0,n=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];i<n.length;i++){var r=n[i],s=r.toLowerCase(),o=s[0].toUpperCase()+s.slice(1);this.predefinedItems[""+r]={id:this.gridID+"_"+s,prefixIcon:"e-"+s,text:this.l10n.getConstant(o),tooltipText:this.l10n.getConstant(o)},e&&(this.predefinedItems[""+r].text="",this.predefinedItems[""+r].visible=-1===t.indexOf(r))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.isRightToolbarMenu=!1,this.parent.enableAdaptiveUI&&this.isResponsiveToolbarMenuItems(!0)&&("Horizontal"===this.parent.rowRenderingMode||"Vertical"===this.parent.rowRenderingMode&&!this.parent.allowFiltering&&!this.parent.allowSorting)&&(this.isRightToolbarMenu=!0),e&&this.isResponsiveToolbarMenuItems(!1)?this.predefinedItems.responsiveToolbarItems={id:this.gridID+"_responsivetoolbaritems",cssClass:"e-responsive-toolbar-items e-menu-toolbar",suffixIcon:"e-responsivetoolbaritems-btn",align:this.isRightToolbarMenu?"Left":"Right"}:this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:e?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting)&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")}),this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.some(function(e){return"object"==typeof e&&"Search"===e.text||"Search"===e})&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar(),this.parent.enableAdaptiveUI&&(P.isNullOrUndefined(this.responsiveToolbarMenu)&&this.renderResponsiveToolbarpopup(),this.toolbar.element)&&this.toolbar.refreshOverflow()},f.prototype.isResponsiveToolbarMenuItems=function(e){for(var t=e?["Add","Edit","Delete","Search"]:["Print","ColumnChooser","PdfExport","ExcelExport","CsvExport"],i=this.parent.toolbar||[],n=0;n<t.length;n++)if(0<=i.indexOf(t[parseInt(n.toString(),10)]))return!e;return!!e},f.prototype.getToolbar=function(){return this.toolbar.element},f.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.responsiveToolbarMenu&&this.responsiveToolbarMenu.destroy(),this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode)&&P.remove(this.element)},f.prototype.bindSearchEvents=function(){this.searchElement=P.select("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},f.prototype.toolbarCreated=function(e){this.element.querySelector(".e-search-wrapper")&&(!this.parent.enableAdaptiveUI||e?(e=this.parent.cssClass?"e-input-group e-search "+this.parent.cssClass:"e-input-group e-search",this.element.querySelector(".e-search-wrapper").innerHTML='<div class="'+e+'" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input e-search" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon"                     tabindex="-1" aria-label= "clear" role= "button" style="cursor: default"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" role= "search"></span>                     </div>'):this.element.querySelector(".e-search-wrapper").innerHTML='<span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon"                     tabindex="-1" role= "button" aria-label= "clear" style="cursor: default"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" role= "button" title="'+this.l10n.getConstant("Search")+'"></span>                     </div>'),this.element.querySelector(".e-responsive-toolbar-items")&&(this.element.querySelector(".e-responsive-toolbar-items").innerHTML='<button id="'+this.gridID+'_responsivetoolbaritems" class="e-tbar-btn e-control e-btn e-lib e-icon-btn"                     type="button" data-ripple="true" tabindex="-1" data-tabindex="-1" aria-label="responsivetoolbaritems"                      aria-disabled="false" style="width: auto;"><span class="e-btn-icon e-responsivetoolbaritems-btn e-icons"></span>'),this.bindSearchEvents()},f.prototype.createToolbar=function(){var e=this.getItems(),e=(this.toolbar=new H.Toolbar({items:e,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this),cssClass:this.parent.cssClass||""}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0,"viewContainerRef"),e=(this.parent[e]&&(this.toolbar.registeredTemplate={},this.toolbar[e]=this.parent[e]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate?(e=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,"string"!=typeof this.parent.toolbarTemplate||e&&!document.querySelectorAll(this.parent.toolbarTemplate).length?(e=this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate,t=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,i=this.parent.element.id+"toolbarTemplate",e||t?(_l(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",i,null,null,this.element),this.parent.renderTemplates()):sh(this.element,_l(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",null,null,null,null,this.parent.root))):(this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element),this.element.classList.add("e-temp-toolbar")):this.toolbar.appendTo(this.element),this.parent.element.insertBefore(this.element,this.parent.getHeaderContent()),this.element.querySelector(".e-toolbar-left")),t=this.element.querySelector(".e-toolbar-center"),i=this.element.querySelector(".e-toolbar-right"),n=this.element.querySelector(".e-toolbar-items"),r=this.element,e=e?e.clientWidth:0,t=t?t.clientWidth:0,i=i?i.clientWidth:0,n=n?n.clientWidth:0,r=r?r.clientWidth:0;(r<e||r<t||r<i||r<n)&&this.toolbar.refreshOverflow()},f.prototype.addReactToolbarPortals=function(e){this.parent.isReact&&e&&(this.parent.portals=this.parent.portals.concat(e),this.parent.renderTemplates())},f.prototype.renderResponsiveSearch=function(e){e?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(O.ResponsiveToolbarAction.isSearch),this.searchElement=P.select("#"+this.gridID+"_searchbar",this.element),(e=E(this.searchElement,"e-toolbar-right"))&&e.classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(O.ResponsiveToolbarAction.isInitial)},f.prototype.refreshResponsiveToolbarItems=function(e){if(e===O.ResponsiveToolbarAction.isInitial){for(var t=this.parent.element.id,i=[t+"_edit",t+"_delete"],n=this.parent.getSelectedRowIndexes(),r=[t+"_responsiveback",t+"_update",t+"_cancel"],s=0,o=this.toolbar.items;s<o.length;s++)(h=(p=o[s]).template&&p.template.length?E(this.toolbar.element.querySelector("#"+p.id),"e-template").children[0]:this.toolbar.element.querySelector("#"+p.id))&&(-1<i.indexOf(p.id)?n.length?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"):-1===r.indexOf(p.id)?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"));this.searchElement&&((t=E(this.searchElement,"e-toolbar-right"))&&t.classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(e===O.ResponsiveToolbarAction.isSearch)for(var i=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"],a=0,l=this.toolbar.items;a<l.length;a++){var h,p=l[a];(h=this.toolbar.element.querySelector("#"+p.id))&&(-1<i.indexOf(p.id)?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"))}},f.prototype.refreshToolbarItems=function(e){var t=this.parent,i=[],n=[],r=t.editSettings,s=t.currentViewData&&t.currentViewData.length,o=r.showAddNewRow&&!t.element.querySelector(".e-editedrow");(r.allowAdding?i:n).push(this.gridID+"_add"),(r.allowEditing&&s?i:n).push(this.gridID+"_edit"),(r.allowDeleting&&s?i:n).push(this.gridID+"_delete"),"Batch"===t.editSettings.mode?(t.element.getElementsByClassName("e-updatedtd").length&&(r.allowAdding||r.allowEditing)?(i.push(this.gridID+"_update"),i):(n.push(this.gridID+"_update"),n)).push(this.gridID+"_cancel"):(t.isEdit||r.showAddNewRow)&&(r.allowAdding||r.allowEditing)?(i=o?[this.gridID+"_update",this.gridID+"_cancel",this.gridID+"_edit",this.gridID+"_delete"]:[this.gridID+"_update",this.gridID+"_cancel"],n=o?[this.gridID+"_add"]:[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(n,!1)},f.prototype.getItems=function(){var e=[],t=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&e.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting)&&e.push(this.getItemObject("responsiveSort"));for(var i=0,n=t;i<n.length;i++){var r=n[i];if(!this.parent.enableAdaptiveUI||-1===["Print","ColumnChooser","PdfExport","ExcelExport","CsvExport"].indexOf(r))switch(this.parent.enableAdaptiveUI&&("object"==typeof r&&"Search"===r.text||"Search"===r)&&e.push(this.getItemObject("responsiveBack")),typeof r){case"number":e.push(this.getItemObject(this.items[r]));break;case"string":e.push(this.getItemObject(r));break;default:e.push(this.getItem(r))}}return this.parent.enableAdaptiveUI&&this.isResponsiveToolbarMenuItems(!1)&&e.push(this.getItemObject("responsiveToolbarItems")),e},f.prototype.getItem=function(e){var t=this.predefinedItems[e.text];return t?P.extend(t,t,e):e},f.prototype.getItemObject=function(e){return this.predefinedItems[""+e]||{text:e,id:this.gridID+"_"+e}},f.prototype.enableItems=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i],r=P.select("#"+r,this.element);r&&this.toolbar.enableItems(r.closest(".e-toolbar-item"),t)}},f.prototype.toolbarClickHandler=function(e){var s=this,o=this.parent,a=this.gridID,l=e.originalEvent;this.parent.enableAdaptiveUI&&e.item.id===a+"_responsivetoolbaritems"?this.openResponsiveToolbarMenuPopup(l,e.item.id):(P.extend(e,{cancel:!1}),o.trigger(Ae,e,function(e){if(e.originalEvent=e.originalEvent||l,!e.cancel)switch(!P.isNullOrUndefined(e.item)&&e.item.id){case a+"_print":o.print();break;case a+"_edit":o.startEdit();break;case a+"_update":o.endEdit();break;case a+"_cancel":o.closeEdit();break;case a+"_add":o.addRecord();break;case a+"_delete":o.deleteRecord();break;case a+"_search":e.originalEvent.target.id===a+"_searchbutton"&&s.searchElement?s.search():!o.enableAdaptiveUI||s.searchElement||!e.originalEvent.target.classList.contains("e-search-wrapper")&&e.originalEvent.target.id!==a+"_searchbutton"?e.originalEvent.target.classList.contains("e-clear-icon")&&e.originalEvent.target.id===a+"_clearbutton"&&s.searchElement&&(s.searchElement.value="",s.searchElement&&(s.sIcon=s.searchElement.parentElement.querySelector(".e-sicon"),s.sIcon.classList.remove("e-clear-icon"),s.sIcon.removeAttribute("title"),s.sIcon.style.cursor="default"),s.isSearched||s.parent.searchSettings.key.length)&&(s.parent.search(s.searchElement.value),s.isSearched=!1):s.renderResponsiveSearch(!0);break;case a+"_columnchooser":var t,i,n,r;s.parent.enableAdaptiveUI?o.showResponsiveCustomColumnChooser():(r=(t=s.parent.element.querySelector(".e-ccdiv")).getBoundingClientRect().top,i=t.getBoundingClientRect().left,n=e.originalEvent.target,r=t.getBoundingClientRect().top+t.offsetTop,o.createColumnchooser(i,r,n));break;case a+"_responsivefilter":o.notify(kr,{action:3}),o.showResponsiveCustomFilter();break;case a+"_responsivesort":o.notify(kr,{action:2}),o.showResponsiveCustomSort();break;case a+"_responsiveback":s.renderResponsiveSearch(!1)}}))},f.prototype.openResponsiveToolbarMenuPopup=function(e,t){var i={top:0,left:0},n=(this.toolbarMenuElement.style.cssText="display:block;visibility:hidden",this.toolbarMenuElement.getBoundingClientRect()),r=this.parent.element.getBoundingClientRect();this.toolbarMenuElement.style.cssText="display:none;visibility:visible",t=P.isNullOrUndefined(e)?this.parent.element.querySelector("#"+t):e.target,this.parent.enableRtl?(i=L.calculatePosition(t,"left","bottom"),this.isRightToolbarMenu&&(i.left-=n.width)):(i=L.calculatePosition(t,"right","bottom"),this.isRightToolbarMenu||(i.left-=n.width),i.left+n.width+1>=r.right&&(i.left-=35)),this.responsiveToolbarMenu.open(i.top,i.left),e&&e.preventDefault&&e.preventDefault(),Gh(this.parent.element,this.responsiveToolbarMenu.element.parentElement)},f.prototype.getMenuItems=function(){for(var e=[],t=0,i=this.parent.toolbar||[];t<i.length;t++){var n=i[t];"string"!=typeof n||"ColumnChooser"!==n&&"PdfExport"!==n&&"ExcelExport"!==n&&"CsvExport"!==n&&"Print"!==n||e.push({text:this.getLocaleText(n),id:this.gridID+"_"+n.toLowerCase(),iconCss:"e-btn-icon e-"+n.toLowerCase()+" e-icons"})}return e},f.prototype.getLocaleText=function(e){var t;return"ColumnChooser"===e?t=this.l10n.getConstant("Columnchooser"):"PdfExport"===e?t=this.l10n.getConstant("Pdfexport"):"ExcelExport"===e?t=this.l10n.getConstant("Excelexport"):"CsvExport"===e?t=this.l10n.getConstant("Csvexport"):"Print"===e&&(t=this.l10n.getConstant("Print")),t},f.prototype.renderResponsiveToolbarpopup=function(){this.l10n=this.serviceLocator.getService("localization"),this.toolbarMenuElement=this.parent.createElement("ul",{id:this.gridID+"__toolbaritemsmenu",className:"e-responsivetoolbar-menu"}),this.element.setAttribute("aria-label",this.l10n.getConstant("ToolbarMenuDialogARIA")),this.parent.element.appendChild(this.toolbarMenuElement),this.responsiveToolbarMenu=new H.ContextMenu({cssClass:this.parent.cssClass?"e-grid-toolbarmenu "+this.parent.cssClass:"e-grid-toolbarmenu",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,items:this.getMenuItems(),select:this.ResponsiveToolbarMenuItemClick.bind(this)}),this.responsiveToolbarMenu.appendTo(this.toolbarMenuElement)},f.prototype.ResponsiveToolbarMenuItemClick=function(e){var t=this,i=this.parent,n=e.element,n=(e.item.id=n.id,{cancel:!1,name:"clicked",item:e.item,originalEvent:e.event});i.trigger(Ae,n,function(e){if(!e.cancel)switch(!P.isNullOrUndefined(e.item)&&e.item.id){case t.gridID+"_columnchooser":i.notify(kr,{action:5}),i.showResponsiveCustomColumnChooser();break;case t.gridID+"_print":i.print()}})},f.prototype.modelChanged=function(e){"edit"===e.module&&this.refreshToolbarItems()},f.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&this.parent.toolbar&&(this.element&&P.remove(this.element),this.render())},f.prototype.keyUpHandler=function(e){13===e.keyCode&&this.search(),this.searchElement&&(this.sIcon=this.searchElement.parentElement.querySelector(".e-sicon"),this.searchElement.value.length&&!P.isNullOrUndefined(this.sIcon)?(this.sIcon.classList.add("e-clear-icon"),this.sIcon.setAttribute("title",this.l10n.getConstant("Clear")),this.sIcon.style.cursor="pointer"):(this.sIcon.classList.remove("e-clear-icon"),this.sIcon.removeAttribute("title"),this.sIcon.style.cursor="default"))},f.prototype.search=function(){this.isSearched=!0,this.parent.search(this.searchElement.value)},f.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},f.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new aa(this.searchElement,this.serviceLocator),P.EventHandler.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent()),P.EventHandler.add(this.element,"focusin",this.onFocusIn,this),P.EventHandler.add(this.element,"focusout",this.onFocusOut,this)},f.prototype.unWireEvent=function(){this.searchElement&&(P.EventHandler.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent()),P.EventHandler.remove(this.element,"focusin",this.onFocusIn),P.EventHandler.remove(this.element,"focusout",this.onFocusOut)},f.prototype.onFocusIn=function(e){var t=this.parent.focusModule.currentInfo;t&&t.element&&(P.removeClass([t.element,t.elementToFocus],["e-focused","e-focus"]),t.element.tabIndex=-1),e.target.tabIndex=0},f.prototype.onFocusOut=function(e){e.target.tabIndex=-1,e.target&&e.target.id===this.parent.element.id+"_searchbar"&&(!e.relatedTarget||e.relatedTarget.id!==this.parent.element.id+"_clearbutton"&&e.relatedTarget.id!==this.parent.element.id+"_searchbutton")&&this.search()},f.prototype.setFocusToolbarItem=function(e){var t=e.querySelector(".e-btn,.e-input,.e-toolbar-item-focus");(t=!t&&this.parent.enableAdaptiveUI&&!this.searchElement&&e.classList.contains("e-search-wrapper")?e.querySelector("#"+this.gridID+"_searchbutton"):t).focus()},f.prototype.getFocusableToolbarItems=function(){for(var e=[].slice.call(this.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)")),t=[],i=0;i<e.length;i++)P.isNullOrUndefined(e[parseInt(i.toString(),10)].querySelector(".e-btn,.e-input,.e-toolbar-item-focus"))||t.push(e[parseInt(i.toString(),10)]);return t},f.prototype.keyPressedHandler=function(e){if(e.target&&E(e.target,"e-toolbar-item")){var t=E(e.target,"e-toolbar-item"),i=this.getFocusableToolbarItems();if("tab"===e.action||"shiftTab"===e.action){if("tab"===e.action&&t===i[i.length-1]||"shiftTab"===e.action&&t===i[0])return;for(var n,r=0;r<i.length;r++)if(t===i[parseInt(r.toString(),10)])return e.preventDefault(),n="tab"===e.action?r+1:r-1,void this.setFocusToolbarItem(i[parseInt(n.toString(),10)])}"enter"===e.action&&this.parent.enableAdaptiveUI&&!this.searchElement&&e.target.id===this.gridID+"_searchbutton"&&this.renderResponsiveSearch(!0)}},f.prototype.reRenderToolbar=function(){this.element&&P.remove(this.element),this.render()},f.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:nr,handler:this.reRenderToolbar},{event:lt,handler:this.render},{event:g,handler:this.onPropertyChanged},{event:ct,handler:this.updateSearchBox.bind(this)},{event:ut,handler:this.refreshToolbarItems},{event:Kt,handler:this.refreshToolbarItems},{event:ct,handler:this.modelChanged},{event:ae,handler:this.refreshToolbarItems},{event:Lt,handler:this.removeResponsiveSearch},{event:sr,handler:this.reRenderToolbar},{event:r,handler:this.destroy},{event:Mt,handler:this.keyPressedHandler}],wp(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(he,this.rowSelectedFunction),this.parent.addEventListener(de,this.rowDeSelectedFunction))},f.prototype.removeEventListener=function(){this.parent.isDestroyed||(wp(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(he,this.rowSelectedFunction),this.parent.removeEventListener(de,this.rowDeSelectedFunction))},f.prototype.removeResponsiveSearch=function(e){var t=e.target,t=t.classList.contains("e-search-icon")||t.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!t&&this.searchElement&&!E(e.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)},f.prototype.rowSelected=function(){this.parent.enableAdaptiveUI&&this.toolbar.element&&(this.refreshResponsiveToolbarItems(O.ResponsiveToolbarAction.isInitial),this.toolbar.refreshOverflow())},f.prototype.getModuleName=function(){return"toolbar"};Ea=f;function f(e,t){this.predefinedItems={},this.isSearched=!1,this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.isRightToolbarMenu=!1,this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}kd=function(e,t){return(kd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}kd(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Pd,Md=js),Pd.prototype.renderPanel=function(){var e=this.parent.createElement("div",{className:Wr}),t=this.parent.createElement("div",{className:"e-summarycontent"});e.appendChild(t),this.setPanel(e),null!=this.parent.getPager()?this.parent.element.insertBefore(e,this.parent.getPager()):this.parent.element.appendChild(e)},Pd.prototype.renderTable=function(){var e=this.createContentTable("_footer_table").querySelector("."+$r),t=this.parent.createElement("tfoot");e.appendChild(t),this.setTable(e)},Pd.prototype.renderSummaryContent=function(e,t,i,n){var r=this.parent.dataSource instanceof Array?!this.parent.getDataModule().isRemote()&&this.parent.parentDetails?this.getData():this.parent.dataSource:this.parent.currentViewData,s=this.modelGenerator.getData(),o=P.isNullOrUndefined(i)?this.modelGenerator.getColumns():this.modelGenerator.getColumns(i),a=P.isNullOrUndefined(i)?this.modelGenerator.generateRows(r,e||this.aggregates):this.modelGenerator.generateRows(r,e||this.aggregates,i,n),l=document.createDocumentFragment(),h=new Rs(this.locator,null,this.parent);h.element=this.parent.createElement("TR",{className:"e-summaryrow",attrs:{role:"row"}});for(var p=0,d=s.length;p<d;p++){var c=a[parseInt(p.toString(),10)];if(c){c=h.render(c,o);if(c.querySelectorAll(".e-leftfreeze").length&&c.querySelectorAll(".e-indentcell").length)for(var u=c.querySelectorAll(".e-indentcell"),g=0;g<u.length;g++)u[parseInt(g.toString(),10)].classList.add("e-leftfreeze"),pp(u[parseInt(g.toString(),10)],30*g,this.parent.enableRtl,"Left");this.parent.isFrozenGrid()&&c.querySelectorAll(".e-summarycell").length&&P.removeClass([].slice.call(c.querySelectorAll(".e-summarycell")),["e-freezeleftborder","e-freezerightborder"]),l.appendChild(c)}}r=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;(this.parent.isReact||r)&&s.length&&this.parent.isInitialLoad?this.parent.renderTemplates(function(){t.tFoot.innerHTML="",t.tFoot.appendChild(l)}):t.tFoot.appendChild(l),this.aggregates=P.isNullOrUndefined(e)?this.aggregates:e},Pd.prototype.refresh=function(e){var t=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;(this.parent.isReact||t)&&this.parent.isInitialLoad||(this.getTable().tFoot.innerHTML=""),this.renderSummaryContent(e,this.getTable(),void 0,void 0),P.isNullOrUndefined(e)&&this.parent.isAutoFitColumns&&this.parent.autoFitColumns(),this.onScroll()},Pd.prototype.refreshCol=function(){var e=this.parent.enableColumnVirtualization?this.parent.headerModule.getColGroup():this.parent.element.querySelector("."+Gr).querySelector(us).cloneNode(!0);this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)},Pd.prototype.onWidthChange=function(e){this.getColFromIndex(e.index).style.width=P.formatUnit(e.width),this.parent.allowResizing&&"resize"===e.module&&this.updateFooterTableWidth(this.getTable())},Pd.prototype.onScroll=function(e){void 0===e&&(e={left:this.parent.getContent().firstChild.scrollLeft}),this.getTable().parentElement.scrollLeft=e.left},Pd.prototype.getColFromIndex=function(e){return this.getColGroup().children[parseInt(e.toString(),10)]},Pd.prototype.columnVisibilityChanged=function(){this.refresh()},Pd.prototype.addEventListener=function(){this.evtHandlers=[{event:gt,handler:this.refreshCol},{event:Bt,handler:this.onWidthChange},{event:Nt,handler:this.onScroll},{event:Pt,handler:this.columnVisibilityChanged},{event:Rt,handler:this.refreshFooterRenderer}],wp(this.parent,this.evtHandlers,!0,this)},Pd.prototype.removeEventListener=function(){wp(this.parent,this.evtHandlers,!1)},Pd.prototype.updateFooterTableWidth=function(e){var t=this.parent.getHeaderTable();t&&e&&(e.style.width=t.style.width)},Pd.prototype.refreshFooterRenderer=function(e){e=this.onAggregates(e);this.refresh(e)},Pd.prototype.getIndexByKey=function(e,t){for(var i=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)][""+i]===e[""+i])return n;return-1},Pd.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},Pd.prototype.onAggregates=function(n){n=n instanceof Array?n:[];var e,r=this.parent.getPrimaryKeyFieldNames()[0],t=[],i=!1,s={},o="dataSource",a=!1;if(this.parent.renderModule.data.isRemote()||!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result||!(this.parent.allowFiltering&&this.parent.filterSettings.columns.length||this.parent.searchSettings.key.length)||(a=!0),e=!P.isNullOrUndefined(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.getCurrentViewRecords():this.parent.dataSource instanceof Array?a?this.parent.getFilteredRecords():this.parent.dataSource:this.parent.dataSource[o].json.length?a?this.parent.getFilteredRecords():this.parent.dataSource[o].json:this.parent.getCurrentViewRecords(),this.parent.parentDetails&&!this.parent.getDataModule().isRemote()&&(e=this.getData()),this.parent.editModule&&(s=this.parent.editModule.getBatchChanges()),Object.keys(s).length){for(var l=0;l<e.length;l++)i=!1,s[rs].length&&-1<this.getIndexByKey(e[parseInt(l.toString(),10)],s[rs])&&(i=!0,t.push(s[rs][this.getIndexByKey(e[parseInt(l.toString(),10)],s[rs])])),s[os].length&&-1<this.getIndexByKey(e[parseInt(l.toString(),10)],s[os])?i=!0:i||t.push(e[parseInt(l.toString(),10)]);if(s[ss].length)for(l=0;l<s[ss].length;l++)t.push(s[ss][parseInt(l.toString(),10)])}else t=n.length?(c=Gl(e)).map(function(e){var t,i=A.DataUtil.getObject(r,e);return n.some(function(e){return t=e,i===A.DataUtil.getObject(r,e)})?t:e}):e;for(var a=n,h=(a.type&&"cancel"===a.type&&(t=e),{}),p=this.parent.aggregates,l=0;l<p.length;l++)for(var d=0;d<p[parseInt(l.toString(),10)].columns.length;d++){var c=[];c=t;for(var u=0,g=p[parseInt(l.toString(),10)].columns[parseInt(d.toString(),10)].type.toString().split(",").map(function(e){return e.trim()});u<g.length;u++){var f=g[u],m=ah(f,c,p[parseInt(l.toString(),10)].columns[parseInt(d.toString(),10)],this.parent);h[p[parseInt(l.toString(),10)].columns[parseInt(d.toString(),10)].field+" - "+f.toLowerCase()]=m}}return{result:t,count:t.length,aggregates:h}};var kd,Md,Ld=Pd;function Pd(e,t){var i=Md.call(this,e,t)||this;return i.aggregates={},i.parent=e,i.locator=t,i.modelGenerator=new As(i.parent),i.addEventListener(),i}Nd=function(e,t){return(Nd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Nd(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Ud,Bd=_s),Ud.prototype.getValue=function(e,t,i){var n=P.isNullOrUndefined(i.type)?i.columnName:i.field+" - "+("string"==typeof i.type?i.type.toLowerCase():"");return t[i.columnName]?t[i.columnName][""+n]:""},Ud.prototype.evaluate=function(e,t,i,n){var r=t.column;if(this.parent.on(Et,this.refreshWithAggregate(e,t),this),!(r.footerTemplate||r.groupFooterTemplate||r.groupCaptionTemplate))return"Vertical"===this.parent.rowRenderingMode&&(e.style.display="none"),!0;"Vertical"===this.parent.rowRenderingMode&&e.classList.add("e-lastsummarycell");var t=r.getTemplate(t.cellType),s=this.parent.getColumnByField(i[r.columnName].field),o=(P.isNullOrUndefined(s)||(i[r.columnName].headerText=s.headerText,s.isForeignColumn()&&(o=s.columnData.filter(function(e){return e[s.foreignKeyField]===i[r.columnName].key})[0])&&(i[r.columnName].foreignKey=o[s.foreignKeyValue])),this.parent.isReact&&(r.footerTemplate?"string"!=typeof r.footerTemplate:r.groupFooterTemplate?"string"!=typeof r.groupFooterTemplate:!!r.groupCaptionTemplate&&"string"!=typeof r.groupCaptionTemplate)),a=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;return o||a?(o=i[r.columnName],"groupCaptionTemplate"!==t.property&&"groupFooterTemplate"!==t.property||(o.groupKey=o.key),t.fn(o,this.parent,t.property,"",null,null,e),this.parent.isInitialLoad||this.parent.renderTemplates()):sh(e,t.fn(i[r.columnName],this.parent,t.property,"",null,null,null,this.parent.root)),!1},Ud.prototype.refreshWithAggregate=function(n,e){var r=this,s=e;return function(e){var t=s,i=t.column.columnName||null,t=P.isNullOrUndefined(i)?null:e.cells.filter(function(e){return e.column.columnName===i})[0];n.parentElement&&n.parentElement.getAttribute("data-uid")===e.dataUid&&i&&t&&i===t.column.columnName&&r.refreshTD(n,t,e.data)}};var Nd,Bd,zd=Ud;function Ud(){var e=null!==Bd&&Bd.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-summarycell",attrs:{tabindex:"-1",role:"gridcell"}}),e}qd.prototype.getModuleName=function(){return"aggregate"},qd.prototype.initiateRender=function(){for(var e=this,t=this.locator.getService("cellRendererFactory"),i=new zd(this.parent,this.locator),n=[O.CellType.Summary,O.CellType.CaptionSummary,O.CellType.GroupSummary],r=0;r<n.length;r++)t.addCellRenderer(n[parseInt(r.toString(),10)],i);this.footerRenderer=new Ld(this.parent,this.locator),this.footerRenderer.renderPanel(),this.footerRenderer.renderTable();var s=this.footerRenderer.getPanel(),o=(this.parent.element.scrollHeight>=this.parent.getHeight(this.parent.height)&&s&&P.addClass([s],["e-footerpadding"]),this.locator.register("footerRenderer",this.footerRenderer),function(){e.prepareSummaryInfo(),e.parent.off(ht,o)});this.parent.on(ht,o,this),this.parent.on(ht,this.footerRenderer.refresh,this.footerRenderer)},qd.prototype.prepareSummaryInfo=function(){var i=this;Hd(this.parent.aggregates,function(e){var t=P.getValue("customFormat",e);P.isNullOrUndefined(t)||e.setPropertiesSilent({format:t}),"object"==typeof e.format?(t=new V,e.setFormatter(t.getFormatFunction(P.extend({},e.format)))):"string"==typeof e.format&&(t=i.locator.getService("valueFormatter"),e.setFormatter(t.getFormatFunction({format:e.format}))),e.setPropertiesSilent({columnName:e.columnName||e.field})})},qd.prototype.onPropertyChanged=function(e){e.module!==this.getModuleName()||(P.isNullOrUndefined(this.footerRenderer)&&this.initiateRender(),this.prepareSummaryInfo(),this.footerRenderer.refresh(),e=new Ns(this.parent),0===new Ms(this.parent).getData().length&&e.isEmpty())||this.parent.notify(ut,{})},qd.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(lt,this.initiateRender,this),this.parent.on(g,this.onPropertyChanged,this),this.parent.on(Dt,this.refresh,this),this.parent.on(r,this.destroy,this))},qd.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.footerRenderer.removeEventListener(),this.parent.off(lt,this.initiateRender),this.parent.off(ht,this.footerRenderer.refresh),this.parent.off(g,this.onPropertyChanged),this.parent.off(Dt,this.refresh),this.parent.off(r,this.destroy),this.parent.element.querySelector("."+Wr)&&P.remove(this.parent.element.querySelector("."+Wr)))},qd.prototype.destroy=function(){this.removeEventListener()},qd.prototype.refresh=function(e,t){e=e instanceof Array?e:[e];this.parent.notify(Rt,e),t&&(e.row=t),0<this.parent.groupSettings.columns.length&&this.parent.notify(xt,e)};e=qd;function qd(e,t){this.parent=e,this.locator=t,this.addEventListener()}function Hd(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<e[parseInt(i.toString(),10)].columns.length;n++)t(e[parseInt(i.toString(),10)].columns[parseInt(n.toString(),10)],e[parseInt(i.toString(),10)])}Vd.prototype.observe=function(e,t){var i=this;this.containerRect=this.options.container.getBoundingClientRect(),P.EventHandler.add(this.options.container,"wheel",function(){return i.fromWheel=!0},this),P.EventHandler.add(this.options.container,"scroll",this.virtualScrollHandler(e,t),this)},Vd.prototype.check=function(e){e=this.sentinelInfo[""+e];return e.check(this.element.getBoundingClientRect(),e)},Vd.prototype.virtualScrollHandler=function(e,s){var o=this,t="chrome"===P.Browser.info.name?200:100,a=P.debounce(e,t),l=P.debounce(e,50);return this.options.prevTop=this.options.prevLeft=0,function(e){var t,i=e.target.scrollTop,e=e.target.scrollLeft,n=o.options.prevTop<i?"down":"up",n=o.options.prevLeft===e?n:o.options.prevLeft<e?"right":"left",r=(o.options.prevTop=i,o.options.prevLeft=e,o.sentinelInfo[n]);-1!==o.options.axes.indexOf(r.axis)&&(o.containerRect=o.options.container.getBoundingClientRect(),t=o.check(n),r.entered&&s(o.element,r,n,{top:i,left:e},o.fromWheel,t),t&&("X"===r.axis?l:a)({direction:n,sentinel:r,offset:{top:i,left:e},focusElement:document.activeElement}),o.fromWheel=!1)}},Vd.prototype.setPageHeight=function(e){this.options.pageHeight=e};var jd=Vd;function Vd(e,t,i){var r=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var i=e.top-r.containerRect.top,n=r.containerRect.bottom>e.bottom?r.containerRect.bottom-e.bottom:0;return t.entered=0<=i,0<=i+r.options.pageHeight/2||0<n&&0<e.bottom},axis:"Y"},down:{check:function(e,t){var i=e.bottom;return t.entered=e.bottom<=r.containerRect.bottom,i-r.containerRect.top-r.options.pageHeight/2<=r.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){e=e.right;return t.entered=e<r.containerRect.right,e-r.containerRect.width<=r.containerRect.right},axis:"X"},left:{check:function(e,t){e=e.left;return t.entered=0<e,e+r.containerRect.width>=r.containerRect.left},axis:"X"}},this.element=e,this.options=t,this.movableEle=i}_d.prototype.columnInfiniteRows=function(e,t){var i,n=[];return"virtualscroll"===t.requestType?(i=this.parent.getRowsObject(),n.push.apply(n,this.rowModelGenerator.refreshRows(i)),this.parent.infiniteScrollSettings.enableCache&&(i=this.parent.frozenRows&&1===this.parent.pageSettings.currentPage?0:Tp(this.parent.getContentTable().querySelector(".e-row:not(.e-addedrow)")),i=n.slice(i,i+3*this.parent.pageSettings.pageSize),n=i=this.parent.frozenRows&&1!==this.parent.pageSettings.currentPage?n.slice(0,this.parent.frozenRows).concat(i):i)):n.push.apply(n,this.rowModelGenerator.generateRows(e,t)),n},_d.prototype.generateRows=function(d,c){var i=this;if(this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling)return this.columnInfiniteRows(d,c);var u=!1,g=c.virtualInfo=c.virtualInfo||("sorting"===c.requestType||"delete"===c.requestType)&&Pp(this.parent)&&this.prevInfo||this.getData(),f=(this.prevInfo=g).sentinelInfo&&"X"===g.sentinelInfo.axis,e=(f||!g.loadNext||g.loadSelf?g:g.nextInfo).page,m=[],y=this.getBlockIndexes(e),S=[];if(this.currentInfo.blockIndexes&&(y=g.blockIndexes=c.virtualInfo.blockIndexes=this.includePrevPage?this.currentInfo.blockIndexes.slice(1):this.currentInfo.blockIndexes.slice(0,this.currentInfo.blockIndexes.length-1),u=!0),this.checkAndResetCache(c.requestType),Mh(this.parent)&&this.parent.vcRows.length){e=this.parent.vcRows.filter(function(e){return e.isDataRow});if(this.parent.isManualRefresh&&e.length===d.records.length||!this.parent.isManualRefresh)return m=this.parent.vcRows}if(this.parent.enableColumnVirtualization)for(var t=0;t<g.blockIndexes.length;t++)this.isBlockAvailable(g.blockIndexes[parseInt(t.toString(),10)])&&(this.cache[g.blockIndexes[parseInt(t.toString(),10)]]=this.rowModelGenerator.refreshRows(this.cache[g.blockIndexes[parseInt(t.toString(),10)]]));for(var v=g.blockIndexes,C=this,t=0;t<v.length;t++)!function(e){if(!C.isBlockAvailable(v[parseInt(e.toString(),10)])){var t=P.isNullOrUndefined(C.startIndex)?C.getStartIndex(v[parseInt(e.toString(),10)],d):C.startIndex,t=!Mh(C.parent)||C.parent.vcRows.length||"sorting"!==c.requestType&&"delete"!==c.requestType?t:0,i=C.rowModelGenerator.generateRows(d,{virtualInfo:g,startIndex:t});Mh(C.parent)&&!C.parent.vcRows.length&&(C.recordsCount=d.records.length,C.parent.vRows=i,C.parent.vcRows=i,C.parent.notify(ar,{}));if(Mh(C.parent))C.getGroupVirtualRecordsByIndex(i);else if(u)C.setBlockForManualRefresh(C.cache,y,i);else if("sorting"!==c.requestType&&"delete"!==c.requestType||!Pp(C.parent))t=~~Math.max(i.length,C.model.pageSize)/2,C.isBlockAvailable(y[0])||(C.cache[y[0]]=i.slice(0,t)),C.isBlockAvailable(y[1])||(C.cache[y[1]]=i.slice(t));else for(var n=Np(g.blockIndexes),r=0,s=0;s<n.length;s++){var o=C.getBlockIndexes(n[parseInt(s.toString(),10)]),a=C.model.pageSize*s,l=a+C.model.pageSize,h=(C.parent.allowGrouping&&C.parent.groupSettings.columns.length&&(h=i.filter(function(e){return e.isDataRow}).slice(a,l),a=r,l=i.indexOf(h[h.length-1])+1),i.slice(a,l)),a=~~Math.max(h.length,C.model.pageSize)/2;C.isBlockAvailable(o[0])||(C.cache[o[0]]=h.slice(0,a)),C.isBlockAvailable(o[1])||(C.cache[o[1]]=h.slice(a)),r=l}}var p;C.parent.groupSettings.columns.length&&!f&&C.cache[v[parseInt(e.toString(),10)]]&&!C.parent.groupSettings.enableLazyLoading&&(C.cache[v[parseInt(e.toString(),10)]]=C.updateGroupRow(C.cache[v[parseInt(e.toString(),10)]],v[parseInt(e.toString(),10)])),c.renderMovableContent||c.renderFrozenRightContent||!C.cache[v[parseInt(e.toString(),10)]]||(m.push.apply(m,C.cache[v[parseInt(e.toString(),10)]]),p=[],C.parent.enableVirtualization&&C.parent.groupSettings.columns.length&&m.forEach(function(e){p.includes(e)||p.push(e)}),m=p.length?p:m),C.isBlockAvailable(v[parseInt(e.toString(),10)])&&S.push(v[parseInt(e.toString(),10)])}(t);if(Mh(this.parent)&&this.parent.vcRows.length&&"sorting"===c.requestType&&0!==c.scrollTop.top)return m=this.parent.vcRows;g.blockIndexes=S;var n="records";return this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.parent.currentViewData[n]=m.map(function(e){return e.data}):this.parent.currentViewData=m.map(function(e){return e.data}),"grouping"===c.requestType&&(this.parent.currentViewData[n]=this.parent.currentViewData[n].filter(function(e,t){return i.parent.currentViewData[n].indexOf(e)===t})),Mh(this.parent)&&this.parent.vcRows.length&&["save","delete"].some(function(e){return c.requestType===e})?m=this.parent.vcRows:m},_d.prototype.setBlockForManualRefresh=function(e,t,i){var n=this.model.pageSize/2;this.includePrevPage?(e[t[0]-1]=i.slice(0,n),e[t[0]]=i.slice(n,2*n),e[t[1]]=i.slice(2*n,3*n),e[t[2]]=i.slice(3*n,4*n)):(e[t[0]]=i.slice(0,n),e[t[1]]=i.slice(n,2*n),e[t[2]]=i.slice(2*n,3*n),e[t[2]+1]=i.slice(3*n,4*n))},_d.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},_d.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},_d.prototype.isBlockAvailable=function(e){return e in this.cache},_d.prototype.getData=function(){return{page:this.model.currentPage,blockIndexes:this.getBlockIndexes(this.model.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},_d.prototype.getStartIndex=function(e,t,i){void 0===i&&(i=!0);var n=(this.getPage(e)-1)*this.model.pageSize;return i||!(e%2==0)?n:n+~~(this.model.pageSize/2)},_d.prototype.getColumnIndexes=function(e){var i=this,n=(void 0===e&&(e=this.parent.getHeaderContent().querySelector("."+Kr)),[]),t=0|e.scrollLeft,r=Object.keys(this.cOffsets),e=e.getBoundingClientRect().width,t=Math.min(this.cOffsets[r.length-1]-e,t),s=P.Browser.isDevice?2*e:e/2,o=t+e+(0===t?s:0),a=0,l=t-s;if(this.parent.isFrozenGrid()){if(a=this.parent.leftrightColumnWidth("left"),0<l)for(var h=this.parent.getVisibleFrozenLeftCount()-1;0<=h;h--)if(l<=this.cOffsets[parseInt(h.toString(),10)]){a-=this.cOffsets[parseInt(h.toString(),10)];break}this.parent.getFrozenMode()===as&&(e=this.parent.getVisibleFrozenRightCount(),r.splice(r.length-1-e,e))}return r.some(function(e){var t=Number(e),e=i.cOffsets[""+e];return l+a<=e&&e<=o+s&&n.push(t),o+s<e}),n},_d.prototype.checkAndResetCache=function(t){var e=["paging","refresh","sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(e){return t===e});return e&&(this.cache={},this.data={},this.groups={}),e},_d.prototype.refreshColOffsets=function(){for(var e=this,t=0,i=(this.cOffsets={},this.parent.groupSettings.columns.length),n=this.parent.columns,r=n.length,s=this.parent.groupSettings.columns,o=0;o<s.length;o++)this.cOffsets[parseInt(o.toString(),10)]=30+(0|this.cOffsets[o-1]);for(var a,l=Array.apply(null,Array(r)).map(function(){return t++}),h=0;h<l.length;h++)l[parseInt(h.toString(),10)]=l[parseInt(h.toString(),10)]+i,this.cOffsets[l[parseInt(h.toString(),10)]]=(0|this.cOffsets[l[parseInt(h.toString(),10)]-1])+((a=n[parseInt(h.toString(),10)]).visible&&(e.parent.groupSettings.showGroupedColumn?a.visible:e.parent.groupSettings.columns.indexOf(a.field)<0)?parseInt(n[parseInt(h.toString(),10)].width,10):0)},_d.prototype.updateGroupRow=function(e,t){for(var i=e[0],n=[],r=Object.keys(this.cache),s=0;s<r.length;s++)Number(r[parseInt(s.toString(),10)])<t&&(n=n.concat(this.cache[r[parseInt(s.toString(),10)]]));return i&&i.isDataRow||t%2==0?e:this.iterateGroup(e,n)},_d.prototype.iterateGroup=function(e,t){var i=e[0],n=0;return i&&i.isDataRow||e.some(function(i){return t.some(function(e,t){e=e&&void 0!==e.data.field&&e.data.field===i.data.field&&e.data.key===i.data.key;return e&&(n=t),e})})&&(e.shift(),e=this.iterateGroup(e,t.slice(n))),e},_d.prototype.getRows=function(){for(var e=[],t=Object.keys(this.cache),i=0;i<t.length;i++)e=e.concat(this.cache[t[parseInt(i.toString(),10)]]);return e},_d.prototype.generateCells=function(e){for(var t=[],i=this.parent.columnModel,n=0;n<i.length;n++)t.push(this.rowModelGenerator.generateCell(i[parseInt(n.toString(),10)],null,null,null,null,e));return t},_d.prototype.getGroupVirtualRecordsByIndex=function(e){for(var t=this.parent.contentModule.getGroupedTotalBlocks(),i=this.parent.contentModule.getBlockSize(),n=1;n<=t;n++){var r=0;this.cache[parseInt(n.toString(),10)]=[];for(var s=(n-1)*i;s<e.length&&r!==i;s++)this.cache[parseInt(n.toString(),10)].push(e[parseInt(s.toString(),10)]),e[parseInt(s.toString(),10)].isDataRow&&r++}};var Gd=_d;function _d(e){this.cOffsets={},this.cache={},this.rowCache={},this.data={},this.groups={},this.currentInfo={},this.prevInfo={},this.parent=e,this.model=this.parent.pageSettings,this.rowModelGenerator=new(this.parent.allowGrouping?qs:Ds)(this.parent)}Wd=function(e,t){return(Wd=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var Wd,Kd,Qd=function(e,t){function i(){this.constructor=e}Wd(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Xd=(Qd(m,Kd=js),m.prototype.renderTable=function(){this.header=this.locator.getService("rendererFactory").getRenderer(O.RenderType.Header),Kd.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector("."+Zr),this.virtualEle.renderWrapper(this.parent.height),this.virtualEle.renderPlaceHolder(),!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||(this.virtualEle.wrapper.style.position="absolute");var e=this.parent.dataSource instanceof A.DataManager&&!this.parent.dataSource.dataSource.offline,e={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:e,axes:this.parent.enableColumnVirtualization?["X","Y"]:["Y"]};this.observer=new jd(this.virtualEle.wrapper,e)},m.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(N).innerHTML=""),this.virtualEle.adjustTable(0,0)},m.prototype.getReorderedFrozenRows=function(e){var t=e.virtualInfo.blockIndexes,i=e.virtualInfo.columnIndexes,n=e.virtualInfo.page,r=(e.virtualInfo.blockIndexes=[1,2],e.virtualInfo.page=1,e.renderMovableContent||(e.virtualInfo.columnIndexes=[]),this.parent.getCurrentViewRecords().length),r=this.parent.renderModule.data.dataManager.dataSource.json.slice(0,r),r=this.vgenerator.generateRows(r,e);return e.virtualInfo.blockIndexes=t,e.virtualInfo.columnIndexes=i,e.virtualInfo.page=n,r.splice(0,this.parent.frozenRows)},m.prototype.scrollListener=function(e){if(this.parent.enableVirtualization||!this.parent.enableColumnVirtualization||"up"!==e.direction&&"down"!==e.direction)if(this.scrollAfterEdit(),this.parent.enablePersistence&&(this.parent.scrollPosition=e.offset),this.preventEvent||this.parent.isDestroyed)this.preventEvent=!1;else{var t,i;if(P.isNullOrUndefined(document.activeElement)?this.isFocused=!1:this.isFocused=this.content===P.closest(document.activeElement,"."+Zr)||this.content===document.activeElement,!this.parent.islazyloadRequest||"down"!==e.direction)return t=e.sentinel,i=this.currentInfo=this.getInfoFromView(e.direction,t,e.offset),Mh(this.parent)?i.blockIndexes&&this.prevInfo.blockIndexes.toString()===i.blockIndexes.toString()?void this.parent.removeMaskRow():(i.event="refresh-virtual-block",P.isNullOrUndefined(i.offsets)||(i.offsets.top=this.content.scrollTop),this.parent.pageSettings.currentPage=i.page,this.parent.enableVirtualMaskRow&&(this.parent.showMaskRow(t.axis),this.parent.addShimmerEffect()),this.parent.editSettings.showAddNewRow&&this.parent.closeEdit(),void this.parent.notify(i.event,{requestType:"virtualscroll",virtualInfo:i,focusElement:e.focusElement})):void(this.prevInfo&&("Y"===t.axis&&this.prevInfo.blockIndexes.toString()===i.blockIndexes.toString()||"X"===t.axis&&this.prevInfo.columnIndexes.toString()===i.columnIndexes.toString())?(this.parent.removeMaskRow(),P.Browser.isIE&&this.parent.hideSpinner(),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,"Y"===t.axis&&this.restoreEdit(),this.parent.groupSettings.enableLazyLoading&&1===this.prevInfo.blockIndexes[0]&&1===i.blockIndexes[0]&&"up"===e.direction&&this.virtualEle.adjustTable(0,i.offsets.top<this.offsets[1]?0:this.getBlockHeight())):(this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization?i.columnIndexes:[]),!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||(this.parent.pageSettings.currentPage=(i.loadNext&&!i.loadSelf?i.nextInfo:i).page),this.requestType="virtualscroll",this.parent.enableVirtualMaskRow&&(this.parent.showMaskRow(t.axis),this.parent.addShimmerEffect()),this.parent.islazyloadRequest=!1,this.parent.editSettings.showAddNewRow&&this.parent.closeEdit(),this.parent.notify(i.event,{requestType:"virtualscroll",virtualInfo:i,focusElement:e.focusElement}),this.parent.enableColumnVirtualization&&!this.parent.getContentTable().querySelector("tr.e-row")&&(this.parent.removeMaskRow(),this.appendContent(void 0,void 0,{requestType:"virtualscroll",virtualInfo:i,focusElement:e.focusElement}),this.prevInfo=i)));this.parent.removeMaskRow(),this.parent.islazyloadRequest=!1}},m.prototype.block=function(e){return this.vgenerator.isBlockAvailable(e)},m.prototype.getInfoFromView=function(e,t,i){var n,r=!1,s=[],o={direction:e,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},i=(o.page=this.getPageFromTop(i.top,o),o.blockIndexes=s=this.vgenerator.getBlockIndexes(o.page),o.loadSelf=!this.vgenerator.isBlockAvailable(s[o.block]),this.ensureBlocks(o));return"upArrow"===this.activeKey&&o.blockIndexes.toString()!==i.toString()&&(n=i[i.length-1],-1===o.blockIndexes.indexOf(n))&&(r=!0),!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||(o.blockIndexes=i),o.loadNext=!i.filter(function(e){return-1===s.indexOf(e)}).every(this.block.bind(this)),o.event=o.loadNext||o.loadSelf?ut:_t,o.nextInfo=o.loadNext?{page:Math.max(1,o.page+("down"===e?1:-1))}:{},r&&(o.blockIndexes=[o.blockIndexes[0]-1,o.blockIndexes[0],o.blockIndexes[0]+1]),"downArrow"!==this.activeKey||isNaN(this.rowIndex)||1!==(n=Math.ceil(this.rowIndex/this.getBlockSize()))&&(o.blockIndexes[1]!==n||o.blockIndexes.length<3)&&(o.blockIndexes=[n-1,n,n+1]),o.columnIndexes="X"===t.axis?this.vgenerator.getColumnIndexes():this.parent.getColumnIndexesInView(),this.parent.enableColumnVirtualization&&"X"===t.axis&&(o.event=_t),o},m.prototype.ensureBlocks=function(e){var i,n=this,t=e.blockIndexes[e.block],r=t,s=Math.max,o="down"===e.direction?[s(t,1),++t,++t]:[s(t-1,1),t,t+1],a=(this.prevInfo=this.prevInfo||this.vgenerator.getData(),o=o.filter(function(e,t){return o.indexOf(e)===t}),!1);return Pp(this.parent)&&"up"===e.direction&&((e.page+1===this.prevInfo.page||e.page===this.prevInfo.page)&&1===e.block||e.page===this.prevInfo.page&&2===o.length)&&this.vgenerator.isBlockAvailable(e.blockIndexes[1]+1)&&(a=e.page+1===this.prevInfo.page&&1===e.block,o=[s((t+=1)-1,1),t,t+1]),o=this.prevInfo.blockIndexes.toString()!==o.toString()&&((o=e.loadSelf&&!a||"down"===e.direction&&this.isEndBlock(r)?this.vgenerator.getBlockIndexes(e.page):o).some(function(e,t){e=e===(Mh(n.parent)?n.getGroupedTotalBlocks():n.getTotalBlocks());return e&&(i=t),e}),void 0!==i&&(o=o.slice(0,i+1),0===e.block)&&1===o.length&&this.vgenerator.isBlockAvailable(o[0]-1))?[o[0]-1,o[0]]:o},m.prototype.appendContent=function(e,t,i){var n,r=this,s=i.virtualInfo.sentinelInfo&&"Y"===i.virtualInfo.sentinelInfo.axis&&this.currentInfo.page&&this.currentInfo.page!==i.virtualInfo.page?this.currentInfo:i.virtualInfo,o=(this.prevInfo=this.prevInfo||i.virtualInfo,s.columnIndexes[0]-1),a=this.getColumnOffset(o),l=s.blockIndexes,h=(this.parent.groupSettings.columns.length&&this.refreshOffsets(),"100%"===this.parent.height&&(this.parent.element.style.height="100%"),(this.parent.height.toString().indexOf("%")<0?this.content:this.parent.element).getBoundingClientRect().height),p=(!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization&&(h=0),0);if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(n=0,this.parent.getColumns().filter(function(e){e.visible&&(p+=parseInt(e.width.toString(),10),"Left"===e.freeze)&&(n+=parseInt(e.width.toString(),10))}),u=s.columnIndexes,c=this.getColumnOffset(u[u.length-1])-this.getColumnOffset(u[0]-1)+"",o>this.parent.getVisibleFrozenLeftCount()&&(a-=n),this.resetStickyLeftPos(a,t)),this.requestTypes.some(function(e){return e===r.requestType})||(o=this.getTranslateY(this.content.scrollTop,h,s),this.parent.groupSettings.enableLazyLoading&&s&&this.prevInfo&&1===this.prevInfo.blockIndexes[0]&&1===s.blockIndexes[0]&&"up"===s.direction?this.virtualEle.adjustTable(0,this.content.scrollTop<this.offsets[1]?0:this.getBlockHeight()):this.virtualEle.adjustTable(a,o)),this.parent.enableColumnVirtualization&&this.header.virtualEle.adjustTable(a,0),this.parent.enableColumnVirtualization&&(u=s.columnIndexes,c=this.getColumnOffset(u[u.length-1])-this.getColumnOffset(u[0]-1)+"",this.parent.isFrozenGrid()&&(c=p.toString(),this.parent.allowResizing)&&(this.parent.getHeaderTable().style.width=p+"px",this.parent.getContentTable().style.width=p+"Px"),this.header.virtualEle.setWrapperWidth(c)),this.virtualEle.setWrapperWidth(c,P.Browser.isIE||"edge"===P.Browser.info.name),!(this.parent.enableColumnVirtualization&&P.isNullOrUndefined(e)&&P.isNullOrUndefined(t))){P.isNullOrUndefined(e)||P.isNullOrUndefined(e.parentNode)||P.remove(e);h=this.parent.element.querySelector("."+Zr).querySelector(N);if(h&&(P.remove(h),e=null),this.parent.isReact&&!P.isNullOrUndefined(this.parent.rowTemplate)?e=t:(e=this.parent.createElement(N,{attrs:{role:"rowgroup"}})).appendChild(t),this.parent.frozenRows&&"virtualscroll"===i.requestType&&(1===this.parent.pageSettings.currentPage||this.isInfiniteColumnvirtualization()))for(var d=0;d<this.parent.frozenRows;d++)e.children[0].remove();this.getTable().appendChild(e),this.requestType="virtualscroll"===this.requestType?this.empty:this.requestType,this.parent.enableVirtualization||!this.parent.enableColumnVirtualization||"right"!==s.direction&&"left"!==s.direction||(this.content.scrollTop=this.currentInfo.offsets.top,this.content.scrollLeft=this.currentInfo.offsets.left),this.parent.groupSettings.columns.length&&(Mh(this.parent)||"up"!==s.direction||(o=this.offsets[this.getTotalBlocks()]-this.prevHeight,a=this.content.scrollTop,this.content.scrollTop=a+o),this.setVirtualHeight(),this.parent.groupSettings.enableLazyLoading||this.observer.setPageHeight(this.getOffset(l[l.length-1])-this.getOffset(l[0]-1))),"ungrouping"!==i.requestType||this.parent.groupSettings.enableLazyLoading||0!==this.parent.groupSettings.columns.length||this.observer.setPageHeight(2*this.getBlockHeight()),this.prevInfo=s,this.isFocused&&"downArrow"!==this.activeKey&&"upArrow"!==this.activeKey&&this.content.focus();var c,u=Math.ceil(this.getTotalBlocks()/2);this.isBottom&&(this.isBottom=!1,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-1]),this.parent.pageSettings.currentPage+1!==u&&this.parent.pageSettings.currentPage!==u||2!==l.length||"delete"!==i.requestType||(this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-1]),this.parent.pageSettings.currentPage===u&&1===l.length&&(this.isBottom=!0,this.parent.getContent().firstElementChild.scrollTop=this.offsets[this.offsetKeys.length-2]),this.isTop&&(this.parent.getContent().firstElementChild.scrollTop=0,this.isTop=!1),"virtualscroll"===i.requestType&&"X"===i.virtualInfo.sentinelInfo.axis&&this.parent.notify(Xt,{}),this.focusCell(i),this.restoreEdit(i),this.restoreAdd(),this.ensureSelectedRowPosition(),this.validationScrollLeft(),this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.widthServices.refreshFrozenScrollbar(),this.initialRowTop||(c=this.parent.element.getBoundingClientRect().top,this.parent.getRowByIndex(0)&&(this.initialRowTop=this.parent.getRowByIndex(0).getBoundingClientRect().top-c))}},m.prototype.validationScrollLeft=function(){var e;this.validationCheck&&(this.validationCol?(e=this.vgenerator.cOffsets[this.validationCol.index-this.parent.getVisibleFrozenColumns()-1],this.validationCol=null,this.content.scrollLeft=e):(this.validationCheck=!1,this.parent.editModule.editFormValidate()))},m.prototype.ensureSelectedRowPosition=function(){var e;this.isSelection||!this.isSelectionScroll||P.isNullOrUndefined(this.selectRowIndex)||(this.isSelectionScroll=!1,(e=this.parent.getRowByIndex(this.selectRowIndex))&&!this.isRowInView(e)&&this.rowSelected({rowIndex:this.selectRowIndex,row:e},!0))},m.prototype.focusCell=function(e){var t;"upArrow"!==this.activeKey&&"downArrow"!==this.activeKey||((t=this.parent.getRowByIndex(this.rowIndex)).cells[this.cellIndex].focus({preventScroll:!0}),this.parent.selectionSettings.checkboxOnly||this.parent.selectRow(parseInt(t.getAttribute(x),10)),this.activeKey=this.empty)},m.prototype.restoreEdit=function(e){var t,i,n,r;this.isNormaledit&&(this.parent.editSettings.allowEditing&&this.parent.editModule&&!P.isNullOrUndefined(this.editedRowIndex)&&(t=this.getRowByIndex(this.editedRowIndex),r=this.content,i=Object.keys(this.virtualData),n=e&&e.virtualInfo&&"X"===e.virtualInfo.sentinelInfo.axis,i.length&&t&&!r.querySelector("."+ts)&&-1===["sorting","filtering","grouping","refresh","searching","ungrouping","reorder"].indexOf(e.requestType)&&(r=t.getBoundingClientRect().top,n||r<this.content.offsetHeight&&r>this.parent.getRowHeight())&&(this.parent.isEdit=!1,this.parent.editModule.startEdit(t)),t)&&this.content.querySelector("."+ts)&&!i.length&&(e=!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?this.enableCacheOnInfiniteColumnVirtual()?this.virtualInfiniteData:P.extend({},this.parent.getCurrentViewRecords()[this.editedRowIndex]):P.extend({},this.getRowObjectByIndex(this.editedRowIndex)),this.virtualData=this.getVirtualEditedData(e)),this.restoreAdd())},m.prototype.getVirtualEditedData=function(e){var t=[].slice.call(this.parent.element.getElementsByClassName("e-gridform"));if(!(this.parent.editModule&&this.parent.editModule.formObj&&this.parent.editModule.formObj.isDestroyed))for(var i=0;i<t.length;i++)e=this.parent.editModule.getCurrentEditedData(t[parseInt(i.toString(),10)],e);return e},m.prototype.restoreAdd=function(){var e,t=!this.parent.element.querySelector("."+is);this.isNormaledit&&this.isAdd&&t&&(t="Top"===this.parent.editSettings.newRowPosition&&this.content.scrollTop<this.parent.getRowHeight(),e="Bottom"===this.parent.editSettings.newRowPosition&&this.parent.pageSettings.currentPage===this.maxPage,t||e)&&(this.parent.isEdit=!1,this.parent.addRecord())},m.prototype.onDataReady=function(t){P.isNullOrUndefined(t.count)||(this.count=t.count,this.maxPage=Math.ceil((this.parent.groupSettings.columns.length&&this.parent.vcRows.length?this.parent.vcRows.length:t.count)/this.parent.pageSettings.pageSize)),this.vgenerator.checkAndResetCache(t.requestType),["refresh","filtering","searching","grouping","ungrouping","reorder",void 0].some(function(e){return t.requestType===e})&&this.refreshOffsets(),this.setVirtualHeight(),this.resetScrollPosition(t.requestType)},m.prototype.setVirtualHeight=function(e){var t=this.parent.enableColumnVirtualization?this.getColumnOffset(this.parent.columns.length+this.parent.groupSettings.columns.length-1)+"px":"100%",i=this.offsets[Mh(this.parent)&&0!==this.count?this.getGroupedTotalBlocks():this.getTotalBlocks()],n=(!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization&&(i=0),Mh(this.parent)&&0!==this.count?this.getGroupedTotalBlocks():this.getTotalBlocks()),n=Math.ceil(n/2),r=Math.round(this.virtualEle.placeholder.getBoundingClientRect().bottom),s=Math.round(this.virtualEle.wrapper.getBoundingClientRect().bottom);(this.currentInfo.page===n||this.currentInfo.page+1===n)&&"down"===this.currentInfo.direction&&s<r&&!this.diff&&(this.diff=r-s),this.diff&&this.currentInfo.page===n&&s<r?(i-=this.diff,this.heightChange=!0):this.diff&&this.heightChange&&"virtualscroll"===this.requestType&&(i-=this.diff,this.heightChange=!1),this.virtualEle.setVirtualHeight(i,t),this.virtualEle&&this.virtualEle.wrapper&&(!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?this.virtualEle.wrapper.style.minHeight="":this.virtualEle.wrapper.style.minHeight=P.isNullOrUndefined(i)?"0px":P.formatUnit(this.parent.height)),this.parent.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,t)},m.prototype.getPageFromTop=function(i,n){var r=this,s=Mh(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),o=0;return this.offsetKeys.some(function(e){var t=Number(e),e=i<=r.offsets[""+e]||t===s&&i>r.offsets[""+e];return e&&(r.offsetKeys.length%2!=0&&t.toString()===r.offsetKeys[r.offsetKeys.length-2]&&i<=r.offsets[r.offsetKeys.length-1]&&(t+=1),n.block=t%2==0?1:0,o=Math.max(1,Math.min(r.vgenerator.getPage(t),r.maxPage))),e}),o},m.prototype.getTranslateY=function(e,t,i,n){void 0===i&&((i={page:this.getPageFromTop(e,{})}).blockIndexes=this.vgenerator.getBlockIndexes(i.page));var r=(i.blockIndexes[0]||1)-1,s=this.getOffset(r),o=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]),n=(n&&(i=this.prevInfo),e<s?this.getOffset(r-1):o<e+t?this.getOffset(1+r):s),o=this.offsets[i.blockIndexes[i.blockIndexes.length-1]]-this.tmpOffsets[i.blockIndexes[0]],e=Mh(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();return n+o>this.offsets[parseInt(e.toString(),10)]&&(n-=n+o-this.offsets[parseInt(e.toString(),10)]),n=!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?0:n},m.prototype.getOffset=function(e){return Math.min(0|this.offsets[parseInt(e.toString(),10)],0|this.offsets[this.maxBlock])},m.prototype.onEntered=function(){var h=this;return function(e,t,i,n,r,s){var o,a,l;("down"!==i&&"up"!==i||h.parent.enableVirtualization||!h.parent.enableColumnVirtualization)&&(!P.Browser.isIE||r||!s||h.preventEvent||h.parent.enableVirtualMaskRow||h.parent.showSpinner(),h.prevInfo=h.prevInfo||h.vgenerator.getData(),h.parent.enableVirtualMaskRow&&!h.preventEvent&&(r=parseInt(h.offsetKeys[0],10),s=parseInt(h.offsetKeys[h.offsetKeys.length-1],10),o=h.currentInfo.blockIndexes,l=h.getInfoFromView(i,t,n),l=h.prevInfo&&"X"===t.axis&&h.prevInfo.columnIndexes.toString()===l.columnIndexes.toString(),o&&o[0]===r&&"up"===i||o&&o[o.length-1]===s&&"down"===i||l||setTimeout(function(){h.parent.showMaskRow(t.axis)},0)),r="X"===t.axis,o=h.prevInfo.offsets?h.prevInfo.offsets.top:null,s=h.content.getBoundingClientRect().height,i=h.getColumnOffset(r?h.vgenerator.getColumnIndexes()[0]-1:h.prevInfo.columnIndexes[0]-1),h.parent.isFrozenGrid()&&h.parent.enableColumnVirtualization&&h.currentInfo&&h.currentInfo.columnIndexes&&(l=h.currentInfo.columnIndexes[0]-1,a=0,h.parent.getColumns().filter(function(e){e.visible&&"Left"===e.freeze&&(a+=parseInt(e.width.toString(),10))}),l>h.parent.getVisibleFrozenLeftCount())&&(i-=a),r&&(l=Object.keys(h.vgenerator.cOffsets).length-h.prevInfo.columnIndexes.length,i=(l=h.vgenerator.cOffsets[l-1])<i?l:i),!h.parent.enableVirtualization&&h.parent.enableColumnVirtualization?h.virtualEle.adjustTable(i,0):(l=h.getTranslateY(n.top,s,r&&o===n.top?h.prevInfo:void 0,!0),h.virtualEle.adjustTable(i,Math.min(l,h.offsets[h.maxBlock]))),h.parent.enableColumnVirtualization)&&(h.header.virtualEle.adjustTable(i,0),h.parent.isFrozenGrid())&&h.resetStickyLeftPos(i)}},m.prototype.dataBound=function(){this.parent.notify(Hn,{}),this.isSelection&&"upArrow"!==this.activeKey&&"downArrow"!==this.activeKey?this.parent.selectRow(this.selectedRowIndex):(this.activeKey=this.empty,this.requestType=this.empty)},m.prototype.resetStickyLeftPos=function(e,t){var i=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze")).concat([].slice.call((t||this.parent.getContent()).querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze"))),n=0,r=0;if(this.parent.getHeaderContent().querySelectorAll(".e-fixedfreeze").length&&(n=this.parent.leftrightColumnWidth("left"),r=this.parent.leftrightColumnWidth("right")),i.length)for(var s=0;s<i.length;s++){var o,a,l=i[parseInt(s.toString(),10)],h=void 0;l.classList.contains("e-rowcell")?h=P.isNullOrUndefined(l.getAttribute("data-colindex"))&&l.querySelector("[e-mappinguid]")?(a=l.querySelector("[e-mappinguid]").getAttribute("e-mappinguid"),this.parent.getColumnByUid(a)):(o=parseInt(l.getAttribute("data-colindex"),10),this.parent.getColumnByIndex(parseInt(o.toString(),10))):(l.classList.contains("e-headercell")||l.classList.contains("e-filterbarcell"))&&(a=(l.classList.contains("e-filterbarcell")?l:l.querySelector("[e-mappinguid]")).getAttribute("e-mappinguid"),h=this.parent.getColumnByUid(a)),"Left"===h.freeze?l.style.left=h.valueX-e+"px":"Right"===h.freeze?l.style.right=h.valueX+e+"px":"Fixed"===h.freeze&&(l.style.left=n-e+"px",l.style.right=r+e+"px")}this.parent.translateX=e},m.prototype.rowSelected=function(e,t){var i,n,r,s,o;!this.isSelection&&!t||this.isLastBlockRow(e.rowIndex)||(t=Vh(this.content.firstElementChild),i=this.parent.element.getBoundingClientRect().top,s=e.row.getBoundingClientRect().top-i,s=(r=(n=this.content.getBoundingClientRect().height)<s)?s-n:this.initialRowTop-s,r=r?t.height-s:t.height+s,this.virtualEle.adjustTable(t.width,r),s=this.virtualEle.wrapper.getBoundingClientRect(),o=this.content.getBoundingClientRect(),s.top>o.top&&this.virtualEle.adjustTable(t.width,r-(s.top-o.top)),this.content.querySelector("tbody").lastElementChild.getBoundingClientRect().top-i<n?(r+=n-(e.row.getBoundingClientRect().top-i),this.virtualEle.adjustTable(t.width,r-this.parent.getRowHeight()/2)):o.bottom>s.bottom&&this.virtualEle.adjustTable(t.width,r+(o.bottom-s.bottom)),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&this.resetStickyLeftPos(t.width)),this.isSelection=!1},m.prototype.isLastBlockRow=function(e){var t=this.parent.getContent().firstElementChild,t=Math.floor(t.offsetHeight/this.parent.getRowHeight())-1;return this.maxPage*this.parent.pageSettings.pageSize-t<=e},m.prototype.refreshMaxPage=function(){this.parent.groupSettings.columns.length&&this.parent.vcRows.length&&(this.maxPage=Math.ceil(this.parent.vcRows.length/this.parent.pageSettings.pageSize))},m.prototype.setVirtualPageQuery=function(e){var t,i=[];this.prevInfo&&this.prevInfo.blockIndexes&&(i=Np(this.prevInfo.blockIndexes)),("sorting"===this.requestType||"delete"===this.requestType)&&i.length&&Pp(this.parent)?(e.query.skip(this.parent.pageSettings.pageSize*(i[0]-1)),e.query.take(this.parent.pageSettings.pageSize*i.length),e.skipPage=!0):(t=this.parent.getContent().querySelector(".e-row"),"virtualscroll"===this.requestType&&this.vgenerator.currentInfo.blockIndexes&&(this.vgenerator.currentInfo={}),t&&this.parent.isManualRefresh&&this.currentInfo.blockIndexes&&(3===this.currentInfo.blockIndexes.length||1<i.length)&&(this.vgenerator.startIndex=parseInt(t.getAttribute("data-rowindex"),10),this.vgenerator.currentInfo=P.extend({},this.currentInfo),this.vgenerator.currentInfo.blockIndexes=this.currentInfo.blockIndexes.slice(),(this.vgenerator.includePrevPage=this.currentInfo.blockIndexes[0]%2==0)?(this.vgenerator.startIndex=this.vgenerator.startIndex-this.getBlockSize(),this.vgenerator.currentInfo.blockIndexes.unshift(this.currentInfo.blockIndexes[0]-1)):this.vgenerator.currentInfo.blockIndexes.push(this.currentInfo.blockIndexes[this.currentInfo.blockIndexes.length-1]+1),i=(this.vgenerator.currentInfo.blockIndexes[0]-1)*this.getBlockSize(),t=this.vgenerator.currentInfo.blockIndexes.length*this.getBlockSize(),e.query.skip(i),e.query.take(t),e.skipPage=!0))},m.prototype.eventListener=function(e){for(var i=this,t=(this.parent[""+e](ht,this.onDataReady,this),this.parent.addEventListener(ae,this.dataBound.bind(this)),this.parent.addEventListener(y,this.actionBegin.bind(this)),this.parent.addEventListener(p,this.actionComplete.bind(this)),this.parent.addEventListener(he,this.rowSelected.bind(this)),this.parent[""+e](_t,this.refreshContentRows,this),this.parent[""+e](Tr,this.refreshVirtualLazyLoadCache,this),this.parent[""+e](Ji,this.selectVirtualRow,this),this.parent[""+e](hn,this.virtualCellFocus,this),this.parent[""+e](pn,this.editActionBegin,this),this.parent[""+e](mn,this.addActionBegin,this),this.parent[""+e](un,this.restoreEdit,this),this.parent[""+e](dn,this.editSuccess,this),this.parent[""+e](gn,this.refreshCache,this),this.parent[""+e](fn,this.resetIsedit,this),this.parent[""+e](yn,this.getVirtualData,this),this.parent[""+e](cn,this.editCancel,this),this.parent[""+e](ar,this.refreshMaxPage,this),this.parent[""+e](lr,this.setVirtualPageQuery,this),this.parent[""+e](hr,this.selectRowOnContextOpen,this),this.parent[""+e](ur,this.resetVirtualFocus,this),this.parent[""+e](gr,this.refreshCells,this),this.parent[""+e](fr,this.scrollToEdit,this),this.actions),n=0;n<t.length;n++)this.parent[""+e](t[parseInt(n.toString(),10)]+"-begin",this.onActionBegin,this);var r=function(){i.observer.observe(function(e){return i.scrollListener(e)},i.onEntered());var e,t=i.parent;t.enablePersistence&&t.scrollPosition&&(i.content.scrollTop=t.scrollPosition.top,e={direction:"down",sentinel:i.observer.sentinelInfo.down,offset:t.scrollPosition,focusElement:t.element},i.scrollListener(e),t.enableColumnVirtualization)&&(i.content.scrollLeft=t.scrollPosition.left),i.parent.off(pt,r)};this.parent.on(pt,r,this)},m.prototype.refreshVirtualLazyLoadCache=function(e){var t,i,n,r=this.currentInfo.blockIndexes;P.isNullOrUndefined(this.currentInfo.blockIndexes)&&(r=[1,2]);for(var s=0;s<r.length;s++)for(var o=this.vgenerator.cache[r[parseInt(s.toString(),10)]],a=0;a<o.length;a++)if(o[parseInt(a.toString(),10)].uid===e.uid){t=r[parseInt(s.toString(),10)],i=a,n=o;break}e.count?this.vgenerator.cache[parseInt(t.toString(),10)].splice(i+1,e.count):e.rows&&e.rows.length&&(this.vgenerator.cache[parseInt(t.toString(),10)]=[].slice.call(n.slice(0,i+1)).concat([].slice.call(e.rows)).concat([].slice.call(n.slice(i+1,n.length)))),this.refreshOffsets()},m.prototype.scrollToEdit=function(e){var t=!0,i=(this.validationCheck=!0,this.isAdd&&0<this.content.scrollTop&&(t=!1,i=Object.keys(this.offsets),this.content.scrollTop="Top"===this.parent.editSettings.newRowPosition?0:this.offsets[i.length-1]),this.parent.getRowByIndex(this.editedRowIndex));i||P.isNullOrUndefined(this.editedRowIndex)||i&&this.isRowInView(i)||(i=this.parent.getRowHeight(),i=this.editedRowIndex*i,P.isNullOrUndefined(i))||(t=!1,this.content.scrollTop=i),e&&t&&(i=this.vgenerator.cOffsets[e.index-this.parent.getVisibleFrozenColumns()-1],this.parent.enableColumnVirtualization||(i=this.parent.getHeaderContent().querySelector('.e-headercelldiv[e-mappinguid="'+e.uid+'"]').parentElement.offsetLeft),this.parent.enableColumnVirtualization&&this.parent.getVisibleFrozenLeftCount()&&(i-=this.parent.leftrightColumnWidth("left")),this.content.scrollLeft=this.parent.enableRtl?-Math.abs(i):i),e&&!t&&(this.validationCol=e)},m.prototype.refreshCells=function(e){e.cells=this.vgenerator.generateCells(e.foreignKeyData)},m.prototype.resetVirtualFocus=function(e){this.isCancel=e.isCancel},m.prototype.getVirtualData=function(e){var t,i;this.isNormaledit&&(t=this.parent.element.querySelector('.e-griderror:not([style*="display: none"])'),i=Object.keys(this.virtualData),e.isScroll=0!==i.length&&this.currentInfo.sentinelInfo&&"X"===this.currentInfo.sentinelInfo.axis,t||(this.virtualData=(i.length?this:e).virtualData,this.getVirtualEditedData(this.virtualData),e.virtualData=this.virtualData,e.isAdd=this.isAdd||this.parent.editSettings.showAddNewRow,e.isCancel=this.isCancel))},m.prototype.selectRowOnContextOpen=function(e){this.isContextMenuOpen=e.isOpen},m.prototype.editCancel=function(e){var t=Jh(this.parent,e.data);P.isNullOrUndefined(t)||(e.data=this.parent.getCurrentViewRecords()[parseInt(t.toString(),10)])},m.prototype.editSuccess=function(e){this.isNormaledit&&(!this.isAdd&&e.data&&this.updateCurrentViewData(e.data),this.isAdd=!1)},m.prototype.updateCurrentViewData=function(e){var t=Jh(this.parent,e);P.isNullOrUndefined(t)||(this.parent.getCurrentViewRecords()[parseInt(t.toString(),10)]=e)},m.prototype.actionBegin=function(e){"virtualscroll"!==e.requestType&&(this.requestType=e.requestType),e.cancel||this.parent.notify(_n,e)},m.prototype.virtualCellFocus=function(e){var t,i,n,r,s,o=document.activeElement;o.classList.contains(b)||!(o instanceof HTMLInputElement)&&P.isNullOrUndefined(o.closest(".e-templatecell"))||(o=o.closest(".e-rowcell")),this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&o&&(o.classList.contains(b)||!P.isNullOrUndefined(E(o,ns)))&&e&&("upArrow"===e.action||"downArrow"===e.action)?(t=(i=this.parent.getContent().firstElementChild).getBoundingClientRect(),n=P.closest(o,"tr"),s="downArrow"===e.action?n.nextElementSibling:n.previousElementSibling,r=P.isNullOrUndefined(s)?void 0:s.getBoundingClientRect(),P.isNullOrUndefined(s)||"downArrow"===e.action&&r.bottom>t.bottom||"upArrow"===e.action&&r.top<t.top?(this.activeKey=e.action,this.parent.focusModule.virtualSelectionInfo={isPending:P.isNullOrUndefined(s),direction:e.action,event:e},s=P.isNullOrUndefined(s)?this.parent.getRowHeight():"downArrow"===e.action?r.bottom-t.bottom:t.top-r.top,i.scrollTop="downArrow"===e.action?i.scrollTop+s:i.scrollTop-s):this.activeKey=this.empty):o&&o.classList.contains(b)&&e&&("upArrow"===e.action||"downArrow"===e.action)&&(t=parseInt(o.parentElement.getAttribute(x),10),!e||"downArrow"!==e.action&&"upArrow"!==e.action||(i=this.parent.getContent().firstElementChild,"downArrow"===e.action?t+=1:--t,this.rowIndex=t,this.cellIndex=parseInt(o.getAttribute(ps),10),n=this.parent.getRowByIndex(t),r=this.parent.pageSettings.currentPage,s=Math.floor(i.offsetHeight/this.parent.getRowHeight())-1,o=!1,(o=P.isNullOrUndefined(n)&&(o=!0,"downArrow"===e.action&&r===this.maxPage-1||"upArrow"===e.action&&1===r)?!1:o)||Qh(n,this.parent)&&"downArrow"===e.action||Xh(n,2*this.parent.getRowHeight())&&"upArrow"===e.action?(this.activeKey=e.action,i.scrollTop="downArrow"===e.action?(t-s)*this.parent.getRowHeight():t*this.parent.getRowHeight()):this.activeKey=this.empty,this.parent.selectionSettings.checkboxOnly)||this.parent.selectRow(t))},m.prototype.editActionBegin=function(e){this.editedRowIndex=e.index;var t=!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?P.extend({},this.parent.getCurrentViewRecords()[e.index]):P.extend({},this.getRowObjectByIndex(e.index)),i=Object.keys(this.virtualData);e.data=i.length&&!this.parent.editSettings.showAddNewRow?this.virtualData:this.isInfiniteColumnvirtualization()?e.data:t,this.enableCacheOnInfiniteColumnVirtual()&&(this.virtualInfiniteData=e.data),e.isScroll=0!==i.length&&this.currentInfo.sentinelInfo&&"X"===this.currentInfo.sentinelInfo.axis},m.prototype.getEditedRowObject=function(){for(var e,t=this.parent.vcRows,i=0;i<t.length;i++)t[parseInt(i.toString(),10)].index===this.editedRowIndex&&(e=t[parseInt(i.toString(),10)]);return e},m.prototype.refreshCache=function(e){var t,i,n;this.isInfiniteColumnvirtualization()||(t=Math.ceil((this.editedRowIndex+1)/this.getBlockSize()),this.parent.allowPaging&&this.parent.enableColumnVirtualization&&(t=Math.ceil((this.editedRowIndex+1+(this.parent.pageSettings.currentPage-1)*this.parent.pageSettings.pageSize)/this.getBlockSize())),i=this.parent.allowPaging&&this.parent.enableColumnVirtualization?this.editedRowIndex%this.getBlockSize():this.editedRowIndex-(t-1)*this.getBlockSize(),this.parent.groupSettings.columns.length?(n=this.getEditedRowObject())&&(n.data=e.data):this.vgenerator.cache[parseInt(t.toString(),10)][parseInt(i.toString(),10)].data=e.data)},m.prototype.actionComplete=function(t){var e;(this.parent.enableVirtualization||this.parent.enableColumnVirtualization)&&((e=["delete","save","cancel"]).some(function(e){return e===t.requestType})&&(this.refreshOffsets(),this.refreshVirtualElement()),this.isNormaledit&&(["sorting","filtering","grouping","refresh","searching","ungrouping","reorder"].some(function(e){return e===t.requestType})||e.some(function(e){return e===t.requestType}))&&(this.isCancel=!0,this.isAdd=this.parent.editSettings.showAddNewRow,this.editedRowIndex=this.empty,this.virtualData={},this.virtualInfiniteData={},this.parent.editModule)&&(this.parent.editModule.editModule.previousData=void 0),this.parent.enableColumnVirtualization)&&"filterAfterOpen"===t.requestType&&this.currentInfo.columnIndexes&&0<this.currentInfo.columnIndexes[0]&&this.parent.resetFilterDlgPosition(t.columnName)},m.prototype.resetIsedit=function(){this.parent.enableVirtualization&&this.isNormaledit&&(this.parent.editSettings.allowEditing&&Object.keys(this.virtualData).length||this.parent.editSettings.allowAdding&&this.isAdd)&&(this.parent.isEdit=!0)},m.prototype.scrollAfterEdit=function(){var e,t;this.parent.editModule&&this.parent.editSettings.allowEditing&&this.isNormaledit&&this.parent.element.querySelector(".e-gridform")&&(t=this.parent.element.querySelector("."+ts),e=this.parent.element.querySelector("."+is),t||e)&&(e=t?P.extend({},this.getRowObjectByIndex(this.editedRowIndex)):P.extend({},this.emptyRowData),t=Object.keys(this.virtualData),this.virtualData=t.length?this.getVirtualEditedData(this.virtualData):this.getVirtualEditedData(e))},m.prototype.createEmptyRowdata=function(){var t=this;this.parent.columnModel.filter(function(e){t.emptyRowData[e.field]=t.empty})},m.prototype.addActionBegin=function(e){var t;this.isNormaledit&&(Object.keys(this.emptyRowData).length||this.createEmptyRowdata(),this.isAdd=!0,t=this.parent.pageSettings.currentPage,!this.parent.frozenRows&&0<this.content.scrollTop&&"Top"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.onActionBegin(),e.startEdit=!1,this.content.scrollTop=0),t<this.maxPage-1)&&"Bottom"===this.parent.editSettings.newRowPosition&&(this.isAdd=!0,this.parent.setProperties({pageSettings:{currentPage:this.maxPage-1}},!0),e.startEdit=!1,this.content.scrollTop=this.offsets[this.offsetKeys.length])},m.prototype.getRowObjectByIndex=function(e){return this.getRowCollection(e,!0)},m.prototype.getBlockSize=function(){return this.parent.pageSettings.pageSize>>1},m.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},m.prototype.isEndBlock=function(e){var t=Mh(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();return t<=e||e===t-1},m.prototype.getGroupedTotalBlocks=function(){var e=this.parent.vcRows;return Math.floor(e.length/this.getBlockSize()<1?1:e.length/this.getBlockSize())},m.prototype.getTotalBlocks=function(){return Math.ceil(this.count/this.getBlockSize())},m.prototype.getColumnOffset=function(e){return 0|this.vgenerator.cOffsets[parseInt(e.toString(),10)]},m.prototype.getModelGenerator=function(){return new Gd(this.parent)},m.prototype.resetScrollPosition=function(t){this.actions.some(function(e){return e===t})&&(this.preventEvent=0!==this.content.scrollTop,this.content.scrollTop=0),"virtualscroll"!==t&&(this.isAdd=!1)},m.prototype.onActionBegin=function(e){this.parent.setProperties({pageSettings:{currentPage:1}},!0)},m.prototype.getRows=function(){return this.isInfiniteColumnvirtualization()?this.getInfiniteRows():this.vgenerator.getRows()},m.prototype.getRowByIndex=function(t){var e;if(Mh(this.parent))if(!P.isNullOrUndefined(t)&&this.parent.enableVirtualization&&this.parent.groupSettings.columns.length)for(var i=0;i<this.parent.getDataRows().length;i++)this.parent.getDataRows()[parseInt(i.toString(),10)].getAttribute(x)===t.toString()&&(e=this.parent.getDataRows()[parseInt(i.toString(),10)]);else e=P.isNullOrUndefined(t)?void 0:this.parent.getDataRows()[parseInt(t.toString(),10)];else!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization?e=P.isNullOrUndefined(t)?void 0:this.enableCacheOnInfiniteColumnVirtual()?this.parent.getDataRows().find(function(e){return parseInt(e.getAttribute(x),10)===t}):this.parent.getDataRows()[parseInt(t.toString(),10)]:this.prevInfo&&(e=this.getRowCollection(t,!1));return e},m.prototype.getMovableVirtualRowByIndex=function(e){return this.getRowCollection(e,!1)},m.prototype.getFrozenRightVirtualRowByIndex=function(e){return this.getRowCollection(e,!1)},m.prototype.getRowCollection=function(e,t){var i=(this.prevInfo.blockIndexes[0]-1)*this.getBlockSize(),n=(this.parent.pageSettings.pageSize%2!=0&&(i+=Math.floor(i/this.getBlockSize()/2)),this.parent.getDataRows()),r=t?this.parent.getCurrentViewRecords():n,r=(t&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(i=parseInt(this.parent.getRows()[0].getAttribute(x),10),r=r.filter(function(e){return P.isNullOrUndefined(e.items)})),r[e-(i=!t&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&n.length?parseInt(n[0].getAttribute(x),10):i)]);return r=this.parent.frozenRows&&1<this.parent.pageSettings.currentPage?t?e<=this.parent.frozenRows?this.parent.getRowsObject()[parseInt(e.toString(),10)].data:r:e<=this.parent.frozenRows?n[parseInt(e.toString(),10)]:n[e-i+this.parent.frozenRows]:r},m.prototype.getVirtualRowIndex=function(e){var t=this.prevInfo.blockIndexes,i=(t[0]-1)*this.getBlockSize();if(this.parent.enableVirtualization&&this.parent.allowGrouping&&this.parent.groupSettings.columns.length)for(var n=this.vgenerator.cache[t[0]],r=0;r<n.length;r++)if(n[""+r].isDataRow){i=n[""+r].index;break}return i+e},m.prototype.refreshOffsets=function(){for(var e=this.parent,t=0,i=this.getBlockSize(),n=Mh(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),r=(this.prevHeight=this.offsets[parseInt(n.toString(),10)],this.maxBlock=n%2==0?n-2:n-1,this.offsets={},Array.apply(null,Array(n)).map(function(){return++t})),s=0;s<r.length;s++){var o=(this.vgenerator.cache[r[parseInt(s.toString(),10)]]||[]).length,a=Mh(this.parent)?e.vcRows.length%i:this.count%i,o=!Mh(this.parent)&&r[parseInt(s.toString(),10)]in this.vgenerator.cache?o*this.parent.getRowHeight():a&&r[parseInt(s.toString(),10)]===n?a*this.parent.getRowHeight():this.getBlockHeight();this.offsets[r[parseInt(s.toString(),10)]]=(0|this.offsets[r[parseInt(s.toString(),10)]-1])+o,this.tmpOffsets[r[parseInt(s.toString(),10)]]=0|this.offsets[r[parseInt(s.toString(),10)]-1]}this.offsetKeys=Object.keys(this.offsets),Mh(this.parent)&&(this.parent.vGroupOffsets=this.offsets),this.parent.enableColumnVirtualization&&this.vgenerator.refreshColOffsets()},m.prototype.refreshVirtualElement=function(){this.vgenerator.refreshColOffsets(),this.setVirtualHeight()},m.prototype.setVisible=function(e){var t,i=this.parent,n=[];(n=this.getRows()).some(function(e){return e.isDataRow&&(t=e),e.isDataRow});for(var r=!0,s=(!i.groupSettings.columns.length&&t&&(r=!1),i.getDataRows()),o=0,a=e.length;o<a;o++){var l=e[parseInt(o.toString(),10)],h=i.getNormalizedColumnIndex(l.uid),p=!0===l.visible?"":"none",d=this.getColGroup().children;-1!==h&&t&&h<t.cells.length&&P.setStyleAttribute(d[parseInt(h.toString(),10)],{display:p}),r||(d=void 0,(d=l.width?l.visible?this.virtualEle.wrapper.offsetWidth+parseInt(l.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(l.width.toString(),10):d)>i.width?(this.setDisplayNone(s,h,p,n),this.parent.enableColumnVirtualization&&this.virtualEle.setWrapperWidth(d+""),this.refreshVirtualElement()):r=!0),!this.parent.invokedFromMedia&&l.hideAtMedia&&this.parent.updateMediaColumns(l),this.parent.invokedFromMedia=!1}r?this.refreshContentRows({requestType:"refresh"}):this.parent.notify(Xi,{rows:n,args:{isFrozen:!1,rows:n}})},m.prototype.selectVirtualRow=function(t){var e,i,n=this,r=Mh(this.parent)?this.vgenerator.recordsCount:this.count;t.isAvailable=t.selectedIndex<r,!t.isAvailable||this.isContextMenuOpen||"upArrow"===this.activeKey||"downArrow"===this.activeKey||this.isSelection||this.requestTypes.some(function(e){return e===n.requestType})||this.parent.selectionModule.isInteracted||(r=this.parent.getRowByIndex(t.selectedIndex),i=this.parent.getRowHeight(),r&&this.isRowInView(r))||(this.isSelection=!0,this.selectedRowIndex=t.selectedIndex,r=(t.selectedIndex+1)*i,Mh(this.parent)?(r=-1!==(e=this.parent.vcRows.findIndex(function(e){return e.index===t.selectedIndex}))?e*i:void 0,this.isSelection=-1!==e&&this.isSelection):this.parent.getDataModule().isRemote()&&this.parent.groupSettings.columns.length&&(i=Math.ceil((t.selectedIndex+1)/this.parent.pageSettings.pageSize),e=this.vgenerator.getBlockIndexes(i),r=this.offsets[e[0]]),P.isNullOrUndefined(r))||(i=this.content.scrollTop<r?"down":"up",this.selectRowIndex=t.selectedIndex,this.content.scrollTop=r,this.isSelectionScroll=this.observer.check(i)),this.requestType=this.empty},m.prototype.isRowInView=function(e){var t=e.getBoundingClientRect().top,e=e.getBoundingClientRect().bottom;return t>=this.content.getBoundingClientRect().top&&e<=this.content.getBoundingClientRect().bottom},m);function m(e,t){e=Kd.call(this,e,t)||this;return e.prevHeight=0,e.startIndex=0,e.preStartIndex=0,e.preventEvent=!1,e.actions=["filtering","searching","grouping","ungrouping"],e.offsets={},e.tmpOffsets={},e.virtualEle=new $d,e.offsetKeys=[],e.isFocused=!1,e.isSelection=!1,e.isBottom=!1,e.diff=0,e.heightChange=!1,e.isTop=!1,e.empty=void 0,e.isCancel=!1,e.requestTypes=["beginEdit","cancel","delete","add","save","sorting"],e.isNormaledit="Normal"===e.parent.editSettings.mode,e.virtualData={},e.virtualInfiniteData={},e.emptyRowData={},e.isContextMenuOpen=!1,e.isSelectionScroll=!1,e.validationCheck=!1,e.locator=t,e.eventListener("on"),e.widthServices=t.getService("widthService"),e.parent.on(Pt,e.setVisible,e),e.vgenerator=e.generator,e}Qd(Zd,Yd=Vs),Zd.prototype.renderTable=function(){this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector("."+Kr))),Yd.prototype.renderTable.call(this),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector("."+Kr),this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||!this.parent.enableColumnVirtualization?this.virtualEle.renderPlaceHolder("absolute"):this.virtualEle.renderPlaceHolder()},Zd.prototype.appendContent=function(e){this.virtualEle.wrapper.appendChild(e)},Zd.prototype.refreshUI=function(){this.gen.refreshColOffsets(),this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().querySelector("."+Kr))),Yd.prototype.refreshUI.call(this)},Zd.prototype.setVisible=function(e){for(var t,i=this.parent,n=0,r=e.length;n<r;n++){var s=e[parseInt(n.toString(),10)],o=i.getNormalizedColumnIndex(s.uid),a=s.visible?"":"none",l=this.getColGroup().children;P.setStyleAttribute(l[parseInt(o.toString(),10)],{display:a}),i.enableColumnVirtualization&&!i.groupSettings.columns.length&&(l=void 0,(l=s.visible?this.virtualEle.wrapper.offsetWidth+parseInt(s.width.toString(),10):this.virtualEle.wrapper.offsetWidth-parseInt(s.width.toString(),10))>i.width)?(this.setDisplayNone(s,a),this.virtualEle.setWrapperWidth(l+""),this.gen.refreshColOffsets()):t=!0,t&&this.refreshUI()}},Zd.prototype.setDisplayNone=function(e,t){for(var i=this.getTable(),n=0,r=[].slice.apply(i.querySelectorAll("th.e-headercell"));n<r.length;n++){var s=r[n];if(s.querySelector("[e-mappinguid]")&&s.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===e.uid){P.setStyleAttribute(s,{display:t}),""===t&&P.removeClass([s],"e-hide");break}}};var Yd,Jd=Zd;function Zd(e,t){var i=Yd.call(this,e,t)||this;return i.virtualEle=new $d,i.isMovable=!1,i.gen=new Gd(i.parent),i.parent.on(Pt,i.setVisible,i),i.parent.on(_t,function(e){return"X"===e.virtualInfo.sentinelInfo.axis?i.refreshUI():null},i),i}ec.prototype.renderWrapper=function(e){this.wrapper=P.createElement("div",{className:"e-virtualtable",styles:"min-height:"+P.formatUnit(e)}),this.wrapper.appendChild(this.table),this.content.appendChild(this.wrapper)},ec.prototype.renderPlaceHolder=function(e){this.placeholder=P.createElement("div",{className:"e-virtualtrack",styles:"position:"+(e=void 0===e?"relative":e)}),this.content.appendChild(this.placeholder)},ec.prototype.renderFrozenWrapper=function(e){this.wrapper=P.createElement("div",{className:"e-virtualtable",styles:"min-height:"+P.formatUnit(e)+"; display: flex"}),this.content.appendChild(this.wrapper)},ec.prototype.renderFrozenPlaceHolder=function(){this.placeholder=P.createElement("div",{className:"e-virtualtrack"}),this.content.appendChild(this.placeholder)},ec.prototype.adjustTable=function(e,t){this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},ec.prototype.setWrapperWidth=function(e,t){!e||-1!==e.indexOf("%")||this.content.getBoundingClientRect().width<parseInt(e,10)||(t=!(e=void 0)),this.wrapper.style.width=e?e+"px":t?"100%":""},ec.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=P.isNullOrUndefined(e)?"0px":e+"px",!t||-1!==t.indexOf("%")||this.content.getBoundingClientRect().width<parseInt(t,10)||(t="100%"),this.placeholder.style.width=t},ec.prototype.setFreezeWrapperWidth=function(e,t,i){e.style.width=t?t+"px":i?"100%":""};var $d=ec;function ec(){}tc.prototype.getModuleName=function(){return"virtualscroll"},tc.prototype.instantiateRenderer=function(){this.parent.log(["limitation","virtual_height"],"virtualization");var e=this.locator.getService("rendererFactory");this.parent.enableColumnVirtualization&&e.addRenderer(O.RenderType.Header,new Jd(this.parent,this.locator)),e.addRenderer(O.RenderType.Content,new Xd(this.parent,this.locator)),!this.parent.enableVirtualization&&this.parent.enableColumnVirtualization||this.ensurePageSize()},tc.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=(this.parent.height.toString().indexOf("%")<0?this.parent:this.parent.element.getBoundingClientRect()).height,t=(this.blockSize=~~(parseFloat(t.toString())/e),2*this.blockSize),e=this.parent.pageSettings.pageSize;this.parent.setProperties({pageSettings:{pageSize:e<t?t:e}},!0)},tc.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(at,this.instantiateRenderer,this),this.parent.on(Bt,this.refreshVirtualElement,this),this.parent.on(yr,this.createVirtualValidationForm,this),this.parent.on(Sr,this.virtualEditFormValidation,this),this.parent.on(r,this.destroy,this))},tc.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(at,this.instantiateRenderer),this.parent.off(Bt,this.refreshVirtualElement),this.parent.off(yr,this.createVirtualValidationForm),this.parent.off(Sr,this.virtualEditFormValidation),this.parent.off(r,this.destroy))},tc.prototype.getCurrentEditedData=function(e){e={virtualData:P.extend({},{},e,!0),isAdd:!1,isScroll:!1,endEdit:!0};return this.parent.notify(yn,e),e.virtualData},tc.prototype.createVirtualValidationForm=function(e){var t=this.parent;if(t.enableVirtualization&&"Normal"===t.editSettings.mode){for(var i=t.columns,n=new Rs(this.locator,null,this.parent),r=P.extend({},{},t.getRowObjectFromUID(e.uid),!0),s=(t.notify(gr,r),e.argsCreator(this.getCurrentEditedData(e.prevData),{},!1)),o=(s.isCustomFormValidation=!0,s.row=n.render(r,i),e.renderer.update(s),{}),a=0;a<i.length;a++)i[parseInt(a.toString(),10)].visible&&i[parseInt(a.toString(),10)].validationRules&&mp(i[parseInt(a.toString(),10)],0,o,{},{},i.length,!0);s.form.classList.add("e-virtual-validation"),t.editModule.virtualFormObj=t.editModule.createFormObj(s.form,o)}},tc.prototype.virtualEditFormValidation=function(e){var t=this.parent,i=t.element.querySelector('.e-griderror:not([style*="display: none"])');if(t.editModule.virtualFormObj)if(i&&"none"!==i.style.display){var n=i.getBoundingClientRect(),r=t.element.querySelectorAll(".e-gridform"),s=r[0],o=t.getContent().getBoundingClientRect().left;1<r.length&&(s=r[1]),(n.left<o||n.right>t.element.offsetWidth)&&(a=s.querySelector('.e-tooltip-wrap:not([style*="display: none"])'),this.scrollToEdit(a,{editIdx:e.editIdx,addIdx:e.addIdx},!0))}else if(t.editModule.virtualFormObj&&(!i||"none"===i.style.display)){for(var a,l=t.editModule.virtualFormObj.element.querySelectorAll('.e-tooltip-wrap:not([style*="display: none"])'),h=0;h<l.length;h++)P.remove(l[parseInt(h.toString(),10)]);this.setEditedDataToValidationForm(t.editModule.virtualFormObj.element,this.getCurrentEditedData(e.prevData)),e.isValid=t.editModule.virtualFormObj.validate(),e.isValid||(a=t.editModule.virtualFormObj.element.querySelector('.e-tooltip-wrap:not([style*="display: none"])'),this.scrollToEdit(a,{editIdx:e.editIdx,addIdx:e.addIdx}))}},tc.prototype.scrollToEdit=function(e,t,i){var n=this.parent;if(e){var r=n.columnModel,s=fh(e.id).split("_")[0],o=n.getColumnByField(s),e=this.parent.getContent().firstElementChild.scrollTop,n=n.getRowByIndex(t.editIdx);if(i||!o||!P.isNullOrUndefined(t.addIdx)&&0<e||!P.isNullOrUndefined(t.editIdx)&&!n){for(var a=void 0,l=0;l<r.length&&!o;l++)if(r[parseInt(l.toString(),10)].field===s){a=r[parseInt(l.toString(),10)];break}this.parent.notify(fr,a=i?o:a)}}},tc.prototype.setEditedDataToValidationForm=function(e,t){for(var i=[].slice.call(e.getElementsByClassName("e-field")),n=0,r=i.length;n<r;n++){var s=Ip(this.parent,i[parseInt(n.toString(),10)].getAttribute("e-mappinguid"));s.field&&(s=P.getValue(s.field,t),s=P.isNullOrUndefined(s)?"":s,i[parseInt(n.toString(),10)].value=s)}},tc.prototype.refreshVirtualElement=function(e){this.parent.enableColumnVirtualization&&"resize"===e.module&&this.locator.getService("rendererFactory").getRenderer(O.RenderType.Content).refreshVirtualElement()},tc.prototype.destroy=function(){this.removeEventListener()};Qd=tc;function tc(e,t){this.parent=e,this.locator=t,this.addEventListener()}nc.prototype.addNew=function(e,t){var i,n;this.isEdit=!1,i=((this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&"Top"===this.parent.editSettings.newRowPosition?this.parent.getHeaderTable():this.parent.getContentTable()).querySelector(N),t.row=this.parent.createElement("tr",{className:"e-row e-addedrow"}),this.parent.getContentTable().querySelector(".e-emptyrow")&&!this.parent.editSettings.showAddNewRow&&((n=this.parent.getContentTable().querySelector(".e-emptyrow")).parentNode.removeChild(n),this.parent.frozenRows)&&this.parent.element.querySelector(".e-frozenrow-empty")&&this.parent.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty"),"Top"===this.parent.editSettings.newRowPosition?i.insertBefore(t.row,i.firstChild):i.appendChild(t.row),t.row.appendChild(this.getEditElement(e,!1,void 0,t,!0)),this.parent.editModule.checkLastRow(t.row,t)},nc.prototype.update=function(e,t){this.isEdit=!0;var i=[].slice.call(t.row.querySelectorAll("td.e-rowcell"));t.row.innerHTML="",t.row.appendChild(this.getEditElement(e,!0,i,t,!0)),t.row.classList.add(ts),this.parent.editModule.checkLastRow(t.row,t)},nc.prototype.getEditElement=function(e,t,i,n,r){var s=this.parent,o=0,a=P.isNullOrUndefined(s.detailTemplate)&&P.isNullOrUndefined(s.childGrid)?0:1,l=(s.allowGrouping&&(o=s.groupSettings.columns.length),this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(s.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length+this.parent.getIndentCount()).toString()}})),h=n.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)this.appendChildren(h,n.rowData,r);else{var r,p=((r=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25",role:"grid"}})).appendChild(s.getContentTable().querySelector(us).cloneNode(!0)),this.parent.createElement(N,{attrs:{role:"rowgroup"}})),d=this.parent.createElement("tr"),c=0;for(a&&d.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),d.firstChild),s.isRowDragable()&&d.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));c<o;)d.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),c++;for(var u=0,c=0,g=n.isCustomFormValidation?this.parent.columnModel:s.getColumns();t&&u<i.length&&c<g.length||c<g.length;){var f,m=t&&i[parseInt(u.toString(),10)]?i[parseInt(u.toString(),10)].getAttribute("colspan"):null,y=g[parseInt(c.toString(),10)],S=e[y.uid].value,v=this.parent.createElement("td",{className:b,attrs:{style:"text-align:"+(y.textAlign||""),colspan:m||""}});y.visible?(v.appendChild(e[y.uid]),"Vertical"===this.parent.rowRenderingMode&&(Wl(v,{"data-cell":y.headerText}),0===c)&&v.classList.add("e-responsive-editcell"),"booleanedit"===y.editType?v.classList.add("e-boolcell"):(y.commands||y.commandsTemplate)&&P.addClass([v],"e-unboundcell")):v.classList.add("e-hide"),this.parent.isFrozenGrid()&&(up(this.parent,y,v),this.parent.isSpan&&(f=v.getAttribute("colspan")?parseInt(v.getAttribute("colspan"),10):1,dp(this.parent,y,v,f)),this.parent.enableColumnVirtualization)&&("Left"!==y.freeze||P.isNullOrUndefined(y.valueX)?"Right"!==y.freeze||P.isNullOrUndefined(y.valueX)?"Fixed"===y.freeze&&(v.style.left=this.parent.leftrightColumnWidth("left")-this.parent.translateX+"px",v.style.right=this.parent.leftrightColumnWidth("right")+this.parent.translateX+"px"):v.style.right=y.valueX+this.parent.translateX+"px":v.style.left=y.valueX-this.parent.translateX+"px"),v.setAttribute("aria-label",S+this.parent.localeObj.getConstant("ColumnHeader")+y.headerText),d.appendChild(v),c=m?c+parseInt(m,10):c+1,u++}hp(d),p.appendChild(d),r.appendChild(p),h.appendChild(r)}return l.appendChild(h),l},nc.prototype.removeEventListener=function(){},nc.prototype.appendChildren=function(e,t,i){t=P.extend({},t,{isAdd:!this.isEdit,isFrozen:i},!0),i=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(t,this.parent,"editSettingsTemplate",i,null,null,e),this.parent.renderTemplates()):sh(e,this.parent.getEditTemplate()(t,this.parent,"editSettingsTemplate",i,null,null,null,this.parent.root))};var ic=nc;function nc(e){this.parent=e}sc.prototype.update=function(e,t){var i,n;this.parent.isReact&&t.columnObject&&t.columnObject.template&&(i=t.cell.parentElement,n=t.cell.cloneNode(!0),i.insertBefore(n,t.cell),n.focus(),t.cell.remove(),t.cell=n),t.cell.setAttribute("aria-label",t.cell.innerHTML+this.parent.localeObj.getConstant("ColumnHeader")+t.columnObject.field),t.cell.innerHTML="",t.cell.appendChild(this.getEditElement(e,t)),t.cell.classList.add("e-editedbatchcell"),P.classList(t.row,[ts,"e-batchrow"],[])},sc.prototype.getEditElement=function(e,t){var i=this.parent,i=this.parent.createElement("form",{id:i.element.id+"EditForm",className:"e-gridform"});return i.appendChild(e[t.columnObject.uid]),"booleanedit"===t.columnObject.editType&&t.cell.classList.add("e-boolcell"),t.columnObject.editType||t.cell.classList.add("e-inputbox"),i};var rc=sc;function sc(e){this.parent=e}ac.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},ac.prototype.addNew=function(e,t){this.isEdit=!1,this.createDialog(e,t)},ac.prototype.update=function(e,t){this.isEdit=!0,this.createDialog(e,t)},ac.prototype.createDialogHeader=function(e){var t,i=this,n=this.parent;return this.parent.enableAdaptiveUI?((t=new _o(this.parent,this.serviceLocator)).action=this.isEdit?O.ResponsiveDialogAction.isEdit:O.ResponsiveDialogAction.isAdd,t.renderResponsiveHeader(void 0,e)):n.editSettings.headerTemplate?P.initializeCSPTemplate(function(){return i.getDialogEditTemplateElement("HeaderTemplate",e).outerHTML}):this.isEdit?this.l10n.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle")},ac.prototype.createDialog=function(e,t){var i=this,n=this.parent;this.dialog=this.parent.createElement("div",{id:n.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),n.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),n.element.appendChild(this.dialog),this.setLocaleObj(),this.dialog.setAttribute("aria-label",this.l10n.getConstant("DialogEdit")),this.dialogObj=new L.Dialog(P.extend({header:this.createDialogHeader(t),isModal:!0,visible:!0,cssClass:this.parent.cssClass?"e-edit-dialog "+this.parent.cssClass:"e-edit-dialog",content:this.getEditElement(e,t),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:n.editSettings.template?"auto":"330px",target:t.target||document.body,animationSettings:{effect:"None"},footerTemplate:n.editSettings.footerTemplate?P.initializeCSPTemplate(function(){return i.getDialogEditTemplateElement("FooterTemplate",t).outerHTML}):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},n.editSettings.dialog&&n.editSettings.dialog.params||{})),t.dialog=this.dialogObj;this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),Gh(this.parent.element,this.dialogObj.element.parentElement),n.enableAdaptiveUI&&this.dialogObj.show(!0)},ac.prototype.dialogCreated=function(){Sp(this.parent)},ac.prototype.renderResponsiveDialog=function(){var e=this;this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=function(){e.dialogObj.element.style.maxHeight="100%"})},ac.prototype.btnClick=function(e){this.l10n.getConstant("CancelButton").toLowerCase()===e.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},ac.prototype.dialogClose=function(){this.parent.closeEdit()},ac.prototype.destroy=function(e){for(var t,i,n=["template","headerTemplate","footerTemplate"],r=0;r<n.length;r++)this.parent.editSettings[n[parseInt(r.toString(),10)]]&&(t=n[parseInt(r.toString(),10)].charAt(0).toUpperCase()+n[parseInt(r.toString(),10)].slice(1),i=this.parent.element.id+"editSettings"+t,P.updateBlazorTemplate(i,t,this.parent.editSettings));this.parent.notify(ri,{}),this.parent.isEdit=!1,this.parent.notify(Kt,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),P.remove(this.dialog))},ac.prototype.getDialogEditTemplateElement=function(e,t){var i=this.parent.createElement("div",{className:"e-dialog"+e}),t=P.extend({},t.rowData,{isAdd:!this.isEdit},!0),n=this.parent.element.id+"editSettings"+e;return sh(i,("HeaderTemplate"===e?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(t,this.parent,"editSettings"+e,n)),P.updateBlazorTemplate(n,e,this.parent.editSettings),i},ac.prototype.getEditElement=function(e,t){var i,n,r=this,s=this.parent,o=this.parent.createElement("div",{className:this.isEdit?ts:"e-insertedrow"}),a=t.form=this.parent.createElement("form",{id:s.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)i=this.parent.element.id+"editSettingsTemplate",t=P.extend({},t.rowData,{isAdd:!this.isEdit},!0),p=this.parent.isReact&&"string"!=typeof this.parent.editSettings.template,n=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,p||n?(this.parent.getEditTemplate()(t,this.parent,"editSettingsTemplate",i,null,null,a),this.parent.renderTemplates()):sh(a,this.parent.getEditTemplate()(t,this.parent,"editSettingsTemplate",i,null,null,null,s.root)),P.updateBlazorTemplate(i,"Template",this.parent.editSettings,!0,function(){for(var e=r.parent.getColumns(),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].validationRules&&(r.parent.editModule.formObj.rules[e[parseInt(t.toString(),10)].field]=e[parseInt(t.toString(),10)].validationRules)});else{for(var l,h,p=this.parent.createElement("table",{className:$r,attrs:{cellspacing:"6px",role:"grid"}}),d=this.parent.createElement(N,{attrs:{role:"rowgroup"}}),c=s.getColumns(),u=0;u<c.length;u++)this.parent.editModule.checkColumnIsGrouped(c[parseInt(u.toString(),10)])||c[parseInt(u.toString(),10)].commands||c[parseInt(u.toString(),10)].commandsTemplate||"checkbox"===c[parseInt(u.toString(),10)].type||(l=this.parent.createElement("tr",{attrs:{role:"row"}}),h=this.parent.createElement("td",{className:b,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}}),e[c[parseInt(u.toString(),10)].uid].classList.remove("e-input"),h.appendChild(e[c[parseInt(u.toString(),10)].uid]),l.appendChild(h),d.appendChild(l));p.appendChild(d),a.appendChild(p)}return o.appendChild(a),o},ac.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ti,this.destroy),this.parent.off(r,this.destroy))};var oc=ac;function ac(e,t){this.parent=e,this.serviceLocator=t,this.parent.isDestroyed||(this.parent.on(ti,this.destroy,this),this.parent.on(r,this.destroy,this))}hc.prototype.addNew=function(e){this.renderer.addNew(this.getEditElements(e),e),this.convertWidget(e)},hc.prototype.update=function(e){this.renderer.update(this.getEditElements(e),e),e.isCustomFormValidation||(this.parent.notify(Wi,e),this.convertWidget(e))},hc.prototype.convertWidget=function(e){for(var t,i=this.parent,n="Dialog"===i.editSettings.mode?P.select("#"+i.element.id+"_dialogEdit_wrapper .e-gridform",document):(i.editSettings.showAddNewRow&&i.element.querySelector(".e-editedrow")?i.element.querySelector(".e-editedrow"):i.element).getElementsByClassName("e-gridform")[0],r=0,s="Batch"!==i.editSettings.mode?i.getColumns():[i.getColumnByField(e.columnName)];r<s.length;r++){var o,a,l=s[r];this.parent.editSettings.template&&!P.isNullOrUndefined(l.field)?((o=P.extend({},e)).element=n.querySelector("[name="+uh(l.field)+"]"),"string"==typeof l.edit.write?Lh(l.edit.write,window)(o):l.edit.write(o)):this.parent.editModule.checkColumnIsGrouped(l)||l.commands||(l.valueAccessor(l.field,e.rowData,l),o=n.querySelector("[e-mappinguid="+l.uid+"]"),a=l.edit.write,P.isNullOrUndefined(o))||("string"==typeof a?(a=Lh(a,window))({rowData:e.rowData,element:o,column:l,requestType:e.requestType,row:e.row,foreignKeyData:l.isForeignColumn()&&Lh(l.field,e.foreignKeyData)}):l.edit.write({rowData:e.rowData,element:o,column:l,requestType:e.requestType,row:e.row,foreignKeyData:l.isForeignColumn()&&Lh(l.field,e.foreignKeyData)}),t)||!P.isNullOrUndefined(o.getAttribute("disabled"))||E(o,"e-checkbox-disabled")||(this.focusElement(o,e.type),t=!0)}},hc.prototype.focusElement=function(e,t){var i,n=this.parent.element.querySelector(".e-edit-checkselect");!P.isNullOrUndefined(n)&&n.nextElementSibling&&n.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:P.closest(e,"td")},!0):(n=!this.parent.enableVirtualization&&!this.parent.enableColumnVirtualization||"Normal"!==this.parent.editSettings.mode,i=e.classList.contains("e-dropdownlist")?e.parentElement:e,(n||(this.parent.enableVirtualization||this.parent.enableColumnVirtualization)&&"Bottom"===this.parent.editSettings.newRowPosition&&E(e,is))&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!E(e,is)||this.parent.addNewRowFocus)?i.focus():i.focus({preventScroll:!0})),e.classList.contains("e-defaultcell")&&e.setSelectionRange(e.value.length,e.value.length)},hc.prototype.getEditElements=function(e){var t=this.parent,i={},n="Batch"!==t.editSettings.mode?t.getColumns():[t.getColumnByField(e.columnName)];if(e.isCustomFormValidation&&(n=this.parent.columnModel),this.parent.editSettings.template)return{};for(var r=0,s=n.length;r<s;r++){var o,a,l,h,p,d,c,u,g,f=n[parseInt(r.toString(),10)];f.commands||f.commandsTemplate?(o=this.serviceLocator.getService("cellRendererFactory"),c=new Ds(this.parent),o=o.getCellRenderer(O.CellType.CommandColumn),c=c.generateRows(e.rowData)[0].cells.filter(function(e){return e.rowID}),(c=(o=o.render(c[parseInt(r.toString(),10)],e.rowData,{index:e.row?e.row.getAttribute(x):0},this.parent.enableVirtualization)).firstElementChild).setAttribute("textAlign",o.getAttribute("textAlign")),i[f.uid]=c):(a=("dateonly"===f.type&&e.rowData[f.field]instanceof Date&&(o=e.rowData[f.field],e.rowData[f.field]=o.getFullYear()+"-"+Fh(o.getMonth()+1)+"-"+Fh(o.getDate())),f.valueAccessor(f.field,e.rowData,f)),a={column:f,value:a,type:e.requestType,data:e.rowData},l=f.edit.create,h=void 0,f.editTemplate?(h=this.parent.createElement("span",{attrs:{"e-mappinguid":f.uid}}),p=this.parent.element.id+f.uid+"editTemplate",d=zh({},e.rowData,{column:f}),u=this.parent.isReact&&"string"!=typeof f.editTemplate,g=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,u||g?(f.getEditTemplate()(P.extend({index:e.rowIndex},d),this.parent,"editTemplate",p,null,null,h),this.parent.renderTemplates()):sh(h,f.getEditTemplate()(P.extend({index:e.rowIndex},d),this.parent,"editTemplate",p,null,null,null,t.root))):("string"==typeof(h="string"==typeof l?(l=Lh(l,window))(a):f.edit.create(a))&&((c=this.parent.createElement("div")).innerHTML=h,h=c.firstChild),u="input"!==h.tagName&&h.querySelectorAll("input").length,g=uh(f.field),P.attributes(u?h.querySelector("input"):h,{name:g,"e-mappinguid":f.uid,id:t.element.id+g}),P.classList(h,["e-input","e-field"],[]),"Right"===f.textAlign&&h.classList.add("e-ralign"),((f.isPrimaryKey||f.isIdentity)&&"beginEdit"===e.requestType||f.isIdentity&&"add"===e.requestType)&&h.setAttribute("disabled","")),i[f.uid]=h)}return i},hc.prototype.destroy=function(){this.renderer.removeEventListener()};var lc=hc;function hc(e,t){this.editType={Inline:ic,Normal:ic,Batch:rc,Dialog:oc},this.parent=e,this.serviceLocator=t,this.renderer=new this.editType[this.parent.editSettings.mode](e,t),this.focus=t.getService("focus")}dc.prototype.create=function(e){return bp(this.parent,e.column,"e-field",{type:"text"})},dc.prototype.read=function(e){return e.ej2_instances[0].value},dc.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())};var pc=dc;function dc(e){this.parent=e}cc=function(e,t){return(cc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}cc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(fc,uc=pc),fc.prototype.create=function(e){var t="e-field e-boolcell";return"checkbox"===e.column.type&&(t="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,bp(this.parent,e.column,t,{type:"checkbox",value:e.value})},fc.prototype.read=function(e){return e.checked},fc.prototype.write=function(e){var t,i;P.isNullOrUndefined(e.row)||(t=e.row.querySelector(".e-edit-checkselect")),Lh(e.column.field,e.rowData)&&(i=JSON.parse(Lh(e.column.field,e.rowData).toString().toLowerCase())),P.isNullOrUndefined(t)||"checkbox"!==e.column.type||(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType&&(i=!!(t=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid")))&&t.isSelected),Ch.apply(void 0,[[].slice.call(e.row.getElementsByClassName(b)),i].concat(this.activeClasses))),this.obj=new B.CheckBox(P.extend({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:i,disabled:!mh(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass||""},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)},fc.prototype.addEventListener=function(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener(fs,this.cbChange)},fc.prototype.removeEventListener=function(){this.obj.isDestroyed||this.obj.removeEventListener(fs,this.cbChange)},fc.prototype.checkBoxChange=function(e){var t;this.editRow&&"Dialog"!==this.editType&&(t=!1,e.checked?this.editRow.setAttribute("aria-selected",(t=!0).toString()):this.editRow.removeAttribute("aria-selected"),Ch.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(b)),t].concat(this.activeClasses)))};var cc,uc,gc=fc;function fc(){var e=null!==uc&&uc.apply(this,arguments)||this;return e.activeClasses=["e-selectionbackground","e-active"],e}mc=function(e,t){return(mc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}mc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(vc,yc=pc),vc.prototype.write=function(e){var t="Dialog"!==this.parent.editSettings.mode,i=(this.column=e.column,new A.Predicate(e.column.field,"notequal",null,!0,!1)),n={};if(e.column.edit.params)for(var r=Object.keys(e.column.edit.params),s=0;s<r.length;s++)n[r[parseInt(s.toString(),10)]]="query"===r[parseInt(s.toString(),10)]?e.column.edit.params[r[parseInt(s.toString(),10)]].clone():e.column.edit.params[r[parseInt(s.toString(),10)]];this.obj=new U.DropDownList(P.extend({dataSource:this.parent.dataSource instanceof A.DataManager?this.parent.dataSource:new A.DataManager(this.parent.dataSource),query:(new A.Query).where(i).select(e.column.field),enabled:mh(e.column,e.requestType,e.element),fields:{value:e.column.field},value:Lh(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",sortOrder:"Ascending",cssClass:this.parent.cssClass||null,close:this.dropDownClose.bind(this)},n)),this.parent.enableVirtualization&&(this.obj.dataSource=n.dataSource||(e.column.isForeignColumn()?[e.foreignKeyData[0]]:[e.rowData])),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",uh(e.column.field))},vc.prototype.dropDownClose=function(e){e.event&&"escape"===e.event.action&&(this.parent.editModule.editCellDialogClose=!0)},vc.prototype.addEventListener=function(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(ys,this.ddCreated),this.obj.addEventListener(gs,this.ddOpen),this.obj.addEventListener(Ss,this.ddBeforeOpen),this.obj.addEventListener(p,this.ddComplete)},vc.prototype.removeEventListener=function(){this.obj.isDestroyed||(this.obj.removeEventListener(ys,this.ddCreated),this.obj.removeEventListener(gs,this.ddOpen),this.obj.removeEventListener(Ss,this.ddBeforeOpen),this.obj.removeEventListener(p,this.ddComplete))},vc.prototype.dropdownCreated=function(e){this.flag=!0},vc.prototype.dropdownBeforeOpen=function(){this.parent.enableVirtualization&&(this.column.edit.params&&this.column.edit.params.dataSource?this.obj.dataSource=this.column.edit.params.dataSource:this.obj.dataSource=this.column.isForeignColumn()?this.column.dataSource instanceof A.DataManager?this.column.dataSource:new A.DataManager(this.column.dataSource):this.parent.dataSource instanceof A.DataManager?this.parent.dataSource:new A.DataManager(this.parent.dataSource))},vc.prototype.ddActionComplete=function(e){e.result=A.DataUtil.distinct(e.result,this.obj.fields.value,!0),!this.flag||!this.column.dataSource||this.column.edit.params&&this.column.edit.params.ddEditedData||("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof A.DataManager&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1},vc.prototype.dropDownOpen=function(e){var t=E(this.obj.element,"e-dialog");"Dialog"!==this.parent.editSettings.mode||P.isNullOrUndefined(t)||(t=P.select("#"+t.id,document).ej2_instances[0],e.popup.element.style.zIndex=(t.zIndex+1).toString())};var mc,yc,Sc=vc;function vc(e){var t=yc.call(this)||this;return t.parent=e,t.flag=!1,t.removeEventHandler=t.removeEventListener,t}wc.prototype.keyEventHandler=function(e){13!==e.keyCode&&9!==e.keyCode||((e=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),this.dispatchEvent(e))},wc.prototype.create=function(e){return this.instances=new P.Internationalization(this.parent.locale),bp(this.parent,e.column,"e-field",{})},wc.prototype.read=function(e){return this.obj.value},wc.prototype.write=function(e){var t=e.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new z.NumericTextBox(P.extend({value:parseFloat(Lh(e.column.field,e.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,enabled:mh(e.column,e.requestType,e.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale,cssClass:this.parent.cssClass||null},t.edit.params)),e.element.setAttribute("name",uh(e.column.field)),this.obj.appendTo(e.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},wc.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())};var Cc=wc;function wc(e){this.parent=e}bc=function(e,t){return(bc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}bc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Rc,Ic=pc),Rc.prototype.create=function(e){var t={type:"text",value:P.isNullOrUndefined(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return bp(this.parent,e.column,"e-field e-input e-defaultcell",t)},Rc.prototype.read=function(e){return("hidden"!==e.type||P.isNullOrUndefined(e.ej2_instances[0])||P.isNullOrUndefined(e.ej2_instances[0].textarea)?e:e.ej2_instances[0]).value},Rc.prototype.write=function(e){var t,i=e.column,n="Dialog"!==this.parent.editSettings.mode,n={element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:mh(e.column,e.requestType,e.element),placeholder:n?"":e.column.headerText,cssClass:this.parent.cssClass||""};P.isNullOrUndefined(i.edit)||P.isNullOrUndefined(i.edit.params)||!i.edit.params.multiline||(t=i.valueAccessor(i.field,e.rowData,i),n.value=t),this.obj=new z.TextBox(P.extend(n,i.edit.params)),this.obj.appendTo(e.element),"Batch"===this.parent.editSettings.mode&&this.obj.element.addEventListener("keydown",this.keyEventHandler)},Rc.prototype.keyEventHandler=function(e){"Enter"!==e.key&&"Tab"!==e.key||(e=new Event("change",{bubbles:!1,cancelable:!0}),this.dispatchEvent(e))},Rc.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())};var bc,Ic,xc=Rc;function Rc(){return null!==Ic&&Ic.apply(this,arguments)||this}Dc.prototype.clickHandler=function(e){var e=e.target,t=this.parent;t.editSettings.showAddNewRow&&P.isNullOrUndefined(t.element.querySelector("."+ts))||(E(e,_r)&&E(E(e,_r),"e-grid").id===t.element.id||t.frozenRows&&E(e,Kr)&&!E(e,"e-columnheader"))&&!E(e,"e-unboundcelldiv")&&(this.rowIndex=E(e,b)?parseInt(e.parentElement.getAttribute(x),10):-1,t.isEdit)&&t.editModule.endEdit()},Dc.prototype.dblClickHandler=function(e){E(e.target,b)&&this.parent.editSettings.allowEditOnDblClick&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!E(e.target,"e-addedrow"))&&this.parent.editModule.startEdit(E(e.target,I))},Dc.prototype.editComplete=function(e){this.parent.isEdit=!!this.parent.editSettings.showAddNewRow;switch(e.requestType){case"save":(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&this.parent.isPersistSelection||"edit"!==e.action&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&"add"!==e.action)&&this.parent.selectRow(e.index),this.parent.trigger(p,P.extend(e,{requestType:"save",type:p}));break;case"delete":this.parent.trigger(p,P.extend(e,{requestType:"delete",type:p})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}},Dc.prototype.getEditArgs=function(e,t,i){for(var n=this.parent.getPrimaryKeyFieldNames(),r=[],s=0;s<n.length;s++)r.push(Lh(n[parseInt(s.toString(),10)],e));return{primaryKey:n,primaryKeyValue:r,requestType:"beginEdit",rowData:e,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:t&&t.foreignKeyData,target:void 0,isScroll:i}},Dc.prototype.startEdit=function(t){var i=this,n=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(t.getAttribute(x),10),n.enableVirtualization||n.enableColumnVirtualization||n.enableInfiniteScrolling){var e='.e-row[data-rowindex="'+this.rowIndex+'"]';if(!this.parent.element.querySelector(e))return}var e={data:void 0,index:this.rowIndex,isScroll:!1},r=(this.parent.notify(pn,e),Mh(n)?(r=n.getRowObjectFromUID(t.getAttribute("data-uid")),this.previousData=r.data):this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.enableInfiniteScrolling&&!this.previousData?this.previousData=e.data:this.parent.enableVirtualization||(this.previousData=P.extend({},{},this.parent.getForeignKeyColumns().length?this.parent.getRowObjectFromUID(t.getAttribute("data-uid")).data:n.getCurrentViewRecords()[this.rowIndex],!0)),P.extend({},{},e.data||this.previousData,!0)),s=(this.uid=t.getAttribute("data-uid"),n.getRowObjectFromUID(this.uid)),r=this.getEditArgs(r,s,e.isScroll);r.row=t,r.isScroll?this.inlineEditHandler(r,t):(this.parent.notify(yr,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),n.trigger(Be,r,function(e){e.type="actionBegin",n.trigger(y,e,function(e){e.cancel||i.inlineEditHandler(e,t)})}))},Dc.prototype.disabledShowAddRow=function(e,t){var i=this.parent.element.querySelector(".e-addedrow"),n=[].slice.call(i?i.querySelectorAll(".e-input"):[]);if(i&&i.querySelector(".e-unboundcell"))for(var r=[].slice.call(i.querySelector(".e-unboundcell").querySelectorAll(".e-btn")),s=0;s<r.length;s++)e?(r[parseInt(s.toString(),10)].classList.remove("e-disabled"),r[parseInt(s.toString(),10)].removeAttribute("disabled")):(r[parseInt(s.toString(),10)].classList.add("e-disabled"),r[parseInt(s.toString(),10)].setAttribute("disabled","disabled"));if(n.length)for(s=0;s<n.length;s++){var o=n[parseInt(s.toString(),10)],a=o.getAttribute("e-mappinguid"),a=this.parent.getColumnByUid(a),l=E(o,"e-rowcell").querySelector(".e-error");l&&l.classList.remove("e-error"),o.ej2_instances?(t&&P.isNullOrUndefined(a.defaultValue)&&(o.ej2_instances[0].value=null,o.value=null),P.isNullOrUndefined(e)||(o.ej2_instances[0].enabled=!(!e||!a.allowEditing))):(t&&o.value&&o.value.length&&P.isNullOrUndefined(a.defaultValue)&&(o.value=null),P.isNullOrUndefined(e)||(e?a.allowEditing&&(o.classList.remove("e-disabled"),o.removeAttribute("disabled")):(o.classList.add("e-disabled"),o.setAttribute("disabled","disabled"))))}},Dc.prototype.inlineEditHandler=function(e,t){var i=this.parent;i.isEdit=!0,e.row=e.row||t,"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,e.row.classList.add("e-dlgeditrow")),this.renderer.update(e),this.uid=t.getAttribute("data-uid"),i.editModule.applyFormValidation(),i.editSettings.showAddNewRow&&!t.classList.contains("e-addedrow")&&this.disabledShowAddRow(!1,!0),e.type="actionComplete",i.trigger(p,e),i.editSettings.template&&i.editModule.applyFormValidation(void 0,e.form.ej2_instances[0].rules),this.args=e,this.parent.allowTextWrap&&this.parent.notify(yi,{case:"textwrap"})},Dc.prototype.updateRow=function(e,t){var i=this,n=this.parent,t=(this.editRowIndex=e,{requestType:"save",action:"edit",type:y,data:t,cancel:!1,previousData:n.getCurrentViewRecords()[parseInt(e.toString(),10)],row:n.getRowByIndex(e)});n.showSpinner(),n.enableInfiniteScrolling&&(this.uid=t.row.getAttribute("data-uid"),e=parseInt(t.row.getAttribute("data-rowindex"),10),this.parent.notify(Ir,{index:e})),n.notify(Jt,t),t.promise?t.promise.then(function(){return n.refresh()}).catch(function(e){return i.edFail(e)}):n.enableInfiniteScrolling||n.refresh()},Dc.prototype.editFormValidate=function(){var e=this.parent,t=e.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return e.notify(Sr,i),t&&i.isValid},Dc.prototype.endEdit=function(){var e,t,i,n,r,s,o=this,a=this.parent;this.parent.isEdit&&this.editFormValidate()&&(e=P.extend({},{},this.previousData,!0),t=P.extend(this.args,{requestType:"save",type:y,data:e,cancel:!1,previousData:this.previousData,selectedRow:a.selectedRowIndex,foreignKeyData:{}}),i="Dialog"===a.editSettings.mode,n=P.select("#"+a.element.id+"_dialogEdit_wrapper",document),s=i?n.querySelector(".e-gridform"):(a.editSettings.showAddNewRow&&a.element.querySelector("."+ts)?a.element.querySelector("."+ts):a.element).getElementsByClassName("e-gridform")[0],r={virtualData:P.extend({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0},this.parent.notify(yn,r),(this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(r.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=e=t.data=r.virtualData):e=a.editModule.getCurrentEditedData(s,e),s=[].slice.call(a.element.getElementsByClassName(ts)).length,!r.isAdd&&Object.keys(this.currentVirtualData).length&&(s=s||1),(i?n.getElementsByClassName(ts).length:s)?(t.action="edit",a.trigger(y,t,function(e){e.cancel||("Spinner"===o.parent.loadingIndicator.indicatorType&&a.showSpinner(),"Shimmer"===o.parent.loadingIndicator.indicatorType&&o.parent.showMaskRow(),a.editSettings.showAddNewRow&&o.disabledShowAddRow(!0),a.notify(Jt,e))})):(t.action="add",t.selectedRow=0,t.index=this.addedRowIndex,a.notify(dn,{}),a.notify(ut,t),this.addedRowIndex=null,t.cancel||this.parent.editSettings.showAddNewRow&&(this.parent.notify(Lr,{}),this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.disabledShowAddRow(!0,!0)))},Dc.prototype.destroyElements=function(){var e=this.parent;(!e.editSettings.showAddNewRow||e.editSettings.showAddNewRow&&e.element.querySelector(".e-editedrow"))&&(e.editModule.destroyWidgets(),e.editModule.destroyForm()),this.parent.notify(ti,{})},Dc.prototype.editHandler=function(t){var i=this;t.promise?t.promise.then(function(e){return i.edSucc(e,t)}).catch(function(e){return i.edFail(e)}):this.editSuccess(t.data,t),this.parent.editSettings.showAddNewRow&&this.parent.editModule.applyFormValidation()},Dc.prototype.edSucc=function(e,t){this.editSuccess(e,t)},Dc.prototype.edFail=function(e){this.editFailure(e)},Dc.prototype.updateCurrentViewData=function(e){this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||(this.parent.getCurrentViewRecords()[this.editRowIndex]=e)},Dc.prototype.requestSuccess=function(e){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode)&&"add"!==e.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow")},Dc.prototype.editSuccess=function(e,l){if(P.isNullOrUndefined(e)||e instanceof Array||(l.data=P.extend({},P.extend({},l.rowData,l.data),e)),this.requestSuccess(l),this.parent.trigger(Ve,l),l.type=p,this.parent.isEdit=!!this.parent.editSettings.showAddNewRow,this.refreshRow(l.data),this.parent.notify(dn,l),this.parent.editModule.checkLastRow(l.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(l.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.groupSettings.showGroupedColumn){for(var e=l.row,t=this.parent.getRowsObject(),e=e.getAttribute("data-uid"),h=this.parent.getRowObjectFromUID(e),i=this,n=0;n<this.parent.groupSettings.columns.length;n++)!function(o){var a=i;t=t.filter(function(e){var t=e.isDataRow&&e!==h;if(t){for(var i=a.parent.groupSettings.columns[parseInt(o.toString(),10)].split("."),n=e.data[i[0]],r=l.data[i[0]],s=1;s<i.length;s++)n=n[i[s]],r=r[i[s]];return t&&n===r}return t})}(n);e=t[0];P.isNullOrUndefined(h)||P.isNullOrUndefined(e)||h.parentUid===e.parentUid?this.parent.aggregates.length&&this.parent.aggregateModule.refresh(l.data,this.parent.groupSettings.enableLazyLoading?l.row:void 0):this.parent.groupModule.groupedRowReorder(h,e)}else this.parent.aggregates.length&&this.parent.aggregateModule.refresh(l.data,this.parent.groupSettings.enableLazyLoading?l.row:void 0);this.parent.trigger(p,l),(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)&&(this.parent.isPersistSelection||this.parent.selectionSettings.checkboxOnly)||"Dialog"===this.parent.editSettings.mode||this.parent.selectRow(-1<this.rowIndex?this.rowIndex:this.editRowIndex),this.parent.aggregates.length&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(this.parent.groupModule.getGroupAggregateTemplates(!0).length||this.parent.groupModule.getGroupAggregateTemplates(!1).length)||(this.parent.removeMaskRow(),this.parent.hideSpinner())},Dc.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen)&&this.frozen.classList.remove("e-hiddenrow")},Dc.prototype.blazorTemplate=function(){var e=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&P.updateBlazorTemplate(this.parent.element.id+"editSettingsTemplate","Template",this.parent.editSettings);for(var t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)];i.template&&P.updateBlazorTemplate(this.parent.element.id+i.uid,"Template",i,!1),i.editTemplate&&P.updateBlazorTemplate(this.parent.element.id+i.uid+"editTemplate","EditTemplate",i)}},Dc.prototype.editFailure=function(e){this.parent.removeMaskRow(),this.parent.trigger(oe,{error:e}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:e})},Dc.prototype.needRefresh=function(){var e=!0,t=this.parent.element.querySelector(".e-gridform");return e=!this.parent.enableVirtualization&&!this.parent.infiniteScrollSettings.enableCache||"Normal"!==this.parent.editSettings.mode||t?e:!1},Dc.prototype.refreshRow=function(e){var t=new Rs(this.serviceLocator,null,this.parent),i=this.parent.getRowObjectFromUID(this.uid);if(i){i.changes=e,this.parent.notify(gn,{data:e}),Th(i,this.parent.getForeignKeyColumns(),i.changes),this.needRefresh()&&t.refresh(i,this.parent.getColumns(),!0);for(var n=[].slice.call(this.parent.element.querySelectorAll('[data-rowindex="'+i.index+'"]')),r=0;r<n.length;r++)if(hp(n[parseInt(r.toString(),10)]),this.parent.enableColumnVirtualization&&n[parseInt(r.toString(),10)].querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze").length)for(var s,o=this.parent.getColumns(),a=[].slice.call(n[parseInt(r.toString(),10)].querySelectorAll(".e-leftfreeze,.e-rightfreeze.e-fixedfreeze")),l=0;l<a.length;l++)a[parseInt(l.toString(),10)].classList.contains("e-leftfreeze")?a[parseInt(l.toString(),10)].style.left=o[parseInt(l.toString(),10)].valueX-this.parent.translateX+"px":a[parseInt(l.toString(),10)].classList.contains("e-rightfreeze")?(s=parseInt(a[parseInt(l.toString(),10)].getAttribute("data-colindex"),10),a[parseInt(l.toString(),10)].style.right=o[parseInt(s.toString(),10)].valueX+this.parent.translateX+"px"):(a[parseInt(l.toString(),10)].style.left=this.parent.leftrightColumnWidth("left")-this.parent.translateX+"px",a[parseInt(l.toString(),10)].style.right=this.parent.leftrightColumnWidth("right")+this.parent.translateX+"px")}},Dc.prototype.closeEdit=function(){var i,e,n=this;!this.parent.isEdit||this.parent.editSettings.showAddNewRow&&this.parent.element.querySelector(".e-addedrow")&&P.isNullOrUndefined(this.parent.element.querySelector("."+ts))?this.parent.editSettings.showAddNewRow&&(this.disabledShowAddRow(!0,!0),this.parent.notify(Lr,{})):(i=this.parent,e=P.extend(this.args,{requestType:"cancel",type:y,cancel:!1,data:this.previousData,selectedRow:i.selectedRowIndex}),i.notify(cn,e),this.blazorTemplate(),i.trigger(y,e,function(e){var t;e.cancel||("Dialog"===n.parent.editSettings.mode&&n.parent.notify(ti,{}),e.type=p,n.parent.editSettings.showAddNewRow||(i.isEdit=!1),"Dialog"!==i.editSettings.mode&&n.refreshRow(e.data),n.stopEditStatus(),i.isEdit=!1,i.editSettings.showAddNewRow&&(n.disabledShowAddRow(!0),i.editModule.applyFormValidation(),i.isEdit=!0),t=i.groupSettings.enableLazyLoading&&i.groupSettings.columns.length&&!i.getContentTable().querySelector("tr.e-emptyrow"),i.getContentTable().querySelector("tr.e-emptyrow")||i.getContentTable().querySelector("tr.e-row")||t||i.renderModule.emptyRow(),"Dialog"!==i.editSettings.mode&&i.selectRow(n.rowIndex),i.trigger(p,e))}))},Dc.prototype.addRecord=function(e,t){var i=this,n=this.parent;if(this.addedRowIndex=t=P.isNullOrUndefined(t)?0:t,e)n.notify(ut,{requestType:"save",type:y,data:e,selectedRow:0,action:"add",index:t});else if(!n.isEdit){this.previousData={},this.uid="";var r=n.getColumns(),s={virtualData:{},isScroll:!1};n.editSettings.showAddNewRow||this.parent.notify(yn,s);for(var o=0;o<r.length;o++)s.isScroll||r[parseInt(o.toString(),10)].field&&("string"===r[parseInt(o.toString(),10)].type&&(r[parseInt(o.toString(),10)].defaultValue=this.parent.sanitize(r[parseInt(o.toString(),10)].defaultValue)),A.DataUtil.setValue(r[parseInt(o.toString(),10)].field,r[parseInt(o.toString(),10)].defaultValue,this.previousData));e={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:y,index:t,rowData:this.previousData,target:void 0,isScroll:s.isScroll};(this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(s.virtualData).length&&(e.data=e.rowData=s.virtualData),e.isScroll||(this.parent.notify(yr,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),n.editSettings.showAddNewRow)?this.inlineAddHandler(e):n.trigger(y,e,function(e){e.cancel||i.inlineAddHandler(e)})}},Dc.prototype.inlineAddHandler=function(e){var t=this.parent;t.isEdit=!0,"Dialog"!==t.editSettings.mode&&t.clearSelection(),this.renderer.addNew(e),t.editModule.applyFormValidation(),e.type=p,e.row=t.element.querySelector("."+is),t.editSettings.showAddNewRow||t.trigger(p,e),t.editSettings.template&&t.editModule.applyFormValidation(void 0,e.form.ej2_instances[0].rules),this.args=e},Dc.prototype.deleteRecord=function(n,r){if(this.editRowIndex=this.parent.selectedRowIndex,r){r=r instanceof Array?r:[r];for(var s=this.parent,e=Object.keys(r).length,t=(n=n||this.parent.getPrimaryKeyFieldNames()[0],0);t<e;t++)!function(t){var i,e=s.currentViewData.some(function(e){return i=e,r[parseInt(t.toString(),10)]===Lh(n,e)||r[parseInt(t.toString(),10)]===e});r[parseInt(t.toString(),10)]=e?i:r[parseInt(t.toString(),10)][""+n]?r[parseInt(t.toString(),10)]:((e={})[n]=r[parseInt(t.toString(),10)],e)}(t)}var i={requestType:"delete",type:y,foreignKeyData:{},data:r||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};P.isNullOrUndefined(this.parent.commandDelIndex)||(i.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.notify(ut,i)},Dc.prototype.stopEditStatus=function(){for(var e=this.parent,t=[].slice.call(e.editSettings.showAddNewRow?[]:e.element.getElementsByClassName(is)),i=[].slice.call(e.element.getElementsByClassName(ts)),n=0;n<t.length;n++)P.remove(t[parseInt(n.toString(),10)]);for(n=0;n<i.length;n++)i[parseInt(n.toString(),10)].classList.remove(ts)},Dc.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ii,handler:this.editHandler},{event:si,handler:this.dblClickHandler},{event:Lt,handler:this.clickHandler},{event:Pi,handler:this.requestSuccess},{event:Wt,handler:this.dblClickHandler},{event:$t,handler:this.editComplete},{event:Zt,handler:this.editComplete},{event:sr,handler:this.closeEdit},{event:dr,handler:this.closeForm}],wp(this.parent,this.evtHandlers,!0,this))},Dc.prototype.removeEventListener=function(){this.parent.isDestroyed||wp(this.parent,this.evtHandlers,!1)},Dc.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()};var Ec=Dc;function Dc(e,t,i){this.args={},this.currentVirtualData={},this.parent=e,this.renderer=i,this.serviceLocator=t,this.addEventListener()}Tc=function(e,t){return(Tc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Tc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Fc,Oc=Ec),Fc.prototype.closeEdit=function(){Oc.prototype.closeEdit.call(this)},Fc.prototype.addRecord=function(e,t){Oc.prototype.addRecord.call(this,e,t)},Fc.prototype.endEdit=function(){Oc.prototype.endEdit.call(this)},Fc.prototype.updateRow=function(e,t){Oc.prototype.updateRow.call(this,e,t)},Fc.prototype.deleteRecord=function(e,t){Oc.prototype.deleteRecord.call(this,e,t)},Fc.prototype.startEdit=function(e){Oc.prototype.startEdit.call(this,e)};var Tc,Oc,Ac=Fc;function Fc(e,t,i){var n=Oc.call(this,e,t)||this;return n.parent=e,n.serviceLocator=t,n.renderer=i,n}v.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Lt,handler:this.clickHandler},{event:Wt,handler:this.dblClickHandler},{event:Ft,handler:this.onBeforeCellFocused},{event:kt,handler:this.onCellFocused},{event:si,handler:this.dblClickHandler},{event:Mt,handler:this.keyDownHandler},{event:Bi,handler:this.editNextValCell},{event:r,handler:this.destroy}],wp(this.parent,this.evtHandlers,!0,this),P.EventHandler.add(this.parent.element,"mousedown",this.mouseDownHandler,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(ae,this.dataBoundFunction),this.parent.addEventListener(ke,this.batchCancelFunction))},v.prototype.removeEventListener=function(){this.parent.isDestroyed||(wp(this.parent,this.evtHandlers,!1),P.EventHandler.remove(this.parent.element,"mousedown",this.mouseDownHandler),this.parent.removeEventListener(ae,this.dataBoundFunction),this.parent.removeEventListener(ke,this.batchCancelFunction))},v.prototype.batchCancel=function(){this.parent.focusModule.restoreFocus()},v.prototype.dataBound=function(){this.parent.notify(Kt,{})},v.prototype.destroy=function(){this.removeEventListener()},v.prototype.mouseDownHandler=function(e){P.isNullOrUndefined(this.parent.element.querySelector(".e-gridform"))?this.mouseDownElement=void 0:this.mouseDownElement=e.target},v.prototype.clickHandler=function(e){E(e.target,this.parent.element.id+"_add",!0)||((this.parent.isEdit&&P.closest(this.form,"td")!==P.closest(e.target,"td")&&P.isNullOrUndefined(this.mouseDownElement)||this.mouseDownElement===e.target)&&(this.saveCell(),this.editNextValCell()),E(e.target,b)&&!this.parent.isEdit&&this.setCellIdx(e.target))},v.prototype.dblClickHandler=function(e){var t=E(e.target,b),e=E(e.target,I),e=e&&parseInt(e.getAttribute(x),10),i=t&&parseInt(t.getAttribute(ps),10);P.isNullOrUndefined(t)||P.isNullOrUndefined(e)||isNaN(i)||t.parentElement.classList.contains(ts)||!this.parent.getColumns()[parseInt(i.toString(),10)].allowEditing||this.editCell(e,this.parent.getColumns()[parseInt(i.toString(),10)].field,this.isAddRow(e))},v.prototype.onBeforeCellFocused=function(e){this.parent.isEdit&&this.validateFormObj()&&(e.byClick||-1<["tab","shiftTab","enter","shiftEnter"].indexOf(e.keyArgs.action))&&(e.cancel=!0,(e.byClick?e.clickArgs:e.keyArgs).preventDefault())},v.prototype.onCellFocused=function(e){var t=!(e.container.isContent&&e.container.isDataCell||this.parent.frozenRows&&e.container.isHeader);if(this.parent.focusModule.active&&(this.prevEditedBatchCell=this.parent.focusModule.active.matrix.current.toString()===this.prevEditedBatchCellMatrix().toString(),this.crtRowIndex=[].slice.call(this.parent.focusModule.active.getTable().rows).indexOf(P.closest(e.element,"tr"))),!e.byKey||t)this.parent.isEdit&&t&&this.saveCell();else{var t=e.container.indexes,i=t[0],n=t[1],t=e.element.getAttribute("data-colindex")?parseInt(e.element.getAttribute("data-colindex"),10):n,r=(t!==n&&(n=t),this.parent.frozenRows&&e.container.isContent&&(i+=(this.parent.getContent().querySelector(".e-hiddenrow")?0:this.parent.frozenRows)+this.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length),this.parent.isEdit);if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(r=r&&!this.validateFormObj(),e.keyArgs.action){case"tab":case"shiftTab":var s=this.parent.isRowDragable()&&this.parent.isDetail()?2:this.parent.isRowDragable()||this.parent.isDetail()?1:0,s=this.parent.getColumns()[n-s];s&&!this.parent.isEdit&&this.editCell(i,s.field),(r||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(i,n);break;case"enter":case"shiftEnter":e.keyArgs.preventDefault();s={cancel:!1,keyArgs:e.keyArgs};this.parent.notify("beforeFocusCellEdit",s),!s.cancel&&r&&this.editCell(i,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(i,n),this.focus.focus()}}},v.prototype.isAddRow=function(e){return this.parent.getDataRows()[parseInt(e.toString(),10)].classList.contains("e-insertedrow")},v.prototype.editCellFromIndex=function(e,t){this.cellDetails.rowIndex=e,this.cellDetails.cellIndex=t,this.editCell(e,this.parent.getColumns()[parseInt(t.toString(),10)].field,this.isAddRow(e))},v.prototype.closeEdit=function(){var e=this.parent,t=this.parent.getRowsObject(),i={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify(Ki,i),!i.cancel){e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(var n=0;n<t.length;n++){var r=t[parseInt(n.toString(),10)].isDirty;(r=this.removeBatchElementChanges(t[parseInt(n.toString(),10)],r))&&t.splice(n,1),r&&n--}e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();this.parent.getRowsObject();e.notify(ke,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new zr({isDataRow:!0,cells:[new qr({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(Kt,{}),this.parent.notify(Yt,{}),i={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(ke,i)}},v.prototype.removeBatchElementChanges=function(e,t){var i=this.parent,n=new Rs(this.serviceLocator,null,this.parent),r=!1;return t&&(e.isDirty=t,t=i.getRowElementByUID(e.uid))&&(t.classList.contains("e-insertedrow")?(P.remove(t),r=!0):(Th(e,this.parent.getForeignKeyColumns(),e.data),delete e.changes,delete e.edit,e.isDirty=!1,P.classList(t,[],["e-hiddenrow","e-updatedtd"]),n.refresh(e,i.getColumns(),!1)),0<this.parent.aggregates.length)&&((t=[]).type="cancel",this.parent.notify(Rt,t),0<this.parent.groupSettings.columns.length)&&this.parent.notify(xt,t),r},v.prototype.deleteRecord=function(e,t){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(e,t),0<this.parent.aggregates.length&&(this.parent.isReact||this.parent.isVue||this.parent.notify(Rt,{}),0<this.parent.groupSettings.columns.length&&this.parent.notify(xt,{}),this.parent.isReact||this.parent.isVue)&&this.parent.notify(Rt,{})},v.prototype.addRecord=function(e){this.bulkAddRow(e)},v.prototype.endEdit=function(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},v.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},v.prototype.batchSave=function(){var e,t,i,n=this.parent,r="deletedRecords";n.isCheckBoxSelection&&(e=n.element.querySelector(".e-checkselectall").parentElement).classList.contains("e-checkbox-disabled")&&n.pageSettings.totalRecordsCount>n.currentViewData.length&&P.removeClass([e],["e-checkbox-disabled"]),this.saveCell(),n.isEdit||this.editNextValCell()||n.isEdit||(t=this.getBatchChanges(),"Multiple"===this.parent.selectionSettings.type&&t[r].length&&this.parent.selectionSettings.persistSelection&&(t[r]=this.removeSelectedData,this.removeSelectedData=[]),i={changedRecords:this.parent.getRowsObject().filter(function(e){return e.isDirty&&-1===["add","delete"].indexOf(e.edit)}).map(function(e){return e.data})},n.trigger(Ne,{batchChanges:t,cancel:!1},function(e){e.cancel||(n.showSpinner(),n.notify(Qt,{changes:t,original:i}))}))},v.prototype.getBatchChanges=function(){for(var e={addedRecords:[],deletedRecords:[],changedRecords:[]},t=0,i=this.parent.getRowsObject();t<i.length;t++){var n=i[t];if(n.isDirty)switch(n.edit){case"add":e.addedRecords.push(n.changes);break;case"delete":e.deletedRecords.push(n.data);break;default:e.changedRecords.push(n.changes)}}return e},v.prototype.removeRowObjectFromUID=function(e){for(var t=this.parent.getRowsObject(),i=0,n=t.length;i<n&&t[parseInt(i.toString(),10)].uid!==e;i++);t.splice(i,1)},v.prototype.addRowObject=function(e){var t=this.parent,i="Top"===t.editSettings.newRowPosition,e=e.clone();i?t.getRowsObject().unshift(e):t.getRowsObject().push(e)},v.prototype.bulkDelete=function(e,r){var s=this,o=(this.removeSelectedData=[],this.parent),a=o.selectedRowIndex,l=o.getSelectedRows(),t={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:a,rowData:r||o.getSelectedRecords()[0],cancel:!1};t.row=r?o.editModule.deleteRowUid?o.getRowElementByUID(o.editModule.deleteRowUid):o.getRows()[o.getCurrentViewRecords().indexOf(r)]:l[0],t.row&&o.trigger(Pe,t,function(e){if(!e.cancel){if(s.removeSelectedData=o.getSelectedRecords(),o.clearSelection(),e.row=e.row||(r?o.getRows()[parseInt(a.toString(),10)]:l[0]),1===l.length||r){var t=e.row.getAttribute("data-uid"),t=r&&s.parent.editModule.deleteRowUid?s.parent.editModule.deleteRowUid:t;e.row.classList.contains("e-insertedrow")?(s.removeRowObjectFromUID(t),P.remove(e.row)):((t=o.getRowObjectFromUID(t)).isDirty=!0,t.edit="delete",P.classList(e.row,["e-hiddenrow","e-updatedtd"],[]),o.frozenRows&&a<o.frozenRows&&o.getDataRows().length>=o.frozenRows&&o.getHeaderTable().querySelector(N).appendChild(o.getRowByIndex(o.frozenRows-1))),delete e.row}else{r&&(a=parseInt(e.row.getAttribute(x),10));for(var i=0;i<l.length;i++){var n=l[parseInt(i.toString(),10)].getAttribute("data-uid");l[parseInt(i.toString(),10)].classList.contains("e-insertedrow")?(s.removeRowObjectFromUID(n),P.remove(l[parseInt(i.toString(),10)])):(P.classList(l[parseInt(i.toString(),10)],["e-hiddenrow","e-updatedtd"],[]),(n=o.getRowObjectFromUID(n)).isDirty=!0,n.edit="delete",delete l[parseInt(i.toString(),10)],o.frozenRows&&a<o.frozenRows&&o.getDataRows().length>=o.frozenRows&&o.getHeaderTable().querySelector(N).appendChild(o.getRowByIndex(o.frozenRows-1)))}}s.refreshRowIdx(),r&&(o.editModule.deleteRowUid=void 0),o.isCheckBoxSelection||o.selectRow(a),o.trigger(Me,e),o.notify(Me,{rows:s.parent.getRowsObject()}),o.notify(Kt,{})}})},v.prototype.refreshRowIdx=function(){for(var e=this.parent,t=e.getAllDataRows(!0),i=e.getRowsObject().filter(function(e){return!e.isDetailRow}),n=0,r=0,s=t.length;n<s;n++)t[parseInt(n.toString(),10)].classList.contains(I)&&!t[parseInt(n.toString(),10)].classList.contains("e-hiddenrow")?(t[parseInt(n.toString(),10)].setAttribute(x,r.toString()),t[parseInt(n.toString(),10)].setAttribute(cs,(r+1).toString()),i[parseInt(n.toString(),10)].index=r,r++):(t[parseInt(n.toString(),10)].removeAttribute(x),t[parseInt(n.toString(),10)].removeAttribute(cs),i[parseInt(n.toString(),10)].index=-1)},v.prototype.bulkAddRow=function(l){var h=this,p=this.parent;if(p.editSettings.allowAdding){if(p.isEdit&&(this.saveCell(),this.parent.notify(Bi,{})),!this.validateFormObj()){if(this.initialRender){for(var e,t=p.getVisibleColumns(),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].validationRules&&t[parseInt(i.toString(),10)].validationRules.required&&(e={field:t[parseInt(i.toString(),10)].field.slice(),cellIdx:i},this.validationColObj.push(e));this.initialRender=!1}this.parent.element.classList.add("e-editing");var n={defaultData:l||this.getDefaultData(),primaryKey:p.getPrimaryKeyFieldNames(),cancel:!1};p.trigger(Le,n,function(e){if(!e.cancel){h.isAdded=!0,p.clearSelection();var t,i,n=new Rs(h.serviceLocator,null,h.parent),r=new Ds(h.parent).generateRows([e.defaultData]),s=n.render(r[0],p.getColumns());hp(s);for(var o=0;o<h.parent.groupSettings.columns.length;o++)s.insertBefore(h.parent.createElement("td",{className:"e-indentcell"}),s.firstChild),r[0].cells.unshift(new qr({cellType:O.CellType.Indent}));var n=p.getContentTable().querySelector(N),a=(s.classList.add("e-insertedrow"),n.querySelector(".e-emptyrow")&&((a=n.querySelector(".e-emptyrow")).parentNode.removeChild(a),p.frozenRows)&&p.element.querySelector(".e-frozenrow-empty")&&p.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty"),n=(p.frozenRows&&"Top"===p.editSettings.newRowPosition?p.getHeaderTable():p.getContentTable()).querySelector(N),"Top"===h.parent.editSettings.newRowPosition?n.insertBefore(s,n.firstChild):n.appendChild(s),P.addClass([].slice.call(s.getElementsByClassName(b)),["e-updatedtd"]),r[0].isDirty=!0,r[0].changes=P.extend({},{},r[0].data,!0),r[0].edit="add",h.addRowObject(r[0]),h.refreshRowIdx(),h.focus.forgetPrevious(),p.notify(Fe,{rows:h.parent.getRowsObject()}),h.getBatchChanges()),n=h.getBottomIndex(),n=("Top"===h.parent.editSettings.newRowPosition?p.selectRow(0):p.selectRow(n),l||(i=h.findNextEditableCell(0,!0),t=p.getColumns()[parseInt(i.toString(),10)],"Top"===h.parent.editSettings.newRowPosition?h.editCell(0,t.field,!0):h.editCell(n,t.field,!0)),0<h.parent.aggregates.length&&(l||a[ss].length)&&h.parent.notify(Rt,{}),{defaultData:e.defaultData,row:s,columnObject:t,columnIndex:i,primaryKey:e.primaryKey,cell:P.isNullOrUndefined(i)?void 0:s.cells[parseInt(i.toString(),10)]});p.trigger(Fe,n)}})}}else p.isEdit&&this.saveCell()},v.prototype.findNextEditableCell=function(e,t,i){for(var n,r=this.parent.getColumns(),s=r.length,o=e;o<s;o++)if(n=!!i&&P.isNullOrUndefined(r[parseInt(o.toString(),10)].validationRules),t&&(!r[parseInt(o.toString(),10)].template||r[parseInt(o.toString(),10)].field)&&r[parseInt(o.toString(),10)].allowEditing&&r[parseInt(o.toString(),10)].visible&&(!r[parseInt(o.toString(),10)].isIdentity||!r[parseInt(o.toString(),10)].isPrimaryKey)&&!n)return o;return-1},v.prototype.getDefaultData=function(){for(var e={},t={number:0,string:null,boolean:!1,date:null,datetime:null},i=0,n=this.parent.columnModel;i<n.length;i++){var r=n[i];r.field&&P.setValue(r.field,0<=Object.keys(r).indexOf("defaultValue")?r.defaultValue:t[r.type],e)}return e},v.prototype.setCellIdx=function(e){var t=0;this.parent.allowGrouping&&(t=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=e.cellIndex-t,this.cellDetails.rowIndex=parseInt(e.getAttribute("index"),10)},v.prototype.editCell=function(e,t,i){var n=this.parent,r=n.getColumnByField(t),s=(this.index=e,this.field=t,this.isAdd=i,n.isEdit&&!(this.cellDetails.column.field===t&&this.cellDetails.rowIndex===e&&this.parent.getDataRows().length-1!==e&&this.prevEditedBatchCell));n.editSettings.allowEditing&&(!s&&(r.allowEditing||!r.allowEditing&&n.focusModule.active&&n.focusModule.active.getTable().rows[this.crtRowIndex]&&n.focusModule.active.getTable().rows[this.crtRowIndex].classList.contains("e-insertedrow"))?this.editCellExtend(e,t,i):s&&(this.editNext=!0,this.saveCell()))},v.prototype.editCellExtend=function(t,e,i){var n,r,s,o,a=this,l=this.parent,h=l.getColumnByField(e),e=l.getPrimaryKeyFieldNames();l.isEdit||(o=P.extend({},{},this.getDataByIndex(t),!0),n=l.getDataRows()[parseInt(t.toString(),10)],o=P.extend({},{},this.getDataByIndex(t),!0),e[0]===h.field&&!n.classList.contains("e-insertedrow")||h.columns||h.isPrimaryKey&&h.isIdentity||h.commands?this.parent.isLastCellPrimaryKey=!0:(this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing"),r=l.getRowObjectFromUID(n.getAttribute("data-uid")),s=[].slice.apply(n.cells),(e={columnName:h.field,isForeignKey:!P.isNullOrUndefined(h.foreignKeyValue),primaryKey:e,rowData:o,validationRules:P.extend({},h.validationRules||{}),value:Lh(h.field,o),type:i?"add":"edit",cancel:!1,foreignKeyData:r&&r.foreignKeyData}).cell=s[this.getColIndex(s,this.getCellIdx(h.uid))],e.row=n,e.columnObject=h,e.cell&&l.trigger(ze,e,function(e){e.cancel||(e.cell=e.cell||s[a.getColIndex(s,a.getCellIdx(h.uid))],e.row=e.row||n,e.columnObject=e.columnObject||h,a.cellDetails={rowData:o,column:h,value:e.value,isForeignKey:e.isForeignKey,rowIndex:t,cellIndex:parseInt(e.cell.getAttribute(ps),10),foreignKeyData:e.foreignKeyData},e.cell.classList.contains("e-updatedtd")&&(a.isColored=!0,e.cell.classList.remove("e-updatedtd")),l.isEdit=!0,l.clearSelection(),l.isCheckBoxSelection&&l.isPersistSelection||l.selectRow(a.cellDetails.rowIndex,!0),a.renderer.update(e),a.parent.notify(Qi,e),a.form=P.select("#"+l.element.id+"EditForm",l.element),l.editModule.applyFormValidation([h]),a.parent.element.querySelector(".e-gridpopup").style.display="none")})))},v.prototype.updateCell=function(e,t,i){var n,r,s,o,a=this.parent,l=a.getColumnByField(t),h=a.getColumnIndexByField(t);l&&!l.isPrimaryKey&&l.allowEditing&&(n=this.parent.isSpan?cp(a,e,h):fp(this.parent,0,e,h),!this.parent.isSpan||n)&&(r=a.getRowObjectFromUID(n.parentElement.getAttribute("data-uid")),a.isEdit||!r.changes&&(!(i instanceof Date)&&r.data[""+t]!==i||i instanceof Date&&new Date(r.data[""+t]).toString()!==new Date(i).toString())||r.changes&&(!(i instanceof Date)&&r.changes[""+t]!==i||i instanceof Date&&new Date(r.changes[""+t]).toString()!==new Date(i).toString()))&&(this.refreshTD(n,l,r,i),e=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,(this.parent.isReact&&this.parent.requireTemplateRef||e&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&l.template?(o=(s=this).newReactTd,s.parent.renderTemplates(function(){s.parent.trigger(re,{cell:o||n,column:l,data:r.changes})})):((this.parent.isReact||e)&&l.template&&this.parent.renderTemplates(),this.parent.trigger(re,{cell:this.newReactTd||n,column:l,data:r.changes})))},v.prototype.setChanges=function(e,t,i){var n;e.changes||(e.changes=P.extend({},{},e.data,!0)),P.isNullOrUndefined(t)||("string"==typeof i&&(i=this.parent.sanitize(i)),A.DataUtil.setValue(t,i,e.changes)),e.data[""+t]!==i&&("date"!==(n=this.parent.getColumnByField(t).type)&&"datetime"!==n||new Date(e.data[""+t]).toString()!==new Date(i).toString())&&(e.isDirty=!0)},v.prototype.updateRow=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.updateCell(e,r,t[""+r])}},v.prototype.getCellIdx=function(e){e=this.parent.getColumnIndexByUid(e)+this.parent.groupSettings.columns.length;return P.isNullOrUndefined(this.parent.detailTemplate)&&P.isNullOrUndefined(this.parent.childGrid)||e++,this.parent.isRowDragable()&&e++,e},v.prototype.refreshTD=function(e,t,i,n){var r,s,o=new _s(this.parent,this.serviceLocator),n=(n="number"!==t.type||P.isNullOrUndefined(n)?n:parseFloat(n),i&&(this.setChanges(i,t.field,n),Th(i,this.parent.getForeignKeyColumns(),i.changes)),i?i.cells:void 0);this.parent.isReact&&(r=e.parentElement,s=e.cellIndex);i&&o.refreshTD(e,n[+this.getCellIdx(t.uid)],i.changes,{index:this.getCellIdx(t.uid)}),(this.parent.isReact?(this.newReactTd=r.cells[parseInt(s.toString(),10)],r.cells[parseInt(s.toString(),10)]):e).classList.add("e-updatedtd"),e.classList.add("e-updatedtd"),this.parent.notify(Kt,{})},v.prototype.getColIndex=function(e,t){var i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),P.isNullOrUndefined(this.parent.detailTemplate)&&P.isNullOrUndefined(this.parent.childGrid)||i++,this.parent.isRowDragable()&&i++;for(var n=0;n<e.length;n++)if(parseInt(e[parseInt(n.toString(),10)].getAttribute(ps),10)===t-i)return n;return-1},v.prototype.editNextValCell=function(){var e=this.parent,t=e.element.querySelectorAll(".e-insertedrow"),i=1===t.length;if(i&&this.isAdded&&!e.isEdit){for(var n=this.getBottomIndex(),r=this.cellDetails.cellIndex;r<e.getColumns().length;r++){if(e.isEdit)return;var s,o=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),o=e.getColumns()[parseInt(o.toString(),10)];o&&("Bottom"===this.parent.editSettings.newRowPosition?this.editCell(n,o.field,!0):(this.parent.notify(Qn,s={index:0,column:o}),this.editCell(s.index,o.field,!0)),this.saveCell())}e.isEdit||(this.isAdded=!1)}else if(!i&&this.isAdded&&!e.isEdit){for(r=0;r<t.length&&!e.isEdit;r++)for(var a=0;a<this.validationColObj.length&&!e.isEdit;a++)""===t[parseInt(r.toString(),10)].querySelectorAll("td:not(.e-hide)")[this.validationColObj[parseInt(a.toString(),10)].cellIdx].innerHTML&&(this.editCell(parseInt(t[parseInt(r.toString(),10)].getAttribute("data-rowindex"),10),this.validationColObj[parseInt(a.toString(),10)].field),this.validateFormObj())&&this.saveCell();e.isEdit||(this.isAdded=!1)}},v.prototype.escapeCellEdit=function(){var e=this.generateCellArgs();e.value=e.previousValue,!e.value&&this.cellDetails.column.validationRules||this.successCallBack(e,e.cell.parentElement,e.column,!0)(e)},v.prototype.generateCellArgs=function(){var e=this.parent,t=(this.parent.element.classList.remove("e-editing"),this.cellDetails.column),i={},e=(i[t.field]=Lh(t.field,this.cellDetails.rowData),e.editModule.getCurrentEditedData(this.form,i)),i=P.extend({},e),e=P.extend({},e,this.cellDetails.rowData),i=Lh(t.field,i),i=(P.isNullOrUndefined(t.field)||P.isUndefined(i)||P.setValue(t.field,i,e),{columnName:t.field,value:Lh(t.field,e),rowData:this.cellDetails.rowData,column:t,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1});return i.cell=this.form.parentElement,i.columnObject=t,i},v.prototype.saveCell=function(e){var t,i,n,r;!this.preventSaveCell&&this.form&&(t=this.parent,e||t.isEdit&&!this.validateFormObj())&&(this.preventSaveCell=!0,n=(i=this.generateCellArgs()).cell.parentElement,r=i.column,i.cell.removeAttribute("aria-label"),e?this.successCallBack(i,n,r)(i):(t.trigger(Ue,i,this.successCallBack(i,n,r)),t.notify(_i,{formObj:this.form})))},v.prototype.successCallBack=function(e,r,s,o){var a=this;return function(e){var t=a.parent;if(e.cell=e.cell||a.form.parentElement,e.columnObject=e.columnObject||s,e.cancel){if(a.preventSaveCell=!1,a.editNext){if(a.editNext=!1,a.cellDetails.rowIndex===a.index&&a.cellDetails.column.field===a.field)return;a.editCellExtend(a.index,a.field,a.isAdd)}}else{t.editModule.destroyWidgets([s]),t.isEdit=!1,t.editModule.destroyForm(),a.parent.notify(Yt,{});var i,n=t.getRowObjectFromUID(r.getAttribute("data-uid"));if(a.refreshTD(e.cell,s,n,e.value),a.parent.isReact&&(e.cell=a.newReactTd),P.removeClass([r],[ts,"e-batchrow"]),P.removeClass([e.cell],["e-editedbatchcell","e-boolcell"]),(!P.isNullOrUndefined(e.value)&&e.value.toString()===(P.isNullOrUndefined(a.cellDetails.value)?"":a.cellDetails.value).toString()&&!a.isColored||P.isNullOrUndefined(e.value)&&P.isNullOrUndefined(n.data[s.field])&&P.isNullOrUndefined(a.cellDetails.value)&&!e.cell.parentElement.classList.contains("e-insertedrow"))&&e.cell.classList.remove("e-updatedtd"),P.isNullOrUndefined(o)&&(n=t.isReact&&s.template&&"string"!=typeof s.template,i=t.parentDetails&&t.parentDetails.parentInstObj&&t.parentDetails.parentInstObj.isReact,n||i?t.requireTemplateRef?t.renderTemplates(function(){t.trigger(qe,e)}):(t.renderTemplates(),t.trigger(qe,e)):t.trigger(qe,e)),t.notify(Kt,{}),a.isColored=!1,0<a.parent.aggregates.length&&(a.parent.isReact||a.parent.isVue||a.parent.notify(Rt,{}),0<a.parent.groupSettings.columns.length&&!a.isAddRow(a.cellDetails.rowIndex)&&a.parent.notify(xt,{}),a.parent.isReact||a.parent.isVue)&&a.parent.notify(Rt,{}),a.preventSaveCell=!1,a.editNext){if(a.editNext=!1,a.cellDetails.rowIndex===a.index&&a.cellDetails.column.field===a.field&&a.prevEditedBatchCell)return;n=t.getColumnByField(a.field);n&&(n.allowEditing||!n.allowEditing&&t.focusModule.active&&t.focusModule.active.getTable().rows[a.crtRowIndex]&&t.focusModule.active.getTable().rows[a.crtRowIndex].classList.contains("e-insertedrow"))&&a.editCellExtend(a.index,a.field,a.isAdd)}o&&t.notify(on,{})}}},v.prototype.prevEditedBatchCellMatrix=function(){var e,t=[],i=this.parent.focusModule.active.getTable().querySelector(".e-editedbatchcell");return i&&(e=i.parentElement,t=[[].slice.call(this.parent.focusModule.active.getTable().rows).indexOf(e),[].slice.call(e.cells).indexOf(i)]),t},v.prototype.getDataByIndex=function(e){e=this.parent.getRowObjectFromUID(this.parent.getDataRows()[parseInt(e.toString(),10)].getAttribute("data-uid"));return e.changes||e.data},v.prototype.keyDownHandler=function(e){var t,i,n,r,s;(this.addBatchRow||("tab"===e.action||"shiftTab"===e.action)&&this.parent.isEdit)&&(t=this.parent,i=this.getBottomIndex(),r=E(e.target,b),this.addBatchRow||r&&!this.parent.isReact)&&(n=void 0,r&&(n=r.querySelector(".e-field")),this.addBatchRow||n)&&(r=this.parent.getVisibleColumns(),s="tab"===e.action?r.length-1:0,!this.addBatchRow&&r[parseInt(s.toString(),10)].field!==n.getAttribute("id").slice(this.parent.element.id.length)||(this.cellDetails.rowIndex===i&&"tab"===e.action?("Top"===t.editSettings.newRowPosition?(t.editSettings.newRowPosition="Bottom",this.addRecord(),t.editSettings.newRowPosition="Top"):this.addRecord(),this.addBatchRow=!1):this.saveCell()))},v.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify(ri,{}),this.parent.isEdit=!1,this.editNext=!1,this.mouseDownElement=void 0,this.isColored=!1)},v.prototype.getBottomIndex=function(){var e=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+e[ss].length-e[os].length-1};var kc=v;function v(e,t,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.initialRender=!0,this.validationColObj=[],this.addBatchRow=!1,this.prevEditedBatchCell=!1,this.parent=e,this.serviceLocator=t,this.renderer=i,this.focus=t.getService("focus"),this.addEventListener()}Mc=function(e,t){return(Mc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Mc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Nc,Lc=Ec),Nc.prototype.closeEdit=function(){Lc.prototype.closeEdit.call(this)},Nc.prototype.addRecord=function(e,t){Lc.prototype.addRecord.call(this,e,t)},Nc.prototype.endEdit=function(){Lc.prototype.endEdit.call(this)},Nc.prototype.updateRow=function(e,t){Lc.prototype.updateRow.call(this,e,t)},Nc.prototype.deleteRecord=function(e,t){Lc.prototype.deleteRecord.call(this,e,t)},Nc.prototype.startEdit=function(e){Lc.prototype.startEdit.call(this,e)};var Mc,Lc,Pc=Nc;function Nc(e,t,i){var n=Lc.call(this,e,t)||this;return n.parent=e,n.serviceLocator=t,n.renderer=i,n}Bc=function(e,t){return(Bc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};var Bc,zc,Uc=function(e,t){function i(){this.constructor=e}Bc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Uc=(q.DatePicker.Inject(q.MaskedDateTime),Uc(qc,zc=pc),qc.prototype.write=function(e){this.edit=this.parent.editModule,"datepickeredit"===e.column.editType?this.obj=new q.DatePicker(P.extend(Hc(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new q.DateTimePicker(P.extend(Hc(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params))),this.obj.appendTo(e.element)},qc);function qc(){return null!==zc&&zc.apply(this,arguments)||this}function Hc(e,t,i,n,r){var t="Dialog"!==t,s=Ph(e.column.format,e.column.type),o=Lh(e.column.field,e.rowData);return{floatLabelType:t?"Never":"Always",value:o?new Date(o):null,format:s,placeholder:t?"":e.column.headerText,enableRtl:i,enabled:mh(e.column,e.requestType,e.element),cssClass:n||null,close:function(e){e.event&&"escape"===e.event.action&&(this.edit.editCellDialogClose=!0)}.bind(r)}}Vc.prototype.read=function(e,t){return t},Vc.prototype.write=function(){},Vc.prototype.destroy=function(){};var jc=Vc;function Vc(e){this.parent=e}C.prototype.updateColTypeObj=function(){for(var e=this.parent.columnModel,t=0;t<e.length;t++)this.parent.editSettings.template||e[parseInt(t.toString(),10)].editTemplate?e[parseInt(t.toString(),10)].edit=P.extend(new C.editCellType.templateedit(this.parent),e[parseInt(t.toString(),10)].edit||{}):e[parseInt(t.toString(),10)].edit=P.extend(new C.editCellType[e[parseInt(t.toString(),10)].editType&&C.editCellType[e[parseInt(t.toString(),10)].editType]?e[parseInt(t.toString(),10)].editType:"defaultedit"](this.parent,this.serviceLocator),e[parseInt(t.toString(),10)].edit||{});this.parent.log("primary_column_missing")},C.prototype.getModuleName=function(){return"edit"},C.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName())for(var t=this.parent,i=0,n=Object.keys(e.properties);i<n.length;i++)switch(n[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(t.editSettings.allowAdding||t.editSettings.allowEditing||t.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),t.isEdit=!!t.editSettings.showAddNewRow,t.refresh()}},C.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new lc(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},C.prototype.initialEnd=function(){this.updateColTypeObj()},C.prototype.startEdit=function(e){var t=this.parent;if(t.editSettings.allowEditing&&(!t.isEdit||t.editSettings.showAddNewRow&&(!t.editSettings.showAddNewRow||P.isNullOrUndefined(t.element.querySelector("."+ts))))&&"Batch"!==t.editSettings.mode){if(this.parent.element.classList.add("e-editing"),!t.getSelectedRows().length||P.isNullOrUndefined(this.parent.getRowByIndex(parseInt(this.parent.getSelectedRows()[0].getAttribute("data-rowindex"),10)))){if(!e)return void this.showDialog("EditOperationAlert",this.alertDObj)}else e=e||t.getSelectedRows()[0];this.parent.enableVirtualization&&"Normal"===this.parent.editSettings.mode&&(i=parseInt(e.getAttribute("data-rowindex"),10),e=this.parent.getRowByIndex(i));var i=t.getContent().querySelector("tr:last-child"),n=t.getHeaderContent().querySelector("tbody");t.frozenRows&&P.isNullOrUndefined(i)&&n&&n.querySelector("tr:last-child")?this.isLastRow=e.rowIndex===parseInt(t.getHeaderContent().querySelector("tbody").querySelector("tr:last-child").getAttribute("data-rowindex"),10):i&&(this.isLastRow=e.rowIndex===i.rowIndex),"none"!==e.style.display&&(this.editModule.startEdit(e),this.refreshToolbar(),t.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}),t.editSettings.showAddNewRow)&&this.destroyToolTip()}},C.prototype.checkLastRow=function(e,t){var i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&t&&"add"===t.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?P.addClass([].slice.call(e.getElementsByClassName(b)),"e-lastrowadded"):i&&e&&e.classList&&P.addClass([].slice.call(e.getElementsByClassName(b)),"e-lastrowcell")},C.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(cr,{}),this.parent.editSettings.showAddNewRow&&this.destroyToolTip())},C.prototype.refreshToolbar=function(){this.parent.notify(Kt,{})},C.prototype.addRecord=function(e,t){var i;this.parent.editSettings.allowAdding&&(i={startEdit:!0},e||this.parent.notify(mn,i),i.startEdit)&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(e,t),this.refreshToolbar(),this.parent.notify("start-add",{}))},C.prototype.deleteRecord=function(e,t){var i=this.parent;i.editSettings.allowDeleting&&(t||i.getSelectedRecords().length||!P.isNullOrUndefined(i.commandDelIndex)?i.editSettings.showDeleteConfirmDialog?(this.fieldname=e,this.data=t,this.showDialog("ConfirmDelete",this.dialogObj)):this.editModule.deleteRecord(e,t):this.showDialog("DeleteOperationAlert",this.alertDObj))},C.prototype.deleteRow=function(e){this.deleteRowUid=e.getAttribute("data-uid");e=this.parent.getRowObjectFromUID(this.deleteRowUid);P.isNullOrUndefined(e)||this.deleteRecord(null,e.data)},C.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(P.isNullOrUndefined(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(Bi,{}),P.isNullOrUndefined(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},C.prototype.updateCell=function(e,t,i){this.editModule.updateCell(e,t,i)},C.prototype.updateRow=function(e,t){this.editModule.updateRow(e,t)},C.prototype.batchCancel=function(){this.closeEdit()},C.prototype.batchSave=function(){this.endEdit()},C.prototype.editCell=function(e,t){this.editModule.editCell(e,t)},C.prototype.editFormValidate=function(){var e=!this.formObj||this.formObj.validate(),t=!this.mFormObj||this.mFormObj.validate(),i=!this.frFormObj||this.frFormObj.validate();return e&&t&&i},C.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},C.prototype.getCurrentEditCellData=function(){var e=this.getCurrentEditedData(this.formObj.element,{});return e[Object.keys(e)[0]]},C.prototype.saveCell=function(){this.editModule.saveCell()},C.prototype.endEditing=function(){this.parent.editSettings.showAddNewRow||this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.isShowAddedRowValidate=!1,this.refreshToolbar()},C.prototype.showDialog=function(e,t){t.content="<div>"+this.l10n.getConstant(e)+"</div>",t.dataBind(),t.show(),this.parent.enableRtl&&t.refresh()},C.prototype.getValueFromType=function(e,t){var i=t;switch(e.type){case"number":i=isNaN(parseFloat(t))?null:parseFloat(t);break;case"boolean":"booleanedit"!==e.editType&&(i=t===this.l10n.getConstant("True")||!0===t);break;case"date":case"datetime":"datepickeredit"!==e.editType&&"datetimepickeredit"!==e.editType&&t&&t.length?i=new Date(t):""===t&&(i=null);break;case"dateonly":i=(t=t&&new Date(t))?t.getFullYear()+"-"+Fh(t.getMonth()+1)+"-"+Fh(t.getDate()):null}return i},C.prototype.destroyToolTip=function(){for(var e=0,t=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));e<t.length;e++){var i=t[e];P.remove(i)}this.parent.getContent().firstElementChild.style.position="relative",this.parent.isFrozenGrid()&&(this.parent.element.querySelector(".e-gridheader")&&(this.parent.element.querySelector(".e-gridheader").style.position=""),this.parent.element.querySelector(".e-gridcontent").style.position="")},C.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},C.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},C.prototype.alertClick=function(){this.alertDObj.hide()},C.prototype.dlgWidget=function(e,t){var t=this.parent.createElement("div",{id:this.parent.element.id+t}),i=(this.parent.element.appendChild(t),{showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"},cssClass:this.parent.cssClass||""}),e=(i.buttons=e,new L.Dialog(i));return e.isStringTemplate=!0,e.appendTo(t),e},C.prototype.dlgCancel=function(){this.parent.pagerModule&&(this.parent.pagerModule.isForceCancel=!1),this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide(),this.parent.notify("cancelcnfrmDlg",{})},C.prototype.dlgOk=function(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord(this.fieldname,this.data);break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.parent.pagerModule&&(this.parent.pagerModule.isForceCancel=!1),this.executeAction()}this.dlgCancel()},C.prototype.destroyEditComponents=function(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()},C.prototype.addEventListener=function(){this.parent.isDestroyed||(this.eventDetails=[{event:ct,handler:this.onPropertyChanged},{event:lt,handler:this.initialEnd},{event:Mt,handler:this.keyPressHandler},{event:Xt,handler:this.updateColTypeObj},{event:Yt,handler:this.destroyToolTip},{event:ei,handler:this.preventBatch},{event:ri,handler:this.destroyForm},{event:r,handler:this.destroyEditComponents}],wp(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(y,this.actionBeginFunction),this.parent.addEventListener(p,this.actionCompleteFunction))},C.prototype.removeEventListener=function(){this.parent.isDestroyed||(wp(this.parent,this.eventDetails,!1),this.parent.removeEventListener(p,this.actionCompleteFunction),this.parent.removeEventListener(y,this.actionBeginFunction))},C.prototype.actionComplete=function(e){["add","beginEdit","save","delete","cancel","filterAfterOpen","filterchoicerequest"].indexOf(e.requestType)<0&&(this.parent.isEdit=!!this.parent.editSettings.showAddNewRow),"batchsave"===e.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},C.prototype.getCurrentEditedData=function(e,t){var i=this.parent;if(i.editSettings.template)for(var n,r=[].slice.call(e.elements),s=0;s<r.length;s++)!(r[parseInt(s.toString(),10)].hasAttribute("name")&&"e-multi-hidden"!==r[parseInt(s.toString(),10)].className||r[parseInt(s.toString(),10)].classList.contains("e-multiselect"))||"hidden"===r[parseInt(s.toString(),10)].type&&(E(r[parseInt(s.toString(),10)],"e-switch-wrapper")||E(r[parseInt(s.toString(),10)],"e-checkbox-wrapper"))||(n=r[parseInt(s.toString(),10)].hasAttribute("name")?fh(r[parseInt(s.toString(),10)].getAttribute("name")):fh(r[parseInt(s.toString(),10)].getAttribute("id")),p=void 0,"checkbox"===(n=i.getColumnByField(n)||{field:n,type:r[parseInt(s.toString(),10)].getAttribute("type")}).type||"boolean"===n.type?p=r[parseInt(s.toString(),10)].checked:r[parseInt(s.toString(),10)].value?(p=r[parseInt(s.toString(),10)].value,r[parseInt(s.toString(),10)].ej2_instances&&r[parseInt(s.toString(),10)].ej2_instances.length&&!P.isNullOrUndefined(r[parseInt(s.toString(),10)].ej2_instances[0].value)&&(r[parseInt(s.toString(),10)].blur(),p=r[parseInt(s.toString(),10)].ej2_instances[0].value)):r[parseInt(s.toString(),10)].ej2_instances&&(p=r[parseInt(s.toString(),10)].ej2_instances[0].value),n.edit&&"string"==typeof n.edit.read?p=P.getValue(n.edit.read,window)(r[parseInt(s.toString(),10)],p):n.edit&&n.edit.read&&(p=n.edit.read(r[parseInt(s.toString(),10)],p)),p=i.editModule.getValueFromType(n,p),"radio"===r[parseInt(s.toString(),10)].type?r[parseInt(s.toString(),10)].checked&&A.DataUtil.setValue(n.field,p,t):("string"==typeof p&&this.parent.sanitize(p),A.DataUtil.setValue(n.field,p,t)));else{for(var o=i.columnModel.filter(function(e){return e.editTemplate}),a=0;a<o.length;a++)if(e[uh(o[parseInt(a.toString(),10)].field)]){var l=[].slice.call(e[uh(o[parseInt(a.toString(),10)].field)]).filter(function(e){return"input"===e.tagName.toLowerCase()}),h=(l=l.length?l:[e[uh(o[parseInt(a.toString(),10)].field)]]).filter(function(e){return!P.isNullOrUndefined(e.ej2_instances)});0===h.length&&(h=l.filter(function(e){return e.hasAttribute("name")}));for(s=0;s<h.length;s++){var p=this.getValue(o[parseInt(a.toString(),10)],h[parseInt(s.toString(),10)],t);"string"===o[parseInt(a.toString(),10)].type&&(p=this.parent.sanitize(p)),A.DataUtil.setValue(o[parseInt(a.toString(),10)].field,p,t)}}for(var d=[].slice.call(e.getElementsByClassName("e-field")),c=0,u=d.length;c<u;c++){var g=i.getColumnByUid(d[parseInt(c.toString(),10)].getAttribute("e-mappinguid"));g&&g.field&&(p=this.getValue(g,d[parseInt(c.toString(),10)],t),"string"!==g.type||g.isForeignColumn()&&"string"!=typeof p||(p=this.parent.sanitize(p)),A.DataUtil.setValue(g.field,p,t))}}return t},C.prototype.getValue=function(e,t,i){var n=(t.ej2_instances?t.ej2_instances[0]:t).value,r=this.parent,s=e.edit.read;return"checkbox"!==e.type&&"boolean"!==e.type||(n=t.checked),n="string"==typeof s?(s=P.getValue(s,window),r.editModule.getValueFromType(e,s(t,n))):r.editModule.getValueFromType(e,e.edit.read(t,n)),n=P.isNullOrUndefined(i[e.field])&&""===n?i[e.field]:n},C.prototype.onActionBegin=function(e){var t,i,n,r;("columnstate"===e.requestType||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&"sorting"===e.requestType)&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode?this.closeEdit():(r=this.parent.element.querySelector("."+ts),t=this.parent.element.querySelector("."+is),r&&this.parent.frozenRows&&"virtualscroll"===e.requestType&&parseInt(E(r,I).getAttribute(x),10)<this.parent.frozenRows||(i=-1===["filterAfterOpen","filterBeforeOpen","filterchoicerequest","filterSearchBegin","save","infiniteScroll","virtualscroll"].indexOf(e.requestType),n=!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!P.isNullOrUndefined(this.parent.element.querySelector(".e-editedrow")),r=(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.formObj&&n&&!this.formObj.isDestroyed&&(r||t||"cancel"===e.requestType)&&i,(!this.parent.enableVirtualization&&n&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&i&&!e.cancel||r)&&(this.destroyWidgets(),this.destroyForm())))},C.prototype.destroyWidgets=function(e){var t=this.parent;t.isWidgetsDestroyed=!0,t.editSettings.template&&((t=(t=Op(this.parent)).isReact?t:this.parent).destroyTemplate(["editSettingsTemplate"]),this.parent.isReact)&&this.parent.renderTemplates(),(e=e||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(function(e){return!P.isNullOrUndefined(e.editTemplate)})&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact)&&this.parent.renderTemplates();for(var i=0,n=e;i<n.length;i++){var r=n[i],s=r.edit.destroy;r.edit.destroy&&("string"==typeof s?(s=P.getValue(s,window))():r.edit.destroy())}for(var o,a=[].slice.call(this.formObj.element.elements),l=0;l<a.length;l++)a[parseInt(l.toString(),10)].hasAttribute("name")&&(o=a[parseInt(l.toString(),10)].parentElement.classList.contains("e-ddl")?a[parseInt(l.toString(),10)].parentElement.querySelector("input"):a[parseInt(l.toString(),10)]).ej2_instances&&o.ej2_instances.length&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy()},C.prototype.destroyForm=function(){this.destroyToolTip();for(var e=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj],t=this.parent.columnModel.filter(function(e){return e.editTemplate}),i=0;i<e.length;i++)e[parseInt(i.toString(),10)]&&e[parseInt(i.toString(),10)].element&&!e[parseInt(i.toString(),10)].isDestroyed&&(e[parseInt(i.toString(),10)].destroy(),!Op(this.parent).isReact||"Dialog"!==this.parent.editSettings.mode||P.isNullOrUndefined(this.parent.editSettings.template)&&!t.length||e[parseInt(i.toString(),10)].element.remove());this.destroyToolTip()},C.prototype.destroy=function(){var e,t=this.parent.element;t&&((t=!(!t.querySelector("."+Gr)||!t.querySelector("."+_r)))&&this.destroyForm(),this.removeEventListener(),0<(e=this.dialogObj.element).childElementCount&&(this.dialogObj.destroy(),P.remove(e)),0<(e=this.alertDObj.element).childElementCount&&(this.alertDObj.destroy(),P.remove(e)),t)&&this.editModule&&this.editModule.destroy()},C.prototype.keyPressHandler=function(e){switch(/(Mac)/i.test(navigator.platform)&&e.metaKey&&"ctrlEnter"===e.action&&(e.action="insert"),e.action){case"insert":this.addRecord();break;case"delete":"INPUT"===e.target.tagName&&!e.target.classList.contains("e-checkselect")||document.querySelector(".e-popup-open.e-edit-dialog")||this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":E(e.target,"e-unboundcelldiv")||"Batch"===this.parent.editSettings.mode||!(E(e.target,_r)||(this.parent.frozenRows||this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))&&E(e.target,Kr))||document.getElementsByClassName("e-popup-open").length||(e.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&!this.editCellDialogClose&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.curretRowFocus(e)),this.editCellDialogClose&&(this.editCellDialogClose=!1);break;case"tab":case"shiftTab":this.curretRowFocus(e)}},C.prototype.curretRowFocus=function(e){if(this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode){this.parent.isWidgetsDestroyed=!1;var t=E(e.target,"e-editedrow")||E(e.target,"e-addedrow");if(t){var i=[].slice.call(t.querySelectorAll(".e-input:not(.e-disabled)")),n=[].slice.call(t.querySelectorAll(".e-unboundcell"));if(n)for(var r=0;r<n.length;r++)i=i.concat([].slice.call(n[parseInt(r.toString(),10)].querySelectorAll(".e-btn:not(.e-hide)")));var s=(s=E(e.target,"e-rowcell"))&&s.classList.contains("e-unboundcell")?e.target:s,o=E(i[i.length-1],"e-rowcell");if(s===(o=o&&o.classList.contains("e-unboundcell")?i[i.length-1]:o)&&"tab"===e.action||"escape"===e.action||s===E(i[0],"e-rowcell")&&"shiftTab"===e.action&&!this.parent.editSettings.showAddNewRow){o=t.getAttribute("data-uid"),s=this.parent.getRows().map(function(e){return e.getAttribute("data-uid")}).indexOf(o);if(this.parent.frozenRows&&E(t,"e-content")&&(s-=this.parent.frozenRows),t.classList.contains("e-addedrow")&&(s=0),"escape"===e.action?this.closeEdit():(this.isShowAddedRowValidate=!0,this.parent.selectionModule.preventFocus=!1,this.endEdit(),this.isShowAddedRowValidate=!1),this.parent.focusModule.active&&(!this.parent.editSettings.showAddNewRow||t.classList.contains("e-editedrow")||this.parent.editSettings.showAddNewRow&&t.classList.contains("e-addedrow")&&P.isNullOrUndefined(this.parent.element.querySelector('.e-griderror:not([style*="display: none"])')))){var a=0,l=this.parent.focusModule.active.matrix;if(l&&l.matrix.length&&l.matrix[parseInt(s.toString(),10)])for(var h=l.matrix[parseInt(s.toString(),10)],r=0;r<h.length;r++)if(0<l[parseInt(r.toString(),10)]){a=r;break}this.parent.focusModule.active.matrix.current=[s,a]}}this.parent.editSettings.showAddNewRow&&"tab"===e.action&&E(e.target,"e-addedrow")&&(this.isShowAddedRowValidate=!0)}}},C.prototype.preventBatch=function(e){this.preventObj=e,this.showDialog("BatchSaveLostChanges",this.dialogObj)},C.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},C.prototype.applyFormValidation=function(e,t){var i=this.parent,n="Dialog"!==this.parent.editSettings.mode?(i.editSettings.showAddNewRow&&i.element.querySelector("."+ts)?i.element.querySelector("."+ts):i.element).getElementsByClassName("e-gridform")[parseInt(0..toString(),10)]:P.select("#"+i.element.id+"_dialogEdit_wrapper .e-gridform",document),r={},s={},o={};e=e||i.getColumns();for(var a=0;a<e.length;a++)(e[parseInt(a.toString(),10)].visible||"Dialog"===i.editSettings.mode&&(-1!==i.groupSettings.columns.indexOf(e[parseInt(a.toString(),10)].field)||"Dialog"!==i.editSettings.mode))&&e[parseInt(a.toString(),10)].validationRules&&P.isNullOrUndefined(t)&&mp(e[parseInt(a.toString(),10)],1,r,s,o,e.length);r=P.extend(r,s,o),this.parent.editModule.formObj=this.createFormObj(n,t||r)},C.prototype.createFormObj=function(e,t){var n=this;return new z.FormValidator(e,{rules:t,locale:this.parent.locale,validationComplete:function(e){n.validationComplete(e)},customPlacement:function(e,t){var i=e.getAttribute("e-mappinguid"),i={column:n.parent.getColumnByUid(i),error:t,inputElement:e,value:e.value};(!(event&&event.relatedTarget&&event.relatedTarget.classList.contains("e-cancelbutton"))&&!n.parent.editSettings.showAddNewRow||n.parent.editSettings.showAddNewRow&&event&&event.target&&(E(event.target,n.parent.element.id+"_update",!0)||E(event.target,"e-grid-menu")&&(event.target.classList.contains("e-save")||event.target.querySelector(".e-save"))||n.isShowAddedRowValidate||E(event.target,"e-unboundcell")&&E(event.target,"e-update")||"enter"===event.action&&(E(event.target,"e-content")||E(event.target,"e-addedrow")))||n.parent.editSettings.showAddNewRow&&!P.isNullOrUndefined(n.parent.element.querySelector("."+ts)))&&n.valErrorPlacement(e,t),n.isShowAddedRowValidate=!1,n.parent.notify(rn,i)}})},C.prototype.valErrorPlacement=function(e,t){var i,n;this.parent.isEdit&&(i=t.getAttribute("for"),(n=this.getElemTable(e).querySelector("#"+gh(i)+"_Error"))?n.querySelector(".e-tip-content").innerHTML=t.outerHTML:this.createTooltip(e,t,i,""))},C.prototype.getElemTable=function(e){var t=this.parent,e="Dialog"!==t.editSettings.mode?(e=t.frozenRows&&P.closest(e,"."+I)&&t.frozenRows>(parseInt(P.closest(e,"."+I).getAttribute(x),10)||0),this.parent.isFrozenGrid()?t.element:e||t.editSettings.showAddNewRow&&(t.enableVirtualization||t.enableInfiniteScrolling)?t.getHeaderTable():t.getContentTable()):P.select("#"+t.element.id+"_dialogEdit_wrapper",document);return e},C.prototype.resetElemPosition=function(e,t){var i,t=E(t.element,b);t&&(t=t.getBoundingClientRect().right)<(i=e.getBoundingClientRect().right)&&(e.style.left=e.offsetLeft-(i-t)+"px")},C.prototype.validationComplete=function(e){var t,i;this.parent.isEdit&&(t=this.getElemTable(e.element).querySelector("#"+gh(e.inputName)+"_Error"),this.parent.editSettings.showAddNewRow&&!t&&e.element&&(i=E(e.element,"e-rowcell").querySelector(".e-error"))&&i.classList.remove("e-error"),t)&&("failure"===e.status?(t.style.display="",this.resetElemPosition(t,e)):t.style.display="none")},C.prototype.createTooltip=function(e,t,i,n){var r,s,o,a,l=this.formObj.element,h=E(e,"e-virtual-validation"),p=(h&&(l=this.virtualFormObj.element),this.parent.getContent().firstElementChild),d=p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth,c="Dialog"!==this.parent.editSettings.mode,u=P.closest(e,"."+b),g=P.closest(e,"."+I),f=!1,m=!1,y=this.parent.editSettings.showAddNewRow&&!P.isNullOrUndefined(E(e,is))&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling),S=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,v=[].slice.call(this.parent.getContent().getElementsByClassName(I)),C=("Batch"===this.parent.editSettings.mode&&(v=[].slice.call(this.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)")),1<=S)&&v.length>=S&&v[v.length-1].getAttribute(x)===g.getAttribute(x)&&(m=!0),c&&((f=(this.parent.frozenRows||y)&&(C=this.parent.editSettings.showAddNewRow?".e-row:not(.e-hiddenrow.e-addedrow)":".e-row:not(.e-hiddenrow)",f=(a=(C=[].slice.call(this.parent.getHeaderTable().querySelector(N).querySelectorAll(C))).length>(parseInt(g.getAttribute(x),10)||0))&&parseInt(g.getAttribute(x),10)===C.length-1,1===(C=[].slice.call(this.parent.getHeaderTable().querySelector(N).querySelectorAll(".e-row:not(.e-hiddenrow)"))).length)&&(C[0].classList.contains("e-addedrow")||C[0].classList.contains("e-insertedrow"))?!0:f)||1<=S&&v.length>=S&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||u.classList.contains("e-lastrowcell")&&!g.classList.contains(is))||m)&&(r=!0),c?a?this.parent.getHeaderTable():this.parent.getContentTable():P.select("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document)),f=C.getBoundingClientRect(),g=(c?this.parent.element.getBoundingClientRect():f).left,m=P.closest(e,"td"),w=(m||e.parentElement).getBoundingClientRect(),i=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+n+";top:"+((a?w.top+w.height:w.bottom-f.top)+C.scrollTop+9)+"px;left:"+(w.left-g+C.scrollLeft+w.width/2)+"px;max-width:"+w.width+"px;text-align:center;"}),n=(this.parent.cssClass&&i.classList.add(this.parent.cssClass),c&&f.left<g&&(i.style.left=parseInt(i.style.left,10)-f.left+g+"px"),this.parent.createElement("div",{className:"e-tip-content"})),C=(n.appendChild(t),r?((s=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),s.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((s=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),s.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),i.appendChild(n),i.appendChild(s),h||!this.parent.frozenRows&&!y||"Dialog"===this.parent.editSettings.mode?h?this.virtualFormObj.element.appendChild(i):"Dialog"!==this.parent.editSettings.mode&&this.parent.isFrozenGrid()?u.classList.contains("e-unfreeze")?(P.addClass([i],"e-unfreeze"),this.formObj.element.appendChild(i)):((o=P.closest(u,".e-gridheader")?this.parent.element.querySelector(".e-gridheader"):1===v.length?this.parent.element.querySelector(".e-gridcontent").querySelector(".e-content"):this.parent.element.querySelector(".e-gridcontent")).appendChild(i),o.style.position="relative"):this.formObj.element.appendChild(i):(("Normal"===this.parent.editSettings.mode?P.closest(e,".e-editcell"):P.closest(e,"."+$r)).style.position="relative",i.style.position="absolute","Batch"===this.parent.editSettings.mode||P.closest(e,"."+Yr)||P.closest(e,"."+Jr)||this.parent.frozenRows||y?this.parent.isFrozenGrid()?u.classList.contains("e-unfreeze")?(P.addClass([i],"e-unfreeze"),l.appendChild(i)):((o=P.closest(u,".e-gridheader")?this.parent.element.querySelector(".e-gridheader"):1===v.length?this.parent.element.querySelector(".e-gridcontent").querySelector(".e-content"):this.parent.element.querySelector(".e-gridcontent")).appendChild(i),o.style.position="relative"):l.appendChild(i):this.mFormObj.element.appendChild(i)),P.isNullOrUndefined(u)||(u.classList.contains("e-fixedfreeze")?i.classList.add("e-fixederror"):(u.classList.contains("e-leftfreeze")||u.classList.contains("e-rightfreeze"))&&i.classList.add("e-freezeerror")),!r&&c&&p.getBoundingClientRect().bottom<w.bottom+w.height&&(a=this.parent.getContent().querySelector(".e-content"),0===this.parent.currentViewData.length&&0===a.scrollTop?a.scrollTop=i.offsetHeight+s.scrollHeight:p.scrollTop=p.scrollTop+i.offsetHeight+s.scrollHeight),parseInt(document.defaultView.getComputedStyle(i,null).getPropertyValue("font-size"),10));i.getBoundingClientRect().width<w.width&&2<=i.querySelector("label").getBoundingClientRect().height/(1.2*C)&&(i.style.width=i.style.maxWidth),(this.parent.frozenRows||y)&&"Dialog"!==this.parent.editSettings.mode?i.style.left=m.offsetLeft+(m.offsetWidth/2-i.offsetWidth/2)+"px":i.style.left=parseInt(i.style.left,10)-i.offsetWidth/2+"px",(c&&!d&&!this.parent.allowPaging||this.parent.frozenRows||y)&&(f=L.calculateRelativeBasedPosition(m,i),i.style.top=f.top+w.height+9+"px"),r&&(!d||"auto"===this.parent.height||this.parent.frozenRows&&y||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling||i.classList.contains("e-freezeerror")&&i.classList.contains("e-fixederror")?i.style.bottom=w.height+9+"px":(g=p.scrollWidth>p.offsetWidth?ph():0,t=-1===this.parent.height.toString().indexOf("%")?parseInt(this.parent.height,10):p.offsetHeight,i.style.bottom=t-p.querySelector("table").offsetHeight-g+w.height+9+"px"),v.length<S&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType&&(n=(this.parent.frozenRows?(y?this.parent.frozenRows+1:this.parent.frozenRows)+(v.length-1):v.length-1)*this.parent.getRowHeight(),h=this.parent.getContent().clientHeight-n,i.style.bottom=9+h+"px"),i.style.top=null)},C.prototype.checkColumnIsGrouped=function(e){return!(e.visible||-1<this.parent.groupSettings.columns.indexOf(e.field))},C.AddEditors=function(e){C.editCellType=P.extend(C.editCellType,e)},C.editCellType={dropdownedit:Sc,numericedit:Cc,datepickeredit:Uc,datetimepickeredit:Uc,booleanedit:gc,defaultedit:xc,templateedit:jc};jc=C;function C(e,t){this.isShowAddedRowValidate=!1,this.editType={Inline:Ac,Normal:Ac,Batch:kc,Dialog:Pc},this.fieldname="",this.data={},this.editCellDialogClose=!1,this.parent=e,this.serviceLocator=t,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}w.prototype.destroy=function(){var e=this.parent.element;(e.querySelector("."+_r)||e.querySelector("."+Gr))&&e&&(this.removeEventListener(),this.unWireEvents(),P.isNullOrUndefined(this.dlgObj)||!this.dlgObj.element||this.dlgObj.isDestroyed||this.dlgObj.destroy())},w.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,O.ResponsiveDialogAction.isColumnChooser),this.parent.enableAdaptiveUI&&(this.parent.on(Mr,this.renderResponsiveColumnChooserDiv,this),this.parent.on(kr,this.renderResponsiveChangeAction,this))},w.prototype.rtlUpdate=function(){P.isNullOrUndefined(this.innerDiv)||(this.parent.enableRtl?P.addClass([].slice.call(this.innerDiv.getElementsByClassName("e-checkbox-wrapper")),["e-rtl"]):P.removeClass([].slice.call(this.innerDiv.getElementsByClassName("e-checkbox-wrapper")),["e-rtl"]))},w.prototype.addEventListener=function(){this.parent.isDestroyed||(P.EventHandler.add(document,"click",this.clickHandler,this),this.parent.on(g,this.enableAfterRenderEle,this),this.parent.on(lt,this.render,this),this.parent.addEventListener(ae,this.hideDialogFunction),this.parent.on(r,this.destroy,this),this.parent.on(ki,this.rtlUpdate,this),this.parent.on(Fn,this.onResetColumns,this),this.parent.on(nr,this.setFullScreenDialog,this),this.parent.enableAdaptiveUI&&(this.parent.on(Mr,this.renderResponsiveColumnChooserDiv,this),this.parent.on(kr,this.renderResponsiveChangeAction,this)))},w.prototype.removeEventListener=function(){this.parent.isDestroyed||(P.EventHandler.remove(document,"click",this.clickHandler),this.parent.off(lt,this.render),this.parent.off(r,this.destroy),this.parent.off(g,this.enableAfterRenderEle),this.parent.off(ki,this.rtlUpdate),this.parent.off(Fn,this.onResetColumns),this.parent.removeEventListener(ae,this.hideDialogFunction),this.parent.off(nr,this.setFullScreenDialog),this.parent.enableAdaptiveUI&&(this.parent.off(nr,this.setFullScreenDialog),this.parent.off(Mr,this.renderResponsiveColumnChooserDiv),this.parent.off(kr,this.renderResponsiveChangeAction)))},w.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.enableAdaptiveUI||this.renderDlgContent(),this.getShowHideService=this.serviceLocator.getService("showHideService")},w.prototype.clickHandler=function(e){var t=e.target;if(!this.isCustomizeOpenCC){if(P.isNullOrUndefined(P.closest(t,".e-cc-toolbar"))&&P.isNullOrUndefined(P.closest(t,".e-cc")))P.isNullOrUndefined(this.dlgObj)||!this.dlgObj.visible||t.classList.contains("e-toolbar-items")||(this.dlgObj.hide(),this.clearActions(),this.refreshCheckboxState(),this.isDlgOpen=!1);else if(t.classList.contains("e-columnchooser-btn")||t.classList.contains("e-cc-toolbar")){if(this.initialOpenDlg&&this.dlgObj.visible||!this.isDlgOpen)return void(this.isDlgOpen=!0)}else t.classList.contains("e-cc-cancel")&&(t.parentElement.querySelector(".e-ccsearch").value="",this.columnChooserSearch(""),this.removeCancelIcon(),this.refreshCheckboxButton());(this.parent.detailTemplate||this.parent.childGrid)&&(this.targetdlg=e.target)}this.isCustomizeOpenCC&&e.target.classList.contains("e-cc-cancel")&&this.refreshCheckboxState(),this.parent.enableAdaptiveUI?this.parent.enableRtl&&P.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"]):this.rtlUpdate()},w.prototype.hideDialog=function(){!P.isNullOrUndefined(this.dlgObj)&&this.dlgObj.visible&&(this.dlgObj.hide(),this.isDlgOpen=!1)},w.prototype.renderColumnChooser=function(e,t,i){if(this.dlgObj.visible||!this.parent.detailTemplate&&!this.parent.childGrid||this.hideOpenedDialog(),this.dlgObj.visible)this.hideDialog(),this.addcancelIcon(),this.clearActions(),this.refreshCheckboxState();else{if(this.beforeOpenColumnChooserEvent().cancel)return;i&&(this.targetdlg=i),this.refreshCheckboxState(),this.dlgObj.dataBind(),this.dlgObj.element.style.maxHeight="430px";var n=this.dlgObj.element.style.display,r=(this.dlgObj.element.style.display="block",this.parent.getHeaderContent().classList.contains("e-sticky")),s=P.closest(i,".e-toolbar-item"),o=void 0;r?(o=s.getBoundingClientRect(),this.dlgObj.element.classList.add("e-sticky")):(this.dlgObj.element.classList.remove("e-sticky"),o=L.calculateRelativeBasedPosition(s,this.dlgObj.element)),this.dlgObj.element.style.display=n,this.dlgObj.element.style.top=o.top+P.closest(i,".e-cc-toolbar").getBoundingClientRect().height+"px";P.isNullOrUndefined(P.closest(i,".e-bigger"))||(this.dlgObj.width=258),P.Browser.isDevice?(this.dlgObj.target=document.body,this.dlgObj.position={X:"center",Y:"center"},this.dlgObj.refreshPosition(),this.dlgObj.open=this.mOpenDlg.bind(this)):this.parent.enableRtl?this.dlgObj.element.style.left=i.offsetLeft+"px":this.dlgObj.element.style.left=o.left-250+P.closest(i,".e-cc-toolbar").clientWidth+2+"px",this.removeCancelIcon(),this.dlgObj.show(),this.parent.notify(Gi,{dialog:this.dlgObj})}this.rtlUpdate()},w.prototype.openColumnChooser=function(e,t){this.isCustomizeOpenCC=!0,this.parent.enableAdaptiveUI&&(this.isColumnChooserOpen||this.parent.showResponsiveCustomColumnChooser(),this.isColumnChooserOpen=!1,this.renderDlgContent()),this.dlgObj.visible?this.hideDialog():this.beforeOpenColumnChooserEvent().cancel||(this.isInitialOpen?this.refreshCheckboxState():(this.dlgObj.content=this.renderChooserList(),this.updateIntermediateBtn()),this.dlgObj.dataBind(),this.dlgObj.position={X:"center",Y:"center"},P.isNullOrUndefined(e)?(this.parent.enableAdaptiveUI&&(this.dlgObj.position={X:"",Y:""}),this.dlgObj.refreshPosition()):(this.dlgObj.element.style.top="",this.dlgObj.element.style.left="",this.dlgObj.element.style.top=t+"px",this.dlgObj.element.style.left=e+"px"),this.dlgObj.beforeOpen=this.customDialogOpen.bind(this),this.dlgObj.show(),this.isInitialOpen=!0,this.dlgObj.beforeClose=this.customDialogClose.bind(this))},w.prototype.enableAfterRenderEle=function(e){e.module===this.getModuleName()&&e.enable&&this.render()},w.prototype.keyUpHandler=function(e){"Escape"===e.key&&this.resetColumnState(),this.setFocus(E(e.target,"e-cclist"))},w.prototype.setFocus=function(e){var t=this.dlgDiv.querySelector(".e-colfocus");t&&t.classList.remove("e-colfocus"),e&&e.classList.add("e-colfocus")},w.prototype.customDialogOpen=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");P.EventHandler.add(e,"keyup",this.columnChooserManualSearch,this)},w.prototype.customDialogClose=function(){var e=this.dlgObj.content.querySelector("input.e-ccsearch");P.EventHandler.remove(e,"keyup",this.columnChooserManualSearch)},w.prototype.getColumns=function(){return this.parent.getColumns().filter(function(e){return"checkbox"!==e.type&&!0===e.showInColumnChooser||"checkbox"===e.type&&void 0!==e.field})},w.prototype.renderDlgContent=function(){var e=this.parent.enableAdaptiveUI;this.dlgDiv=this.parent.createElement("div",{className:"e-ccdlg e-cc",id:this.parent.element.id+"_ccdlg"}),e||this.parent.element.appendChild(this.dlgDiv),this.dlgObj=new L.Dialog({header:this.parent.enableAdaptiveUI?null:this.l10n.getConstant("ChooseColumns"),showCloseIcon:!1,closeOnEscape:!1,locale:this.parent.locale,visible:!1,enableRtl:this.parent.enableRtl,target:document.getElementById(this.parent.element.id),content:this.renderChooserList(),width:250,cssClass:this.parent.cssClass?"e-cc "+this.parent.cssClass:"e-cc",animationSettings:{effect:"None"}}),e||(this.dlgObj.buttons=[{click:this.confirmDlgBtnClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),isPrimary:!0,cssClass:this.parent.cssClass?"e-cc e-cc_okbtn "+this.parent.cssClass:"e-cc e-cc_okbtn"}},{click:this.clearBtnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat e-cc e-cc-cnbtn "+this.parent.cssClass:"e-flat e-cc e-cc-cnbtn",content:this.l10n.getConstant("CancelButton")}}]);this.dlgObj.isStringTemplate=!0,this.dlgObj.appendTo(this.dlgDiv),e&&((e=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv"))&&e.appendChild(this.dlgDiv),this.dlgObj.open=this.mOpenDlg.bind(this),this.dlgObj.target=document.querySelector(".e-rescolumnchooser > .e-dlg-content > .e-mainfilterdiv")),this.wireEvents()},w.prototype.renderChooserList=function(){this.mainDiv=this.parent.createElement("div",{className:"e-main-div e-cc"});var e=this.parent.createElement("div",{className:"e-cc-searchdiv e-cc e-input-group"}),t=this.parent.createElement("input",{className:"e-ccsearch e-cc e-input",attrs:{placeholder:this.l10n.getConstant("Search"),cssClass:this.parent.cssClass}}),i=this.parent.createElement("span",{className:"e-ccsearch-icon e-icons e-cc e-input-group-icon",attrs:{title:this.l10n.getConstant("Search")}}),n=this.parent.createElement("div",{className:"e-cc-contentdiv"}),i=(this.innerDiv=this.parent.createElement("div",{className:"e-innerdiv e-cc"}),e.appendChild(t),e.appendChild(i),this.searchBoxObj=new aa(t,this.serviceLocator),this.refreshCheckboxList(this.parent.getColumns()));return this.innerDiv.appendChild(i),n.appendChild(this.innerDiv),this.parent.enableAdaptiveUI?((t=this.parent.createElement("div",{className:"e-cc-searchBox"})).appendChild(e),this.mainDiv.appendChild(t)):this.mainDiv.appendChild(e),this.mainDiv.appendChild(n),this.mainDiv},w.prototype.confirmDlgBtnClick=function(e){this.stateChangeColumns=[],this.changedStateColumns=[],this.changedColumns=0<this.changedColumns.length?this.changedColumns:this.unchangedColumns,this.changedColumnState(this.changedColumns);var t=this.ulElement.querySelector(".e-uncheck")&&this.ulElement.querySelectorAll(".e-uncheck:not(.e-selectall)").length;P.isNullOrUndefined(e)||(t<this.parent.getColumns().length&&(this.hideColumn.length&&this.columnStateChange(this.hideColumn,!1),this.showColumn.length&&this.columnStateChange(this.showColumn,!0),this.getShowHideService.setVisible(this.stateChangeColumns,this.changedStateColumns),this.clearActions(),this.parent.notify(Yt,{module:"edit"}),0===this.parent.getCurrentViewRecords().length)&&this.parent.element.querySelector(".e-emptyrow").querySelector("td").setAttribute("colSpan",this.parent.getVisibleColumns().length.toString()),this.parent.enableAdaptiveUI&&this.parent.scrollModule&&this.parent.scrollModule.refresh(),this.parent.editSettings.showAddNewRow&&this.parent.notify(Lr,{}))},w.prototype.onResetColumns=function(e){"columnstate"===e.requestType&&this.resetColumnState()},w.prototype.renderResponsiveColumnChooserDiv=function(e){"open"===e.action?(this.isColumnChooserOpen=!0,this.openColumnChooser()):"clear"===e.action?this.clearBtnClick():"confirm"===e.action&&this.confirmDlgBtnClick(!0)},w.prototype.resetColumnState=function(){this.showColumn=[],this.hideColumn=[],this.changedColumns=[],this.filterColumns=[],this.searchValue="",this.hideDialog()},w.prototype.changedColumnState=function(e){for(var t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)],i=this.parent.getColumnByUid(i);this.changedStateColumns.push(i)}},w.prototype.columnStateChange=function(e,t){for(var i=0;i<e.length;i++){var n=e[parseInt(i.toString(),10)],n=this.parent.getColumnByUid(n);"checkbox"!==n.type&&(n.visible=t),this.stateChangeColumns.push(n)}},w.prototype.clearActions=function(){this.resetColumnState(),this.addcancelIcon()},w.prototype.clearBtnClick=function(){this.clearActions(),this.parent.notify(On,{dialog:this.dlgObj})},w.prototype.checkstatecolumn=function(e,t,i){void 0===i&&(i=!1);var n=this.parent.getColumnByUid(t);e?(-1!==this.hideColumn.indexOf(t)&&this.hideColumn.splice(this.hideColumn.indexOf(t),1),-1!==this.showColumn.indexOf(t)||n&&n.visible||this.showColumn.push(t)):(-1!==this.showColumn.indexOf(t)&&this.showColumn.splice(this.showColumn.indexOf(t),1),-1===this.hideColumn.indexOf(t)&&n&&n.visible&&this.hideColumn.push(t)),i?(e?this.unchangedColumns:this.changedColumns).push(t):-1!==this.changedColumns.indexOf(t)?this.changedColumns.splice(this.changedColumns.indexOf(t),1):this.changedColumns.push(t)},w.prototype.columnChooserSearch=function(e){var t,i=!1,n=this.dlgDiv.querySelector(".e-footer-content"),r=this.ulElement.querySelector(".e-check")&&this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length;this.isInitialOpen=!0,n&&(t=n.querySelector(".e-btn").ej2_instances[0]),""===e?(this.removeCancelIcon(),this.filterColumns=this.getColumns(),i=!0):this.filterColumns=new A.DataManager(this.getColumns()).executeLocal((new A.Query).where("headerText",this.searchOperator,e,!0,this.parent.columnChooserSettings.ignoreAccent)),this.filterColumns.length?(this.innerDiv.innerHTML=" ",this.innerDiv.classList.remove("e-ccnmdiv"),this.innerDiv.appendChild(this.refreshCheckboxList(this.filterColumns)),i?(t&&r&&(t.disabled=!1),r&&this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Zn,{disabled:!1})):(this.addcancelIcon(),this.refreshCheckboxButton())):((n=this.parent.createElement("span",{className:"e-cc e-nmatch"})).innerHTML=this.l10n.getConstant("Matchs"),this.innerDiv.innerHTML=" ",this.innerDiv.appendChild(n),this.innerDiv.classList.add("e-ccnmdiv"),t&&(t.disabled=!0),this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Zn,{disabled:!0})),this.flag=!0,this.stopTimer()},w.prototype.wireEvents=function(){P.EventHandler.add(this.dlgObj.element,"click",this.checkBoxClickHandler,this),P.EventHandler.add(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch,this),P.EventHandler.add(this.dlgObj.element,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent()},w.prototype.unWireEvents=function(){this.parent.isDestroyed||(this.dlgObj&&this.dlgObj.element&&(P.EventHandler.remove(this.dlgObj.element,"click",this.checkBoxClickHandler),P.EventHandler.remove(this.dlgObj.element,"keyup",this.keyUpHandler)),this.searchBoxObj&&(P.EventHandler.remove(this.searchBoxObj.searchBox,"keyup",this.columnChooserManualSearch),this.searchBoxObj.unWireEvent()))},w.prototype.checkBoxClickHandler=function(e){var t,i=E(e.target,"e-checkbox-wrapper");if(i){i.querySelector(".e-selectall")?this.updateSelectAll(!i.querySelector(".e-check")):xh(i.parentElement),i.querySelector(".e-chk-hidden").focus(),i.querySelector(".e-check")?t=!0:i.querySelector(".e-uncheck")&&(t=!1),this.updateIntermediateBtn();var i=E(i,"e-ccheck").getAttribute("uid"),n=this.searchValue&&this.searchValue.length?this.filterColumns:this.parent.getColumns();if(i===this.parent.element.id+"-selectAll"){this.changedColumns=[],this.unchangedColumns=[];for(var r=0;r<n.length;r++)n[parseInt(r.toString(),10)].showInColumnChooser&&this.checkstatecolumn(t,n[parseInt(r.toString(),10)].uid,!0)}else this.checkstatecolumn(t,i);this.refreshCheckboxButton(),this.setFocus(E(e.target,"e-cclist"))}},w.prototype.updateIntermediateBtn=function(){var e,t=this.ulElement.children.length-1,i=[],n=this.ulElement.children[0].querySelector(".e-frame"),r=this.ulElement.querySelectorAll(".e-check:not(.e-selectall)").length,s=(this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Zn,{disabled:!1}):(e=this.dlgObj.btnObj[0]).disabled=!1,n.parentElement.querySelector("input"));t===r?(i=["e-check"],Rh(s,!0)):r?(i=["e-stop"],s.indeterminate=!0):(Rh(s,!(i=["e-uncheck"])),this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Zn,{disabled:!0}):e.disabled=!0),this.parent.enableAdaptiveUI||e.dataBind(),P.removeClass([n],["e-check","e-stop","e-uncheck"]),P.addClass([n],i)},w.prototype.updateSelectAll=function(e){for(var t=0,i=[].slice.call(this.ulElement.getElementsByClassName("e-frame"));t<i.length;t++){var n=i[t],r=(Dh(n,e),n.parentElement.querySelector("input"));n.classList.contains("e-check")?Rh(r,!0):n.classList.contains("e-uncheck")&&Rh(r,!1)}},w.prototype.refreshCheckboxButton=function(){for(var e=this.parent.getVisibleColumns(),t=0;t<e.length;t++){var i=e[parseInt(t.toString(),10)].uid;-1===this.prevShowedCols.indexOf(i)&&"checkbox"!==e[parseInt(t.toString(),10)].type&&this.prevShowedCols.push(i)}for(t=0;t<this.hideColumn.length;t++){var n=this.prevShowedCols.indexOf(this.hideColumn[parseInt(t.toString(),10)]);-1!==n&&this.prevShowedCols.splice(n,1)}for(var r,s=0!==this.showColumn.length?1:this.prevShowedCols.length,o=(this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Zn,{disabled:!1}):(r=this.dlgDiv.querySelector(".e-footer-content").querySelector(".e-btn").ej2_instances[0]).disabled=!1,[]),a=[].slice.call(this.parent.element.getElementsByClassName("e-cc-chbox")),t=0,l=a.length;t<l;t++){i=E(a[parseInt(t.toString(),10)],"e-ccheck").getAttribute("uid");o.push(i)}var h=this.showColumn.filter(function(e){return-1!==o.indexOf(e)});0===s&&0===h.length&&(this.parent.enableAdaptiveUI?this.parent.enableAdaptiveUI&&this.responsiveDialogRenderer&&this.parent.notify(Zn,{disabled:!0}):r.disabled=!0),this.parent.enableAdaptiveUI||r.dataBind()},w.prototype.refreshCheckboxList=function(e){this.ulElement=this.parent.createElement("ul",{className:"e-ccul-ele e-cc"});var t=this.l10n.getConstant("SelectAll"),i=this.parent.createElement("li",{className:"e-cclist e-cc e-cc-selectall"}),t=this.createCheckBox(t,!1,this.parent.element.id+"-selectAll");e.length&&(t.querySelector(".e-checkbox-wrapper").firstElementChild.classList.add("e-selectall"),t.querySelector(".e-frame").classList.add("e-selectall"),this.checkState(t.querySelector(".e-icons"),!0),i.appendChild(t),this.ulElement.appendChild(i)),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?P.addClass([t],this.parent.cssClass.split(" ")):P.addClass([t],[this.parent.cssClass]));for(var n=0;n<e.length;n++){var r=e[parseInt(n.toString(),10)];this.renderCheckbox(r)}return this.ulElement},w.prototype.refreshCheckboxState=function(){this.dlgObj.element.querySelector(".e-cc.e-input").value="",this.columnChooserSearch("");for(var e=this.parent,t=this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)"),i=0,n=t.length;i<n;i++){var r=t[parseInt(i.toString(),10)],s=void 0,s=(this.parent.childGrid||this.parent.detailTemplate?E(this.dlgObj.element.querySelectorAll(".e-cc-chbox:not(.e-selectall)")[parseInt(i.toString(),10)],"e-ccheck"):E(r,"e-ccheck")).getAttribute("uid"),s=e.getColumnByUid(s),o=[].slice.call(r.parentElement.getElementsByClassName("e-uncheck"));s.visible&&!o.length?(r.checked=!0,this.checkState(r.parentElement.querySelector(".e-icons"),!0)):(r.checked=!1,this.checkState(r.parentElement.querySelector(".e-icons"),!1))}},w.prototype.checkState=function(e,t){t?P.classList(e,["e-check"],["e-uncheck"]):P.classList(e,["e-uncheck"],["e-check"])},w.prototype.createCheckBox=function(e,t,i){var n=(t?this.cBoxTrue:this.cBoxFalse).cloneNode(!0),r=(this.parent.enableAdaptiveUI||!this.parent.enableRtl||n.classList.contains("e-rtl")||n.classList.add("e-rtl"),n.querySelector(".e-label")),s=n.querySelector("input");return Rh(s,t),r.setAttribute("id",i+"label"),r.innerHTML=e,s.setAttribute("aria-labelledby",r.id),Eh(i,n,"e-ccheck")},w.prototype.renderCheckbox=function(e){var t,i,n;e.showInColumnChooser&&(t=this.parent.createElement("li",{className:"e-cclist e-cc",styles:"list-style:None",id:"e-ccli_"+e.uid}),n=-1!==this.hideColumn.indexOf(e.uid),i=-1!==this.showColumn.indexOf(e.uid),n=this.createCheckBox(e.headerText,e.visible&&!n||i,e.uid),t.appendChild(n),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?P.addClass([n],this.parent.cssClass.split(" ")):P.addClass([n],[this.parent.cssClass])),this.ulElement.appendChild(t)),this.isInitialOpen&&this.updateIntermediateBtn()},w.prototype.columnChooserManualSearch=function(e){this.addcancelIcon(),this.searchValue=e.target.value,this.stopTimer(),this.startTimer(e)},w.prototype.startTimer=function(e){var t=this,e=t.flag||13===e.keyCode?0:500;this.timer=window.setInterval(function(){t.columnChooserSearch(t.searchValue)},e)},w.prototype.stopTimer=function(){window.clearInterval(this.timer)},w.prototype.addcancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.add("e-cc-cancel"),this.dlgDiv.querySelector(".e-cc-cancel").setAttribute("title",this.l10n.getConstant("Clear"))},w.prototype.removeCancelIcon=function(){this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").classList.remove("e-cc-cancel"),this.dlgDiv.querySelector(".e-cc.e-ccsearch-icon").setAttribute("title",this.l10n.getConstant("Search"))},w.prototype.mOpenDlg=function(){P.Browser.isDevice&&(this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.remove("e-input-focus"),this.dlgObj.element.querySelectorAll(".e-cc-chbox")[0].focus()),this.parent.enableAdaptiveUI&&this.dlgObj.element.querySelector(".e-cc-searchdiv").classList.add("e-input-focus")},w.prototype.getModuleName=function(){return"columnChooser"},w.prototype.hideOpenedDialog=function(){for(var e=[].slice.call(document.getElementsByClassName("e-ccdlg")).filter(function(e){return e.classList.contains("e-popup-open")}),t=0,i=e.length;t<i;t++)this.parent.element.id+"_ccdlg"===e[parseInt(t.toString(),10)].id&&!e[parseInt(t.toString(),10)].classList.contains("e-dialog")||e[parseInt(t.toString(),10)].ej2_instances[0].hide()},w.prototype.beforeOpenColumnChooserEvent=function(){var e={requestType:"beforeOpenColumnChooser",element:this.parent.element,columns:this.getColumns(),cancel:!1,searchOperator:this.parent.columnChooserSettings.operator};return this.parent.trigger(Ge,e),this.searchOperator=e.searchOperator,e},w.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action},w.prototype.showCustomColumnChooser=function(e){this.responsiveDialogRenderer.isCustomDialog=e,this.responsiveDialogRenderer.showResponsiveDialog()};var Gc=w;function w(e,t){this.filterColumns=[],this.showColumn=[],this.hideColumn=[],this.changedColumns=[],this.unchangedColumns=[],this.isDlgOpen=!1,this.isColumnChooserOpen=!1,this.initialOpenDlg=!0,this.stateChangeColumns=[],this.changedStateColumns=[],this.isInitialOpen=!1,this.isCustomizeOpenCC=!1,this.searchOperator="startswith",this.prevShowedCols=[],this.hideDialogFunction=this.hideDialog.bind(this),this.parent=e,this.serviceLocator=t,this.addEventListener(),this.cBoxTrue=B.createCheckBox(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=B.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden e-cc e-cc-chbox",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&P.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?P.addClass([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):P.addClass([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass])),this.parent.enableAdaptiveUI&&this.setFullScreenDialog()}Wc.getQuery=function(e,t){var i=t.generateQuery(!0).requiresCount();return t.isRemote()&&(e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length?i.lazyLoad=[]:i.take(e.pageSettings.totalRecordsCount)),i},Wc.prototype.getFData=function(e,t){return Oh(t,{},e,this.foreignKeyData[t.field])[0]},Wc.prototype.getGridRowModel=function(e,t,i,n){void 0===n&&(n=0);var r=[],s=t.length;if(s){for(var o=0;o<s;o++,n++){var a={isExpand:!1},a=(a.data=t[parseInt(o.toString(),10)],a.index=n,(i.childGrid||i.detailTemplate)&&("All"===i.hierarchyPrintMode?a.isExpand=!0:"Expanded"===i.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(n.toString(),10)]&&(a.isExpand=i.expandedRows[parseInt(n.toString(),10)].isExpand)),new zr(a));a.cells=this.generateCells(e,i),r.push(a)}this.processColumns(r)}return r},Wc.prototype.generateCells=function(e,t){var i=[];if(t.childGridLevel)for(var n=t.childGridLevel,r=0;r<n;r++)i.push(this.generateCell({},O.CellType.Indent));for(var s=0,o=e;s<o.length;s++){var a=o[s];i.push(this.generateCell(a,O.CellType.Data))}return i},Wc.prototype.getColumnData=function(e){var t,i=this,n=[],r=e.getForeignKeyColumns();if(r.length){for(var s=0;s<r.length;s++){var o="result"in r[parseInt(s.toString(),10)].dataSource?new A.DataManager(r[parseInt(s.toString(),10)].dataSource.result):r[parseInt(s.toString(),10)].dataSource;n.push(o.executeQuery(new A.Query))}t=Promise.all(n).then(function(e){for(var t=0;t<r.length;t++)i.foreignKeyData[r[parseInt(t.toString(),10)].field]=e[parseInt(t.toString(),10)].result})}return t},Wc.prototype.getHeaders=function(e,t){this.hideColumnInclude=!!t,this.colDepth=qh(e);for(var i=[],n=0;n<this.colDepth;n++)i[parseInt(n.toString(),10)]=new zr({}),i[parseInt(n.toString(),10)].cells=[];return i=this.processColumns(i),{rows:i=this.processHeaderCells(i,e),columns:this.generateActualColumns(e)}},Wc.prototype.getConvertedWidth=function(e){var t=parseFloat(e);return-1!==e.indexOf("%")?this.parent.element.getBoundingClientRect().width*t/100:t},Wc.prototype.generateActualColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,n=e;i<n.length;i++){var r=n[i];r.commands||(r.columns?(r.visible||this.hideColumnInclude)&&0!==this.getCellCount(r,0)&&this.generateActualColumns(r.columns,t):(r.visible||this.hideColumnInclude)&&t.push(r))}return t},Wc.prototype.processHeaderCells=function(e,t){for(var i=t,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].commands||(e=this.appendGridCells(i[parseInt(n.toString(),10)],e,0));return e},Wc.prototype.appendGridCells=function(e,t,i){if(e.columns||!1===e.visible&&!this.hideColumnInclude||e.commands){if(e.columns)for(var n=this.getCellCount(e,0),r=(n&&t[parseInt(i.toString(),10)].cells.push(new qr({cellType:O.CellType.StackedHeader,column:e,colSpan:n})),void 0),s=0,o=e.columns.length;s<o;s++)e.columns[parseInt(s.toString(),10)].visible&&!r&&(r=!0),t=this.appendGridCells(e.columns[parseInt(s.toString(),10)],t,i+1)}else t[parseInt(i.toString(),10)].cells.push(this.generateCell(e,O.CellType.Header,this.colDepth-i,i));return t},Wc.prototype.generateCell=function(e,t,i,n){e={visible:e.visible,isDataCell:t===O.CellType.Data,column:e,cellType:t,rowSpan:i,index:n};return(!e.rowSpan||e.rowSpan<2)&&delete e.rowSpan,new qr(e)},Wc.prototype.processColumns=function(e){var t=this.parent,i=[];t.enableColumnVirtualization&&(i=t.getColumnIndexesInView());for(var n=0,r=e.length;n<r;n++)if(t.allowGrouping)for(var s=0,o=t.groupSettings.columns.length-1;s<o;s++)t.enableColumnVirtualization&&-1===i.indexOf(s)||e[parseInt(n.toString(),10)].cells.splice(0,0,this.generateCell({},O.CellType.HeaderIndent));return e},Wc.prototype.getCellCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getCellCount(e.columns[parseInt(i.toString(),10)],t);else(e.visible||this.hideColumnInclude)&&t++;return t},Wc.prototype.checkAndExport=function(t,e){Object.keys(t).some(function(e){return!t[""+e]})||e()},Wc.prototype.failureHandler=function(e,t,i){var n=this;return function(){e[t.id]=!0,n.checkAndExport(e,i)}},Wc.prototype.createChildGrid=function(e,t,i,n){i=new Al(this.parent.detailRowModule.getGridModel(e,t,i)),e.isPrinting=!1,i.parentDetails={parentID:e.element.id,parentPrimaryKeys:e.getPrimaryKeyFieldNames(),parentKeyField:e.childGrid.queryString,parentKeyFieldValue:P.getValue(i.queryString,t.data),parentRowData:t.data},e=rh("child-grid"),t=P.createElement("div",{id:e,styles:"display: none"});return document.body.appendChild(t),n[""+(i.id=e)]=!1,i.isExportGrid=!0,{childGrid:i,element:t}},Wc.prototype.getGridExportColumns=function(e){for(var t=[],i=0,n=e;i<n.length;i++)"checkbox"!==n[parseInt(i.toString(),10)].type&&t.push(n[parseInt(i.toString(),10)]);return t},Wc.prototype.getForeignKeyData=function(){return this.foreignKeyData};var _c=Wc;function Wc(e,t){this.hideColumnInclude=!1,this.foreignKeyData={},!(this.parent=e).parentDetails&&t&&(this.foreignKeyData=t)}Qc.prototype.returnFormattedValue=function(e,t){return!P.isNullOrUndefined(e.value)&&e.value?this.valueFormatter.getFormatFunction(t)(e.value):""},Qc.prototype.formatCellValue=function(e){var t,i;return e.isForeignKey&&(e.value=P.getValue(e.column.foreignKeyValue,Oh(e.column,{},e.value)[0])),"number"===e.column.type&&void 0!==e.column.format&&""!==e.column.format?("string"==typeof e.column.format&&(e.column.format={format:e.column.format}),e.value||0===e.value?this.internationalization.getNumberFormat(e.column.format)(e.value):""):"boolean"===e.column.type&&""!==e.value?e.value?"true":"false":"date"!==e.column.type&&"dateonly"!==e.column.type&&"datetime"!==e.column.type&&"time"!==e.column.type||void 0===e.column.format?(P.isNullOrUndefined(e.column.type)||P.isNullOrUndefined(e.value))&&P.isNullOrUndefined(e.value)?"":e.value.toString():("string"==typeof e.value&&(e.value=new Date(e.value)),"string"==typeof e.column.format?(t=void 0,i=e.column.format,t="date"===e.column.type||"dateonly"===e.column.type?{type:"date",skeleton:i}:"time"===e.column.type?{type:"time",skeleton:i}:{type:"dateTime",skeleton:i},this.returnFormattedValue(e,t)):e.column.format instanceof Object&&void 0===e.column.format.type?e.value.toString():(i=void 0,i="date"===e.column.type||"dateonly"===e.column.type?{type:e.column.format.type,format:e.column.format.format,skeleton:e.column.format.skeleton}:"time"===e.column.type?{type:"time",format:e.column.format.format,skeleton:e.column.format.skeleton}:{type:"dateTime",format:e.column.format.format,skeleton:e.column.format.skeleton},this.returnFormattedValue(e,i)))};var Kc=Qc;function Qc(e){this.valueFormatter=new V(e),this.internationalization=new P.Internationalization(e)}Yc.prototype.getModuleName=function(){return"ExcelExport"},Yc.prototype.init=function(e){null!==e.element&&""===e.element.id&&(e.element.id=(new Date).toISOString(),this.isElementIdChanged=!0),this.parent=e,this.parent.isDestroyed||(this.isExporting=void 0,this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.footer=void 0,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.exportValueFormatter=new Kc(e.locale),e.id=rh("main-grid"),this.gridPool[e.id]=!1)},Yc.prototype.Map=function(e,t,i,n,r,s){var o=e,e=(this.gridPool={},!e.childGrid&&!e.detailTemplate||!P.isNullOrUndefined(t)&&"None"===t.hierarchyExportMode||(e.expandedRows=Bh(e).expandedRows),{requestType:"beforeExcelExport",gridObject:o,cancel:!1,isMultipleExport:i,workbook:n,isCsv:r,isBlob:s,isChild:this.isChild,grpFooterTemplates:this.grpFooterTemplates});return o.trigger(oi,e),e.cancel?new Promise(function(e){return e()}):(this.parent.log("exporting_begin",this.getModuleName()),this.data=new Nr(o),this.isExporting=!0,this.isBlob=e.isBlob,this.isChild=e.isChild,this.grpFooterTemplates=e.grpFooterTemplates,this.isCsvExport=e.isCsv||!1,Bl(t)&&zl(t,o),this.processRecords(o,t,e.isMultipleExport,e.workbook))},Yc.prototype.exportingSuccess=function(e){this.isExporting=!1,this.parent.trigger(ai,this.isBlob?{promise:this.blobPromise}:{gridInstance:this.parent}),this.parent.log("exporting_complete",this.getModuleName()),e(this.book)},Yc.prototype.processRecords=function(n,r,s,o){var e,t,i,a=this;return P.isNullOrUndefined(r)||P.isNullOrUndefined(r.dataSource)?P.isNullOrUndefined(r)||"CurrentPage"!==r.exportType||this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()?(e=[],t=_c.getQuery(n,this.data),this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()&&((r=P.isNullOrUndefined(r)?{hierarchyExportMode:"All"}:r).hierarchyExportMode="None"===r.hierarchyExportMode?"None":"All","All"===r.hierarchyExportMode)&&(t.lazyLoad=[]),e.push(this.data.getData({},t)),e.push(this.helper.getColumnData(n)),new Promise(function(t,i){Promise.all(e).then(function(e){a.init(n),a.processInnerRecords(n,r,s,o,e[0]).then(function(){a.exportingSuccess(t)})}).catch(function(e){i(a.book),a.parent.trigger(oe,e)})})):new Promise(function(e){a.init(n),a.processInnerRecords(n,r,s,o,a.parent.getCurrentViewRecords()),a.exportingSuccess(e)}):(r.dataSource=r.dataSource instanceof A.DataManager?r.dataSource:new A.DataManager(r.dataSource),i=r.query||new A.Query,(P.isNullOrUndefined(i.isCountRequired)||n.aggregates)&&(i.isCountRequired=!0),new Promise(function(t){r.dataSource.executeQuery(i).then(function(e){a.init(n),a.processInnerRecords(n,r,s,o,e).then(function(){a.exportingSuccess(t)})})}))},Yc.prototype.processInnerRecords=function(i,n,r,s,o){var a,l=this,e=(this.groupedColLength=i.groupSettings.columns.length,5),h=[],p=qh(i.columns),d=!P.isNullOrUndefined(n);return d&&!P.isNullOrUndefined(n.multipleExport)&&(this.expType=P.isNullOrUndefined(n.multipleExport.type)?"AppendToSheet":n.multipleExport.type,P.isNullOrUndefined(n.multipleExport.blankRows)||(e=n.multipleExport.blankRows)),P.isNullOrUndefined(s)?(this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.sheet.images=[]):"NewSheet"===this.expType?(this.workSheet=s.worksheets,this.rows=[],this.columns=[],this.sheet.images=[],this.styles=s.styles):(this.workSheet=[],this.rows=s.worksheets[0].rows,this.columns=s.worksheets[0].columns,this.styles=s.styles,this.sheet.images=s.worksheets[0].images,this.rowLength=this.rows[this.rows.length-1].index+e,this.rowLength++),d&&(P.isNullOrUndefined(r)?(P.isNullOrUndefined(n.header)||this.processExcelHeader(JSON.parse(JSON.stringify(n.header))),P.isNullOrUndefined(n.footer)||(this.footer=JSON.parse(JSON.stringify(n.footer)))):(P.isNullOrUndefined(n.header)||!r&&"NewSheet"!==this.expType||this.processExcelHeader(JSON.parse(JSON.stringify(n.header))),P.isNullOrUndefined(n.footer)||"AppendToSheet"===this.expType&&r||(this.footer=JSON.parse(JSON.stringify(n.footer))))),this.includeHiddenColumn=d&&n.includeHiddenColumn,new Promise(function(e,t){i.childGridLevel=0,h=l.processGridExport(i,n,o),l.globalResolve=e,l.gridPool[i.id]=!0,l.helper.checkAndExport(l.gridPool,l.globalResolve)}).then(function(){var e,t=[];return l.organiseRows(h,h[0].index,t),l.rows=l.rows.concat(t),P.isNullOrUndefined(l.footer)||("AppendToSheet"!==l.expType||r)&&"NewSheet"!==l.expType||l.processExcelFooter(l.footer),0<l.columns.length&&(l.sheet.columns=l.columns),l.sheet.rows=l.rows,l.sheet.enableRtl=l.parent.enableRtl,l.parent.allowFiltering&&i.getVisibleColumns().length&&d&&n.enableFilter&&(t=n.header?n.header.headerRows||n.header.rows.length:0,t={row:p+t,column:l.groupedColLength?l.groupedColLength+1:l.sheet.columns[0].index,lastRow:l.sheet.rows.length,lastColumn:l.sheet.columns.length},l.sheet.autoFilters=t),l.workSheet.push(l.sheet),l.book.worksheets=l.workSheet,l.book.styles=l.styles,i.notify("finalPageSetup",l.book),r||(l.isCsvExport?(d&&!P.isNullOrUndefined(n.separator)&&","!==n.separator&&(a=n.separator),e=new j.Workbook(l.book,"csv",i.locale,P.defaultCurrencyCode,a),l.isBlob?l.blobPromise=e.saveAsBlob("text/csv"):d&&n.fileName?e.save(n.fileName):e.save("Export.csv")):(e=new j.Workbook(l.book,"xlsx",i.locale,P.defaultCurrencyCode),l.isBlob?l.blobPromise=e.saveAsBlob("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"):d&&n.fileName?e.save(n.fileName):e.save("Export.xlsx")),l.isElementIdChanged&&(i.element.id=""),delete i.expandedRows),s})},Yc.prototype.organiseRows=function(e,t,i){if(e.length)for(var n=0;n<e.length;n++){var r=e[parseInt(n.toString(),10)],s=r.childRows;s?(r.index=t++,delete r.childRows,i.push(r),t=this.organiseRows(s,t,i)):(r.index=t++,i.push(r))}return t},Yc.prototype.processGridExport=function(e,t,i){var n=[],r=(P.isNullOrUndefined(t)||P.isNullOrUndefined(t.theme)||(this.theme=t.theme),!e.childGrid&&!e.detailTemplate||P.isNullOrUndefined(t)||(e.hierarchyPrintMode=t.hierarchyExportMode||"Expanded"),new _c(e,this.helper.getForeignKeyData())),s=Bl(t)?Xl(t.columns,e.enableColumnVirtualization):r.getGridExportColumns(e.columns),s=r.getHeaders(s,this.includeHiddenColumn),o=e.groupSettings.columns.length?e.groupSettings.columns.length-1:0,n=this.processHeaderContent(e,s,o,n);return n=P.isNullOrUndefined(t)||!Object.keys(t).length||!P.isNullOrUndefined(t.dataSource)||"CurrentPage"!==t.exportType||e.groupSettings.enableLazyLoading&&!e.getDataModule().isRemote()?this.processRecordContent(e,i,s,t,void 0,n,r):this.processRecordContent(e,i,s,t,e.currentViewData,n,r),e.notify(ji,{excelRows:n,type:"excel"}),this.capTemplate=void 0,this.footerTemplates=[],this.grpFooterTemplates=[],this.aggIndex=0,this.totalAggregates=0,n},Yc.prototype.processRecordContent=function(e,t,i,n,r,s,o){var a=!P.isNullOrUndefined(r)&&r.length?r:t.result;return P.isNullOrUndefined(a.level)?this.processRecordRows(e,a,i,0,0,n,s,o):this.processGroupedRows(e,a,i,a.level,0,n,s,o),P.isNullOrUndefined(t.aggregates)||(P.isNullOrUndefined(r)||this.parent.groupSettings.enableLazyLoading?(i=t.result.GroupGuid?t.result.records:t.result,this.processAggregates(e,i,s)):this.processAggregates(e,t.result,s,r)),s},Yc.prototype.processGroupedRows=function(e,t,i,n,r,s,o,a){for(var l=0,h=t;l<h.length;l++){var p=h[l],d=[],c={},u=(c.index=1+n-1,e.getColumnByField(p.field)),g={value:p.key,column:u,style:void 0,isForeignKey:u.isForeignColumn()},u=e.getColumnByField(p.field).headerText+": "+(u.enableGroupByFormat?p.key:this.exportValueFormatter.formatCellValue(g))+" - ",g=(1<p.count?u+=p.count+" items":u+=p.count+" item",{captionText:u,type:this.isCsvExport?"CSV":"Excel",data:p});this.parent.trigger(rt,g),c.value=g.captionText,c.style=this.getCaptionThemeStyle(this.theme),P.isNullOrUndefined(g.style)||(c.style=this.mergeOptions(c.style,g.style));u=new Ns(e).generateRows(p);if(this.fillAggregates(e,u,t.level+t.childLevels-1,o,this.rowLength),d.push(c),0<o[o.length-1].cells.length){for(var f=t.level+t.childLevels+u[0].cells.length,m=0,y=0,S=o[o.length-1].cells;y<S.length;y++){var v=S[y];v.index<f&&(f=v.index),v.index>m&&(m=v.index),d[d.length-1].index!==v.index&&d.push(v)}for(1<f-c.index&&(c.colSpan=f-c.index);m<i.columns.length+n+t.childLevels;){var C={};C.index=m+1,C.style=this.getCaptionThemeStyle(this.theme),d.push(C),m++}}else{for(var w=0,b=0,I=i.columns;b<I.length;b++)I[b].visible&&w++;c.colSpan=t.childLevels+w}o[o.length-1].cells=d,this.rowLength++,this.groupedColLength<8&&1<n&&(o[o.length-1].grouping={outlineLevel:n-1,isCollapsed:!0}),!P.isNullOrUndefined(t.childLevels)&&0<t.childLevels?(this.processGroupedRows(e,p.items,i,p.items.level,r,s,o,a),this.processAggregates(e,p,o,void 0,n-1+t.childLevels,!0)):(r=this.processRecordRows(e,p.items,i,n-1,r,s,o,a),this.processAggregates(e,p,o,void 0,n-1,!0))}},Yc.prototype.processRecordRows=function(e,t,i,n,r,s,o,a){for(var l=1,h=[],i=i.columns,p=0,d=a.getGridRowModel(i,t,e,r);p<d.length;p++){var c=d[p],h=[];r++;for(var l=1,u=void 0,g=0,f=c.cells.length;g<f;g++){var m,y,S,v=c.cells[parseInt(g.toString(),10)];v.cellType===O.CellType.Data&&(y=(v=v.column).field,y=P.isNullOrUndefined(y)?"":v.valueAccessor(y,c.data,v),y=P.isNullOrUndefined(y)?"":y,m=void("dateonly"===v.type&&"string"==typeof y&&y&&(m=y.split(/[^0-9.]/),y=new Date(parseInt(m[0],10),parseInt(m[1],10)-1,parseInt(m[2],10)))),v.isForeignColumn&&v.isForeignColumn()&&(m=a.getFData(y,v),y=P.getValue(v.foreignKeyValue,m)),P.isNullOrUndefined(y)||(S=l+n+e.childGridLevel,y={data:c.data,column:v,foreignKeyData:m,value:y,style:void 0,colSpan:1,cell:v={}},e.trigger(li,y),P.isNullOrUndefined(y.image)||P.isNullOrUndefined(y.image.base64)||(u=this.setImage(y,S),y.image.height&&""!==y.value&&(u+=30)),P.isNullOrUndefined(y.hyperLink)||(y.cell.hyperlink={target:y.hyperLink.target},y.value=y.hyperLink.displayText||y.value),(v=y.cell).index=S,v.value=y.value,""===y.data&&e.childGridLevel&&1===l&&(y={style:{hAlign:"left"}},v.colSpan=e.getVisibleColumns().length,v.value=this.l10n.getConstant("EmptyRecord")),1<y.colSpan&&(v.colSpan=y.colSpan),P.isNullOrUndefined(y.style)?v.style={name:e.element.id+"column"+(l+n)}:(S=this.getColumnStyle(e,l+n),v.style=this.mergeOptions(this.styles[parseInt(S.toString(),10)],y.style)),h.push(v)),l++)}var C,w,b,I,x={index:this.rowLength++,cells:h};P.isNullOrUndefined(u)||(x.height=u),this.groupedColLength&&this.groupedColLength<8&&0<n+1&&(x.grouping={outlineLevel:n+1,isCollapsed:!0}),o.push(x),!c.isExpand&&!this.isChild||P.isNullOrUndefined(e.childGrid)&&P.isNullOrUndefined(e.detailTemplate)||(P.isNullOrUndefined(e.childGrid)?(this.parent.trigger(di,I={parentRow:c,row:x,value:{},action:"excelexport",gridInstance:e}),x.childRows=this.processDetailTemplate(I)):(e.isPrinting=!0,w=!P.isNullOrUndefined(s)&&s.exportType?s.exportType:"AllPages",C=(w=this.helper.createChildGrid(e,c,w,this.gridPool)).childGrid,w=w.element,C.actionFailure=a.failureHandler(this.gridPool,C,this.globalResolve),C.childGridLevel=e.childGridLevel+1,b=P.extend(s,{columns:null,dataSource:null,query:null}),this.parent.trigger(pi,I={childGrid:C,row:c,exportProperties:b}),C.beforeDataBound=this.childGridCell(x,C,b,c),C.appendTo(w))),e.notify(Hi,{rowObj:c,type:"excel",excelRows:o})}return r},Yc.prototype.processDetailTemplate=function(e){var o,a,t,l=this,h=[],n=2;if(e.value.columnHeader||e.value.rows){var p=function(e,t){var i={};return P.isNullOrUndefined(e.index)&&(e.index=o,o++),i.index=e.index+n,P.isNullOrUndefined(e.value)||(i.value=e.value),P.isNullOrUndefined(e.colSpan)||(i.colSpan=e.colSpan),P.isNullOrUndefined(e.rowSpan)||(i.rowSpan=e.rowSpan),i.style=t?l.getHeaderThemeStyle(l.theme):l.getRecordThemeStyle(l.theme),P.isNullOrUndefined(e.style)||(t={fontColor:e.style.fontColor,fontName:e.style.fontName,fontSize:e.style.fontSize,hAlign:e.style.excelHAlign,vAlign:e.style.excelVAlign,rotation:e.style.excelRotation,bold:e.style.bold,indent:e.style.indent,italic:e.style.italic,underline:e.style.underline,backColor:e.style.backColor,wrapText:e.style.wrapText,borders:e.style.excelBorders,numberFormat:e.style.excelNumberFormat,type:e.style.excelType,strikeThrough:e.style.strikeThrough},i.style=l.mergeOptions(t,i.style)),P.isNullOrUndefined(e.image)||P.isNullOrUndefined(e.image.base64)||(1<e.rowSpan?l.setImage(e,i.index):(a=l.setImage(e,i.index),e.image.height&&""!==e.value&&(a+=30))),P.isNullOrUndefined(e.hyperLink)||(i.hyperlink={target:e.hyperLink.target},i.value=e.hyperLink.displayText),i},i=function(e,t){for(var i=[],n=o=0;n<e.cells.length;n++){var r=e.cells[parseInt(n.toString(),10)],r=p(r,t);i.push(r)}var s={index:l.rowLength++,cells:i};P.isNullOrUndefined(a)||(s.height=a,a=null),h.push(s)};if(e.value.columnHeader)for(var r=0;r<e.value.columnHeader.length;r++)i(e.value.columnHeader[parseInt(r.toString(),10)],!0);if(e.value.rows)for(r=0;r<e.value.rows.length;r++)i(e.value.rows[parseInt(r.toString(),10)])}else e.value.image?(a=this.setImage(e.value,n),t={index:this.rowLength++,cells:[{index:n,style:this.getRecordThemeStyle(this.theme)}]},P.isNullOrUndefined(a)||(t.height=a,a=null),h.push(t)):e.value.text?(t={index:this.rowLength++,cells:[{index:n,value:e.value.text,style:this.getRecordThemeStyle(this.theme)}]},h.push(t)):e.value.hyperLink&&(t={index:this.rowLength++,cells:[{index:2,hyperlink:{target:e.value.hyperLink.target},value:e.value.hyperLink.displayText,style:this.getRecordThemeStyle(this.theme)}]},h.push(t));for(r=0;r<h.length;r++)h[parseInt(r.toString(),10)].grouping={outlineLevel:1,isCollapsed:!e.parentRow.isExpand,isHidden:!e.parentRow.isExpand};return h},Yc.prototype.setImage=function(e,t){P.isNullOrUndefined(this.sheet.images)&&(this.sheet.images=[]);var i={image:e.image.base64,row:this.rowLength,column:t,lastRow:this.rowLength,lastColumn:t};return e.image.width&&e.image.height&&(i.width=e.image.width,i.height=e.image.height),this.sheet.images.push(i),this.columns[t-1].width=e.image.width||this.columns[t-1].width,e.image.height||50},Yc.prototype.childGridCell=function(r,s,o,a){var l=this;return function(e){s.beforeDataBound=null,e.cancel=!0,0===e.result.length&&(e.result=[""]),r.childRows=l.processGridExport(s,o,e);for(var t=l.parent.groupSettings.columns.length,i=r.childRows,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].grouping={outlineLevel:t+s.childGridLevel,isCollapsed:!a.isExpand,isHidden:!a.isExpand};return s.destroy(),P.detach(s.element),l.gridPool[s.id]=!0,l.helper.checkAndExport(l.gridPool,l.globalResolve),r}},Yc.prototype.processAggregates=function(e,t,i,n,r,s){var o=new As(e),a=(a=o.getColumns()).filter(function(e){return P.isNullOrUndefined(e.commands)&&"checkbox"!==e.type}),l=(e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),void 0),l=P.isNullOrUndefined(n)?t:n;return void 0===r&&(r=0),0<e.groupSettings.columns.length&&s?0<(n=new Ms(e).generateRows(l,{level:l.level})).length&&(i=this.fillAggregates(e,n,r,i)):(r=0<e.groupSettings.columns.length&&!s?e.groupSettings.columns.length:r,0<(n=o.generateRows(l,t.aggregates,null,null,a)).length&&!s&&(r=e.groupSettings.columns.length?r-1:r,i=this.fillAggregates(e,n,r,i))),i},Yc.prototype.fillAggregates=function(e,t,i,n,r){for(var s=0,o=t;s<o.length;s++){for(var a,l,h=o[s],p=[],d=!0,c=0,u=0,g=h.cells;u<g.length;u++){var f=g[u],m={},y={};if(P.isNullOrUndefined(f.attributes.index)||(y=this.parent.getColumnByIndex(f.attributes.index)),f.cellType!==O.CellType.DetailFooterIntent&&"checkbox"!==y.type&&!y.commands&&(f.visible||this.includeHiddenColumn))if(c++,f.isDataCell){var d=!1,y=!P.isNullOrUndefined(f.column.footerTemplate),S=!P.isNullOrUndefined(f.column.groupFooterTemplate),v=!P.isNullOrUndefined(f.column.groupCaptionTemplate);if(m.index=c+i+e.childGridLevel,y)m.value=this.getAggreateValue(e,O.CellType.Summary,f.column.footerTemplate,f,h);else if(S)m.value=this.getAggreateValue(e,O.CellType.GroupSummary,f.column.groupFooterTemplate,f,h);else if(v)m.value=this.getAggreateValue(e,O.CellType.CaptionSummary,f.column.groupCaptionTemplate,f,h);else for(var C=0,w=Object.keys(h.data[f.column.field]);C<w.length;C++)w[C]===f.column.type&&(P.isNullOrUndefined(h.data[f.column.field].Sum)?P.isNullOrUndefined(h.data[f.column.field].Average)?P.isNullOrUndefined(h.data[f.column.field].Max)?P.isNullOrUndefined(h.data[f.column.field].Min)?P.isNullOrUndefined(h.data[f.column.field].Count)?P.isNullOrUndefined(h.data[f.column.field].TrueCount)?P.isNullOrUndefined(h.data[f.column.field].FalseCount)?P.isNullOrUndefined(h.data[f.column.field].Custom)||(m.value=h.data[f.column.field].Custom):m.value=h.data[f.column.field][f.column.field+" - falsecount"]:m.value=h.data[f.column.field][f.column.field+" - truecount"]:m.value=h.data[f.column.field][f.column.field+" - count"]:m.value=h.data[f.column.field][f.column.field+" - min"]:m.value=h.data[f.column.field][f.column.field+" - max"]:m.value=h.data[f.column.field][f.column.field+" - average"]:m.value=h.data[f.column.field][f.column.field+" - sum"]);m.style=this.getCaptionThemeStyle(this.theme),this.aggregateStyle(f.column,m.style,f.column.field);v=f.attributes.style;v.textAlign&&(m.style.hAlign=v.textAlign.toLowerCase()),this.parent.trigger(Mn,{row:h,type:y?"Footer":S?"GroupFooter":"GroupCaption",style:m,cell:f}),p.push(m)}else void 0===r&&(m.index=c+i+e.childGridLevel,m.style=this.getCaptionThemeStyle(this.theme),p.push(m))}P.isNullOrUndefined(r)?(l={},l=!(this.groupedColLength<8&&0<this.groupedColLength)||e.groupSettings.enableLazyLoading&&P.isNullOrUndefined(n[n.length-1].grouping)?{index:this.rowLength++,cells:p}:(a={outlineLevel:n[n.length-1].grouping.outlineLevel,isCollapsed:!0},{index:this.rowLength++,cells:p,grouping:a}),d||n.push(l)):n.push({index:r,cells:p})}return n},Yc.prototype.aggregateStyle=function(e,t,i){var n,i=this.parent.getColumnByField(i);"object"==typeof e.format?(n=e.format,t.numberFormat=P.isNullOrUndefined(n.format)?n.skeleton:n.format,P.isNullOrUndefined(n.type)||(t.type=n.type.toLowerCase())):t.numberFormat=e.format,!P.isNullOrUndefined(i)&&P.isNullOrUndefined(t.type)&&(t.type=i.type.toLowerCase())},Yc.prototype.getAggreateValue=function(e,t,i,n,r){var s,o={},i=(o[P.getEnumValue(O.CellType,n.cellType)]=P.compile(i),r.data[n.column.field||n.column.columnName]);return(this.parent.isReact||this.parent.isVue||this.parent.isVue3||this.parent.isAngular)&&"string"!=typeof n.column.footerTemplate&&"string"!=typeof n.column.groupFooterTemplate&&"string"!=typeof n.column.groupCaptionTemplate?(s=i[n.column.type],P.isNullOrUndefined(s)?"":s):(s=o[P.getEnumValue(O.CellType,n.cellType)](i,this.parent),this.parent.isVue3&&!P.isNullOrUndefined(s[1])?s[1].textContent:P.isNullOrUndefined(s[0])?"":s[0].textContent)},Yc.prototype.mergeOptions=function(e,t){for(var i={},n=Object.keys(e),r=0;r<n.length;r++)"name"!==n[parseInt(r.toString(),10)]&&(i[n[parseInt(r.toString(),10)]]=e[n[parseInt(r.toString(),10)]]);for(n=Object.keys(t),r=0;r<n.length;r++)"name"!==n[parseInt(r.toString(),10)]&&(i[n[parseInt(r.toString(),10)]]=t[n[parseInt(r.toString(),10)]]);return i},Yc.prototype.getColumnStyle=function(e,t){for(var i=0,n=0,r=this.styles;n<r.length;n++){if(r[n].name===e.element.id+"column"+t)return i;i++}},Yc.prototype.headerRotation=function(e){var t=e.style.rotation;t<=90&&0<=t?e.style.hAlign="Left":(90<t&&t<=180||(t=180),e.style.hAlign="Right"),e.style.rotation=t},Yc.prototype.processHeaderContent=function(e,t,i,n){var r=t.rows,s=t.columns,o=[];if(0<i)for(var a=0;a!==i;)this.columns.push({index:a+1,width:30}),a++;for(var l,h=0;h<s.length;h++)this.parseStyles(e,s[parseInt(h.toString(),10)],this.getRecordThemeStyle(this.theme),i+h+1);for(var p=0;p<r.length;p++){for(var d=1+i,c=[],u=0;u<r[parseInt(p.toString(),10)].cells.length;u++){var g={},f={},m=r[parseInt(p.toString(),10)].cells[parseInt(u.toString(),10)];if(m.cellType!==O.CellType.HeaderIndent&&m.cellType!==O.CellType.DetailHeader){for(var y={contains:!0,index:1};y.contains;)if(d=(y=this.getIndex(o,1,d)).index,!y.contains){f.index=y.index+e.childGridLevel;break}if(!P.isNullOrUndefined(m.rowSpan)&&1!==m.rowSpan){f.rowSpan=m.rowSpan;for(var S=1;S<m.rowSpan+1;S++){var v={rowIndex:0,columnIndex:0};v.rowIndex=S,v.columnIndex=d,o.push(v)}}P.isNullOrUndefined(m.colSpan)||1===m.colSpan||(f.colSpan=m.colSpan,d=d+f.colSpan-1),f.value=m.column.headerText,g=this.getHeaderThemeStyle(this.theme),P.isNullOrUndefined(m.column.textAlign)||(g.hAlign=m.column.textAlign.toLowerCase()),P.isNullOrUndefined(m.column.headerTextAlign)||(g.hAlign=m.column.headerTextAlign.toLowerCase());g={cell:f,gridCell:m,style:g};e.trigger(hi,g),g.style.rotation&&this.headerRotation(g),P.isNullOrUndefined(g.image)||P.isNullOrUndefined(g.image.base64)||(l=this.setImage(g,d)),P.isNullOrUndefined(g.hyperLink)||(g.cell.hyperlink={target:g.hyperLink.target},f.value=g.hyperLink.displayText||f.value),f.style=g.style,c.push(f),d++}}var C={index:this.rowLength++,cells:c};P.isNullOrUndefined(l)||(C.height=l),n.push(C)}return n},Yc.prototype.getHeaderThemeStyle=function(e){var t={fontSize:12,borders:{color:"#E0E0E0"},bold:!0};return t=P.isNullOrUndefined(e)||P.isNullOrUndefined(e.header)?t:this.updateThemeStyle(e.header,t)},Yc.prototype.updateThemeStyle=function(e,t){return P.extend(t,e)},Yc.prototype.getCaptionThemeStyle=function(e){var t={fontSize:13,backColor:"#F6F6F6"};return t=P.isNullOrUndefined(e)||P.isNullOrUndefined(e.caption)?t:this.updateThemeStyle(e.caption,t)},Yc.prototype.getRecordThemeStyle=function(e){var t={fontSize:13,borders:{color:"#E0E0E0"}};return t=P.isNullOrUndefined(e)||P.isNullOrUndefined(e.record)?t:this.updateThemeStyle(e.record,t)},Yc.prototype.processExcelHeader=function(e){if(!P.isNullOrUndefined(e.rows)&&("NewSheet"===this.expType||1===this.rowLength)){var t=void 0;void 0===e.headerRows?this.rowLength=e.rows.length:this.rowLength=e.headerRows,t=this.rowLength<e.rows.length?this.rowLength:e.rows.length,this.rowLength++;for(var i=0;i<t;i++){var n=e.rows[parseInt(i.toString(),10)];null!==n.index&&!P.isNullOrUndefined(n.index)||(n.index=i+1),this.updatedCellIndex(n)}}},Yc.prototype.updatedCellIndex=function(e){for(var t=e.cells.length,i=0;i<t;i++){var n=e.cells[parseInt(i.toString(),10)];null!==n.index&&!P.isNullOrUndefined(n.index)||(n.index=i+1)}this.rows.push(e)},Yc.prototype.processExcelFooter=function(e){if(!P.isNullOrUndefined(e.rows)){var t=void 0;void 0===e.footerRows?this.rowLength+=e.rows.length:t=e.footerRows>e.rows.length?(this.rowLength+=e.footerRows-e.rows.length,e.rows.length):e.footerRows;for(var i=0;i<t;i++){var n=e.rows[parseInt(i.toString(),10)];null===n.index||void 0===n.index?n.index=this.rowLength++:n.index+=this.rowLength,this.updatedCellIndex(n)}}},Yc.prototype.getIndex=function(e,t,i){for(var n=0,r=e;n<r.length;n++){var s=r[n];if(s.rowIndex===t&&s.columnIndex===i)return{contains:!0,index:i+=1}}return{contains:!1,index:i}},Yc.prototype.parseStyles=function(e,t,i,n){var r;P.isNullOrUndefined(t.format)||("object"==typeof t.format?(r=t.format,i.numberFormat=P.isNullOrUndefined(r.format)?r.skeleton:r.format,P.isNullOrUndefined(r.type)||(i.type="dateonly"===r.type?"date":r.type.toLowerCase())):(i.numberFormat=t.format,i.type="dateonly"===t.type?"date":t.type)),P.isNullOrUndefined(t.textAlign)||(i.hAlign=t.textAlign.toLowerCase()),0<Object.keys(i).length&&(i.name=e.element.id+"column"+n,this.styles.push(i)),P.isNullOrUndefined(t.width)||"auto"===t.width||e.childGridLevel||this.columns.push({index:n+e.childGridLevel,width:"number"==typeof t.width?t.width:this.helper.getConvertedWidth(t.width)})},Yc.prototype.destroy=function(){};var Xc=Yc;function Yc(e,t){this.book={},this.workSheet=[],this.rows=[],this.columns=[],this.styles=[],this.rowLength=1,this.expType="AppendToSheet",this.includeHiddenColumn=!1,this.isCsvExport=!1,this.isChild=!1,this.isElementIdChanged=!1,this.gridPool={},this.sheet={},this.grpFooterTemplates=[],this.footerTemplates=[],this.aggIndex=0,this.totalAggregates=0,this.parent=e,this.helper=new _c(e),this.locator=t,this.l10n=this.locator.getService("localization")}D.prototype.getModuleName=function(){return"PdfExport"},D.prototype.init=function(e){this.exportValueFormatter=new Kc(e.locale),this.pdfDocument=void 0,this.hideColumnInclude=!1,this.currentViewData=!1,this.parent=e,this.isGrouping=!1,this.isExporting=!0,e.id=rh("main-grid"),this.gridPool[e.id]=!1,this.pdfPageSettings=new R.PdfPageSettings},D.prototype.exportWithData=function(e,t,i,n,r,s,o){var a=this;this.init(e),P.isNullOrUndefined(t)?this.pdfDocument=new R.PdfDocument:this.pdfDocument=t,this.processExport(e,n,r,s).then(function(){a.isExporting=!1,e.trigger(ui,a.isBlob?{promise:a.blobPromise}:{gridInstance:a.parent}),a.parent.log("exporting_complete",a.getModuleName()),i(a.pdfDocument)}).catch(function(e){o(a.pdfDocument),a.parent.trigger(oe,e)})},D.prototype.Map=function(n,r,s,o,e){var a,l=this,h=(this.data=new Nr(this.parent),this.isBlob=e,this.gridPool={},r&&r.query?r.query:new A.Query),e=(!n.childGrid&&!n.detailTemplate||!P.isNullOrUndefined(r)&&"None"===r.hierarchyExportMode||(n.expandedRows=Bh(n).expandedRows),{requestType:"beforePdfExport",cancel:!1,headerPageNumbers:[],gridDrawPosition:{xPosition:0,yPosition:0},generateQuery:!1});return(e.gridObject=n).trigger(ci,e),!0===e.cancel?new Promise(function(e,t){return e()}):(Bl(r)&&zl(r,n),e.generateQuery&&(h=_c.getQuery(n,this.data)),this.headerOnPages=e.headerPageNumbers,this.drawPosition=e.gridDrawPosition,this.parent.log("exporting_begin",this.getModuleName()),P.isNullOrUndefined(r)||P.isNullOrUndefined(r.dataSource)?P.isNullOrUndefined(r)||"CurrentPage"!==r.exportType||this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()?(a=[],e=_c.getQuery(n,this.data),this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()&&((r=P.isNullOrUndefined(r)?{hierarchyExportMode:"All"}:r).hierarchyExportMode="None"===r.hierarchyExportMode?"None":"All","All"===r.hierarchyExportMode)&&(e.lazyLoad=[]),a.push(this.data.getData({},e)),a.push(this.helper.getColumnData(n)),new Promise(function(t,i){Promise.all(a).then(function(e){l.init(n),P.isNullOrUndefined(o)?l.pdfDocument=new R.PdfDocument:l.pdfDocument=o.document,l.processExport(n,e[0],r,s,o).then(function(e){l.isExporting=!1,n.trigger(ui,l.isBlob?{promise:l.blobPromise}:{gridInstance:l.parent}),l.parent.log("exporting_complete",l.getModuleName()),r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?t(e):t(l.pdfDocument)}).catch(function(e){i(l.pdfDocument),l.parent.trigger(oe,e)})})})):new Promise(function(e,t){l.exportWithData(n,o,e,l.parent.getCurrentViewRecords(),r,s,t)}):(r.dataSource=r.dataSource instanceof A.DataManager?r.dataSource:new A.DataManager(r.dataSource),(P.isNullOrUndefined(h.isCountRequired)||n.aggregates)&&(h.isCountRequired=!0),new Promise(function(t,i){r.dataSource.executeQuery(h).then(function(e){l.exportWithData(n,o,t,e,r,s,i)})})))},D.prototype.processExport=function(n,i,r,s,o){var a,l=this,e=o&&r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?null:this.pdfDocument.sections.add(),h=(this.processSectionExportProperties(e,r),o&&r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?o.result.page:e.pages.add());return new Promise(function(e,t){a=l.processGridExport(n,i,r),l.globalResolve=e,l.gridPool[n.id]=!0,l.helper.checkAndExport(l.gridPool,l.globalResolve)}).then(function(){var e,t,i=l.drawPosition.xPosition;return o&&r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?(e=o.result.bounds.y+o.result.bounds.height,r.multipleExport.blankSpace&&(e=o.result.bounds.y+o.result.bounds.height+r.multipleExport.blankSpace)):e=l.drawPosition.yPosition,t=s?((t=new R.PdfGridLayoutFormat).layout=R.PdfLayoutType.Paginate,t.break=R.PdfLayoutBreakType.FitPage,t.paginateBounds=new R.RectangleF(0,0,h.getClientSize().width,h.getClientSize().height),a.draw(h,i,e,t)):a.draw(h,i,e),l.drawHeader(r),s||(l.isBlob?l.blobPromise=l.pdfDocument.save():!P.isNullOrUndefined(r)&&r.fileName?l.pdfDocument.save(r.fileName):l.pdfDocument.save("Export.pdf"),l.pdfDocument.destroy(),delete n.expandedRows),r&&r.multipleExport&&"AppendToPage"===r.multipleExport.type?{document:l.pdfDocument,result:t}:l.pdfDocument})},D.prototype.processSectionExportProperties=function(e,t){return P.isNullOrUndefined(e)||P.isNullOrUndefined(t)||P.isNullOrUndefined(t.pageOrientation)&&P.isNullOrUndefined(t.pageSize)||(this.pdfPageSettings.orientation="Landscape"===t.pageOrientation?R.PdfPageOrientation.Landscape:R.PdfPageOrientation.Portrait,this.pdfPageSettings.size=this.getPageSize(t.pageSize),e.setPageSettings(this.pdfPageSettings)),e},D.prototype.processGridExport=function(e,t,i){var n=!0,r=(P.isNullOrUndefined(i)||(this.gridTheme=i.theme,n=!!P.isNullOrUndefined(i.allowHorizontalOverflow)||i.allowHorizontalOverflow),new _c(e,this.helper.getForeignKeyData())),s=this.processExportProperties(i,t.result),o=(o=Bl(i)?Xl(i.columns,e.enableColumnVirtualization):r.getGridExportColumns(e.columns)).filter(function(e){return P.isNullOrUndefined(e.commands)}),a=!1,l=(e.groupSettings.columns.length&&(a=!0),!e.childGrid&&!e.detailTemplate||P.isNullOrUndefined(i)||(e.hierarchyPrintMode=i.hierarchyExportMode||"Expanded"),new R.PdfGrid),h=this.getHeaderThemeStyle(),p=h.border,d=h.font,h=h.brush,c=r.getHeaders(o,this.hideColumnInclude),u=c.columns,l=this.processGridHeaders(e.groupSettings.columns.length,l,c.rows,u,p,d,h,e,n,o),c=(this.setColumnProperties(u,l,r,e,n),this.getSummaryCaptionThemeStyle());return!P.isNullOrUndefined(s)&&s.length?(a?(P.isNullOrUndefined(c.border)||(p=c.border),this.processGroupedRecords(l,s,u,e,p,0,c.font,c.brush,c.backgroundBrush,t,i,r,0)):this.processRecord(p,u,e,s,l,0,i,r,0),P.isNullOrUndefined(t.aggregates)||(d=void 0,o=(o=(h=new As(e)).getColumns()).filter(function(e){return P.isNullOrUndefined(e.commands)&&"checkbox"!==e.type}),e.aggregates.length&&this.parent!==e&&e.aggregateModule.prepareSummaryInfo(),d=this.customDataSource?h.generateRows(s,t.aggregates,null,null,o):this.currentViewData?h.generateRows(this.parent.getCurrentViewRecords(),t.aggregates):a?h.generateRows(s.records,t.aggregates):h.generateRows(t.result,t.aggregates,null,null,o),this.processAggregates(d,l,p,c.font,c.brush,c.backgroundBrush,!1,null,null,null,!a))):l.rows.addRow().style.setBorder(p),l},D.prototype.getSummaryCaptionThemeStyle=function(){var e,t,i,n,r;return P.isNullOrUndefined(this.gridTheme)||P.isNullOrUndefined(this.gridTheme.caption)?{font:new R.PdfStandardFont(R.PdfFontFamily.Helvetica,9.75),brush:new R.PdfSolidBrush(new R.PdfColor(0,0,0)),backgroundBrush:new R.PdfSolidBrush(new R.PdfColor(246,246,246))}:(e=P.isNullOrUndefined(this.gridTheme.caption.fontSize)?9.75:this.gridTheme.caption.fontSize,r=P.isNullOrUndefined(this.gridTheme.caption.fontName)?R.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.caption.fontName),t=this.getFontStyle(this.gridTheme.caption),i=new R.PdfColor(0,0,0),P.isNullOrUndefined(this.gridTheme.caption.fontColor)||(n=this.hexToRgb(this.gridTheme.caption.fontColor),i=new R.PdfColor(n.r,n.g,n.b)),n=this.gridTheme.caption.border?this.getBorderStyle(this.gridTheme.caption.border):null,r=new R.PdfStandardFont(r,e,t),{font:r=P.isNullOrUndefined(this.gridTheme.caption.font)?r:this.gridTheme.caption.font,brush:new R.PdfSolidBrush(i),backgroundBrush:new R.PdfSolidBrush(new R.PdfColor(246,246,246)),border:n})},D.prototype.getGridPdfFont=function(e){var t,i,n,r="fontFamily",s="fontSize",o="fontStyle",a="isTrueType",l=0;e.header&&e.header.font&&(t=e.header.font[r],i=e.header.font[s],n=e.header.font[o],l=P.isNullOrUndefined(R.PdfFontStyle[""+n])?0:R.PdfFontStyle[""+n],e.header.font[a]?e.header.font=new R.PdfTrueTypeFont(t,i,l):(n=P.isNullOrUndefined(t)?R.PdfFontFamily.Helvetica:this.getFontFamily(t),e.header.font=new R.PdfStandardFont(n,i,l))),e.caption&&e.caption.font&&(t=e.caption.font[r],n=e.caption.font[s],i=e.caption.font[o],l=P.isNullOrUndefined(R.PdfFontStyle[""+i])?0:R.PdfFontStyle[""+i],e.caption.font[a]?e.caption.font=new R.PdfTrueTypeFont(t,n,l):(i=P.isNullOrUndefined(t)?R.PdfFontFamily.Helvetica:this.getFontFamily(t),e.caption.font=new R.PdfStandardFont(i,n,l))),e.record&&e.record.font&&(t=e.record.font[r],i=e.record.font[s],n=e.record.font[o],l=P.isNullOrUndefined(R.PdfFontStyle[""+n])?0:R.PdfFontStyle[""+n],e.record.font[a]?e.record.font=new R.PdfTrueTypeFont(t,i,l):(r=P.isNullOrUndefined(t)?R.PdfFontFamily.Helvetica:this.getFontFamily(t),e.record.font=new R.PdfStandardFont(r,i,l)))},D.prototype.getHeaderThemeStyle=function(){var e,t,i,n,r=new R.PdfBorders;return P.isNullOrUndefined(this.gridTheme)||P.isNullOrUndefined(this.gridTheme.header)?(r.all=new R.PdfPen(new R.PdfColor(234,234,234)),{border:r,font:new R.PdfStandardFont(R.PdfFontFamily.Helvetica,10.5),brush:new R.PdfSolidBrush(new R.PdfColor(102,102,102))}):(r=P.isNullOrUndefined(this.gridTheme.header.fontName)?R.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.header.fontName),e=this.getFontStyle(this.gridTheme.header),t=P.isNullOrUndefined(this.gridTheme.header.fontSize)?10.5:this.gridTheme.header.fontSize,i=new R.PdfColor,P.isNullOrUndefined(this.gridTheme.header.fontColor)||(n=this.hexToRgb(this.gridTheme.header.fontColor),i=new R.PdfColor(n.r,n.g,n.b)),n=new R.PdfStandardFont(r,t,e),P.isNullOrUndefined(this.gridTheme.header.font)||(n=this.gridTheme.header.font),{border:this.getBorderStyle(this.gridTheme.header.border),font:n,brush:new R.PdfSolidBrush(i)})},D.prototype.processGroupedRecords=function(r,s,o,a,l,e,h,p,d,c,u,g,f){for(var m=this,y=e,S=this,t=0,i=s;t<i.length;t++)!function(t){var i=r.rows.addRow(),e=a.getColumnByField(t.field),n={value:t.key,column:e,style:void 0,isForeignKey:e.isForeignColumn()},e=a.getColumnByField(t.field).headerText+": "+(e.enableGroupByFormat?t.key:S.exportValueFormatter.formatCellValue(n))+" - "+t.count+(1<s.count?" items":" item");S.parent.trigger(rt,{captionText:e,type:"PDF",data:t,style:void 0},function(e){i.cells.getCell(y).value=e.captionText,i.cells.getCell(y).style.stringFormat=new R.PdfStringFormat(R.PdfTextAlignment.Left),i.style.setBorder(l),i.style.setFont(h),i.style.setTextBrush(p),i.style.setBackgroundBrush(d),P.isNullOrUndefined(e.style)||m.processCellStyle(i.cells.getCell(y),e);var e=new Ns(a);e=P.isNullOrUndefined(t.items.records)?e.generateRows(t.items,t):e.generateRows(t.items.records,t),P.isNullOrUndefined(e)||0!==e.length||(i.cells.getCell(y+1).columnSpan=r.columns.count-(y+1)),!P.isNullOrUndefined(s.childLevels)&&0<s.childLevels?(m.processAggregates(e,r,l,h,p,d,!0,i,y,null,null,a),m.processGroupedRecords(r,t.items,o,a,l,y+1,h,p,d,c,u,g,f),f=m.rowIndex,e=new Ms(a).generateRows(t.items.records,t),m.processAggregates(e,r,l,h,p,d,!1)):(m.processAggregates(e,r,l,h,p,d,!0,i,y,null,null,a),f=m.processRecord(l,o,a,t.items,r,y+1,u,g,f),e=new Ms(a).generateRows(t.items,t),m.processAggregates(e,r,l,h,p,d,!1,null,null,!0,null,a))})}(i[t])},D.prototype.processGridHeaders=function(e,a,l,t,h,p,d,c,i,n){for(var u=this,t=t.length+e,e=qh(n),g=0,f=[],r=0;r<l.length;r++)f[parseInt(r.toString(),10)]=0;c.groupSettings.columns.length&&(g=c.groupSettings.columns.length-1,t-=1),a.columns.add(t),a.headers.add(l.length);var m=function(e,t,i,n,r){var s=a.headers.getHeader(e),o=s.cells.getCell(t),t=l[parseInt(e.toString(),10)].cells[c.groupSettings.columns.length?t:f[parseInt(e.toString(),10)]],e=(f[parseInt(e.toString(),10)]=f[parseInt(e.toString(),10)]+1,P.isNullOrUndefined(i.headerTextAlign)||(o.style.stringFormat=u.getHorizontalAlignment(i.headerTextAlign)),0<n&&(o.rowSpan=n,o.style.stringFormat=u.getVerticalAlignment("Bottom",o.style.stringFormat,i.textAlign)),0<r&&(o.columnSpan=r),s.style.setBorder(h),s.style.setFont(p),s.style.setTextBrush(d),o.value=i.headerText,P.isNullOrUndefined(t)||t.cellType!==O.CellType.HeaderIndent&&t.cellType!==O.CellType.DetailHeader||(o.value="",o.width=20),{cell:o,gridCell:t,style:o.style}),n=(u.parent.trigger(fi,e),e),r=e.style.borders,i=e.style.font,t=e.style.textBrush;P.isNullOrUndefined(r)||s.style.setBorder(r),P.isNullOrUndefined(i)||s.style.setFont(i),P.isNullOrUndefined(t)||s.style.setTextBrush(t),P.isNullOrUndefined(n.style.verticalAlignment)||(o.style.stringFormat=u.getVerticalAlignment(n.style.verticalAlignment,o.style.stringFormat)),P.isNullOrUndefined(n.image)||(o.value=new R.PdfBitmap(n.image.base64)),P.isNullOrUndefined(n.hyperLink)||(o.value=u.setHyperLink(n))},y=function(e,t,i,n,r,s){for(var o,a=0,l=0;l<e.length;l++)s&&(n=a=a+i+(0===l?0:-1),i=0),s||e[parseInt(l.toString(),10)].visible||(n-=1),e[parseInt(l.toString(),10)].columns&&e[parseInt(l.toString(),10)].columns.length?(o=y(e[parseInt(l.toString(),10)].columns,t-1,0,l+n,r+1,!1),m(r,l+n+g,e[parseInt(l.toString(),10)],0,o),i+=o,n=n+o-1):(e[parseInt(l.toString(),10)].visible||u.hideColumnInclude)&&(i++,m(r,l+n+g,e[parseInt(l.toString(),10)],t,0));return i};return y(n,e,0,0,0,!0),6<=a.columns.count&&i&&(a.style.allowHorizontalOverflow=!0),a},D.prototype.processExportProperties=function(e,t){var i,n,r;return P.isNullOrUndefined(e)?(this.currentViewData=!1,this.customDataSource=!1):(P.isNullOrUndefined(e.theme)||(this.gridTheme=e.theme),n=this.pdfPageSettings.size,this.drawHeader(e),P.isNullOrUndefined(e.footer)||(i=e.footer,r=new R.PointF(0,n.width-80-.75*i.fromBottom),n=new R.SizeF(n.width-80,.75*i.height),r=new R.RectangleF(r,n),this.pdfDocument.template.bottom=this.drawPageTemplate(new R.PdfPageTemplateElement(r),i)),P.isNullOrUndefined(e.includeHiddenColumn)||this.isGrouping||(this.hideColumnInclude=e.includeHiddenColumn),P.isNullOrUndefined(e.dataSource)?(!P.isNullOrUndefined(e.exportType)&&"CurrentPage"===e.exportType?(t=this.parent.groupSettings&&this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&!this.parent.getDataModule().isRemote()?t:this.parent.currentViewData,this.currentViewData=!0):this.currentViewData=!1,this.customDataSource=!1):(this.customDataSource=!0,this.currentViewData=!1)),t},D.prototype.drawHeader=function(e){var t,i,n=this,r=this.pdfPageSettings.size;P.isNullOrUndefined(e)||P.isNullOrUndefined(e.header)||(e=e.header,t=new R.PointF(0,e.fromTop),r=new R.SizeF(r.width-80,.75*e.height),t=new R.RectangleF(t,r),this.headerOnPages.length?(i=this.drawPageTemplate(new R.PdfPageTemplateElement(t),e),this.headerOnPages.filter(function(e){0<=e-1&&e-1<=n.pdfDocument.pages.count-1&&n.pdfDocument.pages.getPageByIndex(e-1).graphics.drawPdfTemplate(i.template,new R.PointF(0,0))})):this.pdfDocument.template.top=this.drawPageTemplate(new R.PdfPageTemplateElement(t),e))},D.prototype.drawPageTemplate=function(e,t){for(var i=0,n=t.contents;i<n.length;i++){var r=n[i];switch(this.processContentValidation(r),r.type){case"Text":if(""===r.value||void 0===r.value||null===r.value||"string"!=typeof r.value)throw new Error("please enter the valid input value in text content...");this.drawText(e,r);break;case"PageNumber":this.drawPageNumber(e,r);break;case"Image":if(void 0===r.src||null===r.src||""===r.src)throw new Error("please enter the valid base64 string in image content...");this.drawImage(e,r);break;case"Line":this.drawLine(e,r);break;default:throw new Error("Please set valid content type...")}}return e},D.prototype.processContentValidation=function(e){if(void 0===e.type||null===e.type)throw new Error("please set valid content type...");if("Line"===e.type){if(void 0===e.points||null===e.points)throw new Error("please enter valid points in "+e.type+" content...");if(void 0===e.points.x1||null===e.points.x1||"number"!=typeof e.points.x1)throw new Error("please enter valid x1 co-ordinate in "+e.type+" points...");if(void 0===e.points.y1||null===e.points.y1||"number"!=typeof e.points.y1)throw new Error("please enter valid y1 co-ordinate in "+e.type+" points...");if(void 0===e.points.x2||null===e.points.x2||"number"!=typeof e.points.x2)throw new Error("please enter valid x2 co-ordinate in "+e.type+" points...");if(void 0===e.points.y2||null===e.points.y2||"number"!=typeof e.points.y2)throw new Error("please enter valid y2 co-ordinate in "+e.type+" points...")}else{if(void 0===e.position||null===e.position)throw new Error("please enter valid position in "+e.type+" content...");if(void 0===e.position.x||null===e.position.x||"number"!=typeof e.position.x)throw new Error("please enter valid x co-ordinate in "+e.type+" position...");if(void 0===e.position.y||null===e.position.y||"number"!=typeof e.position.y)throw new Error("please enter valid y co-ordinate in "+e.type+" position...")}},D.prototype.drawText=function(e,t){var i=this.getFont(t),n=this.getBrushFromContent(t),r=null,s=(P.isNullOrUndefined(t.style.textPenColor)||(s=this.hexToRgb(t.style.textPenColor),r=new R.PdfPen(new R.PdfColor(s.r,s.g,s.b))),null==n&&null==r&&(n=new R.PdfSolidBrush(new R.PdfColor(0,0,0))),t.value.toString()),o=.75*t.position.x,a=.75*t.position.y,l=new R.PdfStringFormat,t=(P.isNullOrUndefined(t.style.stringFormat)||(l.alignment=t.style.stringFormat.alignment),this.setContentFormat(t,l));null===t||P.isNullOrUndefined(t.format)||P.isNullOrUndefined(t.size)?e.graphics.drawString(s,i,r,n,o,a,l):e.graphics.drawString(s,i,r,n,o,a,t.size.width,t.size.height,t.format)},D.prototype.drawPageNumber=function(e,t){var i,n,r,s=this.getFont(t),o=null,a=(o=P.isNullOrUndefined(t.style.textBrushColor)?new R.PdfSolidBrush(new R.PdfColor(0,0,0)):(a=this.hexToRgb(t.style.textBrushColor),new R.PdfSolidBrush(new R.PdfColor(a.r,a.g,a.b))),new R.PdfPageNumberField(s,o)),a=(a.numberStyle=this.getPageNumberStyle(t.pageNumberType),r=P.isNullOrUndefined(t.format)?new R.PdfCompositeField(s,o,n="{0}",a):(r="$current",-1!==t.format.indexOf(l="$total")&&-1!==t.format.indexOf(r)?((i=new R.PdfPageCountField(s)).numberStyle=this.getPageNumberStyle(t.pageNumberType),n=t.format.indexOf(l)>t.format.indexOf(r)?(n=t.format.replace(r,"0")).replace(l,"1"):(n=t.format.replace(r,"1")).replace(l,"0"),new R.PdfCompositeField(s,o,n,a,i)):-1!==t.format.indexOf(r)&&-1===t.format.indexOf(l)?(n=t.format.replace(r,"0"),new R.PdfCompositeField(s,o,n,a)):(i=new R.PdfPageCountField(s),n=t.format.replace(l,"0"),new R.PdfCompositeField(s,o,n,i))),.75*t.position.x),l=.75*t.position.y,s=this.setContentFormat(t,r.stringFormat);null===s||P.isNullOrUndefined(s.format)||P.isNullOrUndefined(s.size)||(r.stringFormat=s.format,r.bounds=new R.RectangleF(a,l,s.size.width,s.size.height)),r.draw(e.graphics,a,l)},D.prototype.drawImage=function(e,t){var i=.75*t.position.x,n=.75*t.position.y,r=P.isNullOrUndefined(t.size)?void 0:.75*t.size.width,s=P.isNullOrUndefined(t.size)?void 0:.75*t.size.height,t=new R.PdfBitmap(t.src);P.isNullOrUndefined(r)?e.graphics.drawImage(t,i,n):e.graphics.drawImage(t,i,n,r,s)},D.prototype.drawLine=function(e,t){var i=.75*t.points.x1,n=.75*t.points.y1,r=.75*t.points.x2,s=.75*t.points.y2,o=this.getPenFromContent(t);P.isNullOrUndefined(t.style)||null===t.style||(P.isNullOrUndefined(t.style.penSize)||null===t.style.penSize||"number"!=typeof t.style.penSize||(o.width=.75*t.style.penSize),o.dashStyle=this.getDashStyle(t.style.dashStyle)),e.graphics.drawLine(o,i,n,r,s)},D.prototype.processAggregates=function(e,t,i,n,r,s,o,a,l,h,p,d){for(var c=0,u=e;c<u.length;c++){var g=u[c],f=-1,m=0,y=!0,S=[],v=p?0:1,C=void 0;P.isNullOrUndefined(a)&&((C=t.rows.addRow()).style.setBorder(i),C.style.setFont(n),C.style.setTextBrush(r),C.style.setBackgroundBrush(s));for(var w=0;w<t.columns.count+v;w++){var b,I,x,R,E,D,T=g.cells[parseInt(m.toString(),10)];if(T.cellType===O.CellType.DetailFooterIntent)w--,m++;else{if(!this.hideColumnInclude){for(;void 0===T.visible;)T.cellType!==O.CellType.DetailFooterIntent&&(P.isNullOrUndefined(a)||P.isNullOrUndefined(a.cells.getCell(w).value)?S.push(""):(S.push(a.cells.getCell(w).value),y=!1,o||(w+=1)),w+=1,m+=1,T=g.cells[parseInt(m.toString(),10)]);for(;!P.isNullOrUndefined(T.visible)&&!T.visible;)m+=1,T=g.cells[parseInt(m.toString(),10)]}T.isDataCell?(E={},b=!P.isNullOrUndefined(T.column.footerTemplate),I=!P.isNullOrUndefined(T.column.groupFooterTemplate),R=!P.isNullOrUndefined(T.column.groupCaptionTemplate),b||R||I?(E=(D=this.getTemplateFunction(E,w,f,T)).templateFunction,f=D.leastCaptionSummaryIndex,R=void 0,x=g.data[T.column.field||T.column.columnName],R=(this.parent.isReact||this.parent.isVue||this.parent.isVue3||this.parent.isAngular)&&"string"!=typeof T.column.footerTemplate&&"string"!=typeof T.column.groupFooterTemplate&&"string"!=typeof T.column.groupCaptionTemplate?(R=x[T.column.type],P.isNullOrUndefined(R)?"":R):(R=E[P.getEnumValue(O.CellType,T.cellType)](x,this.parent),this.parent.isVue3&&!P.isNullOrUndefined(R[1])?R[1].textContent:P.isNullOrUndefined(R[0])?"":R[0].textContent),y=!1,E={row:g,type:b?"Footer":I?"GroupFooter":"GroupCaption",style:(P.isNullOrUndefined(a)?C:a).cells,cell:T,value:R},this.parent.trigger(kn,E),S.push(E.value)):(D=this.getSummaryWithoutTemplate(g.data[T.column.field]),P.isNullOrUndefined(D)||S.push(D))):S.push(""),y&&""!==S[parseInt(w.toString(),10)]&&!P.isNullOrUndefined(S[parseInt(w.toString(),10)])&&null!==S[parseInt(w.toString(),10)]&&(y=!1),m+=1}}if(!p)if(o)for(w=d.groupSettings.columns.length;w<S.length-1;w++)S[parseInt(w.toString(),10)]=S[w+1],S[w+1]=S[w+2]||"";else S.splice(0,1);if(!y)if(o)for(w=0;w<t.columns.count;w++)a.cells.getCell(w).value=S[parseInt(w.toString(),10)].toString(),w===l&&-1!==f&&1!==f?a.cells.getCell(w).columnSpan=f-1-l:w===l&&-1===f&&(a.cells.getCell(w).columnSpan=t.columns.count-l);else for(var w=0;w<t.columns.count;w++)C.cells.getCell(w).value=S[parseInt(w.toString(),10)].toString()}},D.prototype.getTemplateFunction=function(e,t,i,n){return P.isNullOrUndefined(n.column.footerTemplate)||n.cellType!==O.CellType.Summary?P.isNullOrUndefined(n.column.groupCaptionTemplate)?e[P.getEnumValue(O.CellType,O.CellType.GroupSummary)]=P.compile(n.column.groupFooterTemplate):(-1===i&&(i=t),e[P.getEnumValue(O.CellType,O.CellType.CaptionSummary)]=P.compile(n.column.groupCaptionTemplate)):e[P.getEnumValue(O.CellType,O.CellType.Summary)]=P.compile(n.column.footerTemplate),{templateFunction:e,leastCaptionSummaryIndex:i}},D.prototype.getSummaryWithoutTemplate=function(e){if(P.isNullOrUndefined(e.Sum)){if(P.isNullOrUndefined(e.Average)){if(P.isNullOrUndefined(e.Max)){if(P.isNullOrUndefined(e.Min)){if(P.isNullOrUndefined(e.Count)){if(P.isNullOrUndefined(e.TrueCount)){if(P.isNullOrUndefined(e.FalseCount))return P.isNullOrUndefined(e.Custom)?void 0:e.Custom;return e.FalseCount}return e.TrueCount}return e.Count}return e.Min}return e.Max}return e.Average}return e.Sum},D.prototype.setColumnProperties=function(e,t,i,n,r){for(var s=n.groupSettings.columns.length?n.groupSettings.columns.length-1:0,o=0;o<s;o++)t.columns.getColumn(o).width=20;for(o=0;o<e.length;o++)P.isNullOrUndefined(e[parseInt(o.toString(),10)].textAlign)||(t.columns.getColumn(o+s).format=this.getHorizontalAlignment(e[parseInt(o.toString(),10)].textAlign)),t.style.allowHorizontalOverflow&&!P.isNullOrUndefined(e[parseInt(o.toString(),10)].width)&&r&&(t.columns.getColumn(o+s).width="number"==typeof e[parseInt(o.toString(),10)].width?.75*e[parseInt(o.toString(),10)].width:.75*i.getConvertedWidth(e[parseInt(o.toString(),10)].width))},D.prototype.setRecordThemeStyle=function(e,t){P.isNullOrUndefined(this.gridTheme)||P.isNullOrUndefined(this.gridTheme.record)?e.style.setTextBrush(new R.PdfSolidBrush(new R.PdfColor(0,0,0))):(r=P.isNullOrUndefined(this.gridTheme.record.fontName)?R.PdfFontFamily.Helvetica:this.getFontFamily(this.gridTheme.record.fontName),n=P.isNullOrUndefined(this.gridTheme.record.fontSize)?9.75:this.gridTheme.record.fontSize,i=this.getFontStyle(this.gridTheme.record),r=new R.PdfStandardFont(r,n,i),P.isNullOrUndefined(this.gridTheme.record.font)||(r=this.gridTheme.record.font),e.style.setFont(r),n=new R.PdfColor,P.isNullOrUndefined(this.gridTheme.record.fontColor)||(i=this.hexToRgb(this.gridTheme.record.fontColor),n=new R.PdfColor(i.r,i.g,i.b)),e.style.setTextBrush(new R.PdfSolidBrush(n)));var i,n,r=this.gridTheme&&this.gridTheme.record&&this.gridTheme.record.border?this.getBorderStyle(this.gridTheme.record.border):t;return e.style.setBorder(r),e},D.prototype.processRecord=function(e,t,i,n,r,s,o,a,l){for(var h=0,p=a.getGridRowModel(t,n,i,l);h<p.length;h++){for(var d,c,u,g,f=p[h],m=(l++,this.rowIndex=l,this.setRecordThemeStyle(r.rows.addRow(),e)),y=f.cells.length,S=0;S<y;S++){var v=f.cells[parseInt(S.toString(),10)];if(v.cellType===O.CellType.Data){var C,w,b,v=v.column,I=v.field,I=P.isNullOrUndefined(I)?"":v.valueAccessor(I,f.data,v),I=P.isNullOrUndefined(I)?"":I;if(v.isForeignColumn&&v.isForeignColumn()&&(C=a.getFData(I,v),I=P.getValue(v.foreignKeyValue,C)),(b={data:f.data,value:I,column:v,style:void 0,colSpan:1,cell:w=m.cells.getCell(S)}).value="boolean"===b.column.type&&"string"==typeof b.value?b.value:this.exportValueFormatter.formatCellValue(b),this.parent.trigger(gi,b),P.isNullOrUndefined(b.image)||(b.value=new R.PdfBitmap(b.image.base64),b.value.height=b.image.height||b.value.height,b.value.width=b.image.width||b.value.width),w.value=b.value,P.isNullOrUndefined(b.hyperLink)||(w.value=this.setHyperLink(b)),P.isNullOrUndefined(b.style)||this.processCellStyle(w,b),1<b.colSpan){S+1+b.colSpan>m.cells.count&&(b.colSpan=m.cells.count-(S+1)),w.columnSpan=b.colSpan;for(var x=1;x<w.columnSpan;x++)m.cells.getCell(S+x).value="";S+=b.colSpan-1}}}f.isExpand&&(d=this.setRecordThemeStyle(r.rows.addRow(),e),u=this.parent.childGrid||this.parent.detailTemplate?0:s,(w=d.cells.getCell(u)).columnSpan=d.cells.count-u,w.style.cellPadding=new R.PdfPaddings(10,10,10,10),this.parent.childGrid?(i.isPrinting=!0,u=!P.isNullOrUndefined(o)&&o.exportType?o.exportType:"AllPages",c=(u=this.helper.createChildGrid(i,f,u,this.gridPool)).childGrid,u=u.element,c.actionFailure=a.failureHandler(this.gridPool,c,this.globalResolve),g=P.extend(o,{columns:null,dataSource:null,query:null}),this.parent.trigger(pi,b={childGrid:c,row:f,cell:w,exportProperties:g}),c.beforeDataBound=this.childGridCell(w,c,g),c.appendTo(u)):this.parent.detailTemplate&&(this.parent.trigger(di,b={parentRow:f,row:d,value:{},action:"pdfexport",gridInstance:i}),w.value=this.processDetailTemplate(b))),this.parent.notify(Hi,{type:"pdf",rowObj:f})}return l},D.prototype.processDetailTemplate=function(e){var o=this;if(e.value.columnHeader||e.value.rows){var t=new R.PdfGrid,i=this.getHeaderThemeStyle(),a=i.border,l=i.font,h=i.brush,n=function(e,t,i){i&&(t.style.setBorder(a),t.style.setFont(l),t.style.setTextBrush(h));for(var n=0;n<e.cells.length;n++){var r=e.cells[parseInt(n.toString(),10)],s=t.cells.getCell(r.index||n);0<r.rowSpan&&(s.rowSpan=r.rowSpan),0<r.colSpan&&(s.columnSpan=r.colSpan),s.value=r.value,P.isNullOrUndefined(r.image)||(s.value=new R.PdfBitmap(r.image.base64),s.value.height=r.image.height,s.value.width=r.image.width),P.isNullOrUndefined(r.hyperLink)||(s.value=o.setHyperLink(r)),P.isNullOrUndefined(r.style)||(r={style:{backgroundColor:r.style.backColor,textAlignment:r.style.pdfTextAlignment,verticalAlignment:r.style.pdfVerticalAlignment,textBrushColor:r.style.fontColor,textPenColor:r.style.pdfTextPenColor,fontFamily:r.style.pdfFontFamily,fontSize:r.style.fontSize,bold:r.style.bold,italic:r.style.italic,underline:r.style.underline,strikeout:r.style.strikeThrough,border:r.style.pdfBorder,paragraphIndent:r.style.pdfParagraphIndent,cellPadding:r.style.pdfCellPadding}},o.processCellStyle(s,r))}};if(e.value.columnCount?t.columns.add(e.value.columnCount):e.value.columnHeader&&e.value.columnHeader.length?t.columns.add(e.value.columnHeader[0].cells.length):e.value.rows&&e.value.rows.length&&t.columns.add(e.value.rows[0].cells.length),e.value.columnHeader){t.headers.add(e.value.columnHeader.length);for(var r=0;r<e.value.columnHeader.length;r++){var s=t.headers.getHeader(parseInt(r.toString(),10));n(e.value.columnHeader[parseInt(r.toString(),10)],s,!0)}}if(e.value.rows)for(var p=0,d=e.value.rows;p<d.length;p++)n(d[p],this.setRecordThemeStyle(t.rows.addRow(),a),!1);return t}return e.value.image?new R.PdfBitmap(e.value.image.base64):e.value.text||(e.value.hyperLink?this.setHyperLink(e.value):"")},D.prototype.setHyperLink=function(e){var t=new R.PdfTextWebLink;return t.url=e.hyperLink.target,t.text=e.hyperLink.displayText||e.hyperLink.target,t.font=new R.PdfStandardFont(R.PdfFontFamily.Helvetica,9.75),t.brush=new R.PdfSolidBrush(new R.PdfColor(51,102,187)),t},D.prototype.childGridCell=function(t,i,n){var r=this;return function(e){return i.beforeDataBound=null,e.cancel=!0,t.value=r.processGridExport(i,e,n),i.destroy(),P.detach(i.element),r.gridPool[i.id]=!0,r.helper.checkAndExport(r.gridPool,r.globalResolve),t}},D.prototype.processCellStyle=function(e,t){var i,n,r,s;P.isNullOrUndefined(t.style.backgroundColor)||(i=this.hexToRgb(t.style.backgroundColor),e.style.backgroundBrush=new R.PdfSolidBrush(new R.PdfColor(i.r,i.g,i.b))),P.isNullOrUndefined(t.style.textAlignment)||(e.style.stringFormat=this.getHorizontalAlignment(t.style.textAlignment)),P.isNullOrUndefined(t.style.cellPadding)||(e.style.cellPadding=t.style.cellPadding),P.isNullOrUndefined(t.style.verticalAlignment)||(e.style.stringFormat=this.getVerticalAlignment(t.style.verticalAlignment,e.style.stringFormat)),P.isNullOrUndefined(t.style.textBrushColor)||(i=this.hexToRgb(t.style.textBrushColor),e.style.textBrush=new R.PdfSolidBrush(new R.PdfColor(i.r,i.g,i.b))),P.isNullOrUndefined(t.style.textPenColor)||(i=this.hexToRgb(t.style.textPenColor),e.style.textPen=new R.PdfPen(new R.PdfColor(i.r,i.g,i.b))),P.isNullOrUndefined(t.style.fontFamily)&&P.isNullOrUndefined(t.style.fontSize)&&P.isNullOrUndefined(t.style.bold)&&P.isNullOrUndefined(t.style.italic)&&P.isNullOrUndefined(t.style.underline)&&P.isNullOrUndefined(t.style.strikeout)||(e.style.font=this.getFont(t)),P.isNullOrUndefined(t.style.border)||(i=new R.PdfBorders,n=t.style.border.width,n=P.isNullOrUndefined(n)||"number"!=typeof n?void 0:.75*n,r=new R.PdfColor(196,196,196),P.isNullOrUndefined(t.style.border.color)||(s=this.hexToRgb(t.style.border.color),r=new R.PdfColor(s.r,s.g,s.b)),s=new R.PdfPen(r,n),P.isNullOrUndefined(t.style.border.dashStyle)||(s.dashStyle=this.getDashStyle(t.style.border.dashStyle)),i.all=s,e.style.borders=i),P.isNullOrUndefined(t.style.paragraphIndent)||(e.style.stringFormat=new R.PdfStringFormat,e.style.stringFormat.paragraphIndent=t.style.paragraphIndent)},D.prototype.getHorizontalAlignment=function(e,t){switch(void 0===t&&(t=new R.PdfStringFormat),e){case"Right":t.alignment=R.PdfTextAlignment.Right;break;case"Center":t.alignment=R.PdfTextAlignment.Center;break;case"Justify":t.alignment=R.PdfTextAlignment.Justify;break;case"Left":t.alignment=R.PdfTextAlignment.Left}return t},D.prototype.getVerticalAlignment=function(e,t,i){switch(void 0===t&&(t=new R.PdfStringFormat,t=this.getHorizontalAlignment(i,t)),e){case"Bottom":t.lineAlignment=R.PdfVerticalAlignment.Bottom;break;case"Middle":t.lineAlignment=R.PdfVerticalAlignment.Middle;break;case"Top":t.lineAlignment=R.PdfVerticalAlignment.Top}return t},D.prototype.getFontFamily=function(e){switch(e){case"TimesRoman":return 2;case"Courier":return 1;case"Symbol":return 3;case"ZapfDingbats":return 4;default:return 0}},D.prototype.getFont=function(e){var t,i,n;return e.font||(t=P.isNullOrUndefined(e.style.fontSize)?9.75:.75*e.style.fontSize,i=P.isNullOrUndefined(e.style.fontFamily)?R.PdfFontFamily.TimesRoman:this.getFontFamily(e.style.fontFamily),n=R.PdfFontStyle.Regular,!P.isNullOrUndefined(e.style.bold)&&e.style.bold&&(n|=R.PdfFontStyle.Bold),!P.isNullOrUndefined(e.style.italic)&&e.style.italic&&(n|=R.PdfFontStyle.Italic),!P.isNullOrUndefined(e.style.underline)&&e.style.underline&&(n|=R.PdfFontStyle.Underline),!P.isNullOrUndefined(e.style.strikeout)&&e.style.strikeout&&(n|=R.PdfFontStyle.Strikeout),new R.PdfStandardFont(i,t,n))},D.prototype.getPageNumberStyle=function(e){switch(e){case"LowerLatin":return 2;case"LowerRoman":return 3;case"UpperLatin":return 4;case"UpperRoman":return 5;default:return 1}},D.prototype.setContentFormat=function(e,t){if(P.isNullOrUndefined(e.size))return null;var i=.75*e.size.width,n=.75*e.size.height;if(t=new R.PdfStringFormat(R.PdfTextAlignment.Left,R.PdfVerticalAlignment.Middle),!P.isNullOrUndefined(e.style.hAlign))switch(e.style.hAlign){case"Right":t.alignment=R.PdfTextAlignment.Right;break;case"Center":t.alignment=R.PdfTextAlignment.Center;break;case"Justify":t.alignment=R.PdfTextAlignment.Justify;break;default:t.alignment=R.PdfTextAlignment.Left}return{format:t=P.isNullOrUndefined(e.style.vAlign)?t:this.getVerticalAlignment(e.style.vAlign,t),size:new R.SizeF(i,n)}},D.prototype.getPageSize=function(e){switch(e){case"Letter":return new R.SizeF(612,792);case"Note":return new R.SizeF(540,720);case"Legal":return new R.SizeF(612,1008);case"A0":return new R.SizeF(2380,3368);case"A1":return new R.SizeF(1684,2380);case"A2":return new R.SizeF(1190,1684);case"A3":return new R.SizeF(842,1190);case"A5":return new R.SizeF(421,595);case"A6":return new R.SizeF(297,421);case"A7":return new R.SizeF(210,297);case"A8":return new R.SizeF(148,210);case"A9":return new R.SizeF(105,148);case"B0":return new R.SizeF(2836,4008);case"B1":return new R.SizeF(2004,2836);case"B2":return new R.SizeF(1418,2004);case"B3":return new R.SizeF(1002,1418);case"B4":return new R.SizeF(709,1002);case"B5":return new R.SizeF(501,709);case"Archa":return new R.SizeF(648,864);case"Archb":return new R.SizeF(864,1296);case"Archc":return new R.SizeF(1296,1728);case"Archd":return new R.SizeF(1728,2592);case"Arche":return new R.SizeF(2592,3456);case"Flsa":return new R.SizeF(612,936);case"HalfLetter":return new R.SizeF(396,612);case"Letter11x17":return new R.SizeF(792,1224);case"Ledger":return new R.SizeF(1224,792);default:return new R.SizeF(595,842)}},D.prototype.getDashStyle=function(e){switch(e){case"Dash":return 1;case"Dot":return 2;case"DashDot":return 3;case"DashDotDot":return 4;default:return 0}},D.prototype.getPenFromContent=function(e){var t=new R.PdfPen(new R.PdfColor(0,0,0));return P.isNullOrUndefined(e.style)||null===e.style||P.isNullOrUndefined(e.style.penColor)||(e=this.hexToRgb(e.style.penColor),t=new R.PdfPen(new R.PdfColor(e.r,e.g,e.b))),t},D.prototype.getBrushFromContent=function(e){var t=null;return P.isNullOrUndefined(e.style.textBrushColor)||(e=this.hexToRgb(e.style.textBrushColor),t=new R.PdfSolidBrush(new R.PdfColor(e.r,e.g,e.b))),t},D.prototype.hexToRgb=function(e){if(null===e||""===e||7!==e.length)throw new Error("please set valid hex value for color...");e=e.substring(1);e=parseInt(e,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},D.prototype.getFontStyle=function(e){var t=R.PdfFontStyle.Regular;return!P.isNullOrUndefined(e)&&e.bold&&(t|=R.PdfFontStyle.Bold),!P.isNullOrUndefined(e)&&e.italic&&(t|=R.PdfFontStyle.Italic),!P.isNullOrUndefined(e)&&e.underline&&(t|=R.PdfFontStyle.Underline),!P.isNullOrUndefined(e)&&e.strikeout&&(t|=R.PdfFontStyle.Strikeout),t},D.prototype.getBorderStyle=function(e){var t,i,n,r=new R.PdfBorders;return P.isNullOrUndefined(e)?r.all=new R.PdfPen(new R.PdfColor(234,234,234)):(t=e.width,t=P.isNullOrUndefined(t)||"number"!=typeof t?void 0:.75*t,i=new R.PdfColor(196,196,196),P.isNullOrUndefined(e.color)||(n=this.hexToRgb(e.color),i=new R.PdfColor(n.r,n.g,n.b)),n=new R.PdfPen(i,t),P.isNullOrUndefined(e.dashStyle)||(n.dashStyle=this.getDashStyle(e.dashStyle)),r.all=n),r},D.prototype.destroy=function(){};var Jc=D;function D(e){this.hideColumnInclude=!1,this.currentViewData=!1,this.customDataSource=!1,this.isGrouping=!1,this.headerOnPages=[],this.drawPosition={xPosition:0,yPosition:0},this.parent=e,this.helper=new _c(e),this.gridPool={}}Zc=function(e,t){return(Zc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Zc(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(tu,$c=_s),tu.prototype.destroyButtons=function(e){for(var t=0;t<this.childRefs.length;t++)!this.childRefs[parseInt(t.toString(),10)]||this.childRefs[parseInt(t.toString(),10)].isDestroyed||this.parent.editSettings.showAddNewRow&&this.parent.enableVirtualization&&E(this.childRefs[parseInt(t.toString(),10)].element,"e-addedrow")||(this.childRefs[parseInt(t.toString(),10)].destroy(),this.childRefs[parseInt(t.toString(),10)].element&&(this.childRefs[parseInt(t.toString(),10)].element.innerHTML=""));if(this.childRefs=[],"refreshCommandColumn"===e.type){var i=this.parent.element.querySelectorAll(".e-gridcontent .e-unboundcell");if(i.length)for(t=0;t<i.length;t++)!i[parseInt(t.toString(),10)]||this.parent.editSettings.showAddNewRow&&this.parent.enableVirtualization&&E(i[parseInt(t.toString(),10)],"e-addedrow")||(i[parseInt(t.toString(),10)].querySelector(".e-unboundcelldiv")&&(i[parseInt(t.toString(),10)].querySelector(".e-unboundcelldiv").innerHTML=""),i[parseInt(t.toString(),10)].innerHTML="")}else this.parent.off(r,this.destroyButtons),this.parent.off(Er,this.destroyButtons)},tu.prototype.render=function(e,t,i,n){var r,s=this.element.cloneNode();if(s.appendChild(this.unbounDiv.cloneNode()),s.setAttribute("aria-label",this.localizer.getConstant("CommandColumnAria")+e.column.headerText),e.column.commandsTemplate)this.parent.isReact&&"string"!=typeof e.column.commandsTemplate?(r=this.parent+"commandsTemplate",e.column.getColumnTemplate()(t,this.parent,"commandsTemplate",r,null,null,s.firstElementChild),this.parent.renderTemplates()):sh(s.firstElementChild,e.column.getColumnTemplate()(t,this.parent,"commandsTemplate",null,null,null,null,this.parent.root));else for(var o=0,a=e.commands;o<a.length;o++)var l=a[o],s=this.renderButton(s,l,i.index,l.uid);return this.setAttributes(s,e,i),!this.parent.enableVirtualization&&this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))||n?(P.addClass([].slice.call(s.getElementsByClassName("e-edit-delete")),"e-hide"),P.removeClass([].slice.call(s.getElementsByClassName("e-save-cancel")),"e-hide")):(P.addClass([].slice.call(s.getElementsByClassName("e-save-cancel")),"e-hide"),P.removeClass([].slice.call(s.getElementsByClassName("e-edit-delete")),"e-hide")),this.parent.isFrozenGrid()&&up(this.parent,e.column,s),s},tu.prototype.renderButton=function(e,t,i,n){var r=this.buttonElement.cloneNode(),i=(P.attributes(r,{id:this.parent.element.id+(t.type||"")+"_"+i+"_"+n,type:"button",title:P.isNullOrUndefined(t.title)?t.buttonOption.content||this.localizer.getConstant(t.type)||t.type:t.title,"data-uid":n}),r.onclick=t.buttonOption.click,t.buttonOption.cssClass=this.parent.cssClass?t.buttonOption.cssClass+" "+this.parent.cssClass:t.buttonOption.cssClass,new B.Button(t.buttonOption,r));switch(this.childRefs.push(i),i.commandType=t.type,e.firstElementChild.appendChild(i.element),t.type){case"Edit":case"Delete":P.addClass([r],["e-edit-delete","e-"+t.type.toLowerCase()+"button"]);break;case"Cancel":case"Save":P.addClass([r],["e-save-cancel","e-"+t.type.toLowerCase()+"button"])}return e};var Zc,$c,eu=tu;function tu(e,t){e=$c.call(this,e,t)||this;return e.buttonElement=e.parent.createElement("button",{}),e.unbounDiv=e.parent.createElement("div",{className:"e-unboundcelldiv",styles:"display: inline-block"}),e.childRefs=[],e.element=e.parent.createElement("TD",{className:"e-rowcell e-unboundcell",attrs:{tabindex:"-1",role:"gridcell"}}),e.parent.on(r,e.destroyButtons,e),e.parent.on(Er,e.destroyButtons,e),e}nu.prototype.initiateRender=function(){this.locator.getService("cellRendererFactory").addCellRenderer(O.CellType.CommandColumn,new eu(this.parent,this.locator))},nu.prototype.commandClickHandler=function(e){var t=this.parent,i=P.closest(e.target,"button");if(i&&P.closest(e.target,".e-unboundcell")){for(var n,r=i.ej2_instances[0],s=r.commandType,o=i.getAttribute("data-uid"),e=t.getRowObjectFromUID(P.closest(i,"."+I).getAttribute("data-uid")),a=this.parent.columnModel,l=0;l<a.length;l++)if(a[parseInt(l.toString(),10)].commands)for(var h=a[parseInt(l.toString(),10)].commands,p=0;p<h.length;p++){var d;h[parseInt(p.toString(),10)].uid===o&&h[parseInt(p.toString(),10)].type===s?n=h[parseInt(p.toString(),10)]:(d=[].slice.call(P.closest(i,".e-unboundcell").querySelectorAll("button")).findIndex(function(e){return e===i}))<h.length&&h[parseInt(d.toString(),10)].type===s&&String(h[parseInt(p.toString(),10)].uid)===o&&(n=h[parseInt(d.toString(),10)])}e={cancel:!1,target:i,commandColumn:n,rowData:P.isNullOrUndefined(e)?void 0:e.data};this.parent.trigger(nt,e,function(e){if(!r.disabled&&t.editModule&&!e.cancel)switch(s){case"Edit":t.editModule.endEdit(),t.editModule.startEdit(P.closest(i,"tr"));break;case"Cancel":t.editModule.closeEdit();break;case"Save":t.editModule.endEdit();break;case"Delete":"Batch"!==t.editSettings.mode&&t.editModule.endEdit(),t.commandDelIndex=parseInt(P.closest(i,"tr").getAttribute(x),10),t.clearSelection(),t.selectRow(t.commandDelIndex,!1),t.editModule.deleteRecord(),t.commandDelIndex=void 0}})}},nu.prototype.getModuleName=function(){return"commandColumn"},nu.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},nu.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Lt,this.commandClickHandler),this.parent.off(Mt,this.keyPressHandler),this.parent.off(lt,this.load),this.parent.off(r,this.destroy))},nu.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Lt,this.commandClickHandler,this),this.parent.on(Mt,this.keyPressHandler,this),this.parent.on(lt,this.load,this),this.parent.on(r,this.destroy,this))},nu.prototype.keyPressHandler=function(e){"enter"===e.action&&P.closest(e.target,".e-unboundcelldiv")&&(this.commandClickHandler(e),e.preventDefault())},nu.prototype.load=function(){for(var e=this.parent.columnModel,t=0;t<e.length;t++)if(e[parseInt(t.toString(),10)].commands)for(var i=e[parseInt(t.toString(),10)].commands,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].uid=rh("gridcommand")};var iu=nu;function nu(e,t){this.parent=e,this.locator=t,this.initiateRender(),this.addEventListener()}var T={header:"."+Gr,content:"."+_r,edit:".e-inline-edit",batchEdit:".e-editedbatchcell",editIcon:"e-edit",pager:".e-gridpager",delete:"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup"},ru=(su.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(g,this.enableAfterRenderMenu,this),this.parent.on(at,this.render,this),this.parent.on(r,this.destroy,this))},su.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(at,this.render),this.parent.off(g,this.enableAfterRenderMenu),this.parent.off(r,this.destroy),P.EventHandler.remove(this.element,"keydown",this.keyDownHandler.bind(this)))},su.prototype.keyDownHandler=function(e){"Tab"!==e.code&&9!==e.which||this.contextMenu.close(),"Escape"===e.code&&(this.contextMenu.close(),this.parent.notify(on,{}))},su.prototype.render=function(){this.parent.element.classList.add("e-noselect"),this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_cmenu"}),P.EventHandler.add(this.element,"keydown",this.keyDownHandler.bind(this)),this.parent.element.appendChild(this.element);var e="#"+this.gridID;this.contextMenu=new H.ContextMenu({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:this.parent.cssClass?"e-grid-menu "+this.parent.cssClass:"e-grid-menu"}),this.contextMenu.appendTo(this.element)},su.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.contextMenu&&(this.contextMenu.destroy(),P.remove(this.element),this.parent.element.classList.remove("e-noselect")),this.render())},su.prototype.getMenuItems=function(){for(var e,t=[],i=[],n=0,r=this.parent.contextMenuItems;n<r.length;n++){var s=r[n];"string"==typeof s&&-1!==this.getDefaultItems().indexOf(s)?(-1!==s.toLocaleLowerCase().indexOf("export")?i:t).push(this.buildDefaultItems(s)):"string"!=typeof s&&t.push(s)}return 0<i.length&&((e=this.buildDefaultItems("export")).items=i,t.push(e)),t},su.prototype.getLastPage=function(){var e=Math.floor(this.parent.pageSettings.totalRecordsCount/this.parent.pageSettings.pageSize);return this.parent.pageSettings.totalRecordsCount%this.parent.pageSettings.pageSize&&(e+=1),e},su.prototype.contextMenuOpen=function(){this.isOpen=!0},su.prototype.contextMenuItemClick=function(e){switch(this.getKeyFromId(e.item.id)){case"AutoFitAll":this.parent.autoFitColumns([]);break;case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Edit":this.parent.editModule&&("Batch"===this.parent.editSettings.mode?this.row&&this.cell&&!isNaN(parseInt(this.cell.getAttribute(ps),10))&&this.parent.editModule.editCell(parseInt(this.row.getAttribute(x),10),this.parent.getColumns()[parseInt(this.cell.getAttribute(ps),10)].field):(this.parent.editModule.endEdit(),this.parent.editModule.startEdit(this.row)));break;case"Delete":this.parent.editModule&&("Batch"!==this.parent.editSettings.mode&&this.parent.editModule.endEdit(),1===this.parent.getSelectedRecords().length?this.parent.editModule.deleteRow(this.row):this.parent.deleteRecord());break;case"Save":this.parent.editModule&&this.parent.editModule.endEdit();break;case"Cancel":this.parent.editModule&&this.parent.editModule.closeEdit();break;case"Copy":this.parent.copy();break;case"PdfExport":this.parent.pdfExport();break;case"ExcelExport":this.parent.excelExport();break;case"CsvExport":this.parent.csvExport();break;case"SortAscending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.isOpen=!1,this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"FirstPage":this.parent.goToPage(1);break;case"PrevPage":this.parent.goToPage(this.parent.pageSettings.currentPage-1);break;case"LastPage":this.parent.goToPage(this.getLastPage());break;case"NextPage":this.parent.goToPage(this.parent.pageSettings.currentPage+1)}e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger(mi,e)},su.prototype.contextMenuOnClose=function(e){0<e.items.length&&e.items[0].parentObj instanceof H.ContextMenu&&this.updateItemStatus(),this.parent.notify(hr,{isOpen:!1})},su.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[""+e])},su.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems),this.contextMenu.enableItems(this.disableItems),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},su.prototype.contextMenuBeforeOpen=function(e){var t=P.closest(e.event.target,".e-grid");if(e.event&&t&&t!==this.parent.element)e.cancel=!0;else if(e.event&&(P.closest(e.event.target,"."+T.groupHeader)||P.closest(e.event.target,"."+T.touchPop)||P.closest(e.event.target,".e-summarycell")||P.closest(e.event.target,".e-groupcaption")||P.closest(e.event.target,".e-filterbarcell"))||this.parent.editSettings.showAddNewRow&&P.closest(e.event.target,".e-addedrow")&&this.parent.element.querySelector(".e-editedrow"))e.cancel=!0;else{this.targetColumn=this.getColumn(e.event),E(e.event.target,"e-grid")&&(this.targetRowdata=this.parent.getRowInfo(e.event.target)),P.isNullOrUndefined(e.parentItem)&&this.targetColumn&&this.targetRowdata.cell&&(this.parent.notify(hr,{isOpen:!0}),this.selectRow(e.event,!this.targetRowdata.cell.classList.contains("e-selectionbackground")||"Multiple"!==this.parent.selectionSettings.type));for(var i=[],n=[],r=0,s=e.items;r<s.length;r++){var o=s[r],a=this.getKeyFromId(o.id),l=this.defaultItems[""+a];-1!==this.getDefaultItems().indexOf(a)?(this.ensureDisabledStatus(a)&&this.disableItems.push(o.text),e.event&&(this.ensureTarget(e.event.target,T.edit)||this.ensureTarget(e.event.target,T.batchEdit))?"Save"!==a&&"Cancel"!==a&&this.hiddenItems.push(o.text):this.parent.editModule&&"Batch"===this.parent.editSettings.mode&&(P.closest(e.event.target,".e-gridform")||this.parent.editModule.getBatchChanges()[rs].length||this.parent.editModule.getBatchChanges()[ss].length||this.parent.editModule.getBatchChanges()[os].length)&&("Save"===a||"Cancel"===a)||P.isNullOrUndefined(e.parentItem)&&e.event&&!this.ensureTarget(e.event.target,l.target)&&this.hiddenItems.push(o.text)):o.target&&e.event&&!this.ensureTarget(e.event.target,o.target)?o.separator?i.push(o.id):this.hiddenItems.push(o.text):this.ensureTarget(e.event.target,o.target)&&o.separator&&n.push(o.id)}0<n.length&&this.contextMenu.showItems(n,!0),this.contextMenu.enableItems(this.disableItems,!1),this.contextMenu.hideItems(this.hiddenItems),0<i.length&&this.contextMenu.hideItems(i,!0),this.eventArgs=e.event,e.column=this.targetColumn,e.rowInfo=this.targetRowdata,this.parent.trigger(Si,e),(e.cancel||this.hiddenItems.length===e.items.length&&!e.parentItem)&&(this.updateItemStatus(),e.cancel=!0)}Gh(this.parent.element,this.contextMenu.element.parentElement)},su.prototype.ensureTarget=function(e,t){var i=e;return(i=!this.ensureFrozenHeader(e)||t!==T.header&&t!==T.content?t===T.content||t===T.header?E(P.closest(e,"."+$r),t.substr(1,t.length)):P.closest(e,t):P.closest(e,t===T.header?"thead":N))&&E(i,"e-grid")===this.parent.element},su.prototype.ensureFrozenHeader=function(e){return!(!this.parent.frozenRows||!P.closest(e,T.header))},su.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"AutoFitAll":case"AutoFit":t=!(this.parent.ensureModuleInjected(Dd)&&!this.parent.isEdit)||this.targetColumn&&!this.targetColumn.field&&"AutoFit"===e;break;case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Ad)&&this.targetColumn&&0<=this.parent.groupSettings.columns.indexOf(this.targetColumn.field)||this.targetColumn&&!this.targetColumn.field)&&(t=!0);break;case"Ungroup":this.parent.allowGrouping&&this.parent.ensureModuleInjected(Ad)&&!(this.parent.ensureModuleInjected(Ad)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)||(t=!0);break;case"Edit":case"Delete":case"Save":case"Cancel":this.parent.editModule&&0!==this.parent.getDataRows().length||(t=!0);break;case"Copy":(0===this.parent.getSelectedRowIndexes().length&&0===this.parent.getSelectedRowCellIndexes().length||0===this.parent.getCurrentViewRecords().length)&&(t=!0);break;case"export":this.parent.allowExcelExport&&this.parent.excelExport&&(this.parent.ensureModuleInjected(Jc)||this.parent.ensureModuleInjected(Xc))||(t=!0);break;case"PdfExport":this.parent.allowPdfExport&&this.parent.ensureModuleInjected(Jc)||(t=!0);break;case"ExcelExport":case"CsvExport":this.parent.allowExcelExport&&this.parent.ensureModuleInjected(Xc)||(t=!0);break;case"SortAscending":case"SortDescending":if(!this.parent.allowSorting||!this.parent.ensureModuleInjected(Hp)||this.targetColumn&&!this.targetColumn.field)t=!0;else if(this.parent.ensureModuleInjected(Hp)&&0<this.parent.sortSettings.columns.length&&this.targetColumn)for(var i=this.parent.sortSettings.columns,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].field===this.targetColumn.field&&i[parseInt(n.toString(),10)].direction.toLowerCase()===e.toLowerCase().replace("sort","").toLocaleLowerCase()&&(t=!0);break;case"FirstPage":case"PrevPage":this.parent.allowPaging&&this.parent.ensureModuleInjected(ed)&&0!==this.parent.getCurrentViewRecords().length&&(!this.parent.ensureModuleInjected(ed)||1!==this.parent.pageSettings.currentPage)||(t=!0);break;case"LastPage":case"NextPage":this.parent.allowPaging&&this.parent.ensureModuleInjected(ed)&&0!==this.parent.getCurrentViewRecords().length&&(!this.parent.ensureModuleInjected(ed)||this.parent.pageSettings.currentPage!==this.getLastPage())||(t=!0)}return t},su.prototype.getContextMenu=function(){return this.element},su.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector("."+Gr)||e.querySelector("."+_r))&&(this.contextMenu.destroy(),this.element.parentNode&&P.remove(this.element),this.removeEventListener(),this.parent.element.classList.remove("e-noselect"))},su.prototype.getModuleName=function(){return"contextMenu"},su.prototype.generateID=function(e){return this.gridID+"_cmenu_"+e},su.prototype.getKeyFromId=function(e){return e.replace(this.gridID+"_cmenu_","")},su.prototype.buildDefaultItems=function(e){var t;switch(e){case"AutoFitAll":case"AutoFit":t={target:T.header};break;case"Group":t={target:T.header,iconCss:T.group};break;case"Ungroup":t={target:T.header,iconCss:T.ungroup};break;case"Edit":t={target:T.content,iconCss:T.editIcon};break;case"Delete":t={target:T.content,iconCss:T.delete};break;case"Save":t={target:T.edit,iconCss:T.save};break;case"Cancel":t={target:T.edit,iconCss:T.cancel};break;case"Copy":t={target:T.content,iconCss:T.copy};break;case"export":t={target:T.content};break;case"PdfExport":t={target:T.content,iconCss:T.pdf};break;case"ExcelExport":t={target:T.content,iconCss:T.excel};break;case"CsvExport":t={target:T.content,iconCss:T.csv};break;case"SortAscending":t={target:T.header,iconCss:T.ascending};break;case"SortDescending":t={target:T.header,iconCss:T.descending};break;case"FirstPage":t={target:T.pager,iconCss:T.fPage};break;case"PrevPage":t={target:T.pager,iconCss:T.pPage};break;case"LastPage":t={target:T.pager,iconCss:T.lPage};break;case"NextPage":t={target:T.pager,iconCss:T.nPage}}return this.defaultItems[""+e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[""+e]},su.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","Group","Ungroup","Edit","Delete","Save","Cancel","Copy","export","PdfExport","ExcelExport","CsvExport","SortAscending","SortDescending","FirstPage","PrevPage","LastPage","NextPage"]},su.prototype.setLocaleKey=function(){return{AutoFitAll:"autoFitAll",AutoFit:"autoFit",Copy:"Copy",Group:"Group",Ungroup:"Ungroup",Edit:"EditRecord",Delete:"DeleteRecord",Save:"Save",Cancel:"CancelButton",PdfExport:"Pdfexport",ExcelExport:"Excelexport",CsvExport:"Csvexport",export:"Export",SortAscending:"SortAscending",SortDescending:"SortDescending",FirstPage:"FirstPage",LastPage:"LastPage",PrevPage:"PreviousPage",NextPage:"NextPage"}},su.prototype.getColumn=function(e){var t=P.closest(e.target,"th.e-headercell");return t?(t=t.querySelector(".e-headercelldiv, .e-stackedheadercelldiv").getAttribute("e-mappinguid"),this.parent.getColumnByUid(t)):this.parent.getRowInfo(e.target).column||null},su.prototype.selectRow=function(e,t){this.cell=e.target,this.row=P.closest(e.target,"tr.e-row")||this.row,this.row&&t&&!E(e.target,"e-gridpager")&&this.parent.selectRow(parseInt(this.row.getAttribute(x),10))},su);function su(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener()}au.prototype.getModuleName=function(){return"freeze"},au.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(at,this.instantiateRenderer,this),this.parent.on(r,this.destroy,this))},au.prototype.instantiateRenderer=function(){this.parent.log("limitation",this.getModuleName())},au.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(at,this.instantiateRenderer),this.parent.off(r,this.destroy))},au.prototype.destroy=function(){this.removeEventListener()};var ou=au;function au(e,t){this.parent=e,this.locator=t,this.addEventListener()}F.prototype.wireEvents=function(){if(!this.parent.enableAdaptiveUI)for(var e=this.getColumnMenuHandlers(),t=0;t<e.length;t++)P.EventHandler.add(e[parseInt(t.toString(),10)],"mousedown",this.columnMenuHandlerDown,this)},F.prototype.unwireEvents=function(){if(!this.parent.enableAdaptiveUI)for(var e=this.getColumnMenuHandlers(),t=0;t<e.length;t++)P.EventHandler.remove(e[parseInt(t.toString(),10)],"mousedown",this.columnMenuHandlerDown)},F.prototype.setFullScreenDialog=function(){this.serviceLocator&&this.serviceLocator.registerAdaptiveService(this,this.parent.enableAdaptiveUI,O.ResponsiveDialogAction.isColMenu)},F.prototype.destroy=function(){var e=this.parent.element;(e.querySelector("."+_r)||e.querySelector("."+Gr))&&e&&(this.columnMenu&&this.columnMenu.destroy(),this.removeEventListener(),this.unwireFilterEvents(),this.unwireEvents(),!this.parent.enableAdaptiveUI)&&this.element.parentNode&&P.remove(this.element)},F.prototype.columnMenuHandlerClick=function(e){var t;e.target.classList.contains("e-columnmenu")&&(this.parent.enableAdaptiveUI?(this.headerCell=this.getHeaderCell(e),t=this.getColumn(),this.responsiveDialogRenderer.isCustomDialog=!0,this.parent.notify(kr,{action:4}),this.parent.notify(wi,{col:t,target:e.target,isClose:null,id:null}),this.responsiveDialogRenderer.showResponsiveDialog(null,t)):(this.columnMenu.items=this.getItems(),this.columnMenu.dataBind(),this.isOpen&&this.headerCell!==this.getHeaderCell(e)||document.querySelector(".e-grid-menu .e-menu-parent.e-ul")?(this.columnMenu.close(),this.openColumnMenu(e)):this.isOpen?this.columnMenu.close():this.openColumnMenu(e)))},F.prototype.openColumnMenuByField=function(e){this.openColumnMenu({target:this.parent.getColumnHeaderByField(e).querySelector(".e-columnmenu")})},F.prototype.afterFilterColumnMenuClose=function(){this.columnMenu&&(this.columnMenu.items=this.getItems(),this.columnMenu.dataBind(),this.columnMenu.close())},F.prototype.openColumnMenu=function(e){var t=this.parent.getContent().getClientRects()[0],i=this.parent.getHeaderContent(),n=i.getBoundingClientRect(),r={top:0,left:0},s=(this.element.style.cssText="display:block;visibility:hidden",this.element.getBoundingClientRect()),o=this.parent.element.getBoundingClientRect();this.element.style.cssText="display:none;visibility:visible",this.headerCell=this.getHeaderCell(e),this.parent.enableRtl?r=this.parent.enableStickyHeader?L.calculatePosition(this.headerCell,"left","bottom",!0):L.calculatePosition(this.headerCell,"left","bottom"):((r=this.parent.enableStickyHeader?L.calculatePosition(this.headerCell,"right","bottom",!0):L.calculatePosition(this.headerCell,"right","bottom")).left-=s.width,i.classList.contains("e-sticky")?(r.top=this.parent.element.offsetTop+n.top+n.height,n.top+n.height>t.top&&(r.top+=n.top+n.height-t.top)):this.parent.enableStickyHeader&&(r.top=this.parent.element.offsetTop+i.offsetTop+n.height),r.left+s.width+1>=o.right&&(r.left-=35)),this.columnMenu.open(r.top,r.left),e.preventDefault&&e.preventDefault(),Gh(this.parent.element,this.columnMenu.element.parentElement)},F.prototype.columnMenuHandlerDown=function(){this.isOpen=!("none"===this.element.style.display||""===this.element.style.display)},F.prototype.getColumnMenuHandlers=function(){return[].slice.call(this.parent.getHeaderTable().getElementsByClassName(this.ROOT))},F.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ft,this.wireEvents,this),this.parent.on(g,this.enableAfterRenderMenu,this),this.parent.on(lt,this.render,this),this.isFilterItemAdded()&&this.parent.on(bi,this.filterPosition,this),this.parent.on(nr,this.setFullScreenDialog,this),this.parent.on(kr,this.renderResponsiveChangeAction,this),this.parent.on(Lt,this.columnMenuHandlerClick,this),this.parent.on(xr,this.afterFilterColumnMenuClose,this),this.parent.on(Mt,this.keyPressHandler,this),this.parent.on(r,this.destroy,this))},F.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ft,this.unwireEvents),this.parent.off(g,this.enableAfterRenderMenu),this.parent.off(lt,this.render),this.isFilterItemAdded()&&this.parent.off(bi,this.filterPosition),this.parent.off(nr,this.setFullScreenDialog),this.parent.off(kr,this.renderResponsiveChangeAction),this.parent.off(Lt,this.columnMenuHandlerClick),this.parent.on(xr,this.afterFilterColumnMenuClose),this.parent.off(Mt,this.keyPressHandler),this.parent.off(r,this.destroy))},F.prototype.keyPressHandler=function(e){var t=this.parent;"altDownArrow"===e.action&&(e=t.focusModule.currentInfo.element)&&e.classList.contains("e-headercell")&&(t=t.getColumnByUid(e.firstElementChild.getAttribute("e-mappinguid")),this.openColumnMenuByField(t.field))},F.prototype.enableAfterRenderMenu=function(e){e.module===this.getModuleName()&&e.enable&&(this.columnMenu&&(this.columnMenu.destroy(),P.remove(this.element)),this.parent.enableAdaptiveUI||this.render())},F.prototype.render=function(){this.parent.enableAdaptiveUI||(this.l10n=this.serviceLocator.getService("localization"),this.element=this.parent.createElement("ul",{id:this.gridID+"_columnmenu",className:"e-colmenu"}),this.element.setAttribute("aria-label",this.l10n.getConstant("ColumnMenuDialogARIA")),this.parent.element.appendChild(this.element),this.columnMenu=new H.ContextMenu({cssClass:this.parent.cssClass?"e-grid-menu "+this.parent.cssClass:"e-grid-menu",enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,items:this.getItems(),select:this.columnMenuItemClick.bind(this),beforeOpen:this.columnMenuBeforeOpen.bind(this),onOpen:this.columnMenuOnOpen.bind(this),onClose:this.columnMenuOnClose.bind(this),beforeItemRender:this.beforeMenuItemRender.bind(this),beforeClose:this.columnMenuBeforeClose.bind(this)}),this.element&&E(this.element,"e-popup")&&this.element.classList.add(this.COL_POP),this.columnMenu.appendTo(this.element),this.wireFilterEvents())},F.prototype.wireFilterEvents=function(){!P.Browser.isDevice&&this.isFilterItemAdded()&&P.EventHandler.add(this.element,"mouseover",this.appendFilter,this)},F.prototype.unwireFilterEvents=function(){P.Browser.isDevice||!this.isFilterItemAdded()||this.parent.enableAdaptiveUI||P.EventHandler.remove(this.element,"mouseover",this.appendFilter)},F.prototype.beforeMenuItemRender=function(e){var t,i,n;this.isChooserItem(e.item)?(i=this.getKeyFromId(e.item.id,this.CHOOSER),n=this.parent.columnModel.filter(function(e){return e.field===i}),n=B.createCheckBox(this.parent.createElement,!1,{label:e.item.text,checked:n[0].visible}),this.parent.enableRtl&&n.classList.add("e-rtl"),this.parent.cssClass&&(-1!==this.parent.cssClass.indexOf(" ")?(t=n.classList).add.apply(t,this.parent.cssClass.split(" ")):n.classList.add(this.parent.cssClass)),e.element.innerHTML="",e.element.appendChild(n)):e.item.id&&"Filter"===this.getKeyFromId(e.item.id)&&(e.element.appendChild(this.parent.createElement("span",{className:"e-icons e-caret"})),e.element.className+="e-filter-item e-menu-caret-icon")},F.prototype.columnMenuBeforeClose=function(e){var t=e.event?P.closest(e.event.target,".e-menu-item"):null;!P.isNullOrUndefined(e.parentItem)&&"ColumnChooser"===this.getKeyFromId(e.parentItem.id)&&t&&this.isChooserItem(t)?e.cancel=!e.event||"Escape"!==e.event.code:(e.event&&(P.closest(e.event.target,"."+this.POP)||e.event.currentTarget&&e.event.currentTarget.activeElement&&E(e.event.currentTarget.activeElement,"e-filter-popup")||E(e.event.target,"e-popup")&&E(e.event.target,"e-colmenu-popup")||E(e.event.target,"e-popup-wrapper"))&&!P.Browser.isDevice||e.event&&e.event.target&&e.event.target.classList.contains("e-filter-item")&&"Enter"===e.event.key)&&(e.cancel=!0)},F.prototype.isChooserItem=function(e){return e.id&&0<=e.id.indexOf("_colmenu_")&&-1===this.getKeyFromId(e.id,this.CHOOSER).indexOf("_colmenu_")},F.prototype.columnMenuBeforeOpen=function(e){e.column=this.targetColumn=this.getColumn(),this.parent.trigger(Ci,e);for(var t=0,i=e.items;t<i.length;t++){var n=i[t],r=this.getKeyFromId(n.id),s=this.defaultItems[""+r];-1!==this.getDefaultItems().indexOf(r)&&this.ensureDisabledStatus(r)&&!s.hide&&this.disableItems.push(n.text),n.hide&&this.hiddenItems.push(n.text)}this.columnMenu.enableItems(this.disableItems,!1),this.columnMenu.hideItems(this.hiddenItems)},F.prototype.columnMenuOnOpen=function(e){"e-menu-parent e-ul "===e.element.className&&(e.element.offsetHeight>window.innerHeight||this.parent.element.offsetHeight>window.innerHeight)&&(e.element.style.maxHeight=.8*window.innerHeight+"px",e.element.style.overflowY="auto",this.parent.enableStickyHeader)&&(e.element.style.position="fixed")},F.prototype.ensureDisabledStatus=function(e){var t=!1;switch(e){case"Group":(!this.parent.allowGrouping||this.parent.ensureModuleInjected(Ad)&&this.targetColumn&&0<=this.parent.groupSettings.columns.indexOf(this.targetColumn.field)||this.targetColumn&&!this.targetColumn.allowGrouping)&&(t=!0);break;case"AutoFitAll":case"AutoFit":t=!this.parent.ensureModuleInjected(Dd);break;case"Ungroup":(!this.parent.ensureModuleInjected(Ad)||this.parent.ensureModuleInjected(Ad)&&this.targetColumn&&this.parent.groupSettings.columns.indexOf(this.targetColumn.field)<0)&&(t=!0);break;case"SortDescending":case"SortAscending":if(this.parent.allowSorting&&this.parent.ensureModuleInjected(Hp)&&0<this.parent.sortSettings.columns.length&&this.targetColumn&&this.targetColumn.allowSorting)for(var i=this.parent.sortSettings.columns,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].field===this.targetColumn.field&&i[parseInt(n.toString(),10)].direction.toLocaleLowerCase()===e.toLocaleLowerCase().replace("sort","")&&(t=!0);else this.parent.allowSorting&&this.parent.ensureModuleInjected(Hp)&&(!this.parent.allowSorting||!this.targetColumn||this.targetColumn.allowSorting)||(t=!0);break;case"Filter":this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(Rd)&&this.targetColumn&&this.targetColumn.allowFiltering?t=!1:this.parent.ensureModuleInjected(Rd)&&this.parent.allowFiltering&&this.targetColumn&&(!this.targetColumn.allowFiltering||"FilterBar"===this.parent.filterSettings.type)&&(t=!0)}return t},F.prototype.columnMenuItemClick=function(e){switch(this.isChooserItem(e.item)?"ColumnChooser":this.getKeyFromId(e.item.id)){case"AutoFit":this.parent.autoFitColumns(this.targetColumn.field);break;case"AutoFitAll":this.parent.autoFitColumns([]);break;case"Ungroup":this.parent.ungroupColumn(this.targetColumn.field);break;case"Group":this.parent.groupColumn(this.targetColumn.field);break;case"SortAscending":this.parent.sortColumn(this.targetColumn.field,"Ascending");break;case"SortDescending":this.parent.sortColumn(this.targetColumn.field,"Descending");break;case"ColumnChooser":var t=this.getKeyFromId(e.item.id,this.CHOOSER),i=e.element.querySelector(".e-checkbox-wrapper .e-frame");i&&i.classList.contains("e-check")?(i.classList.remove("e-check"),this.parent.hideColumns(t,"field")):i&&(this.parent.showColumns(t,"field"),i.classList.add("e-check"));break;case"Filter":this.getFilter(e.element,e.item.id)}e.column=this.targetColumn,this.parent.trigger(vi,e)},F.prototype.columnMenuOnClose=function(e){0<e.items.length&&e.items[0].parentObj instanceof H.ContextMenu&&(this.columnMenu.enableItems(this.disableItems,!1),this.disableItems=[],this.columnMenu.showItems(this.hiddenItems),this.hiddenItems=[],this.isFilterPopupOpen())&&this.getFilter(e.element,e.element.id,!0),!P.isNullOrUndefined(e.parentItem)&&"ColumnChooser"===this.getKeyFromId(e.parentItem.id)&&this.columnMenu.element.querySelector(".e-selected")?this.columnMenu.element.querySelector(".e-selected").focus():this.parent.notify(on,{})},F.prototype.getDefaultItems=function(){return["AutoFitAll","AutoFit","SortAscending","SortDescending","Group","Ungroup","ColumnChooser","Filter"]},F.prototype.getItems=function(){for(var e=[],t=0,i=this.parent.columnMenuItems||this.getDefault();t<i.length;t++){var n,r=i[t];"string"==typeof r?"ColumnChooser"===r?((n=this.getDefaultItem(r)).items=this.createChooserItems(),e.push(n)):e.push(this.getDefaultItem(r)):e.push(r)}return e},F.prototype.getDefaultItem=function(e){var t={};switch(e){case"SortAscending":t={iconCss:this.ASCENDING};break;case"SortDescending":t={iconCss:this.DESCENDING};break;case"Group":t={iconCss:this.GROUP};break;case"Ungroup":t={iconCss:this.UNGROUP};break;case"Filter":t={iconCss:this.FILTER}}return this.defaultItems[""+e]={text:this.getLocaleText(e),id:this.generateID(e),iconCss:t.iconCss?"e-icons "+t.iconCss:null},this.defaultItems[""+e]},F.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[""+e])},F.prototype.generateID=function(e,t){return this.gridID+"_colmenu_"+(t?t+e:e)},F.prototype.getKeyFromId=function(e,t){return 0<e.indexOf("_colmenu_")&&e.replace(this.gridID+"_colmenu_"+(t||""),"")},F.prototype.getColumnMenu=function(){return this.element},F.prototype.getModuleName=function(){return"columnMenu"},F.prototype.setLocaleKey=function(){return{AutoFitAll:"autoFitAll",AutoFit:"autoFit",Group:"Group",Ungroup:"Ungroup",SortAscending:"SortAscending",SortDescending:"SortDescending",ColumnChooser:"Columnchooser",Filter:"FilterMenu"}},F.prototype.getHeaderCell=function(e){return P.closest(e.target,"th.e-headercell")},F.prototype.getColumn=function(){var e;return this.headerCell?(e=this.headerCell.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),this.parent.getColumnByUid(e)):null},F.prototype.createChooserItems=function(){for(var e=[],t=0,i=this.parent.columnModel;t<i.length;t++){var n=i[t];n.showInColumnChooser&&n.field&&e.push({id:this.generateID(n.field,this.CHOOSER),text:n.headerText||n.field})}return e},F.prototype.appendFilter=function(e){var t;this.defaultItems.Filter&&(t=this.defaultItems.Filter.id,P.closest(e.target,"#"+t)&&!this.isFilterPopupOpen()?this.getFilter(e.target,t):!P.closest(e.target,"#"+t)&&this.isFilterPopupOpen()&&this.getFilter(e.target,t,!0))},F.prototype.getFilter=function(e,t,i){var n=this.getFilterPop();n?n.style.display=!P.Browser.isDevice&&i?"none":"block":this.parent.notify(wi,{col:this.targetColumn,target:e,isClose:i,id:t})},F.prototype.setPosition=function(e,t){var i=this.parent.element.getBoundingClientRect(),e=e.getBoundingClientRect(),n=e.left-i.left,r=e.top-i.top;i.height<r?r=r-t.offsetHeight+e.height:i.height<r+t.offsetHeight&&(r=i.height-t.offsetHeight),(r=window.innerHeight<t.offsetHeight+r+i.top?window.innerHeight-t.offsetHeight-i.top:r)+i.top<0&&(r=0),n+=this.parent.enableRtl?-t.offsetWidth:e.width,i.width<=n+t.offsetWidth?(n-=e.width+t.offsetWidth,e.left<t.offsetWidth&&(n=e.left+t.offsetWidth/2)):n<0&&(n+=t.offsetWidth+e.width),t.style.top=r+"px",t.style.left=n+"px"},F.prototype.filterPosition=function(){var e,t,i=this.getFilterPop();this.parent.enableAdaptiveUI||(i.classList.add(this.WRAP),!P.Browser.isDevice&&(e=i.style.display,i.style.cssText+="display:block;visibility:hidden",t=this.element.querySelector("."+this.FILTER))&&(this.setPosition(t.parentElement,i),i.style.cssText+="display:"+e+";visibility:visible"))},F.prototype.getDefault=function(){var e=[];return this.parent.ensureModuleInjected(Dd)&&(e.push("AutoFitAll"),e.push("AutoFit")),this.parent.allowGrouping&&this.parent.ensureModuleInjected(Ad)&&(e.push("Group"),e.push("Ungroup")),this.parent.allowSorting&&this.parent.ensureModuleInjected(Hp)&&(e.push("SortAscending"),e.push("SortDescending")),e.push("ColumnChooser"),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&this.parent.ensureModuleInjected(Rd)&&e.push("Filter"),e},F.prototype.isFilterPopupOpen=function(){var e=this.getFilterPop();return e&&"none"!==e.style.display},F.prototype.getFilterPop=function(){return!P.isNullOrUndefined(this.targetColumn)&&"Menu"===this.parent.filterSettings.type&&P.Browser.isDevice?document.getElementById(this.targetColumn.uid+"-flmdlg"):this.parent.element.querySelector("."+this.POP)},F.prototype.isFilterItemAdded=function(){return this.parent.columnMenuItems&&0<=this.parent.columnMenuItems.indexOf("Filter")||!this.parent.columnMenuItems},F.prototype.renderResponsiveChangeAction=function(e){this.responsiveDialogRenderer.action=e.action};var lu=F;function F(e,t){this.defaultItems={},this.localeText=this.setLocaleKey(),this.disableItems=[],this.hiddenItems=[],this.isOpen=!1,this.GROUP="e-icon-group",this.UNGROUP="e-icon-ungroup",this.ASCENDING="e-icon-ascending",this.DESCENDING="e-icon-descending",this.ROOT="e-columnmenu",this.FILTER="e-icon-filter",this.POP="e-filter-popup",this.WRAP="e-col-menu",this.COL_POP="e-colmenu-popup",this.CHOOSER="_chooser_",this.parent=e,this.gridID=e.element.id,this.serviceLocator=t,this.addEventListener(),this.parent.enableAdaptiveUI&&this.setFullScreenDialog()}hu=function(e,t){return(hu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}hu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(cu,pu=Nr),cu.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on(xi,this.initForeignKeyColumns,this),this.parent.on(Ri,this.getForeignKeyData,this),this.parent.on(Ei,this.generateQueryFormData,this))},cu.prototype.initForeignKeyColumns=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].dataSource=e[parseInt(t.toString(),10)].dataSource instanceof A.DataManager?e[parseInt(t.toString(),10)].dataSource:P.isNullOrUndefined(e[parseInt(t.toString(),10)].dataSource)?new A.DataManager:"result"in e[parseInt(t.toString(),10)].dataSource?e[parseInt(t.toString(),10)].dataSource:new A.DataManager(e[parseInt(t.toString(),10)].dataSource)},cu.prototype.eventfPromise=function(e,t,i,n){var t=this.getStateEventArgument(t),r=new A.Deferred,s=new A.Deferred,o=(t.action=e.action,this.parent.getDataModule());return!P.isNullOrUndefined(e.action)&&e.action.requestType&&!1!==o.foreignKeyDataState.isDataChanged?(o.setForeignKeyDataState({isPending:!0,resolver:s.resolve}),s.promise.then(function(){r.resolve(n.dataSource)}),t.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger(Oi,t)):(o.setForeignKeyDataState({}),r.resolve(i)),r},cu.prototype.getForeignKeyData=function(r){for(var i=this,s=r.column?[r.column]:this.parent.getForeignKeyColumns(),o=("ExcludeHidden"===this.parent.columnQueryMode&&(s=s.filter(function(e){return!1!==e.visible})),[]),a=this,e=0;e<s.length;e++)!function(e){var t=void 0,i=r.isComplex?a.genarateColumnQuery(s[parseInt(e.toString(),10)]):a.genarateQuery(s[parseInt(e.toString(),10)],r.result.result,!1,!0),n=(i.params=a.parent.query.params,s[parseInt(e.toString(),10)].dataSource);t=n&&"result"in n?a.eventfPromise(r,i,n,s[parseInt(e.toString(),10)]).promise:!n.ready||n.dataSource.offline?n.executeQuery(i):n.ready.then(function(){return n.executeQuery(i)}),o.push(t)}(e);Promise.all(o).then(function(e){for(var t=0;t<e.length;t++)s[parseInt(t.toString(),10)].columnData=e[parseInt(t.toString(),10)].result,"dropdownedit"===s[parseInt(t.toString(),10)].editType&&"result"in s[parseInt(t.toString(),10)].dataSource&&(s[parseInt(t.toString(),10)].edit.params=P.extend(s[parseInt(t.toString(),10)].edit.params,{dataSource:e[parseInt(t.toString(),10)].result,query:new A.Query,fields:{value:s[parseInt(t.toString(),10)].foreignKeyField||s[parseInt(t.toString(),10)].field,text:s[parseInt(t.toString(),10)].foreignKeyValue}}));r.promise.resolve(r.result)}).catch(function(e){var t=e;return t.error||(t={error:t}),i.parent.log(["actionfailure","foreign_key_failure"],t),r.promise&&r.promise.reject&&r.promise.reject(e),e})},cu.prototype.generateQueryFormData=function(e){e.predicate.predicate=this.genarateQuery(e.column,e.column.columnData,!0)},cu.prototype.genarateQuery=function(e,t,i,n){var r=this.parent,s=[],o=new A.Query,a=i?e.foreignKeyField:e.field;if(r.allowPaging||r.enableVirtualization||i){t=new A.DataManager(r.allowGrouping&&r.groupSettings.columns.length&&!i?t.records:t).executeLocal((new A.Query).select(a));for(var l=A.DataUtil.distinct(t,a,!1),a=i?e.field:e.foreignKeyField,h=0;h<l.length;h++)l[parseInt(h.toString(),10)]&&l[parseInt(h.toString(),10)].getDay?s.push(kh({field:a,operator:"equal",value:l[parseInt(h.toString(),10)],matchCase:!1})):s.push(new A.Predicate(a,"equal",l[parseInt(h.toString(),10)],!1))}return n?s.length?o.where(A.Predicate.or(s)):o:s.length?A.Predicate.or(s):{predicates:[]}},cu.prototype.genarateColumnQuery=function(e){var t=this.parent,i=new A.Query,n=this.isFiltered(e);return n.isTrue&&(i=this.filterQuery(i,n.column,!0)),t.searchSettings.key.length&&(n=t.searchSettings,e.dataSource instanceof A.DataManager&&e.dataSource.adaptor.getModuleName&&"ODataV4Adaptor"===e.dataSource.adaptor.getModuleName()?i=this.searchQuery(i,e,!0):i.search(n.key,e.foreignKeyValue,n.operator,n.ignoreCase)),i},cu.prototype.isFiltered=function(t){var e=this.parent.filterSettings.columns.filter(function(e){return e.field===t.foreignKeyValue&&e.uid===t.uid});return{column:e,isTrue:!!e.length}},cu.prototype.getModuleName=function(){return"foreignKey"},cu.prototype.destroy=function(){this.destroyEvent()},cu.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off(xi,this.initForeignKeyColumns),this.parent.off(Ri,this.getForeignKeyData),this.parent.off(Ei,this.generateQueryFormData))};var hu,pu,du=cu;function cu(e,t){var i=pu.call(this,e,t)||this;return i.parent=e,i.serviceLocator=t,i.initEvent(),i}k.prototype.getModuleName=function(){return"infiniteScroll"},k.prototype.addEventListener=function(){this.parent.on(ht,this.onDataReady,this),this.parent.on(Vt,this.dataSourceModified,this),this.parent.on(wn,this.infinitePageQuery,this),this.parent.on(Cn,this.infiniteScrollHandler,this),this.parent.on(Ft,this.infiniteCellFocus,this),this.parent.on(In,this.appendInfiniteRows,this),this.parent.on(xn,this.removeInfiniteCacheRows,this),this.parent.on(vn,this.resetInfiniteBlocks,this),this.parent.on(Rn,this.setCache,this),this.parent.on(Dn,this.ensureIntialCollapse,this),this.parent.on(Mt,this.infiniteCellFocus,this),this.parent.on(bn,this.setDisplayNone,this),this.parent.on(pn,this.editActionBegin,this),this.parent.on(yn,this.getVirtualInfiniteData,this),this.parent.on(fn,this.resetInfiniteEdit,this),this.parent.on(dn,this.infiniteEditSuccess,this),this.parent.on(gn,this.refreshInfiniteCache,this),this.parent.on(Ir,this.refreshInfiniteEditrowindex,this),this.parent.on(En,this.infiniteEditHandler,this),this.parent.on(mn,this.infiniteAddActionBegin,this),this.parent.on(ut,this.modelChanged,this),this.parent.on(Xn,this.refreshInfiniteCurrentViewData,this),this.parent.on(r,this.destroy,this),this.parent.on(pt,this.selectNewRow,this),this.parent.on(wr,this.captionActionComplete,this),this.parent.on(lr,this.setGroupCollapsePageQuery,this),this.parent.on(Pr,this.onActionComplete,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.dataBoundFunction=this.dataBound.bind(this),this.parent.addEventListener(y,this.actionBeginFunction),this.parent.addEventListener(p,this.actionCompleteFunction),this.parent.addEventListener(ae,this.dataBoundFunction)},k.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ht,this.onDataReady),this.parent.off(Vt,this.dataSourceModified),this.parent.off(wn,this.infinitePageQuery),this.parent.off(Cn,this.infiniteScrollHandler),this.parent.off(Ft,this.infiniteCellFocus),this.parent.off(In,this.appendInfiniteRows),this.parent.off(xn,this.removeInfiniteCacheRows),this.parent.off(vn,this.resetInfiniteBlocks),this.parent.off(Rn,this.setCache),this.parent.off(Dn,this.ensureIntialCollapse),this.parent.off(Mt,this.infiniteCellFocus),this.parent.off(bn,this.setDisplayNone),this.parent.off(pn,this.editActionBegin),this.parent.off(yn,this.getVirtualInfiniteData),this.parent.off(fn,this.resetInfiniteEdit),this.parent.off(dn,this.infiniteEditSuccess),this.parent.off(gn,this.refreshInfiniteCache),this.parent.on(Ir,this.refreshInfiniteEditrowindex),this.parent.off(En,this.infiniteEditHandler),this.parent.off(mn,this.infiniteAddActionBegin),this.parent.off(ut,this.modelChanged),this.parent.off(Xn,this.refreshInfiniteCurrentViewData),this.parent.off(r,this.destroy),this.parent.off(pt,this.selectNewRow),this.parent.off(wr,this.captionActionComplete),this.parent.off(lr,this.setGroupCollapsePageQuery),this.parent.off(Pr,this.onActionComplete),this.parent.removeEventListener(y,this.actionBeginFunction),this.parent.removeEventListener(p,this.actionCompleteFunction),this.parent.removeEventListener(ae,this.dataBoundFunction))},k.prototype.dataBound=function(){"collapse"===this.groupCaptionAction?(this.groupCaptionAction="refresh",this.makeGroupCollapseRequest()):"refresh"===this.groupCaptionAction&&(this.parent.hideSpinner(),this.groupCaptionAction=this.empty)},k.prototype.setGroupCollapsePageQuery=function(e){var t=this.parent;if(!t.infiniteScrollSettings.enableCache&&this.isGroupCollapse)if(e.skipPage=!0,this.isGroupCollapse=!1,"collapse"===this.groupCaptionAction){for(var i=t.getRowObjectFromUID(this.parentCapUid),n=t.getRowsObject(),r=0,s=n.length-1;0<=s&&n[parseInt(s.toString(),10)].indent!==i.indent;s--)n[parseInt(s.toString(),10)].isDataRow&&r++;for(var o=kp(n.indexOf(i),n),a=Fp(l=Ap(o.fields,o.keys,this)),l=a[a.length-1],s=a.length-2;0<=s;s--)l=l.and(a[parseInt(s.toString(),10)]);e.query.where(l),e.query.skip(r),this.parentCapUid=this.empty}else{var o=t.getRows(),h=t.pageSettings.pageSize,o=Tp(o[o.length-1])+1,h=o%h==0?0:o-o%h+h-o;e.query.skip(o),e.query.take(t.infiniteScrollSettings.initialBlocks*t.pageSettings.pageSize+h)}},k.prototype.captionActionComplete=function(e){var t,i,n=this.parent;!n.infiniteScrollSettings.enableCache&&e.isCollapse&&(t=n.getContent().firstElementChild.getBoundingClientRect(),i=n.contentModule.getTable().getBoundingClientRect(),Math.round(i.bottom-n.getRowHeight())<=Math.round(t.bottom))&&(this.parentCapUid=e.parentUid,this.groupCaptionAction="collapse",n.showSpinner(),i=n.getRowObjectFromUID(e.parentUid),this.getCaptionChildCount(i)?this.makeGroupCollapseRequest(e.parentUid):(this.groupCaptionAction="refresh",this.makeGroupCollapseRequest()))},k.prototype.makeGroupCollapseRequest=function(e){var t=this.parent,i=[].slice.call(t.getContentTable().querySelectorAll("tr")),i=t.groupSettings.enableLazyLoading?i:t.getRows(),i=t.groupSettings.enableLazyLoading?t.contentModule.visibleRows.length-1:Tp(i[i.length-1]),n=this.parent.pageSettings.currentPage,r=Math.ceil(i/this.parent.pageSettings.pageSize)+1;n>=this.maxPage||r>this.maxPage?t.hideSpinner():(this.parent.pageSettings.currentPage=r,t={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:n,startIndex:i+1,direction:"down",isCaptionCollapse:!0,parentUid:e},this.isGroupCollapse=!0,this.parent.notify("model-changed",t))},k.prototype.getCaptionChildCount=function(e){for(var t=this.parent.getRowsObject(),i=!1,n=t.indexOf(e);n<t.length&&(!(t[parseInt(n.toString(),10)].indent===e.indent||t[parseInt(n.toString(),10)].indent<e.indent)||t[parseInt(n.toString(),10)].data.key===e.data.key);n++)if(t[parseInt(n.toString(),10)].isCaptionRow&&!this.childCheck(t,t[parseInt(n.toString(),10)],n)){i=!0;break}return i},k.prototype.childCheck=function(e,t,i){for(var n=0,r=i+1;r<e.length&&e[parseInt(r.toString(),10)].indent!==t.indent;r++)e[parseInt(r.toString(),10)].indent===t.indent+1&&e[parseInt(r.toString(),10)].parentUid===t.uid&&n++;return t.data.count===n},k.prototype.updateCurrentViewData=function(){var e=this.parent;if(!e.groupSettings.columns.length)for(var t=Object.keys(this.infiniteCurrentViewData),i=(e.currentViewData=[],e.pageSettings.currentPage),n=e.infiniteScrollSettings.enableCache,r=e.infiniteScrollSettings.maxBlocks,s=n&&(r<i||this.isUpScroll&&1<i),i=s?this.isUpScroll?i:i-r+1:1,o=s?i+r-1:n?r:t.length,a=i;a<=o;a++)this.infiniteCurrentViewData[parseInt(a.toString(),10)]&&(e.currentViewData=e.currentViewData.concat(this.infiniteCurrentViewData[parseInt(a.toString(),10)]))},k.prototype.refreshInfiniteCurrentViewData=function(e){"add"===e.args.action&&"save"===e.args.requestType&&(this.parent.pageSettings.currentPage=Math.ceil(e.args.index/this.parent.pageSettings.pageSize)?Math.ceil(e.args.index/this.parent.pageSettings.pageSize):1);var t=this.parent.pageSettings.currentPage,i=this.parent.pageSettings.pageSize,n=this.parent.infiniteScrollSettings.initialBlocks,r=Object.keys(this.infiniteCurrentViewData),s=this.parent.infiniteScrollSettings.enableCache;if(!this.parent.groupSettings.columns.length){var o="save"===e.args.requestType&&!(this.parent.sortSettings.columns.length||this.parent.filterSettings.columns.length||this.parent.groupSettings.columns.length||this.parent.searchSettings.key),a="delete"===e.args.requestType;if(s||!o&&!a)1<n&&e.data.length===n*i?this.setInitialCache(e.data.slice(),{},s&&"delete"===e.args.requestType,!0):this.infiniteCurrentViewData[parseInt(t.toString(),10)]=e.data.slice();else if(o){for(var l=0,h=1;h<=r.length;h++)if(l+=this.infiniteCurrentViewData[parseInt(h.toString(),10)].length-1,e.args.index<=l){this.resetCurrentViewData(h),this.infiniteCurrentViewData[parseInt(h.toString(),10)].splice(e.args.index,0,e.args.data);break}}else this.infiniteCurrentViewData[r[r.length-1]].push(e.data[0])}},k.prototype.resetCurrentViewData=function(e){for(var t=Object.keys(this.infiniteCurrentViewData),i=e;i<=t.length;i++){var n=this.infiniteCurrentViewData[parseInt(i.toString(),10)][this.infiniteCurrentViewData[parseInt(i.toString(),10)].length-1];this.infiniteCurrentViewData[i+1]&&this.infiniteCurrentViewData[i+1].splice(0,0,n),this.infiniteCurrentViewData[parseInt(i.toString(),10)].pop()}},k.prototype.modelChanged=function(e){var t=this.parent.getRows();"save"===e.requestType&&e.index&&e.data&&(this.addRowIndex=e.index),t&&t.length&&"infiniteScroll"!==e.requestType&&("delete"===e.requestType||"add"===this.requestType)&&(this.firstIndex=Tp(t[0]),this.firstBlock=Math.ceil((this.firstIndex+1)/this.parent.pageSettings.pageSize),this.lastIndex=Tp(t[t.length-1]),"delete"===e.requestType?(t=this.parent.getRowsObject(),e.startIndex=this.parent.infiniteScrollSettings.enableCache?(this.firstBlock-1)*this.parent.pageSettings.pageSize:t[t.length-1].index):e.startIndex=this.firstIndex,this.parent.infiniteScrollSettings.enableCache||this.parent.pageSettings.currentPage!==this.maxPage||"delete"!==e.requestType||(this.isLastPage=!0,this.lastIndex=this.lastIndex-1))},k.prototype.infiniteAddActionBegin=function(e){this.isNormaledit&&(this.isAdd=!0,this.parent.infiniteScrollSettings.enableCache)&&(Object.keys(this.emptyRowData).length||this.createEmptyRowdata(),1<this.parent.pageSettings.currentPage)&&(e.startEdit=!1,this.resetInfiniteBlocks({},!0),this.makeRequest({currentPage:1}))},k.prototype.infiniteEditHandler=function(e){var t,i;this.parent.infiniteScrollSettings.enableCache||"delete"!==e.e.requestType&&("save"!==e.e.requestType||"add"!==this.requestType)||(t=this.parent.getRows(),i=this.parent.getRowsObject(),this.ensureRowAvailability(i,e.result[0])&&(!t.length||this.addRowIndex&&this.addRowIndex>=t.length||this.resetRowIndex(i,e.e,t,"add"===this.requestType,!0),this.isLastPage?(this.isLastPage=!1,this.parent.pageSettings.currentPage=this.maxPage,this.parent.selectionModule.index<this.parent.frozenRows&&(P.remove(t[this.parent.frozenRows-1]),this.createRow([i[this.parent.frozenRows-1]],e,!1,!0),sp(this.parent))):this.createRow(i,e)),this.parent.hideSpinner(),this.parent.notify(br,{}),"delete"===this.requestType?this.parent.notify($t,e.e):this.parent.notify(Zt,e.e)),this.parent.notify(yi,{case:"refreshHeight"})},k.prototype.createRow=function(e,t,i,n,r){var s=n?e:this.generateRows(t.result,t.e),o=new Rs(this.serviceLocator,null,this.parent);if(this.parent.removeMaskRow(),!("save"===t.e.requestType&&t.e.index&&t.e.data&&(s[0].index=this.addRowIndex,this.addRowIndex=null,s[0].index>=e.length))){var a=this.parent.getContent().querySelector(N),l=(this.parent.frozenRows&&(a=n&&"add"!==this.requestType||!n&&"add"===this.requestType?this.parent.getHeaderContent().querySelector(N):a),{rows:e,cancel:!1,args:t,isMovable:i,isFrozenRows:n,isFrozenRight:n,row:s});if(this.parent.notify(Yn,l),!l.cancel)for(var h=s.length-1;0<=h;h--)"delete"===this.requestType?a.appendChild(o.render(s[parseInt(h.toString(),10)],this.parent.getColumns())):a.insertBefore(o.render(s[parseInt(h.toString(),10)],this.parent.getColumns()),a.rows[t.e.index]);!n&&this.parent.frozenRows&&(this.parent.selectionModule.index<this.parent.frozenRows||"add"===this.requestType)&&(l=this.parent.getRows(),i=(i||r)&&"add"===this.requestType?this.parent.frozenRows:this.parent.frozenRows-1,P.remove(l[parseInt(i.toString(),10)]),this.createRow([e[this.parent.frozenRows-1]],t,!1,!0,!1)),this.parent.infiniteScrollSettings.enableCache||n||(sp(this.parent),this.parent.contentModule.visibleRows="add"===this.requestType?s.concat(e):e.concat(s))}},k.prototype.ensureRowAvailability=function(e,t){var i=!0;if(this.parent.frozenRows&&!this.parent.infiniteScrollSettings.enableCache&&this.parent.sortSettings.columns&&"add"===this.requestType)for(var n=this.parent.getPrimaryKeyFieldNames()[0],r=0;r<e.length;r++)if(e[parseInt(r.toString(),10)].data[""+n]===t[""+n]){i=!1;break}return i},k.prototype.generateRows=function(e,t){return this.rowModelGenerator.generateRows(e,t)},k.prototype.resetRowIndex=function(n,r,s,e,o){var a=this,l=this.parent.getPrimaryKeyFieldNames()[0],t=!(s.length%this.parent.pageSettings.pageSize),t=(e?t&&(o&&!this.parent.groupSettings.columns.length&&this.swapCurrentViewData(1,!0),P.remove(s[n.length-1]),s.splice(n.length-1,1),n.splice(n.length-1,1)):n.filter(function(e,t){var i;e.data[""+l]===r.data[0][""+l]&&(o&&!a.parent.groupSettings.columns.length&&(i=Math.ceil((t+1)/a.parent.pageSettings.pageSize),a.resetInfiniteCurrentViewData(i,t)),n.splice(t,1),i=a.parent.getRowElementByUID(e.uid))&&(t=s.indexOf(i),P.remove(i),s.splice(t,1))}),e?this.addRowIndex?this.addRowIndex+1:1:0);tp(this.parent,n,s,t,this.addRowIndex||0)},k.prototype.resetInfiniteCurrentViewData=function(e,t){t-=(e-1)*this.parent.pageSettings.pageSize,this.infiniteCurrentViewData[parseInt(e.toString(),10)].splice(t,1),this.swapCurrentViewData(e,!1)},k.prototype.swapCurrentViewData=function(e,t){for(var i,n,r=Object.keys(this.infiniteCurrentViewData),s=t?r.length+1:r.length,o=e;o<s;o++)this.infiniteCurrentViewData[o+1]&&(n=t?o:o+1,i=t?this.infiniteCurrentViewData[parseInt(o.toString(),10)].length-1:0,n=this.infiniteCurrentViewData[parseInt(n.toString(),10)].splice(i,1),t?(this.infiniteCurrentViewData[o+1]=n.concat(this.infiniteCurrentViewData[o+1]),o+1===s-1&&this.infiniteCurrentViewData[o+1].splice(this.infiniteCurrentViewData[o+1].length-1,1)):this.infiniteCurrentViewData[parseInt(o.toString(),10)].push(n[0]));this.updateCurrentViewData()},k.prototype.setDisplayNone=function(t){if(this.parent.infiniteScrollSettings.enableCache){for(var e=Object.keys(this.infiniteCache),i=1;i<=e.length;i++)this.infiniteCache[parseInt(i.toString(),10)].filter(function(e){e.cells[t.index].visible=""===t.visible});this.resetContentModuleCache(this.infiniteCache)}},k.prototype.refreshInfiniteCache=function(e){this.getEditedRowObject().data=e.data},k.prototype.refreshInfiniteCacheRowVisibleLength=function(e,t){var i=e[parseInt(t.toString(),10)];if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache){for(var e=0,n=0,r=0,s=0;s<i.length;s++)i[parseInt(s.toString(),10)].visible||P.isNullOrUndefined(i[parseInt(s.toString(),10)].visible)?n++:r++;return n<r?n<(e=r-n)&&(e=n):r<(e=n-r)&&(e=r),e=0===e?1:e}return i.length},k.prototype.refreshInfiniteEditrowindex=function(e){this.editRowIndex=e.index},k.prototype.getEditedRowObject=function(){for(var e,t=this.parent.getRowsObject(),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].index===this.editRowIndex&&(e=t[parseInt(i.toString(),10)]);return e},k.prototype.infiniteEditSuccess=function(e){this.isNormaledit&&(!this.isAdd&&e.data&&this.updateCurrentViewRecords(e.data),this.isAdd=this.parent.editSettings.showAddNewRow)},k.prototype.updateCurrentViewRecords=function(e){var t=Jh(this.parent,e);P.isNullOrUndefined(t)||(this.parent.getCurrentViewRecords()[parseInt(t.toString(),10)]=e)},k.prototype.actionBegin=function(e){"add"===e.requestType||"delete"===e.requestType?this.requestType=e.requestType:"add"===e.action&&"save"===e.requestType&&(this.requestType=e.action),(this.parent.isFrozenGrid()&&!e.cancel&&"searching"===e.requestType||"sorting"===e.requestType||"filtering"===e.requestType)&&(this.isInitialRender=!0)},k.prototype.actionComplete=function(e){"delete"!==e.requestType&&"save"!==e.requestType&&"cancel"!==e.requestType||(this.requestType=this.empty,this.isCancel="cancel"===e.requestType||"save"===e.requestType,this.isAdd=this.isEdit=this.parent.editSettings.showAddNewRow,this.isNormaledit&&(this.editRowIndex=this.empty,this.virtualInfiniteData={},this.parent.editModule.previousVirtualData={}))},k.prototype.onActionComplete=function(e){this.parent.trigger(p,P.extend(e,{type:p}))},k.prototype.resetInfiniteEdit=function(){this.parent.enableInfiniteScrolling&&this.isNormaledit&&(this.parent.editSettings.allowEditing&&this.isEdit||this.parent.editSettings.allowAdding&&this.isAdd)&&(this.parent.isEdit=!0)},k.prototype.getVirtualInfiniteData=function(e){this.getVirtualInfiniteEditedData(),e.virtualData=this.parent.enableColumnVirtualization&&!this.parent.infiniteScrollSettings.enableCache?e.virtualData:this.virtualInfiniteData,e.isAdd=this.isAdd,e.isCancel=this.isCancel},k.prototype.editActionBegin=function(e){this.isEdit=!0,this.editRowIndex=e.index;var t=P.extend({},this.getEditedRowObject().data);e.data=Object.keys(this.virtualInfiniteData).length?this.virtualInfiniteData:t},k.prototype.dataSourceModified=function(){this.resetInfiniteBlocks({requestType:this.empty},!0)},k.prototype.onDataReady=function(e){P.isNullOrUndefined(e.count)||"infiniteScroll"===e.requestType||(this.maxPage=Math.ceil(e.count/this.parent.pageSettings.pageSize))},k.prototype.ensureIntialCollapse=function(e){this.isInitialCollapse=!e},k.prototype.infiniteScrollHandler=function(e){this.restoreInfiniteEdit(),this.restoreInfiniteAdd();var t,i,n,r,s,o,a,l=e.target;l.classList.contains(Zr)&&this.parent.enableInfiniteScrolling&&!e.isLeft&&(e=this.parent.getContent().firstElementChild,t=[].slice.call(this.parent.getContentTable().querySelectorAll("tr")),this.prevScrollTop=e.scrollTop,(t=this.parent.groupSettings.enableLazyLoading?t:this.parent.getRows()).length)&&(t=Tp(t[t.length-1])+1,i=this.parent.pageSettings.currentPage,n=void 0,a=l.scrollHeight-l.scrollTop,r=Math.round(l.scrollHeight-l.scrollTop),(a=a<l.clientHeight?Math.ceil(a):Math.floor(a))>l.clientHeight&&(a-=1),a=a===l.clientHeight||r===l.clientHeight,P.isNullOrUndefined(this.groupCaptionAction))&&(this.isScroll&&a&&(this.parent.pageSettings.currentPage<=this.maxPage-1||this.enableContinuousScroll)&&(this.parent.infiniteScrollSettings.enableCache&&(this.isUpScroll=!1,this.isDownScroll=!0),s=(r=[].slice.call(e.querySelectorAll(".e-row:not(.e-addedrow)")))[r.length-1],o=this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length?this.parent.contentModule.visibleRows.length-1:Tp(s),this.parent.pageSettings.currentPage=Math.ceil(o/this.parent.pageSettings.pageSize)+1,n={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:i,startIndex:t,direction:"down"},this.makeRequest(n)),this.isScroll&&this.parent.infiniteScrollSettings.enableCache&&0===l.scrollTop&&1!==this.parent.pageSettings.currentPage&&(this.parent.infiniteScrollSettings.enableCache&&(this.isDownScroll=!1,this.isUpScroll=!0),o=Tp((s=[].slice.call(e.getElementsByClassName(I)))[this.parent.pageSettings.pageSize-1]),a=Tp(s[0])-this.parent.pageSettings.pageSize,this.parent.pageSettings.currentPage=Math.ceil(o/this.parent.pageSettings.pageSize)-1,this.parent.pageSettings.currentPage)&&(n={requestType:"infiniteScroll",currentPage:this.parent.pageSettings.currentPage,prevPage:i,startIndex:a,direction:"up"},this.makeRequest(n)),this.parent.infiniteScrollSettings.enableCache)&&!this.isScroll&&P.isNullOrUndefined(n)&&(this.isDownScroll||this.isUpScroll)&&(e.scrollTop=this.top)},k.prototype.makeRequest=function(e){var t,i=this;this.parent.pageSettings.currentPage!==e.prevPage&&((t=this.parent.infiniteScrollSettings.initialBlocks)<this.maxPage&&this.parent.pageSettings.currentPage<=this.maxPage?(this.isInfiniteScroll=!0,P.isNullOrUndefined(this.infiniteCache[e.currentPage])?setTimeout(function(){i.getVirtualInfiniteEditedData(),i.parent.notify("model-changed",e)},100):setTimeout(function(){i.getVirtualInfiniteEditedData(),i.parent.notify(Sn,e)},100)):this.parent.pageSettings.currentPage=this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&t>=this.maxPage?1:this.maxPage)},k.prototype.infinitePageQuery=function(e){this.initialRender?(this.initialRender=!1,this.intialPageQuery(e)):"delete"===this.requestType||"add"===this.requestType?this.isInfiniteScroll||this.parent.groupSettings.enableLazyLoading?this.parent.groupSettings.enableLazyLoading&&!this.parent.infiniteScrollSettings.enableCache?this.parent.infiniteScrollSettings.initialBlocks<this.parent.pageSettings.currentPage?e.page(1,this.parent.pageSettings.pageSize*this.parent.pageSettings.currentPage):e.page(1,this.parent.pageSettings.pageSize*this.parent.infiniteScrollSettings.initialBlocks):e.page(this.parent.pageSettings.currentPage,this.parent.pageSettings.pageSize):this.editPageQuery(e):e.page(this.parent.pageSettings.currentPage,this.parent.pageSettings.pageSize)},k.prototype.editPageQuery=function(e){var t,i=this.parent.infiniteScrollSettings.initialBlocks;this.parent.infiniteScrollSettings.enableCache?(this.infiniteCache={},this.infiniteCurrentViewData={},e.skip(this.firstIndex),e.take(i*this.parent.pageSettings.pageSize)):("Dialog"===this.parent.editSettings.mode&&this.parent.clearSelection(),t="delete"===this.requestType?this.lastIndex:this.addRowIndex||this.firstIndex,e.skip(t),P.isNullOrUndefined(this.parent.getDataModule().dataManager.dataSource.url)||""===this.parent.getDataModule().dataManager.dataSource.url||"delete"!==this.requestType&&"add"!==this.requestType?e.take(1):e.take(i*this.parent.pageSettings.pageSize))},k.prototype.intialPageQuery=function(e){this.parent.infiniteScrollSettings.enableCache&&this.parent.infiniteScrollSettings.initialBlocks>this.parent.infiniteScrollSettings.maxBlocks&&(this.parent.infiniteScrollSettings.initialBlocks=this.parent.infiniteScrollSettings.maxBlocks);var t=this.parent.pageSettings.pageSize*this.parent.infiniteScrollSettings.initialBlocks;e.page(1,t)},k.prototype.scrollToLastFocusedCell=function(e){var t=this.parent,i=this.lastFocusInfo.rowIdx+(e.keyArgs.action===Cs?-1:1),n=this.lastFocusInfo.cellIdx;if(!t.getRowByIndex(i)){for(var r=new Rs(this.serviceLocator,null,this.parent),s=Math.floor(i/this.parent.pageSettings.pageSize)+1,o=(t.pageSettings.currentPage=s,t.getColumns()),a=(P.remove(t.getContent().querySelector("tbody")),t.getContent().querySelector("table").appendChild(t.createElement("tbody",{attrs:{role:"rowgroup"}})),[]),l=1===s||this.maxPage===s?0:-1,h=0;h<t.infiniteScrollSettings.maxBlocks;this.maxPage===s?l--:l++,h++){var p=this.infiniteCache[s+l];if(p)for(var a=a.concat(p),d=0;d<p.length;d++)t.getContent().querySelector("tbody").appendChild(r.render(p[parseInt(d.toString(),10)],o))}t.notify(pt,{rows:a,args:{}}),sp(t)}n=t.getRowByIndex(i).cells[parseInt(n.toString(),10)];t.focusModule.isInfiniteScroll=!0,t.focusModule.onClick({target:n},!0),t.selectRow(i),n.focus(),this.isFocusScroll=!1,e.cancel=!0},k.prototype.setLastCellFocusInfo=function(e){var t,e=e.byClick&&e.clickArgs.target||e.byKey&&e.keyArgs.target||(!this.isFocusScroll&&e).target;e&&e.classList.contains("e-rowcell")&&(t=parseInt(e.getAttribute("data-colindex"),10),e=parseInt(e.parentElement.getAttribute("data-rowindex"),10),this.lastFocusInfo={rowIdx:e,cellIdx:t})},k.prototype.infiniteCellFocus=function(e){var t=this.parent,i=t.infiniteScrollSettings.enableCache;if(e.byKey){if(i&&this.isFocusScroll)return void this.scrollToLastFocusedCell(e);var n,r,s=document.activeElement,o=Tp(s.parentElement),a=(this.cellIndex=parseInt(s.getAttribute(ps),10),t.getContent().firstElementChild),l=this.maxPage*t.pageSettings.pageSize-1,h=Math.floor(a.offsetHeight/this.parent.getRowHeight()),p=a.getBoundingClientRect();isNaN(o)||(e.keyArgs.action===vs||e.keyArgs.action===bs?(this.rowIndex=o+=1,r=(n=t.getRowByIndex(o))&&n.getBoundingClientRect(),i&&(o=s.parentElement.rowIndex+1),this.isFocusScroll||!n&&o<l||r&&r.bottom>=p.bottom?(this.isFocusScroll||(this.pressedKey=e.keyArgs.action),this.isFocusScroll=!1,a.scrollTop=(o-h+1)*this.parent.getRowHeight()):!i&&n&&r&&(r.bottom>=p.bottom||r.top<p.top)&&n.cells[this.cellIndex].scrollIntoView()):(e.keyArgs.action===Cs||e.keyArgs.action===Is)&&(this.rowIndex=--o,r=(n=t.getRowByIndex(o))&&n.getBoundingClientRect(),i&&(o=s.parentElement.rowIndex-1),!n||r.top<=p.top)&&(this.pressedKey=e.keyArgs.action,a.scrollTop=o*this.parent.getRowHeight()))}else"PageDown"!==e.key&&"PageUp"!==e.key||(this.pressedKey=e.key);this.setLastCellFocusInfo(e)},k.prototype.createEmptyRowdata=function(){var t=this;this.parent.getColumns().filter(function(e){t.emptyRowData[e.field]=t.empty})},k.prototype.getVirtualInfiniteEditedData=function(){var e=this.parent.element.querySelector("."+ts),t=this.parent.element.querySelector("."+is),i=this.parent.element.querySelector(".e-gridform");if(this.parent.infiniteScrollSettings.enableCache&&(e||t))for(var t=e?P.extend({},this.getEditedRowObject().data):P.extend({},this.emptyRowData),n=(this.virtualInfiniteData=this.parent.editModule.getCurrentEditedData(i,t),this.parent.getHiddenColumns()),r=0;r<n.length;r++)n[parseInt(r.toString(),10)].defaultValue&&(this.virtualInfiniteData[n[parseInt(r.toString(),10)].field]=n[parseInt(r.toString(),10)].defaultValue)},k.prototype.restoreInfiniteEdit=function(){var e,t=this.parent.getContent().firstElementChild,i=!this.parent.frozenRows||this.editRowIndex>=this.parent.frozenRows;this.isNormaledit&&this.parent.infiniteScrollSettings.enableCache&&i&&this.parent.editSettings.allowEditing&&!P.isNullOrUndefined(this.editRowIndex)&&(i=this.parent.getRowByIndex(this.editRowIndex),Object.keys(this.virtualInfiniteData).length)&&i&&!this.parent.getContent().querySelector("."+ts)&&(e=i.getBoundingClientRect().top)<t.offsetHeight&&e>this.parent.getRowHeight()&&(this.parent.isEdit=!1,this.parent.editModule.startEdit(i))},k.prototype.restoreInfiniteAdd=function(){var e=this.parent.getContent().firstElementChild;this.parent.getCurrentViewRecords().length&&this.parent.getRowByIndex(0)&&this.isNormaledit&&this.parent.infiniteScrollSettings.enableCache&&this.isAdd&&!e.querySelector("."+is)&&e.scrollTop<this.parent.getRowHeight()&&(this.parent.isEdit=!1,this.parent.addRecord())},k.prototype.appendInfiniteRows=function(e){var t,i,n=this.parent.getContent().firstElementChild,r=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.args.requestType;(this.parent.isAngular||this.parent.isReact||this.parent.isVue||this.parent.isVue3)&&r&&!e.args.isFrozen&&this.parent.infiniteScrollSettings.enableCache&&(t=!(!this.parent.childGrid||!this.parent.element.querySelectorAll(".e-childgrid").length),i=this.parent.getDataRows(),this.parent.refreshReactTemplateTD(i,t)),(!r||e.args.isFrozen)&&r||(r&&"up"===e.args.direction?e.tbody.insertBefore(e.frag,e.tbody.firstElementChild):e.tbody.appendChild(e.frag)),this.parent.contentModule.getTable().appendChild(e.tbody),this.updateCurrentViewData(),this.isInitialRender&&!e.args.isFrozen&&(this.isInitialRender=!1,this.parent.scrollModule.setHeight()),e.args.isFrozen||(this.rowTop=this.rowTop||this.parent.getRows()[0].getBoundingClientRect().top,r&&(this.parent.infiniteScrollSettings.enableCache&&this.isRemove&&(n.scrollTop=this.top),sp(this.parent)),this.restoreInfiniteAdd(),this.isScroll=!0),this.isInfiniteScroll=!1},k.prototype.selectNewRow=function(e){var t,i,n,r=this,s=this.parent,o=s.getRowByIndex(this.rowIndex),a=s.infiniteScrollSettings.enableCache;o&&this.keys.some(function(e){return e===r.pressedKey})?(t=s.getContent().firstElementChild,i=s.getRowHeight(),n=o.cells[this.cellIndex],this.pressedKey!==vs&&this.pressedKey!==bs&&(!a||this.pressedKey!==Cs&&this.pressedKey!==Is)||(a||this.pressedKey===Cs||this.pressedKey===Is||(t.scrollTop=t.scrollTop+i),s.focusModule.isInfiniteScroll=!0,s.focusModule.onClick({target:n},!0),s.selectRow(this.rowIndex))):!this.lastFocusInfo||this.pressedKey!==ws&&"PageUp"!==this.pressedKey||(o=a?0:this.lastFocusInfo.rowIdx,s.getRowByIndex(o)&&(n=s.getCellFromIndex(o,this.lastFocusInfo.cellIdx))&&(this.isFocusScroll=!0,a?n.focus({preventScroll:!0}):(s.focusModule.isInfiniteScroll=!0,s.focusModule.onClick({target:n},!0)))),this.pressedKey=void 0},k.prototype.removeInfiniteCacheRows=function(e){var t,i,n=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.args.requestType;!e.args.isFrozen&&n&&this.parent.infiniteScrollSettings.enableCache&&this.isRemove&&(n=[].slice.call(this.parent.getContentTable().getElementsByClassName(I)),"down"===e.args.direction&&(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&(i=[].slice.call(this.parent.getContentTable().querySelectorAll("tr")),this.removeCaptionRows(i,e.args)),t=this.parent.element.querySelector("."+is)?0:1,this.removeTopRows(n,this.parent.pageSettings.pageSize-t)),"up"===e.args.direction&&(this.parent.allowGrouping&&this.parent.groupSettings.columns.length?(i=[].slice.call(this.parent.getContentTable().querySelectorAll("tr")),this.removeCaptionRows(i,e.args)):this.removeBottomRows(n,n.length-1,e.args)),this.isScroll=!1,this.top=this.calculateScrollTop(e.args))},k.prototype.calculateScrollTop=function(e){var t=0,i=this.parent.getContent().firstElementChild;if("down"===e.direction){this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!this.isInitialCollapse&&(t=this.captionRowHeight());for(var n=[].slice.call(this.parent.getContent().firstElementChild.querySelectorAll("tr:not(.e-row)")),r=0,n=(r=this.isInitialCollapse&&!P.isNullOrUndefined(n)?Math.round((n.length-1)/this.parent.groupSettings.columns.length):r)||this.parent.pageSettings.pageSize*(this.parent.infiniteScrollSettings.maxBlocks-1),s=0,o=0;s<i.clientHeight;)s=++o*this.parent.getRowHeight();t+=(n-(o-=1))*this.parent.getRowHeight()}if("up"===e.direction)if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!this.isInitialCollapse)t=this.refreshInfiniteCacheRowVisibleLength(this.infiniteCache,this.parent.pageSettings.currentPage)*this.parent.getRowHeight();else if(this.isInitialCollapse){for(var a=this.infiniteCache[this.parent.pageSettings.currentPage],l=0,o=0;o<a.length;o++)a[parseInt(o.toString(),10)].isCaptionRow&&l++;t+=Math.round(l/this.parent.groupSettings.columns.length)*this.parent.getRowHeight()}else t+=this.parent.pageSettings.pageSize*this.parent.getRowHeight()+ph();return t},k.prototype.captionRowHeight=function(){return[].slice.call(this.parent.getContent().querySelectorAll("tr:not(.e-row)")).length*this.parent.getRowHeight()},k.prototype.removeTopRows=function(e,t){for(var i=0;i<=t;i++)this.parent.frozenRows&&this.parent.pageSettings.currentPage===this.parent.infiniteScrollSettings.maxBlocks+1&&i>t-this.parent.frozenRows||P.remove(e[parseInt(i.toString(),10)])},k.prototype.removeBottomRows=function(e,t,i){var n=0,r=this.parent.pageSettings.pageSize;this.infiniteCache[i.prevPage].length<r&&(n=this.parent.pageSettings.pageSize-this.infiniteCache[i.prevPage].length);for(var s=t;n<r;s--)n++,P.remove(e[parseInt(s.toString(),10)])},k.prototype.removeCaptionRows=function(e,t){var i=[].slice.call(this.parent.getContent().getElementsByClassName(I));if("down"===t.direction)for(var n=Tp(i[this.parent.pageSettings.pageSize-1])-1,r=0,s=0;r<n;s++)e[parseInt(s.toString(),10)].classList.contains(I)?r=Tp(e[parseInt(s.toString(),10)]):P.remove(e[parseInt(s.toString(),10)]);if("up"===t.direction){for(var t=Tp(i[i.length-1]),o=Math.ceil(t/this.parent.pageSettings.pageSize),a=0,s=this.parent.pageSettings.currentPage+1;s<o;s++)a+=this.infiniteCache[parseInt(s.toString(),10)].length;for(s=a;s<e.length;s++)P.remove(e[parseInt(s.toString(),10)])}},k.prototype.resetInfiniteBlocks=function(t,e){var i=this.parent.enableInfiniteScrolling&&"infiniteScroll"!==t.requestType;this.initialRender||P.isNullOrUndefined(this.parent.infiniteScrollModule)||!i||(this.actions.some(function(e){return e===t.requestType})||e||"save"===t.requestType&&(this.parent.sortSettings.columns.length||this.parent.filterSettings.columns.length||this.parent.groupSettings.columns.length||this.parent.searchSettings.key))&&(i=this.parent.getContent().firstElementChild,this.initialRender=!0,i.scrollTop=0,this.parent.pageSettings.currentPage=1,this.infiniteCache={},this.infiniteCurrentViewData={},this.resetContentModuleCache({}),this.isRemove=!1,this.top=0,this.isInitialCollapse=!1,this.parent.contentModule.isRemove=this.isRemove,this.parent.contentModule.isAddRows=this.isRemove,this.parent.contentModule.visibleRows=[],this.parent.contentModule.visibleFrozenRows=[])},k.prototype.setCache=function(e){var t,i;this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(t="infiniteScroll"!==e.args.requestType&&("delete"===this.requestType||"add"===this.requestType),i=this.parent.pageSettings.currentPage,Object.keys(this.infiniteCache).length&&!t||this.setInitialCache(e.modelData,e.args,t),P.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.infiniteCache[this.parent.pageSettings.currentPage]=e.modelData,this.resetContentModuleCache(this.infiniteCache)),e.isInfiniteScroll)&&!this.isRemove&&(this.isRemove=(i-1)%this.parent.infiniteScrollSettings.maxBlocks==0,this.parent.contentModule.isRemove=this.isRemove)},k.prototype.setInitialCache=function(e,t,i,n){for(var r=!i||P.isNullOrUndefined(this.firstBlock)?1:this.firstBlock,s=1;s<=this.parent.infiniteScrollSettings.initialBlocks;s++){var o=(s-1)*this.parent.pageSettings.pageSize,a=s*this.parent.pageSettings.pageSize;this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&!n?this.setInitialGroupCache(e,r,o,a):n?this.infiniteCurrentViewData[parseInt(r.toString(),10)]=e.slice(o,a):(this.infiniteCache[parseInt(r.toString(),10)]=e.slice(o,a),this.resetContentModuleCache(this.infiniteCache)),r++}},k.prototype.setInitialGroupCache=function(e,t,i,n){for(var r=[],s=0,o=1;o<=Object.keys(this.infiniteCache).length;o++)s+=this.infiniteCache[parseInt(o.toString(),10)].length;for(var a=i,o=s;o<e.length&&a<n&&((e[parseInt(o.toString(),10)].index<n||e[parseInt(o.toString(),10)].isCaptionRow)&&(a=e[parseInt(o.toString(),10)].isCaptionRow?a:e[parseInt(o.toString(),10)].index,r.push(e[parseInt(o.toString(),10)])),!(e[parseInt(o.toString(),10)].index>=n||e[parseInt(o.toString(),10)].index===n-1));o++);this.infiniteCache[parseInt(t.toString(),10)]=r,this.resetContentModuleCache(this.infiniteCache)},k.prototype.resetContentModuleCache=function(e){this.parent.contentModule.infiniteCache=e},k.prototype.resetInfiniteCache=function(e){var t=Object.keys(this.infiniteCache).length;this.infiniteCache={};for(var i=1;i<=t;i++){var n=(i-1)*this.parent.pageSettings.pageSize,r=i*this.parent.pageSettings.pageSize;this.parent.allowGrouping&&this.parent.groupSettings.columns.length?this.setInitialGroupCache(e,i,n,r):(this.infiniteCache[parseInt(i.toString(),10)]=e.slice(n,r),this.resetContentModuleCache(this.infiniteCache))}},k.prototype.destroy=function(){this.removeEventListener()};var uu=k;function k(e,t){this.infiniteCache={},this.infiniteCurrentViewData={},this.isDownScroll=!1,this.isUpScroll=!1,this.isScroll=!0,this.enableContinuousScroll=!1,this.initialRender=!0,this.isRemove=!1,this.isInitialCollapse=!1,this.prevScrollTop=0,this.actions=["filtering","searching","grouping","ungrouping","reorder","sorting","refresh"],this.keys=[vs,Cs,bs,Is],this.rowTop=0,this.virtualInfiniteData={},this.isCancel=!1,this.emptyRowData={},this.isNormaledit=!1,this.isInfiniteScroll=!1,this.isLastPage=!1,this.isInitialRender=!0,this.isFocusScroll=!1,this.isGroupCollapse=!1,this.parent=e,this.serviceLocator=t,this.isNormaledit="Normal"===this.parent.editSettings.mode,this.addEventListener(),this.widthService=t.getService("widthService"),this.rowModelGenerator=new Ds(this.parent)}gu=function(e,t){return(gu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}gu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(M,fu=js),M.prototype.eventListener=function(){this.parent.addEventListener(y,this.actionBegin.bind(this)),this.parent.addEventListener(p,this.actionComplete.bind(this)),this.parent.on(lt,this.setLazyLoadPageSize,this),this.parent.on(Ln,this.setCache,this),this.parent.on(Pn,this.scrollHandler,this),this.parent.on(Pt,this.setVisible,this),this.parent.on(Nn,this.collapseShortcut,this)},M.prototype.captionExpand=function(t){for(var i=this,n=this.parent.pageSettings.currentPage,e=this.groupCache[parseInt(n.toString(),10)],r=t.getAttribute("data-uid"),s=(this.refreshCaches(),this.scrollTopCache&&!(this.parent.scrollModule.content.scrollTop>this.scrollTopCache)||this.parent.enableVirtualization||(this.scrollTopCache=this.parent.scrollModule.content.scrollTop),this.getRowObjectIndexByUid(r)),o=!!e[s+1]&&e[parseInt(s.toString(),10)].indent<e[s+1].indent,a=(this.parent.enableVirtualization&&(o=!!this.cacheRowsObj[""+r]),e[parseInt(s.toString(),10)]),l=kp(s,e),h=0;h<l.fields.length;h++){var p=this.parent.getColumnByField(l.fields[parseInt(h.toString(),10)]);p.enableGroupByFormat&&(l.keys[parseInt(h.toString(),10)]=this.locator.getService("valueFormatter").fromView(l.keys[parseInt(h.toString(),10)],p.getParser(),"dateonly"===p.type?"date":p.type))}this.parent.trigger(st,{captionRowElement:t,groupInfo:a,enableCaching:!0,cancel:!1},function(e){e.cancel||(e.keys=l.keys,e.fields=l.fields,e.rowIndex=t.rowIndex,e.makeRequest=!e.enableCaching||!o,!e.enableCaching&&o&&i.clearCache([r]),e.skip=0,e.take=i.pageSize,a.isExpand=!0,i.rowsByUid[parseInt(n.toString(),10)][a.uid]&&(i.rowsByUid[parseInt(n.toString(),10)][a.uid].isExpand=!0),i.captionRowExpand(e))})},M.prototype.captionCollapse=function(e){var n=this,t=this.groupCache[this.parent.pageSettings.currentPage],r=e.rowIndex,s=e.getAttribute("data-uid"),o=(this.refreshCaches(),this.getRowObjectIndexByUid(s)),e={captionRowElement:e,groupInfo:t[parseInt(o.toString(),10)],cancel:!1};this.parent.trigger(ot,e,function(e){if(!e.cancel){e.isExpand=!1;for(var t=0;t<n.lazyLoadQuery.length;t++){var i=n.lazyLoadQuery[parseInt(t.toString(),10)][0];e.groupInfo.data.key===i.value&&n.lazyLoadQuery.splice(t,1)}n.removeRows(o,r,s),(n.parent.enableInfiniteScrolling||n.parent.enableVirtualization)&&(n.groupCache[n.parent.pageSettings.currentPage]=P.extend([],n.refRowsObj[n.parent.pageSettings.currentPage]),n.refreshRowObjects([],o))}})},M.prototype.setLazyLoadPageSize=function(){var e=this.parent.getContent().firstElementChild,e=Math.floor(e.offsetHeight/this.parent.getRowHeight())-1;this.pageSize=this.pageSize||3*e,this.blockSize=Math.ceil(this.pageSize/2)},M.prototype.clearLazyGroupCache=function(){this.clearCache()},M.prototype.clearCache=function(e){e=e||this.getInitialCaptionIndexes();var t=this.groupCache[this.parent.pageSettings.currentPage];if(e.length)for(var i=0;i<e.length;i++){var n=this.getRowObjectIndexByUid(e[parseInt(i.toString(),10)]),r=t[parseInt(n.toString(),10)];if(r){if(this.captionCounts[this.parent.pageSettings.currentPage][r.uid])for(var s=n+1;s<t.length;s++){if(t[parseInt(s.toString(),10)].indent===r.indent||t[parseInt(s.toString(),10)].indent<r.indent){delete this.captionCounts[this.parent.pageSettings.currentPage][r.uid];break}t[parseInt(s.toString(),10)].isCaptionRow&&delete this.captionCounts[this.parent.pageSettings.currentPage][t[parseInt(s.toString(),10)].uid]}if(r.isExpand){var o=this.parent.getRowElementByUID(r.uid);if(!o)return;this.parent.groupModule.expandCollapseRows(o.querySelector(".e-recordplusexpand"))}var a,o=this.getNextChilds(n);o.length&&(n=[],o[o.length-1].isCaptionRow&&(n=this.getChildRowsByParentIndex(t.indexOf(o[o.length-1]),!1,!1,null,!0,!0)),a=t.indexOf(o[0]),n=n.length?t.indexOf(n[n.length-1]):t.indexOf(o[o.length-1]),t.splice(a,n-(a-1)),this.refreshCaches())}}},M.prototype.refreshCaches=function(){var e=this.parent.pageSettings.currentPage,t=this.groupCache[parseInt(e.toString(),10)];this.parent.enableInfiniteScrolling?(this.rowsByUid[parseInt(e.toString(),10)]=[],this.objIdxByUid[parseInt(e.toString(),10)]=[]):(this.rowsByUid={},this.objIdxByUid={});for(var i=0;i<t.length;i++)this.maintainRows(t[parseInt(i.toString(),10)],i)},M.prototype.getInitialCaptionIndexes=function(){for(var e=this.parent.pageSettings.currentPage,t=[],i=0;i<this.initialGroupCaptions[parseInt(e.toString(),10)].length;i++)t.push(this.initialGroupCaptions[parseInt(e.toString(),10)][parseInt(i.toString(),10)].uid);return t},M.prototype.getRowObjectIndexByUid=function(e){return this.objIdxByUid[this.parent.pageSettings.currentPage][""+e]},M.prototype.collapseShortcut=function(e){var t,i,n;this.parent.groupSettings.columns.length&&e.target&&E(e.target,Zr)&&"TR"===e.target.parentElement.tagName&&(!e.collapse&&E(e.target,I)||(t=e.target.parentElement.getAttribute("data-uid"),e.collapse?(e=this.getRowByUid(t),(i=this.getRowByUid(e.parentUid)).isCaptionRow&&i.isExpand&&(n=this.getRowElementByUid(e.parentUid),this.parent.groupModule.expandCollapseRows(n.cells[e.indent-1]))):(i=this.getRowByUid(t)).isCaptionRow&&!i.isExpand&&(n=this.getRowElementByUid(t),this.parent.groupModule.expandCollapseRows(n.cells[i.indent]))))},M.prototype.getRowByUid=function(e){return this.rowsByUid[this.parent.pageSettings.currentPage][""+e]},M.prototype.actionBegin=function(t){if(!t.cancel){if(this.requestType.some(function(e){return e===t.requestType})||(this.groupCache={},this.resetRowMaintenance(),this.parent.enableVirtualization&&(this.parent.contentModule.currentInfo={})),"reorder"===t.requestType&&this.parent.groupSettings.columns.length)for(var e=Object.keys(this.groupCache),i=0;i<e.length;i++)for(var n,r,s=this.groupCache[e[parseInt(i.toString(),10)]],o=0;o<s.length;o++)s[parseInt(o.toString(),10)].isCaptionRow&&!this.captionModelGen.isEmpty()&&this.changeCaptionRow(s[parseInt(o.toString(),10)],null,e[parseInt(i.toString(),10)]),s[parseInt(o.toString(),10)].isDataRow&&(n=t.fromIndex+s[parseInt(o.toString(),10)].indent,r=t.toIndex+s[parseInt(o.toString(),10)].indent,this.moveCells(s[parseInt(o.toString(),10)].cells,n,r));("delete"===t.requestType||"add"===t.action&&"save"===t.requestType)&&(this.groupCache={},this.resetRowMaintenance(),this.parent.enableVirtualization)&&(this.parent.contentModule.currentInfo={})}},M.prototype.actionComplete=function(e){e.cancel||"columnstate"===e.requestType||"beginEdit"===e.requestType||"delete"===e.requestType||"save"===e.requestType||"reorder"===e.requestType||this.scrollReset()},M.prototype.resetRowMaintenance=function(){this.startIndexes={},this.captionCounts={},this.rowsByUid={},this.objIdxByUid={},this.initialGroupCaptions={}},M.prototype.moveCells=function(e,t,i){if(t>=e.length)for(var n=t-e.length;1+n--;)e.push(void 0);e.splice(t,0,e.splice(i,1)[0])},M.prototype.removeRows=function(e,t,i){var n,r,s,o=this.parent.pageSettings.currentPage,a=this.groupCache[parseInt(o.toString(),10)],l=[].slice.call(this.parent.getContent().querySelectorAll("tr")),h=0,p=(this.parent.aggregates.length&&(r=(n=this.getAggregateByCaptionIndex(e)).length?n[n.length-1].uid:void 0),a[parseInt(e.toString(),10)].indent);this.addClass(this.getNextChilds(parseInt(e.toString(),10))),a[parseInt(e.toString(),10)].isExpand=!1,this.rowsByUid[parseInt(o.toString(),10)][a[parseInt(e.toString(),10)].uid]&&(this.rowsByUid[parseInt(o.toString(),10)][a[parseInt(e.toString(),10)].uid].isExpand=!1);for(var d=e+1;d<a.length;d++){if(a[parseInt(d.toString(),10)].indent===p||a[parseInt(d.toString(),10)].indent<p){s=a[parseInt(d.toString(),10)].uid;break}a[parseInt(d.toString(),10)].isCaptionRow&&a[parseInt(d.toString(),10)].isExpand&&this.addClass(this.getNextChilds(d))}for(d=t+1;d<l.length&&l[parseInt(d.toString(),10)].getAttribute("data-uid")!==s;d++){if(l[parseInt(d.toString(),10)].getAttribute("data-uid")===r){P.remove(l[parseInt(d.toString(),10)]);break}P.remove(l[parseInt(d.toString(),10)]),this.refRowsObj[parseInt(o.toString(),10)].splice(t+1,1),h+=1}this.parent.enableVirtualization&&(this.cacheRowsObj[""+i]=this.groupCache[parseInt(o.toString(),10)].slice(e+1,e+1+h),this.groupCache[parseInt(o.toString(),10)].splice(e+1,h),this.parent.notify(Tr,{rows:[],uid:a[parseInt(e.toString(),10)].uid,count:h}),this.parent.contentModule.setVirtualHeight(),this.parent.islazyloadRequest=!1),this.parent.scrollModule.content.scrollTop>this.scrollTopCache&&!this.parent.enableVirtualization&&(this.parent.scrollModule.content.scrollTop=this.scrollTopCache),this.parent.getContentTable().scrollHeight<this.parent.getContent().clientHeight&&"auto"!==this.parent.height&&this.parent.scrollModule.setLastRowCell(),this.parent.notify(rr,{rows:this.refRowsObj[parseInt(o.toString(),10)]})},M.prototype.addClass=function(e){e=e[this.blockSize];e&&(e.lazyLoadCssClass="e-lazyload-middle-down")},M.prototype.getNextChilds=function(e,t){for(var i=this.groupCache[this.parent.pageSettings.currentPage],n=t||i,r=i[parseInt(e.toString(),10)].indent+1,s=[],o=t?0:e+1;o<n.length&&!(n[parseInt(o.toString(),10)].indent<r);o++)n[parseInt(o.toString(),10)].indent===r&&s.push(n[parseInt(o.toString(),10)]);return s},M.prototype.lazyLoadHandler=function(e){this.setStartIndexes();var t=this.parent.getContent().querySelectorAll("tr")[e.index],i=t.getAttribute("data-uid"),n=this.getRowObjectIndexByUid(i),r=this.groupCache[this.parent.pageSettings.currentPage][parseInt(n.toString(),10)],s=e.isRowExist?e.isScroll?this.scrollData:this.parent.enableVirtualization?this.cacheRowsObj[""+i]:this.getChildRowsByParentIndex(n,!0,!0,null,!0):[];if(this.scrollData=[],!e.isRowExist)if(this.setRowIndexes(n,r),this.refreshCaptionRowCount(this.groupCache[this.parent.pageSettings.currentPage][parseInt(n.toString(),10)],e.count),-1!==Object.keys(e.data).indexOf("GroupGuid"))for(var o=0;o<e.data.length;o++){var a=this.groupGenerator.generateCaptionRow(e.data[parseInt(o.toString(),10)],e.level,r.parentGid,void 0,0,r.uid);s.push(a),this.parent.aggregates.length&&(s=s.concat(this.summaryModelGen.generateRows(e.data[parseInt(o.toString(),10)],{level:e.level+1,parentUid:a.uid})))}else this.groupGenerator.index=this.getStartIndex(n,e.isScroll),s=this.groupGenerator.generateDataRows(e.data,e.level,r.parentGid,0,r.uid);var l=e.isScroll?this.rowIndex:e.index,h=this.getNextChilds(n,s),p=!!e.up||this.hasLastChildRow(e.isScroll,e.count,h.length),h=(e.isRowExist||p||(h[this.blockSize].lazyLoadCssClass="e-lazyload-middle-down"),p||(h[h.length-1].lazyLoadCssClass="e-not-lazyload-end"),e.isScroll||e.isRowExist?[]:this.getAggregateByCaptionIndex(n));e.up||(!e.isRowExist||this.parent.enableVirtualization&&e.isRowExist&&this.cacheRowsObj[""+i])&&this.refreshRowObjects(s,e.isScroll?this.rowObjectIndex:n),this.parent.enableVirtualization&&(i=(e.isScroll?this.groupCache[this.parent.pageSettings.currentPage][this.rowIndex]:r).uid,this.parent.notify(Tr,{rows:s,uid:i}),this.parent.contentModule.setVirtualHeight(),this.parent.contentModule.isTop=!1),this.render(l,s,p,h),this.isFirstChildRow&&!e.up&&(this.parent.getContent().firstElementChild.scrollTop=s.length*this.parent.getRowHeight()),this.isFirstChildRow=!1,this.rowIndex=void 0,this.rowObjectIndex=void 0;for(o=this.childCount=0;o<s.length;o++)this.refRowsObj[this.parent.pageSettings.currentPage].splice(n+o+1,0,s[parseInt(o.toString(),10)]);p&&t.querySelector(".e-lastrowcell")&&this.parent.groupModule.lastCaptionRowBorder(),this.parent.notify(rr,{rows:this.refRowsObj[this.parent.pageSettings.currentPage]}),this.parent.enableVirtualMaskRow&&this.parent.removeMaskRow()},M.prototype.setRowIndexes=function(e,t){this.captionCounts[this.parent.pageSettings.currentPage]||(this.captionCounts[this.parent.pageSettings.currentPage]={}),t.isCaptionRow&&(this.captionCounts[this.parent.pageSettings.currentPage][t.uid]=t.data.count)},M.prototype.getStartIndex=function(e,t){var i=this.parent.pageSettings.currentPage,n=this.groupCache[parseInt(i.toString(),10)];if(t)return n[this.rowObjectIndex].index+1;var r=0,t=0,s=this.getRowByUid(n[parseInt(e.toString(),10)].parentUid);if(s&&(t=this.prevCaptionCount(s)),0<n[parseInt(e.toString(),10)].indent)for(var o=e-1;0<=o&&!(n[parseInt(o.toString(),10)].indent<n[parseInt(e.toString(),10)].indent);o--)n[parseInt(o.toString(),10)].isCaptionRow&&n[parseInt(o.toString(),10)].indent===n[parseInt(e.toString(),10)].indent&&(r+=n[parseInt(o.toString(),10)].data.count);return r+t+this.startIndexes[parseInt(i.toString(),10)][n[parseInt(e.toString(),10)].parentGid]},M.prototype.prevCaptionCount=function(e){for(var t=this.parent.pageSettings.currentPage,i=this.groupCache[parseInt(t.toString(),10)],n=0,r=i.indexOf(e)-1;0<=r&&0!==i[parseInt(r.toString(),10)].indent&&!(i[parseInt(r.toString(),10)].indent<e.indent);r--)i[parseInt(r.toString(),10)].isCaptionRow&&i[parseInt(r.toString(),10)].indent===e.indent&&(n+=this.captionCounts[parseInt(t.toString(),10)][i[parseInt(r.toString(),10)].uid]||i[parseInt(r.toString(),10)].data.count);var s=this.getRowByUid(e.parentUid);return s&&(n+=this.prevCaptionCount(s)),n},M.prototype.setStartIndexes=function(){var e=this.groupCache[this.parent.pageSettings.currentPage];if(!this.startIndexes[this.parent.pageSettings.currentPage]){for(var t=[],i=void 0,n=0;n<e.length;n++)e[parseInt(n.toString(),10)].isCaptionRow&&(t.push(t.length?e[parseInt(i.toString(),10)].data.count+t[t.length-1]:0),i=n);this.startIndexes[this.parent.pageSettings.currentPage]=t}},M.prototype.hasLastChildRow=function(e,t,i){return e?t===this.childCount+i:t===i},M.prototype.refreshCaptionRowCount=function(e,t){e.data.count=t},M.prototype.render=function(e,t,i,n){var r=this.parent.getContent().querySelectorAll("tr")[parseInt(e.toString(),10)],s=this.parent.getContent().firstElementChild,o=this.parent.getRowHeight();if(r&&n.length)for(var a=n.length-1;0<=a;a--)r.insertAdjacentElement("afterend",this.rowRenderer.render(n[parseInt(a.toString(),10)],this.parent.getColumns()));if(r&&t.length)for(a=t.length-1;0<=a;a--)this.confirmRowRendering(t[parseInt(a.toString(),10)])&&(r.insertAdjacentElement("afterend",this.rowRenderer.render(t[parseInt(a.toString(),10)],this.parent.getColumns())),this.isScrollDown&&(s.scrollTop=s.scrollTop-o),this.isScrollUp)&&(s.scrollTop=s.scrollTop+o);this.isScrollDown=!1,this.isScrollUp=!1},M.prototype.maintainRows=function(e,t){var i=this.parent.pageSettings.currentPage;this.rowsByUid[parseInt(i.toString(),10)]||(this.rowsByUid[parseInt(i.toString(),10)]={},this.objIdxByUid[parseInt(i.toString(),10)]={}),e.uid&&(this.rowsByUid[parseInt(i.toString(),10)][e.uid]=e),this.objIdxByUid[parseInt(i.toString(),10)][e.uid]=t},M.prototype.confirmRowRendering=function(e){var t=!0;return!P.isNullOrUndefined(e.indent)||e.isDataRow||e.isCaptionRow||(e=this.getRowByUid(e.parentUid)).isCaptionRow&&!e.isExpand&&(t=!1),t},M.prototype.refreshRowObjects=function(e,t){for(var i=this.parent.pageSettings.currentPage,n=this.groupCache[parseInt(i.toString(),10)],r=(this.rowsByUid[parseInt(i.toString(),10)]={},this.objIdxByUid[parseInt(i.toString(),10)]={},[]),s=0,o=0;o<n.length;o++)if(o===t){this.maintainRows(n[parseInt(o.toString(),10)],s),r.push(n[parseInt(o.toString(),10)]),s++;for(var a=0;a<e.length;a++)this.maintainRows(e[parseInt(a.toString(),10)],s),r.push(e[parseInt(a.toString(),10)]),s++}else this.maintainRows(n[parseInt(o.toString(),10)],s),r.push(n[parseInt(o.toString(),10)]),s++;this.groupCache[this.parent.pageSettings.currentPage]=P.extend([],r),this.updateCurrentViewData()},M.prototype.getAggregateByCaptionIndex=function(e){for(var t=this.groupCache[this.parent.pageSettings.currentPage],i=t[parseInt(e.toString(),10)],n=i.indent,r=i.uid,s=[],o=e+1;o<t.length&&t[parseInt(o.toString(),10)].indent!==n;o++)P.isNullOrUndefined(t[parseInt(o.toString(),10)].indent)&&t[parseInt(o.toString(),10)].parentUid===r&&s.push(t[parseInt(o.toString(),10)]);return s},M.prototype.getChildRowsByParentIndex=function(e,t,i,n,r,s){var o=n||this.groupCache[this.parent.pageSettings.currentPage],a=o[parseInt(e.toString(),10)],l=[];if(!a.isCaptionRow||a.isCaptionRow&&!a.isExpand&&!s)return[];r&&this.parent.aggregates.length&&(l=this.getAggregateByCaptionIndex(e));for(var h=a.indent,p=a.uid,d=[],c=0,u=e+1;u<o.length;u++){if(o[parseInt(u.toString(),10)].parentUid===p){if(P.isNullOrUndefined(o[parseInt(u.toString(),10)].indent))continue;if(c++,d.push(o[parseInt(u.toString(),10)]),t&&o[parseInt(u.toString(),10)].isCaptionRow&&(d=d.concat(this.getChildRowsByParentIndex(u,t,i,n,r))),i&&c===this.pageSize)break}if(o[parseInt(u.toString(),10)].indent===h)break}return d.concat(l)},M.prototype.initialGroupRows=function(e){var t=[],i=this.groupCache[this.parent.pageSettings.currentPage];if(e)return this.getRenderedRowsObject();for(var n=0;n<i.length;n++)0===i[parseInt(n.toString(),10)].indent&&(t.push(i[parseInt(n.toString(),10)]),t=t.concat(this.getChildRowsByParentIndex(n,!0,!0,i,!0)));return t},M.prototype.getRenderedRowsObject=function(){for(var e=[],t=[].slice.call(this.parent.getContent().querySelectorAll("tr")),i=0;i<t.length;i++)e.push(this.getRowByUid(t[parseInt(i.toString(),10)].getAttribute("data-uid")));return e},M.prototype.getCacheRowsOnDownScroll=function(e){for(var t=[],i=this.groupCache[this.parent.pageSettings.currentPage],n=e,r=0;r<this.pageSize&&i[parseInt(n.toString(),10)]&&!(i[parseInt(n.toString(),10)].indent<i[parseInt(e.toString(),10)].indent);r++)i[parseInt(n.toString(),10)].indent===i[parseInt(e.toString(),10)].indent&&(t.push(i[parseInt(n.toString(),10)]),i[parseInt(n.toString(),10)].isCaptionRow)&&i[parseInt(n.toString(),10)].isExpand&&(t=t.concat(this.getChildRowsByParentIndex(n,!0,!0,null,!0))),(i[parseInt(n.toString(),10)].indent>i[parseInt(e.toString(),10)].indent||P.isNullOrUndefined(i[parseInt(n.toString(),10)].indent))&&r--,n++;return t},M.prototype.getCacheRowsOnUpScroll=function(e,t,i){for(var n=[],r=this.groupCache[this.parent.pageSettings.currentPage],s=!1,o=0;o<r.length&&(!s||r[parseInt(o.toString(),10)]&&!(r[parseInt(o.toString(),10)].indent<r[parseInt(i.toString(),10)].indent)&&r[parseInt(o.toString(),10)].uid!==t);o++)(s=s||r[parseInt(o.toString(),10)].uid!==e?s:!0)&&r[parseInt(o.toString(),10)].indent===r[parseInt(i.toString(),10)].indent&&(n.push(r[parseInt(o.toString(),10)]),r[parseInt(o.toString(),10)].isCaptionRow)&&r[parseInt(o.toString(),10)].isExpand&&(n=n.concat(this.getChildRowsByParentIndex(o,!0,!0,null,!0)));return n},M.prototype.scrollHandler=function(e){if(!this.parent.isDestroyed&&!this.childCount){var t,i,n=[].slice.call(this.parent.getContent().getElementsByClassName("e-lazyload-middle-down")),r=[].slice.call(this.parent.getContent().getElementsByClassName("e-lazyload-middle-up")),s=[].slice.call(this.parent.getContent().getElementsByClassName("e-not-lazyload-end")),o=!1,a=!1,l=!1;if(e.scrollDown&&n.length&&(t=(i=this.findRowElements(n)).tr,o=i.entered),!e.scrollDown&&s)for(var h=0;h<s.length;h++){var p=s[parseInt(h.toString(),10)].getBoundingClientRect().top,d=this.parent.getContent().scrollHeight;if(0<p&&p<d){t=s[parseInt(h.toString(),10)],l=!0,this.rowIndex=t.rowIndex;break}}e.scrollDown||!r.length||l||(t=(i=this.findRowElements(r)).tr,a=i.entered),t&&!t.classList.contains("e-masked-row")&&(o&&e.scrollDown&&o&&t&&this.scrollDownHandler(t),!e.scrollDown&&l&&t&&this.scrollUpEndRowHandler(t),this.cacheMode)&&!e.scrollDown&&!l&&a&&t&&this.scrollUpHandler(t)}},M.prototype.scrollUpEndRowHandler=function(e){var t=this.parent.pageSettings.currentPage,t=this.groupCache[parseInt(t.toString(),10)],i=e.getAttribute("data-uid"),n=this.rowObjectIndex=this.getRowObjectIndexByUid(i),r=n,s=t[parseInt(n.toString(),10)],o=this.getRowByUid(s.parentUid),a=this.getRowObjectIndexByUid(o.uid),l=this.parent.getContent().querySelector("tr[data-uid="+o.uid+"]").rowIndex,h=this.getChildRowsByParentIndex(a).indexOf(s),h=Math.ceil(h/this.pageSize);1!==h&&(this.childCount=h*this.pageSize,n=this.getCurrentBlockEndIndex(s,n),this.childCount<o.data.count?(e.classList.remove("e-not-lazyload-end"),s.lazyLoadCssClass="",h=!!t[n+1]&&s.indent===t[n+1].indent,this.scrollData=h?this.getCacheRowsOnDownScroll(n+1):[],s={rowIndex:l,makeRequest:!h,groupInfo:o,fields:(e=kp(a,t)).fields,keys:e.keys,skip:this.childCount,take:this.pageSize,isScroll:!0},this.cacheMode&&this.childCount>=this.pageSize*this.cacheBlockSize&&(n=this.getChildRowsByParentIndex(a),l=Math.ceil(n.indexOf(t[parseInt(r.toString(),10)])/this.pageSize)-(this.cacheBlockSize-1),this.removeBlock(i,h,l,n),s.cachedRowIndex=l*this.pageSize),this.captionRowExpand(s)):this.childCount=0)},M.prototype.scrollDownHandler=function(e){var t,i,n=this.parent.pageSettings.currentPage,n=this.groupCache[parseInt(n.toString(),10)],r=e.getAttribute("data-uid"),s=this.getRowObjectIndexByUid(r),o=s,a=n[parseInt(s.toString(),10)],l=this.getRowByUid(a.parentUid),h=this.getRowObjectIndexByUid(l.uid),p=this.getRowElementByUid(l.uid).rowIndex,d=this.getChildRowsByParentIndex(h);0===d.length||(t=d.indexOf(a),t=Math.ceil(t/this.pageSize),this.childCount=t*this.pageSize,P.isNullOrUndefined(d[this.childCount-1]))||(this.parent.enableVirtualization&&(this.parent.islazyloadRequest=!0),s=this.rowObjectIndex=this.getRowObjectIndexByUid(d[this.childCount-1].uid),d=n[parseInt(s.toString(),10)],i=this.getRowElementByUid(d.uid),this.rowIndex=i.rowIndex,s=this.getCurrentBlockEndIndex(d,s),this.childCount===l.data.count&&(this.parent.islazyloadRequest=!1),this.childCount<l.data.count?(a=!!n[s+1]&&a.indent===n[s+1].indent)&&!P.isNullOrUndefined(this.getRowElementByUid(n[s+1].uid))?(this.parent.islazyloadRequest=!1,this.childCount=0):((1<t||!this.cacheMode)&&(e.classList.remove("e-lazyload-middle-down"),i.classList.remove("e-not-lazyload-end"),d.lazyLoadCssClass=""),this.scrollData=a?this.getCacheRowsOnDownScroll(this.rowObjectIndex+1):[],t={rowIndex:p,makeRequest:!a,groupInfo:l,fields:(s=kp(h,n)).fields,keys:s.keys,skip:this.childCount,take:this.pageSize,isScroll:!0},this.cacheMode&&this.childCount-this.pageSize>=this.pageSize*this.cacheBlockSize&&(this.isScrollDown=!0,e=this.getChildRowsByParentIndex(h),i=Math.ceil(e.indexOf(n[parseInt(o.toString(),10)])/this.pageSize)-1-(this.cacheBlockSize-1)+1,this.removeBlock(r,a,i,e,d),t.cachedRowIndex=i*this.pageSize),this.captionRowExpand(t)):(this.childCount=0,this.parent.islazyloadRequest=!1))},M.prototype.getCurrentBlockEndIndex=function(e,t){var i=this.parent.pageSettings.currentPage,n=this.groupCache[parseInt(i.toString(),10)];if(e.isCaptionRow){e.isExpand&&(i=this.getChildRowsByParentIndex(t,!0).length,this.rowIndex=this.rowIndex+i);for(var e=this.getAggregateByCaptionIndex(t),r=(this.rowObjectIndex=this.rowObjectIndex+e.length,t),s=r+1;s<n.length;s++){if(n[parseInt(s.toString(),10)].indent===n[parseInt(t.toString(),10)].indent||n[parseInt(s.toString(),10)].indent<n[parseInt(t.toString(),10)].indent){t=r;break}r++}}return t},M.prototype.removeBlock=function(e,t,i,n,r){var s=this.parent.pageSettings.currentPage,s=this.groupCache[parseInt(s.toString(),10)],o=n[(i+1)*this.pageSize-1-this.blockSize].uid,a=n[i*this.pageSize-this.pageSize].uid,n=n[i*this.pageSize].uid,i=this.getRowObjectIndexByUid(o);s[parseInt(i.toString(),10)].lazyLoadCssClass="e-lazyload-middle-up",this.getRowElementByUid(o).classList.add("e-lazyload-middle-up"),r&&(this.getRowElementByUid(n).classList.add("e-not-lazyload-first"),this.getRowByUid(n).lazyLoadCssClass="e-not-lazyload-first",this.getRowByUid(a).lazyLoadCssClass=""),t?this.removeTopRows(r?r.uid:e,a,n):(this.uid1=a,this.uid2=n,this.uid3=r?r.uid:e)},M.prototype.scrollUpHandler=function(e){var t,i=this.parent.pageSettings.currentPage,n=this.groupCache[parseInt(i.toString(),10)],r=e.getAttribute("data-uid"),s=this.getRowByUid(r),r=this.rowObjectIndex=this.getRowObjectIndexByUid(r),s=this.getRowByUid(s.parentUid),o=this.rowIndex=this.getRowObjectIndexByUid(s.uid),a=this.parent.getRowElementByUID(s.uid).rowIndex,o=this.getChildRowsByParentIndex(o),l=o.indexOf(n[parseInt(r.toString(),10)]),h=Math.floor(l/this.pageSize),p=this.blockSize,d=(2*this.blockSize>this.pageSize&&(p=2*this.blockSize-this.pageSize,p=this.blockSize-p),o[l-(p-1)-this.pageSize].uid),l=o[l-(p-1)].uid,r=(this.scrollData=this.getCacheRowsOnUpScroll(d,l,r-(p-1)),this.isFirstChildRow=1<h,this.isFirstChildRow&&(this.scrollData[0].lazyLoadCssClass="e-not-lazyload-first"),this.getRowByUid(l).lazyLoadCssClass="",this.getRowElementByUid(l).classList.remove("e-not-lazyload-first"),h+this.cacheBlockSize);o.length!==s.data.count&&r*this.pageSize>o.length?(this.isFirstChildRow=!1,this.scrollData[0].lazyLoadCssClass="",this.getRowElementByUid(l).classList.add("e-not-lazyload-first")):(h=r*this.pageSize>s.data.count?s.data.count:r*this.pageSize,l=r*this.pageSize>s.data.count?this.pageSize-(this.pageSize*r-s.data.count):this.pageSize,r=((r=this.getChildRowsByParentIndex(n.indexOf(o[h-1]),!0,!1,null,!0)).length?r[r.length-1]:o[h-1]).uid,t=o[h-l].uid,o=o[h-l-1].uid,h=this.objIdxByUid[parseInt(i.toString(),10)][""+t]-p,"e-lazyload-middle-down"===n[parseInt(h.toString(),10)].lazyLoadCssClass&&(l=this.getRowElementByUid(n[parseInt(h.toString(),10)].uid))&&l.classList.add("e-lazyload-middle-down"),this.getRowByUid(r).lazyLoadCssClass="",this.getRowByUid(o).lazyLoadCssClass="e-not-lazyload-end",this.getRowElementByUid(o).classList.add("e-not-lazyload-end"),this.removeBottomRows(r,t,o),this.rowIndex=e.rowIndex-p,1<e.classList.length?e.classList.remove("e-lazyload-middle-up"):e.removeAttribute("class"),P.isNullOrUndefined(this.getRowElementByUid(d))?(h={rowIndex:a,makeRequest:!1,groupInfo:s,fields:(i=kp(this.getRowObjectIndexByUid(s.uid),n)).fields,keys:i.keys,skip:this.childCount,take:this.pageSize,isScroll:!0,scrollUp:!0},this.isScrollUp=!0,this.captionRowExpand(h)):(this.childCount=0,this.scrollData=[]))},M.prototype.findRowElements=function(e){for(var t,i=!1,n=0;n<e.length;n++){var r,s=e[parseInt(n.toString(),10)].rowIndex;if(this.parent.enableVirtualization&&(r=this.parent.contentModule.currentInfo)&&r.blockIndexes&&1<r.blockIndexes[0]&&(s+=this.parent.contentModule.offsets[r.blockIndexes[0]-1]/this.parent.getRowHeight()),Yh(s,this.parent)){i=!0,this.rowIndex=s,t=e[parseInt(n.toString(),10)];break}}return{entered:i,tr:t}},M.prototype.getRowElementByUid=function(e){return this.parent.getContent().querySelector("tr[data-uid="+e+"]")},M.prototype.removeTopRows=function(e,t,i){for(var n=[].slice.call(this.parent.getContent().querySelectorAll("tr")),r=!1,s=0;s<n.length;s++){if(n[parseInt(s.toString(),10)].getAttribute("data-uid")===i){var o=this.parent.getContent().querySelector("tr[data-uid="+e+"]");o&&(this.rowIndex=o.rowIndex);break}(r=n[parseInt(s.toString(),10)].getAttribute("data-uid")===t?!0:r)&&P.remove(n[parseInt(s.toString(),10)])}},M.prototype.removeBottomRows=function(e,t,i){for(var n=[].slice.call(this.parent.getContent().querySelectorAll("tr")),r=!1,s=0;s<n.length&&(!(r=n[parseInt(s.toString(),10)].getAttribute("data-uid")===t||r)||(P.remove(n[parseInt(s.toString(),10)]),n[parseInt(s.toString(),10)].getAttribute("data-uid")!==e));s++);},M.prototype.setCache=function(e){var t=this.parent.pageSettings.currentPage;if(this.parent.enableVirtualization&&(this.parent.lazyLoadRender=this),this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.args.requestType&&e.args.prevPage!==e.args.currentPage){this.groupCache[parseInt(t.toString(),10)]=this.initialGroupCaptions[parseInt(t.toString(),10)]=this.groupCache[e.args.prevPage].concat(P.extend([],e.data));for(var i=Object.keys(this.groupCache),n=0;n<i.length;n++)e.args.currentPage!==parseInt(i[parseInt(n.toString(),10)],10)&&(delete this.groupCache[""+i[parseInt(n.toString(),10)]],delete this.initialGroupCaptions[""+i[parseInt(n.toString(),10)]])}else this.groupCache[parseInt(t.toString(),10)]=this.initialGroupCaptions[parseInt(t.toString(),10)]=P.extend([],e.data)},M.prototype.captionRowExpand=function(t){var e,i=this,n=t.groupInfo,r=this.parent.groupSettings.columns.indexOf(n.data.field)+1,n=Fp(Ap(t.fields,t.keys,this)),n={level:r,skip:t.skip,take:t.take,where:n};t.lazyLoadQuery=n,t.requestType="onDemandGroupInfo",t.makeRequest?((e=this.parent.renderModule.data.generateQuery(!0)).isCountRequired||(e.isCountRequired=!0),e.lazyLoad.push({key:"onDemandGroupInfo",value:n}),this.lazyLoadQuery.push(n.where),t.isScroll&&this.parent.enableVirtualMaskRow?this.parent.showMaskRow():this.parent.showSpinner(),this.parent.renderModule.data.getData(t,e).then(function(e){i.parent.enableVirtualization&&(i.parent.islazyloadRequest=!0),i.parent.hideSpinner(),i.parent.removeMaskRow(),0!==e.result.length&&(i.cacheMode&&i.uid1&&i.uid2&&(i.removeTopRows(i.uid3,i.uid1,i.uid2),i.uid1=i.uid2=i.uid3=void 0),i.lazyLoadHandler({data:e.result,count:e.count,level:r,index:t.rowIndex,isRowExist:!1,isScroll:t.isScroll,up:!1,rowIndex:t.cachedRowIndex}))}).catch(function(e){return i.parent.renderModule.dataManagerFailure(e,{requestType:"grouping"})})):this.lazyLoadHandler({data:null,count:t.groupInfo.data.count,level:r,index:t.rowIndex,isRowExist:!0,isScroll:t.isScroll,up:t.scrollUp,rowIndex:t.cachedRowIndex})},M.prototype.scrollReset=function(e){this.parent.getContent().firstElementChild.scrollTop=e?this.parent.getContent().firstElementChild.scrollTop+e:0},M.prototype.updateCurrentViewData=function(){var t=[];this.getRows().filter(function(e){e.isDataRow&&(t[e.index]=e.data)}),this.parent.currentViewData=t.length?t:this.parent.currentViewData},M.prototype.getGroupCache=function(){return this.groupCache},M.prototype.getRows=function(){return this.groupCache[this.parent.pageSettings.currentPage]||[]},M.prototype.getRowElements=function(){return[].slice.call(this.parent.getContent().getElementsByClassName(I))},M.prototype.getRowByIndex=function(e){for(var t,i=[].slice.call(this.parent.getContent().getElementsByClassName(I)),n=0;!P.isNullOrUndefined(e)&&n<i.length;n++)if(i[parseInt(n.toString(),10)].getAttribute(x)===e.toString()){t=i[parseInt(n.toString(),10)];break}return t},M.prototype.setVisible=function(e){for(var t,i=this.parent,n=(this.getRows().some(function(e){return e.isDataRow&&(t=e),e.isDataRow}),this.getRows().filter(function(e){return!e.isDetailRow})),r=0;r<e.length;r++){var s=e[parseInt(r.toString(),10)],o=this.parent.getNormalizedColumnIndex(s.uid),a=this.parent.getColumnIndexByUid(s.uid),l=!0===s.visible?"":"none";-1!==o&&t&&o<t.cells.length&&P.setStyleAttribute(this.getColGroup().childNodes[parseInt(o.toString(),10)],{display:l}),this.setDisplayNone(i.getDataRows(),a,l,n,o),!this.parent.invokedFromMedia&&s.hideAtMedia&&this.parent.updateMediaColumns(s),this.parent.invokedFromMedia=!1}},M.prototype.setDisplayNone=function(e,t,i,n,r){if(this.parent.groupSettings.columns.length)for(var s=Object.keys(this.groupCache),o=0;o<s.length;o++)for(var a=this.rowsByUid[s[parseInt(o.toString(),10)]],l=Object.keys(a),h=0;h<l.length;h++){var p=this.parent.getContent().querySelector("tr[data-uid="+l[parseInt(h.toString(),10)]+"]"),d=a[l[parseInt(h.toString(),10)]];d.isCaptionRow&&(this.captionModelGen.isEmpty()?(d.cells[d.indent+1].colSpan=""===i?d.cells[d.indent+1].colSpan+1:d.cells[d.indent+1].colSpan-1,p&&(p.cells[d.indent+1].colSpan=d.cells[d.indent+1].colSpan)):this.changeCaptionRow(d,p,s[parseInt(o.toString(),10)])),d.isDataRow&&(this.showAndHideCells(p,t,i,!1),d.cells[parseInt(r.toString(),10)].visible=""===i),d.isCaptionRow||d.isDataRow||!P.isNullOrUndefined(d.indent)||(d.cells[parseInt(r.toString(),10)].visible=""===i,d.visible=d.cells.some(function(e){return e.isDataCell&&e.visible}),this.showAndHideCells(p,t,i,!0,d))}else Cp(e,t,i,n)},M.prototype.changeCaptionRow=function(e,t,i){var n=e.data,n=this.groupGenerator.generateCaptionRow(n,e.indent,e.parentGid,void 0,e.tIndex,e.parentUid);n.uid=e.uid,n.isExpand=e.isExpand,n.lazyLoadCssClass=e.lazyLoadCssClass,this.rowsByUid[parseInt(i.toString(),10)][e.uid]=n,this.groupCache[parseInt(i.toString(),10)][this.objIdxByUid[parseInt(i.toString(),10)][e.uid]]=n,t&&this.parent.getContentTable().querySelector(N).replaceChild(this.rowRenderer.render(n,this.parent.getColumns()),t)},M.prototype.showAndHideCells=function(e,t,i,n,r){var s;e&&(P.setStyleAttribute(e.querySelectorAll(s=n?"td.e-summarycell":"td.e-rowcell")[parseInt(t.toString(),10)],{display:i}),e.querySelectorAll(s)[parseInt(t.toString(),10)].classList.contains("e-hide")&&P.removeClass([e.querySelectorAll(s)[parseInt(t.toString(),10)]],["e-hide"]),n)&&(r.visible&&e.classList.contains("e-hide")?P.removeClass([e],["e-hide"]):r.visible||P.addClass([e],["e-hide"]))};var gu,fu,mu=M;function M(e,t){e=fu.call(this,e,t)||this;return e.childCount=0,e.scrollData=[],e.isFirstChildRow=!1,e.isScrollDown=!1,e.isScrollUp=!1,e.groupCache={},e.cacheRowsObj={},e.startIndexes={},e.captionCounts={},e.rowsByUid={},e.objIdxByUid={},e.initialGroupCaptions={},e.requestType=["paging","columnstate","reorder","cancel","save","beginEdit","add","delete","filterBeforeOpen","filterchoicerequest","infiniteScroll","virtualscroll"],e.scrollTopCache=void 0,e.refRowsObj={},e.cacheMode=!1,e.cacheBlockSize=5,e.ignoreAccent=!!e.parent.allowFiltering&&e.parent.filterSettings.ignoreAccent,e.allowCaseSensitive=!1,e.lazyLoadQuery=[],e.locator=t,e.groupGenerator=new qs(e.parent),e.summaryModelGen=new Ms(e.parent),e.captionModelGen=new Ns(e.parent),e.rowRenderer=new Rs(e.locator,null,e.parent),e.eventListener(),e}Su.prototype.getModuleName=function(){return"lazyLoadGroup"},Su.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(at,this.instantiateRenderer,this),this.parent.on(r,this.destroy,this))},Su.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(at,this.instantiateRenderer),this.parent.off(r,this.destroy))},Su.prototype.instantiateRenderer=function(){"auto"===this.parent.height&&(this.parent.height=this.parent.pageSettings.pageSize*this.parent.getRowHeight());var e=this.serviceLocator.getService("rendererFactory");this.parent.groupSettings.enableLazyLoading&&e.addRenderer(O.RenderType.Content,new mu(this.parent,this.serviceLocator)),this.parent.enableVirtualization&&(this.parent.lazyLoadRender=new mu(this.parent,this.serviceLocator))},Su.prototype.destroy=function(){this.removeEventListener()};var yu=Su;function Su(e,t){this.parent=e,this.serviceLocator=t,this.addEventListener()}vu=function(e,t){return(vu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}vu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(bu,Cu=pc),bu.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.object=new U.AutoComplete(P.extend({dataSource:this.parent.dataSource instanceof A.DataManager?this.parent.dataSource:new A.DataManager(this.parent.dataSource),query:(new A.Query).select(e.column.field),enabled:mh(e.column,e.requestType,e.element),fields:{value:e.column.field},value:Lh(e.column.field,e.rowData),actionComplete:this.selectedValues.bind(this),placeholder:t?"":e.column.headerText,floatLabelType:t?"Never":"Always"},e.column.edit.params)),this.object.appendTo(e.element),e.element.setAttribute("name",uh(e.column.field))},bu.prototype.selectedValues=function(e){e.result=A.DataUtil.distinct(e.result,this.object.fields.value,!0),this.column.dataSource&&(this.column.dataSource.dataSource.json=e.result)};var vu,Cu,wu=bu;function bu(){return null!==Cu&&Cu.apply(this,arguments)||this}Iu=function(e,t){return(Iu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Iu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Eu,xu=pc),Eu.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.obj=new U.ComboBox(P.extend({dataSource:this.parent.dataSource instanceof A.DataManager?this.parent.dataSource:new A.DataManager(this.parent.dataSource),query:(new A.Query).select(e.column.field),fields:{value:e.column.field},value:Lh(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,actionComplete:this.finalValue.bind(this),placeholder:t?"":e.column.headerText,floatLabelType:t?"Never":"Always",enabled:mh(e.column,e.requestType,e.element),cssClass:this.parent.cssClass||null},e.column.edit.params)),this.obj.appendTo(e.element)},Eu.prototype.finalValue=function(e){e.result=A.DataUtil.distinct(e.result,this.obj.fields.value,!0),this.column.dataSource&&(this.column.dataSource.dataSource.json=e.result)};var Iu,xu,Ru=Eu;function Eu(){return null!==xu&&xu.apply(this,arguments)||this}Du=function(e,t){return(Du=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Du(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Au,Tu=pc),Au.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.obj=new U.MultiSelect(P.extend({fields:{text:e.column.field,value:e.column.field},value:P.getValue(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:t?"":e.column.headerText,popupHeight:"200px",floatLabelType:t?"Never":"Always",cssClass:this.parent.cssClass||null},e.column.edit.params)),this.obj.appendTo(e.element),e.element.setAttribute("name",uh(e.column.field))};var Du,Tu,Ou=Au;function Au(){return null!==Tu&&Tu.apply(this,arguments)||this}Fu=function(e,t){return(Fu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Fu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(Lu,ku=pc),Lu.prototype.write=function(e){var t="Dialog"!==this.parent.editSettings.mode,i=(i=Lh(e.column.field,e.rowData))?new Date(i):null;this.obj=new q.TimePicker(P.extend({floatLabelType:t?"Never":"Always",value:i,placeholder:t?"":e.column.headerText,enableRtl:this.parent.enableRtl,enabled:mh(e.column,e.requestType,e.element),cssClass:this.parent.cssClass||null},e.column.edit.params)),this.obj.appendTo(e.element)};var Fu,ku,Mu=Lu;function Lu(){return null!==ku&&ku.apply(this,arguments)||this}Pu=function(e,t){return(Pu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Pu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(zu,Nu=pc),zu.prototype.create=function(e){var t="e-field e-boolcell";return"checkbox"===e.column.type&&(t="e-field e-boolcell e-edit-checkselect"),bp(this.parent,e.column,t,{type:"checkbox",value:e.value})},zu.prototype.read=function(e){return e.checked},zu.prototype.write=function(e){var t=!P.isNullOrUndefined(e.row)&&e.row.querySelector(".e-edit-checkselect"),i=Lh(e.column.field,e.rowData),i=i&&JSON.parse(i.toString().toLowerCase());P.isNullOrUndefined(t)||(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType&&(i=!!(t=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid")))&&t.isSelected),Ch.apply(void 0,[[].slice.call(e.row.getElementsByClassName(b)),i].concat(this.activeClasses))),this.obj=new B.Switch(P.extend({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:i,disabled:!mh(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,change:this.switchModeChange.bind(this),cssClass:this.parent.cssClass||""},e.column.edit.params)),this.obj.appendTo(e.element)},zu.prototype.switchModeChange=function(e){var t;this.editRow&&"Dialog"!==this.editType&&(t=!1,e.checked?this.editRow.setAttribute("aria-selected",(t=!0).toString()):this.editRow.removeAttribute("aria-selected"),Ch.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(b)),t].concat(this.activeClasses)))};var Pu,Nu,Bu=zu;function zu(){var e=null!==Nu&&Nu.apply(this,arguments)||this;return e.activeClasses=["e-selectionbackground","e-active"],e}Uu=function(e,t){return(Uu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}))(e,t)};(function(e,t){function i(){this.constructor=e}Uu(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)})(ju,qu=pc),ju.prototype.write=function(e){this.column=e.column;var t="Dialog"!==this.parent.editSettings.mode;this.obj=new z.MaskedTextBox(P.extend({fields:{value:e.column.field},value:Lh(e.column.field,e.rowData),floatLabelType:t?"Never":"Always",mask:"000-000-0000",enabled:mh(e.column,e.requestType,e.element),cssClass:this.parent.cssClass||null},e.column.edit.params)),this.obj.appendTo(e.element)};var Uu,qu,Hu=ju;function ju(){return null!==qu&&qu.apply(this,arguments)||this}O.Aggregate=e,O.AutoCompleteEditCell=wu,O.BatchEdit=kc,O.BatchEditRender=rc,O.BooleanEditCell=gc,O.BooleanFilterUI=ud,O.Cell=qr,O.CellRenderer=_s,O.CellRendererFactory=Vo,O.CheckBoxFilter=vd,O.CheckBoxFilterBase=Bp,O.Clipboard=Aa,O.Column=Q,O.ColumnChooser=Gc,O.ColumnMenu=lu,O.ComboboxEditCell=Ru,O.CommandColumn=iu,O.CommandColumnModel=Y,O.CommandColumnRenderer=eu,O.ContentRender=js,O.ContextMenu=ru,O.Data=Nr,O.DateFilterUI=fd,O.DatePickerEditCell=Uc,O.DefaultEditCell=xc,O.DetailRow=o,O.DialogEdit=Pc,O.DialogEditRender=oc,O.DropDownEditCell=Sc,O.Edit=jc,O.EditCellBase=pc,O.EditRender=lc,O.EditSettings=Il,O.ExcelExport=Xc,O.ExcelFilter=Id,O.ExcelFilterBase=qp,O.ExportHelper=_c,O.ExportValueFormatter=Kc,O.ExternalMessage=Zp,O.Filter=Rd,O.FilterCellRenderer=sd,O.FilterSettings=il,O.FlMenuOptrUI=ad,O.ForeignKey=du,O.Freeze=ou,O.Grid=Al,O.GridColumn=K,O.Group=Ad,O.GroupCaptionCellRenderer=co,O.GroupCaptionEmptyCellRenderer=fo,O.GroupLazyLoadRenderer=mu,O.GroupModelGenerator=qs,O.GroupSettings=Cl,O.HeaderCellRenderer=$s,O.HeaderRender=Vs,O.IndentCellRenderer=ao,O.InfiniteScroll=uu,O.InfiniteScrollSettings=$a,O.InlineEdit=Ac,O.InlineEditRender=ic,O.InterSectionObserver=jd,O.LazyLoadGroup=yu,O.LoadingIndicator=El,O.Logger=Ba,O.MaskedTextBoxCellEdit=Hu,O.MultiSelectEditCell=Ou,O.NormalEdit=Ec,O.NumberFilterUI=dd,O.NumericContainer=Vp,O.NumericEditCell=Cc,O.Page=ed,O.Pager=Xp,O.PagerDropDown=Yp,O.PagerMessage=_p,O.PdfExport=Jc,O.Predicate=Ya,O.Print=kl,O.Render=Ho,O.Reorder=fa,O.Resize=Dd,O.ResizeSettings=yl,O.ResponsiveDialogRenderer=_o,O.Row=zr,O.RowDD=da,O.RowDropSettings=dl,O.RowModelGenerator=Ds,O.RowRenderer=Rs,O.Scroll=ba,O.Search=Sa,O.SearchSettings=ll,O.Selection=ya,O.SelectionSettings=sl,O.ServiceLocator=Wo,O.Sort=Hp,O.SortDescriptor=Ga,O.SortSettings=Ka,O.StackedColumn=W,O.StackedHeaderCellRenderer=no,O.StringFilterUI=hd,O.TextWrapSettings=gl,O.TimePickerEditCell=Mu,O.ToggleEditCell=Bu,O.Toolbar=Ea,O.ValueFormatter=V,O.VirtualContentRenderer=Xd,O.VirtualElementHandler=$d,O.VirtualHeaderRenderer=Jd,O.VirtualRowModelGenerator=Gd,O.VirtualScroll=Qd,O.accessPredicate="access-predicate",O.actionBegin=y,O.actionComplete=p,O.actionFailure=oe,O.addBegin="add-begin",O.addBiggerDialog=Sp,O.addComplete="add-complete",O.addDeleteAction=ni,O.addFixedColumnBorder=hp,O.addRemoveActiveClasses=Ch,O.addRemoveEventListener=wp,O.addStickyColumnPosition=up,O.addedRecords=ss,O.addedRow=is,O.afterContentRender="after-content-renderer",O.afterFilterColumnMenuClose=xr,O.appendChildren=sh,O.appendInfiniteContent=In,O.applyBiggerTheme=Gh,O.applyStickyLeftRightPosition=pp,O.ariaColIndex=ds,O.ariaRowIndex=cs,O.autoCol=Xt,O.batchAdd=Fe,O.batchCancel=ke,O.batchCnfrmDlgCancel=Dr,O.batchDelete=Me,O.batchEditFormRendered=Qi,O.batchForm=_i,O.beforeAutoFill=Ze,O.beforeBatchAdd=Le,O.beforeBatchCancel=Ki,O.beforeBatchDelete=Pe,O.beforeBatchSave=Ne,O.beforeCellFocused=Ft,O.beforeCheckboxRenderer=Bn,O.beforeCheckboxRendererQuery=mr,O.beforeCheckboxfilterRenderer=Rr,O.beforeCopy=Ye,O.beforeCustomFilterOpen=Yi,O.beforeDataBound=Ve,O.beforeExcelExport=oi,O.beforeFltrcMenuOpen=nn,O.beforeFragAppend=Mi,O.beforeOpen=Ss,O.beforeOpenAdaptiveDialog=_e,O.beforeOpenColumnChooser=Ge,O.beforePaste=Je,O.beforePdfExport=ci,O.beforePrint=De,O.beforeRefreshOnDataChange=Vn,O.beforeStartEdit=Wi,O.beginEdit=Be,O.bulkSave=Qt,O.cBoxFltrBegin=$i,O.cBoxFltrComplete=en,O.calculateAggregate=ah,O.cancelBegin=Ni,O.capitalizeFirstLetter=Lp,O.captionActionComplete=wr,O.cellDeselected=fe,O.cellDeselecting=ge,O.cellEdit=ze,O.cellFocused=kt,O.cellSave=Ue,O.cellSaved=qe,O.cellSelected=ue,O.cellSelecting=ce,O.cellSelectionBegin="cellselecting",O.cellSelectionComplete=Ot,O.change=fs,O.changedRecords=rs,O.checkBoxChange=Xe,O.checkDepth=Hh,O.checkIsVirtual=Pp,O.checkScrollReset=Wn,O.clearReactVueTemplates=Dp,O.click=Lt,O.closeBatch="closebatch",O.closeEdit=cr,O.closeFilterDialog=Tn,O.closeInline=dr,O.colGroup=us,O.colGroupRefresh=gt,O.columnChooserCancelBtnClick=On,O.columnChooserOpened=Gi,O.columnDataStateChange=Oi,O.columnDeselected=ve,O.columnDeselecting=Se,O.columnDrag=we,O.columnDragStart=Ce,O.columnDragStop=Ht,O.columnDrop=be,O.columnMenuClick=vi,O.columnMenuOpen=Ci,O.columnPositionChanged=zt,O.columnSelected=ye,O.columnSelecting=me,O.columnSelectionBegin="columnselecting",O.columnSelectionComplete="columnselected",O.columnVisibilityChanged=Pt,O.columnWidthChanged=Bt,O.columnsPrepared=Zi,O.commandClick=nt,O.commandColumnDestroy=Er,O.compareChanges=rp,O.componentRendered="component-rendered",O.content=Zr,O.contentReady=pt,O.contextMenuClick=mi,O.contextMenuOpen=Si,O.create=ys,O.createCboxWithWrap=Eh,O.createEditElement=bp,O.createVirtualValidationForm=yr,O.created="create",O.crudAction=ii,O.customFilterClose=ir,O.dataBound=ae,O.dataColIndex=ps,O.dataReady=ht,O.dataRowIndex=x,O.dataSourceChanged=Fi,O.dataSourceModified=Vt,O.dataStateChange=Ai,O.dblclick=Wt,O.deleteBegin="delete-begin",O.deleteComplete=$t,O.deletedRecords=os,O.destroy=r,O.destroyAutoFillElements=At,O.destroyChildGrid=vr,O.destroyForm=ri,O.destroyed="destroy",O.detailDataBound=Oe,O.detailIndentCellInfo=ln,O.detailLists=Ha,O.detailStateChange=an,O.dialogDestroy=ti,O.distinctStringValues=wh,O.doesImplementInterface=Ll,O.doubleTap=si,O.downArrow=vs,O.editBegin="edit-begin",O.editComplete="edit-complete",O.editNextValCell=Bi,O.editReset=fn,O.editedRow=ts,O.endAdd="endAdd",O.endDelete="endDelete",O.endEdit="endEdit",O.ensureFirstRow=Xh,O.ensureLastRow=Qh,O.enter=bs,O.enterKeyHandler=or,O.eventPromise=Zh,O.excelAggregateQueryCellInfo=Mn,O.excelExportComplete=ai,O.excelHeaderQueryCellInfo=hi,O.excelQueryCellInfo=li,O.expandChildGrid=Ui,O.exportDataBound=ji,O.exportDetailDataBound=pi,O.exportDetailTemplate=di,O.exportGroupCaption=rt,O.exportRowDataBound=Hi,O.extend=Kl,O.extendObjWithFn=zh,O.filterAfterOpen=et,O.filterBeforeOpen=tt,O.filterBegin="filtering-begin",O.filterCboxValue=sn,O.filterChoiceRequest=$e,O.filterCmenuSelect=tr,O.filterComplete=St,O.filterDialogClose=Jn,O.filterDialogCreated=bi,O.filterMenuClose=Ii,O.filterOpen=wi,O.filterSearchBegin=it,O.findCellIndex=Mp,O.fltrPrevent=tn,O.focus=ms,O.foreignKeyData=Ti,O.freezeRefresh="freezerefresh",O.freezeRender=yi,O.frozenContent=Yr,O.frozenDirection=lp,O.frozenHeader=Jr,O.frozenHeight="frozenHeight",O.frozenLeft=hs,O.frozenRight=ls,O.generateExpandPredicates=Ap,O.generateQuery=Ei,O.getActualPropFromColl=eh,O.getActualProperties=Jl,O.getActualRowHeight=function(e){var t=P.createElement("table",{className:$r,styles:"visibility: hidden",attrs:{role:"grid"}}),i=(t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t),t.querySelector("tr").getBoundingClientRect());return e.removeChild(t),i.height},O.getAggregateQuery="get-aggregate-query",O.getCellByColAndRowIndex=fp,O.getCellFromRow=cp,O.getCellsByTableName=gp,O.getCloneProperties=Fl,O.getCollapsedRowsCount=Hl,O.getColumnByForeignKeyValue=Ah,O.getColumnModelByFieldName=xp,O.getColumnModelByUid=Ip,O.getComplexFieldID=uh,O.getCustomDateFormat=Ph,O.getDatePredicate=kh,O.getEditedDataIndex=Jh,O.getElementIndex=Zl,O.getExpandedState=Nh,O.getFilterBarOperator=An,O.getFilterMenuPostion=bh,O.getForeignData=Oh,O.getForeignKeyData=Ri,O.getGroupKeysAndFields=kp,O.getNumberFormat=yp,O.getObject=Lh,O.getParentIns=Op,O.getParsedFieldID=gh,O.getPosition=ih,O.getPredicates=Fp,O.getPrintGridModel=Bh,O.getPrototypesOfObj=Uh,O.getRowHeight=dh,O.getRowIndexFromElement=Tp,O.getScrollBarWidth=ph,O.getScrollWidth=_h,O.getStateEventArgument=$h,O.getTransformValues=Vh,O.getUid=rh,O.getUpdateUsingRaf=Nl,O.getVirtualData=yn,O.getVisiblePage=Np,O.getZIndexCalcualtion=Ih,O.gridChkBox=es,O.gridContent=_r,O.gridFooter=Wr,O.gridHeader=Gr,O.groupAggregates=xt,O.groupBegin="grouping-begin",O.groupCaptionRow=ns,O.groupCaptionRowLeftRightPos=Kh,O.groupCollapse=Nn,O.groupComplete=bt,O.groupReorderRowObject=np,O.headerCellInfo=se,O.headerContent=Kr,O.headerDrop=jt,O.headerRefreshed=ft,O.headerValueAccessor=function(e,t){return P.isNullOrUndefined(e)||""===e?"":A.DataUtil.getObject(e,t)},O.hierarchyPrint=zi,O.immutableBatchCancel=Gn,O.inArray=$l,O.inBoundModelChanged=ct,O.infiniteCrudCancel=Yn,O.infiniteEditHandler=En,O.infinitePageQuery=wn,O.infiniteScrollComplete=Pr,O.infiniteScrollHandler=Cn,O.infiniteShowHide=bn,O.initForeignKeyColumn=xi,O.initialCollapse=Dn,O.initialEnd=lt,O.initialFrozenColumnIndex=xs,O.initialLoad=at,O.isActionPrevent=yh,O.isChildColumn=op,O.isComplexField=ch,O.isEditable=mh,O.isExportColumns=Bl,O.isGroupAdaptive=Mh,O.isRowEnteredInGrid=Yh,O.ispercentageWidth=ep,O.iterateArrayOrObject=Vl,O.iterateExtend=Gl,O.keyPressed=Mt,O.lazyLoadGroupCollapse=ot,O.lazyLoadGroupExpand=st,O.lazyLoadScrollHandler=Pn,O.leftRight=as,O.load=ie,O.measureColumnDepth=qh,O.menuClass=T,O.modelChanged=ut,O.movableContent=Qr,O.movableHeader=Xr,O.nextCellIndex=Qn,O.onEmpty=dt,O.onResize=Ke,O.open=gs,O.padZero=Fh,O.pageBegin="paging-begin",O.pageComplete=mt,O.pageDown=ws,O.pageUp="PageUp",O.pagerRefresh=pr,O.parents=oh,O.parentsUntil=E,O.partialRefresh=Xi,O.pdfAggregateQueryCellInfo=kn,O.pdfExportComplete=ui,O.pdfHeaderQueryCellInfo=fi,O.pdfQueryCellInfo=gi,O.performComplexDataOperation=vp,O.prepareColumns=Xl,O.preventBatch=ei,O.preventFrozenScrollRefresh=Kn,O.printComplete=Te,O.printGridInit=qi,O.pushuid=ap,O.queryCellInfo=re,O.recordAdded=Pi,O.recordClick=je,O.recordDoubleClick=He,O.recursive=jl,O.refreshAggregateCell=Et,O.refreshAggregates=Dt,O.refreshComplete=Gt,O.refreshCustomFilterClearBtn=$n,O.refreshCustomFilterOkBtn=Zn,O.refreshExpandandCollapse=rr,O.refreshFilteredColsUid=jh,O.refreshFooterRenderer=Rt,O.refreshForeignData=Th,O.refreshFrozenColumns=Un,O.refreshFrozenHeight="refresh-frozen-height",O.refreshFrozenPosition=Or,O.refreshHandlers=zn,O.refreshInfiniteCurrentViewData=Xn,O.refreshInfiniteEditrowindex=Ir,O.refreshInfiniteModeBlocks=Sn,O.refreshInfinitePersistSelection=br,O.refreshResizePosition=Ar,O.refreshSplitFrozenColumn=Fr,O.refreshVirtualBlock=_t,O.refreshVirtualCache=gn,O.refreshVirtualEditFormCells=gr,O.refreshVirtualFrozenHeight=Hn,O.refreshVirtualFrozenRows=_n,O.refreshVirtualLazyLoadCache=Tr,O.refreshVirtualMaxPage=ar,O.registerEventHandlers=Rp,O.removeAddCboxClasses=Dh,O.removeElement=th,O.removeEventHandlers=Ep,O.removeInfiniteRows=xn,O.renderResponsiveChangeAction=kr,O.renderResponsiveCmenu=er,O.renderResponsiveColumnChooserDiv=Mr,O.reorderBegin="reorder-begin",O.reorderComplete=Ct,O.resetCachedRowIndex=ip,O.resetColandRowSpanStickyPosition=dp,O.resetColspanGroupCaption=Wh,O.resetColumns=Fn,O.resetInfiniteBlocks=vn,O.resetRowIndex=tp,O.resetVirtualFocus=ur,O.resizeClassList=Ed,O.resizeStart=We,O.resizeStop=Qe,O.restoreFocus=on,O.row=I,O.rowCell=b,O.rowDataBound=ne,O.rowDeselected=de,O.rowDeselecting=pe,O.rowDrag=Re,O.rowDragAndDrop="row-drag-and-drop",O.rowDragAndDropBegin="rowdraganddrop-begin",O.rowDragAndDropComplete=wt,O.rowDragStart=xe,O.rowDragStartHelper=Ie,O.rowDrop=Ee,O.rowModeChange=sr,O.rowPositionChanged=Vi,O.rowSelected=he,O.rowSelecting=le,O.rowSelectionBegin="rowselecting",O.rowSelectionComplete=Tt,O.rowsAdded=Ut,O.rowsRemoved=qt,O.rtlUpdated=ki,O.saveComplete=Zt,O.scroll=Nt,O.scrollToEdit=fr,O.searchBegin="searching-begin",O.searchComplete=vt,O.selectRowOnContextOpen=hr,O.selectVirtualRow=Ji,O.setChecked=Rh,O.setColumnIndex=Ql,O.setComplexFieldID=fh,O.setCssInGridPopUp=Yl,O.setDisplayValue=Cp,O.setFormatter=vh,O.setFreezeSelection=jn,O.setFullScreenDialog=nr,O.setGroupCache=Ln,O.setHeightToFrozenElement="set-height-to-frozen-element",O.setInfiniteCache=Rn,O.setInfiniteColFrozenHeight="set-infinite-col-frozen-height",O.setInfiniteFrozenHeight="set-infinite-frozen-height",O.setReorderDestinationElement=qn,O.setRowElements=sp,O.setStyleAndAttributes=Wl,O.setValidationRuels=mp,O.setVirtualPageQuery=lr,O.shiftEnter=Is,O.shiftTab="shiftTab",O.showAddNewRowFocus=Lr,O.showEmptyGrid=Di,O.sliceElements=function(e,t,i){for(var n=e.children.length,r=0,s=0;s<n;s++,r++)t<=s&&s<i||(e.removeChild(e.children[parseInt(r.toString(),10)]),r--)},O.sortBegin="sorting-begin",O.sortComplete=yt,O.stickyScrollComplete=Cr,O.summaryIterator=Hd,O.tab="tab",O.table=$r,O.tbody=N,O.templateCompiler=_l,O.textWrapRefresh=Li,O.toogleCheckbox=xh,O.toolbarClick=Ae,O.toolbarRefresh=Kt,O.tooltipDestroy=Yt,O.uiUpdate=g,O.ungroupBegin="ungrouping-begin",O.ungroupComplete=It,O.upArrow=Cs,O.updateColumnTypeForExportColumns=zl,O.updateData=Jt,O.updatecloneRow=Ul,O.valCustomPlacement=rn,O.validateVirtualForm=Sr,O.valueAccessor=Pl,O.virtaulCellFocus=hn,O.virtaulKeyHandler="virtaul-key-handler",O.virtualScrollAddActionBegin=mn,O.virtualScrollEdit=un,O.virtualScrollEditActionBegin=pn,O.virtualScrollEditCancel=cn,O.virtualScrollEditSuccess=dn,O.wrap=Sh,Object.defineProperty(O,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-grids.umd.min.js.map
